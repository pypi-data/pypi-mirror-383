Metadata-Version: 2.4
Name: albi0
Version: 0.4.1
Summary: Plugin-based Unity Asset Extractor
Keywords: unity,asset,extractor,plugin,game,seer
Author: Nattsu39
Author-email: Nattsu39 <nattsu39@outlook.com>
License-Expression: MIT
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Requires-Dist: asyncer>=0.0.8
Requires-Dist: anyio>=4.6.2.post1
Requires-Dist: tqdm>=4.67.0
Requires-Dist: httpx>=0.27.2
Requires-Dist: click>=8.1.7
Requires-Dist: orjson>=3.10.11
Requires-Dist: unitypy>=1.23
Requires-Dist: loguru>=0.7.2
Requires-Dist: aiofiles>=24.1.0
Requires-Dist: slpp>=1.2.3
Requires-Dist: dataclasses-json>=0.6.7
Requires-Python: >=3.10
Project-URL: Bug Tracker, https://github.com/SeerAPI/albi0/issues
Project-URL: Homepage, https://github.com/SeerAPI/albi0
Project-URL: Repository, https://github.com/SeerAPI/albi0
Description-Content-Type: text/markdown

<div align="center">

# Albi0
~~[æ‘¸é±¼çš„å›¾ä¹¦é¦†ç®¡ç†å‘˜](https://wiki.biligame.com/seerplan/%E9%98%BF%E5%B0%94%E6%AF%94%E9%9B%B6)~~<br>
ğŸŸ¨æ’ä»¶åŒ–çš„ Unity æ¸¸æˆèµ„æºæ›´æ–°ä¸æå–å·¥å…·ğŸŸ©

</div>

## åŠŸèƒ½ç‰¹æ€§

- æ’ä»¶åŒ–ï¼šé€šè¿‡æ’ä»¶ç³»ç»Ÿä»¥æ”¯æŒå¤šä¸ªæ¸¸æˆå®¢æˆ·ç«¯ï¼Œå¹¶æä¾›äº†æŠ½è±¡çš„manifestç‰ˆæœ¬ç®¡ç†å™¨æ¥å£ï¼Œä¾¿äºæ”¯æŒçƒ­æ›´é€»è¾‘
- å¼‚æ­¥ä¸‹è½½ï¼šåŸºäº `httpx`ã€`anyio` ä¸ `tqdm` çš„é«˜é€Ÿå¹¶å‘ä¸‹è½½ä¸å®æ—¶è¿›åº¦æ˜¾ç¤º

## å·²æ”¯æŒçš„æ¸¸æˆ

- [èµ›å°”è®¡åˆ’](https://www.biligame.com/detail/?id=107861)
- [èµ›å°”å·Unityç«¯](https://seer.61.com/)

## ä½¿ç”¨æ–¹å¼

æ¨èä½¿ç”¨ `uvx` ç›´æ¥è¿è¡Œï¼Œæ— éœ€æœ¬åœ°å®‰è£…ä¾èµ–ï¼Œä½†éœ€è¦å…ˆå®‰è£… `uv`ï¼Œ[uv å®‰è£…æ–‡æ¡£](https://docs.astral.sh/uv/getting-started/installation/)

ä¹‹åä½¿ç”¨ `uvx` è¿è¡Œï¼š

```bash
uvx albi0 --help
```

## å¿«é€Ÿå¼€å§‹

1) åˆ—å‡ºå¯ç”¨çš„æ›´æ–°å™¨ä¸æå–å™¨ï¼š

```bash
uvx albi0 list
```

2) æ›´æ–°è¿œç¨‹èµ„æºï¼ˆç¤ºä¾‹ï¼šä¸‹è½½ NewSeer AB åŒ…ï¼‰ï¼š

```bash
# å¯é€‰ï¼šåˆ‡æ¢å·¥ä½œç›®å½•ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰
uvx albi0 update -n newseer.default -w ./newseer
```

3) ä»…æŸ¥çœ‹è¿œç¨‹ç‰ˆæœ¬å·ï¼ˆä¸ä¸‹è½½èµ„æºï¼‰ï¼š

```bash
uvx albi0 update -n newseer.default --version-only
```

4) æå–èµ„æºï¼ˆAB æ–‡ä»¶ â†’ æœ¬åœ°ç›®å½•ï¼‰ï¼š
```bash
# ä½¿ç”¨æŒ‡å®šæå–å™¨æå–ï¼ˆæŒ‰ç»„å/åç§°ï¼‰
uvx albi0 extract -n newseer "./path/to/*.ab" -o ./output

# åˆå¹¶æ¨¡å¼ï¼ˆå°†å¤šä¸ªæºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªç¯å¢ƒåå†å¯¼å‡ºï¼‰
uvx albi0 extract -n seerproject -m "./assets/**/*.ab" -o ./out

# åŸæ ·å¯¼å‡ºï¼ˆå¿½ç•¥è‡ªå®šä¹‰å¤„ç†ï¼Œä½¿ç”¨é»˜è®¤æå–å™¨ï¼‰
uvx albi0 extract -e "./raw/*.ab" -o ./raw_out
```

æç¤ºï¼šå¯¼å‡ºè·¯å¾„ä¼šè‡ªåŠ¨å¸¦ä¸Šæå–å™¨åå‰ç¼€ï¼Œä¾‹å¦‚ä¼ å…¥ `-n newseer -o ./output`ï¼Œå®é™…å¯¼å‡ºç›®å½•ä¸º `./output/newseer/...`ã€‚

## CLI å‚è€ƒ

### é¡¶å±‚å‘½ä»¤

```bash
uvx albi0 --help
uvx albi0 list
uvx albi0 update -n <updater_name> [-w WORKING_DIR] [-s LIMIT] [--version-only] [PATTERNS...]
uvx albi0 extract [OPTIONS] [-t THREADS] [PATTERNS...]
```

### list

- è¯´æ˜ï¼šæ‰“å°å·²æ³¨å†Œçš„æ›´æ–°å™¨ä¸æå–å™¨ï¼ˆæ¥è‡ªå·²å¯¼å…¥çš„æ’ä»¶ï¼‰

### update

- å¿…é€‰å‚æ•°ï¼š`-n, --updater-name` æŒ‡å®šæ›´æ–°å™¨åç§°æˆ–ç»„åï¼ˆå¯ç”¨åç§°è§ `list` è¾“å‡ºï¼‰
- å¯é€‰å‚æ•°ï¼š
  - `-w, --working-dir` åˆ‡æ¢æ‰§è¡Œæ—¶çš„å·¥ä½œç›®å½•
  - `-s, --semaphore-limit` æœ€å¤§å¹¶å‘ä¸‹è½½æ•°ï¼ˆé»˜è®¤10ï¼‰
  - `--version-only` ä»…è·å–è¿œç¨‹ç‰ˆæœ¬å·ï¼Œä¸ä¸‹è½½èµ„æºæ–‡ä»¶
- ä½ç½®å‚æ•°ï¼š`PATTERNS...` å¯é€‰çš„æ–‡ä»¶åè¿‡æ»¤æ¨¡å¼ï¼ˆglobè¯­æ³•ï¼‰ï¼Œç”¨äºä»…æ›´æ–°åŒ¹é…çš„æ¸…å•é¡¹
- è¡Œä¸ºï¼š
  - å¯¹æ¯”è¿œç¨‹ä¸æœ¬åœ°èµ„æºæ¸…å•ï¼Œè‹¥éœ€è¦æ›´æ–°åˆ™å¹¶å‘ä¸‹è½½èµ„æºæ–‡ä»¶å¹¶ä¿å­˜æ¸…å•
  - è¿›åº¦æ¡å±•ç¤ºæ¯ä¸ªæ–‡ä»¶çš„ä¸‹è½½è¿›åº¦ä¸æ€»ä½“ä»»åŠ¡è¿›åº¦
  - å½“ä¼ å…¥ `--version-only` æ—¶ï¼Œä»…æ‰“å°è¿œç¨‹ç‰ˆæœ¬å·å¹¶é€€å‡ºï¼Œä¸è¿›è¡Œä¸‹è½½
  - å½“æä¾› `PATTERNS...` æ—¶ï¼Œä»…ä¼šä¸‹è½½æ–‡ä»¶ååŒ¹é… `PATTERNS...` çš„æ¡ç›®

### extract

- å¯é€‰å‚æ•°ï¼š
  - `-o, --output-dir` å¯¼å‡ºç›®å½•ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰
  - `-n, --extractor-name` æå–å™¨åç§°æˆ–ç»„åï¼ˆé»˜è®¤ `default`ï¼‰
  - `-e, --export-as-is` åŸæ ·å¯¼å‡ºï¼ˆå¼ºåˆ¶ä½¿ç”¨é»˜è®¤æå–å™¨ï¼‰
  - `-m, --merge-extract` åˆå¹¶æ¨¡å¼ï¼ˆå…ˆåˆå¹¶ç¯å¢ƒå†å¯¼å‡ºï¼‰
  - `-t, --parallel-threads` å¹¶è¡Œå¤„ç†ä½¿ç”¨çš„çº¿ç¨‹æ•°ï¼Œå¯æ ¹æ® CPU æ ¸å¿ƒæ•°è°ƒæ•´ï¼ˆé»˜è®¤4ï¼‰
- ä½ç½®å‚æ•°ï¼š`PATTERNS...` èµ„æºæ–‡ä»¶çš„ glob æ¨¡å¼ï¼ˆå¦‚ `"./**/*.ab"`ï¼‰
- è¡Œä¸ºï¼š
  - ä¾æ¬¡åŠ è½½åŒ¹é…åˆ°çš„èµ„æºæ–‡ä»¶ï¼Œè°ƒç”¨æ’ä»¶æ³¨å†Œçš„å¤„ç†å™¨è¿›è¡Œå¯¼å‡º
  - åœ¨å¯¹è±¡å¯¼å‡ºå‰åï¼Œå¯ç”±æ’ä»¶çš„å‰/åå¤„ç†å™¨è‡ªå®šä¹‰å¤„ç†é€»è¾‘

## æ’ä»¶ä½“ç³»æ¦‚è§ˆ

- æå–å™¨ï¼ˆExtractorï¼‰ï¼šåœ¨æ’ä»¶æ¨¡å—ä¸­é€šè¿‡æ„é€  `Extractor()` å³å®Œæˆæ³¨å†Œ
- æ›´æ–°å™¨ï¼ˆUpdaterï¼‰ï¼šåœ¨æ’ä»¶æ¨¡å—ä¸­é€šè¿‡æ„é€  `Updater()` å³å®Œæˆæ³¨å†Œ
- åˆ†ç»„æœºåˆ¶ï¼šåç§°æ”¯æŒç‚¹å·åˆ†ç»„ï¼Œä¾‹å¦‚ `newseer.default`ã€`seerproject.ab`ï¼›åœ¨ CLI ä¸­ä¼ å…¥ç»„åå¯æ‰¹é‡æ‰§è¡ŒåŒç»„ç»„ä»¶

## å…¸å‹å·¥ä½œæµ

```bash
# 1. æŸ¥çœ‹å¯ç”¨ç»„ä»¶
uvx albi0 list

# 2. ä¸‹è½½ï¼ˆæˆ–æ›´æ–°ï¼‰è¿œç¨‹èµ„æº
uvx albi0 update -n newseer.default -w ./workspace

# ä»…ä¸‹è½½åŒ¹é…çš„èµ„æºï¼ˆä½¿ç”¨ glob è¿‡æ»¤ï¼‰
uvx albi0 update -n newseer.default "*.builtin" "Shader/*"

# è°ƒæ•´å¹¶å‘æ•°ä¸‹è½½
uvx albi0 update -n newseer.default -s 20

# 3. æå–èµ„æºåˆ°æœ¬åœ°
uvx albi0 extract -n newseer "./workspace/newseer/assetbundles/**/*.ab" -m -o ./exports

# ä½¿ç”¨å¤šçº¿ç¨‹åŠ é€Ÿæå–
uvx albi0 extract -n newseer "./workspace/newseer/assetbundles/**/*.ab" -m -o ./exports -t 8
```

## å¼€å‘æµç¨‹

é¡¹ç›®ä½¿ç”¨ `uv` è¿›è¡Œä¾èµ–ç®¡ç†ä¸æ„å»ºï¼š

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/SeerAPI/albi0.git

# å®‰è£…ä¾èµ–ï¼ˆåŒ…å«å¼€å‘/æµ‹è¯•ä¾èµ–ï¼‰
uv sync

# æœ¬åœ°è¿è¡Œ CLI
uv run albi0 --help

# è¿è¡Œæµ‹è¯•
uv run --group test pytest

# æ„å»ºå‘è¡ŒåŒ…
uv build
```

## å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

- Q: ä¸ºä»€ä¹ˆæ²¡æœ‰çœ‹åˆ°æˆ‘æ–°å†™çš„æ’ä»¶ç”Ÿæ•ˆï¼Ÿ
  - A: ç¡®ä¿æ’ä»¶æ¨¡å—åœ¨ `albi0/plugins/__init__.py` è¢«å¯¼å…¥ï¼›CLI å…¥å£ä¼šå¯¼å…¥ `albi0.plugins` å®Œæˆæ³¨å†Œã€‚
- Q: ä¸‹è½½å¾ˆæ…¢/å¤±è´¥ï¼Ÿ
  - A: é»˜è®¤å¹¶å‘æ•°æ˜¯10ï¼Œå¯¹äºæŸäº›ç½‘ç»œç¯å¢ƒæˆ–æœåŠ¡å™¨é™åˆ¶å¯èƒ½ä¸æ˜¯æœ€ä¼˜ã€‚å¯ä»¥å°è¯•ä½¿ç”¨ `-s` æˆ– `--semaphore-limit` é€‰é¡¹å‡å°‘å¹¶å‘æ•°ï¼Œä¾‹å¦‚ `-s 5`ã€‚å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå¯èƒ½éœ€è¦æ£€æŸ¥ç½‘ç»œæˆ–è€ƒè™‘ä½¿ç”¨ä»£ç†
- Q: å¯¼å‡ºç»“æœçš„æ ¼å¼ä¸ç¬¦åˆé¢„æœŸï¼Ÿ
  - A: æ£€æŸ¥å¯¹åº”æ’ä»¶çš„å¯¹è±¡å‰å¤„ç†å™¨ä¸èµ„æºåå¤„ç†å™¨é€»è¾‘ï¼Œæˆ–ä½¿ç”¨ `-e/--export-as-is` åŸæ ·å¯¼å‡ºã€‚

## ç›®å½•ç»“æ„ï¼ˆç®€è¦ï¼‰

```
albi0/
â”œâ”€â”€ cli/                  # CLIå‘½ä»¤ç³»ç»Ÿ
â”‚   â”œâ”€â”€ commands/        # å…·ä½“å‘½ä»¤å®ç°
â”‚   â””â”€â”€ __init__.py      # CLIä¸»æ¡†æ¶
â”œâ”€â”€ plugins/             # æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ seerproject.py   # SeerProjectæ’ä»¶
â”‚   â””â”€â”€ newseer.py       # NewSeeræ’ä»¶
â”œâ”€â”€ extract/             # èµ„æºæå–æ ¸å¿ƒ
â”‚   â”œâ”€â”€ extractor.py     # æå–å™¨å®ç°
â”‚   â””â”€â”€ registry.py      # æå–å™¨æ³¨å†Œè¡¨
â”œâ”€â”€ update/              # æ›´æ–°åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ downloader.py    # ä¸‹è½½å™¨å®ç°
â”‚   â”œâ”€â”€ updater.py       # æ›´æ–°å™¨å®ç°
â”‚   â””â”€â”€ version.py       # ç‰ˆæœ¬ç®¡ç†å™¨å®ç°
â”œâ”€â”€ bytes_reader.py      # å­—èŠ‚æµè¯»å–å·¥å…·
â”œâ”€â”€ utils.py             # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ typing.py            # ç±»å‹å®šä¹‰
â”œâ”€â”€ log.py               # æ—¥å¿—é…ç½®
â”œâ”€â”€ container.py         # æ’ä»¶å®¹å™¨
â””â”€â”€ request.py           # httpxå®¢æˆ·ç«¯å°è£…
```

## è®¸å¯è¯

MIT
