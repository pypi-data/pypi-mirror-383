var JA=Object.defineProperty;var XA=(a,A,e)=>A in a?JA(a,A,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[A]=e;var d=(a,A,e)=>XA(a,typeof A!="symbol"?A+"":A,e);import{s as B}from"./chunk-DZLz74EQ.js";import{i as oA,n as BA,o as qA,r as Q}from"./react-7g8sREeT.js";import{t as zA}from"./react-BcIddLXZ.js";import{E as $A,F as Ae,Fr as ee,Ft as ae,Hn as te,Ht as Ge,It as oe,L as se,Lt as ne,Rn as re,h as ke,k as Re,qn as le,qt as uA,u as ie,x as Ze,z as ce}from"./cells-Cu8VFzqb.js";import{B as ge,L as he,P as mA,z as de}from"./zod-BEi78Y5d.js";import{n as m,t as Be}from"./jsx-runtime-DvsdsEjx.js";import{A as ue,B as me,I as Ye,J as sA,K as fe,L as nA,S as pe,X as YA,y as xe}from"./config-qe5QH71b.js";import{r as fA}from"./Deferred-BaXvZ7xh.js";import{$ as we,B as De,F as ve,H as Ee,L as ye,R as Ce,S as be,V as Ne,W as H,X as pA,Z as Me,at as Se,et as Fe,it as je,q as xA,tt as wA,z as _e}from"./utilities.esm-BmxxoxN1.js";import{t as C}from"./Logger-BYf_jckC.js";import{a as AA}from"./hotkeys-B6RmRq9l.js";import{o as Qe}from"./useHotkey-BSkOh6WM.js";import{n as Le}from"./ErrorBoundary-Dx9Sfc05.js";import{t as D}from"./cn-BXZDj0q7.js";import{t as Oe}from"./dist-CjbXXQXG.js";import{t as Pe}from"./useEventListener-C9Ldphl0.js";import{t as rA}from"./button-CtXpvmEK.js";import{t as DA}from"./createReducer-BYK7466H.js";import{r as Ie}from"./key-Bbtykojp.js";import{t as vA}from"./uuid-BGl6uOso.js";import{t as kA}from"./use-toast-DkqvBA-s.js";import{o as eA,s as v,t as Te}from"./connection-EQhJerFr.js";import{t as aA}from"./createLucideIcon-D2ExLlYe.js";import{a as He,f as EA,i as yA,n as Ke,o as Ue,s as Ve}from"./layout-p1EuMs1Q.js";import{a as We}from"./download-DrHZIzG4.js";import{c as Je}from"./maps-DAonNwtj.js";import{o as Xe}from"./ansi_up-BXBP1ZEY.js";import{n as qe}from"./spinner-DHqQ9skH.js";import{r as ze}from"./readonly-python-code-BUkFWfrr.js";import{r as $e}from"./useNonce-BUl5Llhg.js";import{t as Aa}from"./namespace-2k7Gzn5q.js";import{t as RA}from"./tooltip-Cm87HNT4.js";import{t as ea}from"./fullscreen-BhmcNC-V.js";import{a as aa,r as CA,t as ta}from"./mode-HqVxJRUR.js";import{_ as bA,d as Ga,f as NA,g as oa,h as sa,m as MA,p as SA,v as na}from"./alert-dialog-DIUeqg2n.js";import{r as FA}from"./share-BcJf1LSd.js";import{n as jA}from"./errors-D1Xk3YjQ.js";import{t as ra}from"./RenderHTML-DO7a-Kzr.js";import{n as ka}from"./useAsyncData-iYSjGtJ5.js";import{t as Ra}from"./error-banner-BfzCrxO_.js";import{i as la}from"./cell-link-D_wBCMcx.js";import{t as ia}from"./request-registry-xV6_P9y2.js";import{t as Za}from"./ws-DUvtvECK.js";import{n as ca}from"./types-BriObLcR.js";import{n as ga}from"./runs-BDDrOdWx.js";var ha=aA("hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]),_A=aA("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),da=aA("square-arrow-right",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]),Ba=aA("unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]),ua=B(m()),n=B(Be());const ma=a=>{let A=(0,ua.c)(10),{reason:e,canTakeover:t}=a,o=t===void 0?!1:t,G=Ya;if(o){let r;A[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)("span",{className:"font-bold text-xl flex items-center mb-2",children:"Notebook already connected"})}),A[0]=r):r=A[0];let k;A[1]===e?k=A[2]:(k=(0,n.jsx)("span",{children:e}),A[1]=e,A[2]=k);let R;A[3]===o?R=A[4]:(R=o&&(0,n.jsxs)(rA,{onClick:G,variant:"outline","data-testid":"takeover-button",className:"shrink-0",children:[(0,n.jsx)(da,{className:"w-4 h-4 mr-2"}),"Take over session"]}),A[3]=o,A[4]=R);let l;return A[5]!==k||A[6]!==R?(l=(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)(Ra,{kind:"info",className:"mt-10 flex flex-col rounded p-3 max-w-[800px] mx-4",children:[r,(0,n.jsxs)("div",{className:"flex justify-between items-end text-base gap-20",children:[k,R]})]})}),A[5]=k,A[6]=R,A[7]=l):l=A[7],l}let s;return A[8]===e?s=A[9]:(s=(0,n.jsx)("div",{className:"font-mono text-center text-base text-(--red-11)",children:(0,n.jsx)("p",{children:e})}),A[8]=e,A[9]=s),s};async function Ya(){try{let a=new URL(window.location.href).searchParams;await ue.post(`/kernel/takeover?${a.toString()}`,{}),FA()}catch(a){kA({title:"Failed to take over session",description:jA(a),variant:"danger"})}}var fa=B(m()),f=B(zA());const pa=a=>{let A=(0,fa.c)(8),{connection:e,className:t,children:o}=a,G;A[0]!==e.canTakeover||A[1]!==e.reason||A[2]!==e.state?(G=e.state===v.CLOSED&&(0,n.jsx)(ma,{reason:e.reason,canTakeover:e.canTakeover}),A[0]=e.canTakeover,A[1]=e.reason,A[2]=e.state,A[3]=G):G=A[3];let s;return A[4]!==o||A[5]!==t||A[6]!==G?(s=(0,n.jsxs)("div",{className:t,children:[o,G]}),A[4]=o,A[5]=t,A[6]=G,A[7]=s):s=A[7],s};var xa=B(m());const wa=a=>{let A=(0,xa.c)(10),{title:e}=a,[t,o]=(0,f.useState)(e),[G,s]=(0,f.useState)(!0),r,k;A[0]!==t||A[1]!==e?(r=()=>{if(e!==t){s(!1);let g=setTimeout(()=>{o(e),s(!0)},300);return()=>clearTimeout(g)}},k=[e,t],A[0]=t,A[1]=e,A[2]=r,A[3]=k):(r=A[2],k=A[3]),(0,f.useEffect)(r,k);let R;A[4]===Symbol.for("react.memo_cache_sentinel")?(R=(0,n.jsx)(qe,{className:"size-20 animate-spin text-primary","data-testid":"large-spinner",strokeWidth:1}),A[4]=R):R=A[4];let l=G?"opacity-100":"opacity-0",Z;A[5]===l?Z=A[6]:(Z=D("mt-2 text-muted-foreground font-semibold text-lg transition-opacity duration-300",l),A[5]=l,A[6]=Z);let c;return A[7]!==t||A[8]!==Z?(c=(0,n.jsxs)("div",{className:"flex flex-col h-full flex-1 items-center justify-center p-4",children:[R,(0,n.jsx)("div",{className:Z,children:t})]}),A[7]=t,A[8]=Z,A[9]=c):c=A[9],c};var lA=B(m());const Da=a=>{let A=(0,lA.c)(2),{children:e}=a;if(!nA())return e;let t;return A[0]===e?t=A[1]:(t=(0,n.jsx)(va,{children:e}),A[0]=e,A[1]=t),t};var va=a=>{let A=(0,lA.c)(3),{children:e}=a,t;A[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],A[0]=t):t=A[0];let{isPending:o,error:G}=ka(ya,t),s=Q(we);if(o){let r;return A[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(QA,{}),A[1]=r):r=A[1],r}if(!s&&ta()==="read"&&Ea()){let r;return A[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(QA,{}),A[2]=r):r=A[2],r}if(G)throw G;return e};function Ea(){return me(sA.showCode,"false")||!fA.get(Qe)}const QA=a=>{let A=(0,lA.c)(2),e=Q(Fe),t;return A[0]===e?t=A[1]:(t=(0,n.jsx)(wa,{title:e}),A[0]=e,A[1]=t),t};async function ya(){return await pA.INSTANCE.initialized.promise,!0}var Ca={idle:"./favicon.ico",success:"data:image/x-icon;base64,AAABAAEAMDAAAAEACACoDgAAFgAAACgAAAAwAAAAYAAAAAEACAAAAAAAAAkAAAAAAAAAAAAAAAEAAAABAAAAAAAAXXQAAFd3AwBWeAQAVngEAFd4AwBXeAQAVnkEAFh3AwBXdwQAVXcGAFd4BQBXeAQAWHgEAFd6AwBXeAMAVnkEAFZ5AwBXdwQAV3cFAFd4BABYeAQAV3gEAFh4BABXeAQA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgMEBQYYGAYFBAMCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgcYGBgYGBgYGBgYGBgYGAcCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgJGBgYGBgYGBgYGBgYGBgYGBgYCQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKBBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgECgAAAAAAAAAAAAAAAAAAAAAAAAAAAAsYGBgYGBgYDA0OChkZGRkKDg0MGBgYGBgYGAsAAAAAAAAAAAAAAAAAAAAAAAAAAxgYGBgYGA8QGRkZGRkZGRkZGRkZEA8YGBgYGBgDAAAAAAAAAAAAAAAAAAAAAAARGBgYGBgSChkZGRkZGRkZGRkZGRkZGRkKEhgYGBgYEQAAAAAAAAAAAAAAAAAAAAMYGBgYGBMZGRkZGRkZGRkZGRkZGRkZGRkZGRMYGBgYGAMAAAAAAAAAAAAAAAAACxgYGBgUEBkZGRkZGRkZGRkZGRkZGRkZGRkZGRkQFBgYGBgLAAAAAAAAAAAAAAAKGBgYGBQKGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZChQYGBgYCgAAAAAAAAAAAAAEGBgYGBAZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRAYGBgYBAAAAAAAAAAAAAgYGBgYExkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkTGBgYGAgAAAAAAAAAAAkYGBgSGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZEhgYGAkAAAAAAAAAAhgYGBgKGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZChgYGBgCAAAAAAAABxgYGA8ZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQ8YGBgHAAAAAAABGBgYGBAZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRAYGBgYAQAAAAACGBgYDBkZGRkZGRkZGRkZGRkXFhYVGRkZGRkZGRkZGRkZGRkZGRkMGBgYAgAAAAADGBgYDRkZGRkZGRkZGRkZGRcYGBgYFxkZGRkZGRkZGRkZGRkZGRkNGBgYAwAAAAAEGBgYDhkZGRkZGRkZGRkZFxgYGBgYGBcZGRkZGRkZGRkZGRkZGRkOGBgYBAAAAAAFGBgYChkZGRkZGRkZGRkXGBgYGBgYGBgXGRkZGRkZGRkZGRkZGRkKGBgYBQAAAAAGGBgYGRkZGRkZGRkZGRUYGBgYGBgYGBgYFxkZGRkZGRkZGRkZGRkZGBgYBgAAAAAYGBgYGRkZGRkZGRkZGRYYGBgYFxcYGBgYGBcZGRkZGRkZGRkZGRkZGBgYGAAAAAAYGBgYGRkZGRkZGRkZGRYYGBgXGRkXGBgYGBgXGRkZGRkZGRkZGRkZGBgYGAAAAAAGGBgYGRkZGRkZGRkZGRUWFhcZGRkZFxgYGBgYFxkZGRkZGRkZGRkZGBgYBgAAAAAFGBgYChkZGRkZGRkZGRkZGRkZGRkZGRcYGBgYGBcZGRkZGRkZGRkKGBgYBQAAAAAEGBgYDhkZGRkZGRkZGRkZGRkZGRkZGRkXGBgYGBYZGRkZGRkZGRkOGBgYBAAAAAADGBgYDRkZGRkZGRkZGRkZGRkZGRkZGRkZFxgYGBYZGRkZGRkZGRkNGBgYAwAAAAACGBgYDBkZGRkZGRkZGRkZGRkZGRkZGRkZGRUWFhUZGRkZGRkZGRkMGBgYAgAAAAABGBgYGBAZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRAYGBgYAQAAAAAABxgYGA8ZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQ8YGBgHAAAAAAAAAhgYGBgKGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZChgYGBgCAAAAAAAAAAkYGBgSGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZEhgYGAkAAAAAAAAAAAgYGBgYExkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkTGBgYGAgAAAAAAAAAAAAEGBgYGBAZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRAYGBgYBAAAAAAAAAAAAAAKGBgYGBQKGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZChQYGBgYCgAAAAAAAAAAAAAACxgYGBgUEBkZGRkZGRkZGRkZGRkZGRkZGRkZGRkQFBgYGBgLAAAAAAAAAAAAAAAAAAMYGBgYGBMZGRkZGRkZGRkZGRkZGRkZGRkZGRMYGBgYGAMAAAAAAAAAAAAAAAAAAAARGBgYGBgSChkZGRkZGRkZGRkZGRkZGRkKEhgYGBgYEQAAAAAAAAAAAAAAAAAAAAAAAxgYGBgYGA8QGRkZGRkZGRkZGRkZEA8YGBgYGBgDAAAAAAAAAAAAAAAAAAAAAAAAAAsYGBgYGBgYDA0OChkZGRkKDg0MGBgYGBgYGAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAKBBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgECgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgJGBgYGBgYGBgYGBgYGBgYGBgYCQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgcYGBgYGBgYGBgYGBgYGAcCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgMEBQYYGAYFBAMCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////AAD///////8AAP//gAH//wAA//4AAH//AAD/+AAAH/8AAP/gAAAH/wAA/8AAAAP/AAD/gAAAAf8AAP8AAAAA/wAA/gAAAAB/AAD8AAAAAD8AAPgAAAAAHwAA+AAAAAAfAADwAAAAAA8AAPAAAAAADwAA4AAAAAAHAADgAAAAAAcAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADgAAAAAAcAAOAAAAAABwAA8AAAAAAPAADwAAAAAA8AAPgAAAAAHwAA+AAAAAAfAAD8AAAAAD8AAP4AAAAAfwAA/wAAAAD/AAD/gAAAAf8AAP/AAAAD/wAA/+AAAAf/AAD/+AAAH/8AAP/+AAB//wAA//+AAf//AAD///////8AAP///////wAA",running:"data:image/x-icon;base64,AAABAAEAMDAAAAEACACoDgAAFgAAACgAAAAwAAAAYAAAAAEACAAAAAAAAAkAAAAAAAAAAAAAAAEAAAABAAAAAAAA0YsAAMWEAwDHgwIAx4QBAMeEAgDGhAIAyIUBAMaFAwDGhAIAxoIAAMaFAgDHhAIAx4QCAMiFAwDHhAIAx4YAAMaFAgDHhQEAxoMCAMeEAgDHgwQAx4QDAMeDAgDHhAIA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgMEBQYYGAYFBAMCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgcYGBgYGBgYGBgYGBgYGAcCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgJGBgYGBgYGBgYGBgYGBgYGBgYCQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKBBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgECgAAAAAAAAAAAAAAAAAAAAAAAAAAAAsYGBgYGBgYDA0OChkZGRkKDg0MGBgYGBgYGAsAAAAAAAAAAAAAAAAAAAAAAAAAAxgYGBgYGA8QGRkZGRkZGRkZGRkZEA8YGBgYGBgDAAAAAAAAAAAAAAAAAAAAAAARGBgYGBgSChkZGRkZGRkZGRkZGRkZGRkKEhgYGBgYEQAAAAAAAAAAAAAAAAAAAAMYGBgYGBMZGRkZGRkZGRkZGRkZGRkZGRkZGRMYGBgYGAMAAAAAAAAAAAAAAAAACxgYGBgUEBkZGRkZGRkZGRkZGRkZGRkZGRkZGRkQFBgYGBgLAAAAAAAAAAAAAAAKGBgYGBQKGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZChQYGBgYCgAAAAAAAAAAAAAEGBgYGBAZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRAYGBgYBAAAAAAAAAAAAAgYGBgYExkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkTGBgYGAgAAAAAAAAAAAkYGBgSGRkZGRkZGRkZFRgWFxkZGRkZGRkZGRkZGRkZGRkZEhgYGAkAAAAAAAAAAhgYGBgKGRkZGRkZGRkZFhgYGBYVGRkZGRkZGRkZGRkZGRkZChgYGBgCAAAAAAAABxgYGA8ZGRkZGRkZGRkZGBgYGBgYFxkZGRkZGRkZGRkZGRkZGQ8YGBgHAAAAAAABGBgYGBAZGRkZGRkZGRkZGBgYGBgYGBYVGRkZGRkZGRkZGRkZGRAYGBgYAQAAAAACGBgYDBkZGRkZGRkZGRkZGBgYGBgYGBgYFxkZGRkZGRkZGRkZGRkMGBgYAgAAAAADGBgYDRkZGRkZGRkZGRkZGBgYGBgYGBgYGBYVGRkZGRkZGRkZGRkNGBgYAwAAAAAEGBgYDhkZGRkZGRkZGRkZGBgYGBUWGBgYGBgYFxkZGRkZGRkZGRkOGBgYBAAAAAAFGBgYChkZGRkZGRkZGRkZGBgYGBkZFxgYGBgYGBYVGRkZGRkZGRkKGBgYBQAAAAAGGBgYGRkZGRkZGRkZGRkZGBgYGBkZGRUWGBgYGBgYFxkZGRkZGRkZGBgYBgAAAAAYGBgYGRkZGRkZGRkZGRkZGBgYGBkZGRkZFxgYGBgYFxkZGRkZGRkZGBgYGAAAAAAYGBgYGRkZGRkZGRkZGRkZGBgYGBkZGRkZFxgYGBgYFhkZGRkZGRkZGBgYGAAAAAAGGBgYGRkZGRkZGRkZGRkZGBgYGBkZGRkXGBgYGBgYFRkZGRkZGRkZGBgYBgAAAAAFGBgYChkZGRkZGRkZGRkZGBgYGBkZFxgYGBgYGBcZGRkZGRkZGRkKGBgYBQAAAAAEGBgYDhkZGRkZGRkZGRkZGBgYGBkXGBgYGBgYFxkZGRkZGRkZGRkOGBgYBAAAAAADGBgYDRkZGRkZGRkZGRkZGBgYGBgYGBgYGBcZGRkZGRkZGRkZGRkNGBgYAwAAAAACGBgYDBkZGRkZGRkZGRkZGBgYGBgYGBgYFxkZGRkZGRkZGRkZGRkMGBgYAgAAAAABGBgYGBAZGRkZGRkZGRkZGBgYGBgYGBcZGRkZGRkZGRkZGRkZGRAYGBgYAQAAAAAABxgYGA8ZGRkZGRkZGRkZGBgYGBgYFxkZGRkZGRkZGRkZGRkZGQ8YGBgHAAAAAAAAAhgYGBgKGRkZGRkZGRkZFhgYGBcZGRkZGRkZGRkZGRkZGRkZChgYGBgCAAAAAAAAAAkYGBgSGRkZGRkZGRkZFRYWFxkZGRkZGRkZGRkZGRkZGRkZEhgYGAkAAAAAAAAAAAgYGBgYExkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkTGBgYGAgAAAAAAAAAAAAEGBgYGBAZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRAYGBgYBAAAAAAAAAAAAAAKGBgYGBQKGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZChQYGBgYCgAAAAAAAAAAAAAACxgYGBgUEBkZGRkZGRkZGRkZGRkZGRkZGRkZGRkQFBgYGBgLAAAAAAAAAAAAAAAAAAMYGBgYGBMZGRkZGRkZGRkZGRkZGRkZGRkZGRMYGBgYGAMAAAAAAAAAAAAAAAAAAAARGBgYGBgSChkZGRkZGRkZGRkZGRkZGRkKEhgYGBgYEQAAAAAAAAAAAAAAAAAAAAAAAxgYGBgYGA8QGRkZGRkZGRkZGRkZEA8YGBgYGBgDAAAAAAAAAAAAAAAAAAAAAAAAAAsYGBgYGBgYDA0OChkZGRkKDg0MGBgYGBgYGAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAKBBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgECgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgJGBgYGBgYGBgYGBgYGBgYGBgYCQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgcYGBgYGBgYGBgYGBgYGAcCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgMEBQYYGAYFBAMCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////AAD///////8AAP//gAH//wAA//4AAH//AAD/+AAAH/8AAP/gAAAH/wAA/8AAAAP/AAD/gAAAAf8AAP8AAAAA/wAA/gAAAAB/AAD8AAAAAD8AAPgAAAAAHwAA+AAAAAAfAADwAAAAAA8AAPAAAAAADwAA4AAAAAAHAADgAAAAAAcAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADgAAAAAAcAAOAAAAAABwAA8AAAAAAPAADwAAAAAA8AAPgAAAAAHwAA+AAAAAAfAAD8AAAAAD8AAP4AAAAAfwAA/wAAAAD/AAD/gAAAAf8AAP/AAAAD/wAA/+AAAAf/AAD/+AAAH/8AAP/+AAB//wAA//+AAf//AAD///////8AAP///////wAA",error:"data:image/x-icon;base64,AAABAAEAMDAAAAEACACoDgAAFgAAACgAAAAwAAAAYAAAAAEACAAAAAAAAAkAAAAAAAAAAAAAAAEAAAABAAAAAAAALi7oACcn2wAlJdsAJibcACYm3AAmJtsAJyfdACUl3QAmJtsAKCjdACUl3AAmJtwAJyfcACYm3AAoKNcAJibcACcn3AAmJt0AJibcACUl3AAmJtwAKCjbACcn3AAmJtsAJibcAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgMEBQYZGQYFBAMCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgcZGRkZGRkZGRkZGRkZGQcCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgJGRkZGRkZGRkZGRkZGRkZGRkZCQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKBBkZGRkZGRkZGRkZGRkZGRkZGRkZGRkECgAAAAAAAAAAAAAAAAAAAAAAAAAAAAsZGRkZGRkZDA0ODxoaGhoPDg0MGRkZGRkZGQsAAAAAAAAAAAAAAAAAAAAAAAAAAxkZGRkZGRARGhoaGhoaGhoaGhoaERAZGRkZGRkDAAAAAAAAAAAAAAAAAAAAAAASGRkZGRkTDxoaGhoaGhoaGhoaGhoaGhoPExkZGRkZEgAAAAAAAAAAAAAAAAAAAAMZGRkZGRQaGhoaGhoaGhoaGhoaGhoaGhoaGhQZGRkZGQMAAAAAAAAAAAAAAAAACxkZGRkVERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoRFRkZGRkLAAAAAAAAAAAAAAAKGRkZGRUPGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaDxUZGRkZCgAAAAAAAAAAAAAEGRkZGREaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhEZGRkZBAAAAAAAAAAAAAgZGRkZFBoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoUGRkZGQgAAAAAAAAAAAkZGRkTGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaExkZGQkAAAAAAAAAAhkZGRkPGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaDxkZGRkCAAAAAAAABxkZGRAaGhoaGhoaGhYXFxYaGhoaGhoaGhgXFxYaGhoaGhoaGhAZGRkHAAAAAAABGRkZGREaGhoaGhoaGhcZGRkYGhoaGhoaGBkZGRcaGhoaGhoaGhEZGRkZAQAAAAACGRkZDBoaGhoaGhoaGhcZGRkZGBoaGhoYGRkZGRcaGhoaGhoaGhoMGRkZAgAAAAADGRkZDRoaGhoaGhoaGhgZGRkZGRgaGhgZGRkZGRYaGhoaGhoaGhoNGRkZAwAAAAAEGRkZDhoaGhoaGhoaGhoYGRkZGRkYGBkZGRkZGBoaGhoaGhoaGhoOGRkZBAAAAAAFGRkZDxoaGhoaGhoaGhoaGBkZGRkZGRkZGRkYGhoaGhoaGhoaGhoPGRkZBQAAAAAGGRkZGhoaGhoaGhoaGhoaGhgZGRkZGRkZGRgaGhoaGhoaGhoaGhoaGRkZBgAAAAAZGRkZGhoaGhoaGhoaGhoaGhoYGRkZGRkZGBoaGhoaGhoaGhoaGhoaGRkZGQAAAAAZGRkZGhoaGhoaGhoaGhoaGhoYGRkZGRkZGBoaGhoaGhoaGhoaGhoaGRkZGQAAAAAGGRkZGhoaGhoaGhoaGhoaGhgZGRkZGRkZGRgaGhoaGhoaGhoaGhoaGRkZBgAAAAAFGRkZDxoaGhoaGhoaGhoaGBkZGRkZGRkZGRkYGhoaGhoaGhoaGhoPGRkZBQAAAAAEGRkZDhoaGhoaGhoaGhoYGRkZGRkYGBkZGRkZGBoaGhoaGhoaGhoOGRkZBAAAAAADGRkZDRoaGhoaGhoaGhYZGRkZGRgaGhgZGRkZGRgaGhoaGhoaGhoNGRkZAwAAAAACGRkZDBoaGhoaGhoaGhcZGRkZGBoaGhoYGRkZGRcaGhoaGhoaGhoMGRkZAgAAAAABGRkZGREaGhoaGhoaGhcZGRkYGhoaGhoaGBkZGRcaGhoaGhoaGhEZGRkZAQAAAAAABxkZGRAaGhoaGhoaGhYXFxgaGhoaGhoaGhYXFxYaGhoaGhoaGhAZGRkHAAAAAAAAAhkZGRkPGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaDxkZGRkCAAAAAAAAAAkZGRkTGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaExkZGQkAAAAAAAAAAAgZGRkZFBoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoUGRkZGQgAAAAAAAAAAAAEGRkZGREaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhEZGRkZBAAAAAAAAAAAAAAKGRkZGRUPGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaDxUZGRkZCgAAAAAAAAAAAAAACxkZGRkVERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoRFRkZGRkLAAAAAAAAAAAAAAAAAAMZGRkZGRQaGhoaGhoaGhoaGhoaGhoaGhoaGhQZGRkZGQMAAAAAAAAAAAAAAAAAAAASGRkZGRkTDxoaGhoaGhoaGhoaGhoaGhoPExkZGRkZEgAAAAAAAAAAAAAAAAAAAAAAAxkZGRkZGRARGhoaGhoaGhoaGhoaERAZGRkZGRkDAAAAAAAAAAAAAAAAAAAAAAAAAAsZGRkZGRkZDA0ODxoaGhoPDg0MGRkZGRkZGQsAAAAAAAAAAAAAAAAAAAAAAAAAAAAKBBkZGRkZGRkZGRkZGRkZGRkZGRkZGRkECgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgJGRkZGRkZGRkZGRkZGRkZGRkZCQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgcZGRkZGRkZGRkZGRkZGQcCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgMEBQYZGQYFBAMCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////AAD///////8AAP//gAH//wAA//4AAH//AAD/+AAAH/8AAP/gAAAH/wAA/8AAAAP/AAD/gAAAAf8AAP8AAAAA/wAA/gAAAAB/AAD8AAAAAD8AAPgAAAAAHwAA+AAAAAAfAADwAAAAAA8AAPAAAAAADwAA4AAAAAAHAADgAAAAAAcAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADAAAAAAAMAAMAAAAAAAwAAwAAAAAADAADgAAAAAAcAAOAAAAAABwAA8AAAAAAPAADwAAAAAA8AAPgAAAAAHwAA+AAAAAAfAAD8AAAAAD8AAP4AAAAAfwAA/wAAAAD/AAD/gAAAAf8AAP/AAAAD/wAA/+AAAAf/AAD/+AAAH/8AAP/+AAB//wAA//+AAf//AAD///////8AAP///////wAA"};async function K(a){return Ca[a]}function ba(a){if(document.visibilityState==="visible")return;let A=async()=>{a===0?new Notification("Execution completed",{body:"Your notebook run completed successfully.",icon:await K("success")}):new Notification("Execution failed",{body:`Your notebook run encountered ${a} error(s).`,icon:await K("error")})};!("Notification"in window)||Notification.permission==="denied"||(Notification.permission==="granted"?A():Notification.permission==="default"&&Notification.requestPermission().then(e=>{e==="granted"&&A()}))}const Na=a=>{let{isRunning:A}=a,e=Re(),t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.getElementsByTagName("head")[0].append(t)),(0,f.useEffect)(()=>{!A&&t.href.includes("favicon")||(async()=>{let G;if(G=A?"running":e.length===0?"success":"error",t.href=await K(G),!document.hasFocus())return;let s=setTimeout(async()=>{t.href=await K("idle")},3e3);return()=>clearTimeout(s)})()},[A,e,t]);let o=be(A)??A;return(0,f.useEffect)(()=>{o&&!A&&ba(e.length)},[e,o,A]),Pe(window,"focus",async G=>{A||(t.href=await K("idle"))}),null};function Ma(){let{cellRuntime:a}=fA.get(Ze),A=AA.entries(a).find(([e,t])=>t.status==="running");A&&la(A[0],"focus")}var U=B(m());const Sa=a=>{let A=(0,U.c)(22),{connection:e,isRunning:t}=a,{mode:o}=Q(aa),G=e.state===v.CLOSED,s=e.state===v.OPEN,r;A[0]!==e.canTakeover||A[1]!==G?(r=G&&!e.canTakeover&&(0,n.jsx)(Qa,{}),A[0]=e.canTakeover,A[1]=G,A[2]=r):r=A[2];let k=o==="read"?"fixed":"absolute",R;A[3]===k?R=A[4]:(R=D("z-50 top-4 left-4",k),A[3]=k,A[4]=R);let l;A[5]!==s||A[6]!==t?(l=s&&t&&(0,n.jsx)(_a,{}),A[5]=s,A[6]=t,A[7]=l):l=A[7];let Z;A[8]!==e.canTakeover||A[9]!==G?(Z=G&&!e.canTakeover&&(0,n.jsx)(Fa,{}),A[8]=e.canTakeover,A[9]=G,A[10]=Z):Z=A[10];let c;A[11]!==e.canTakeover||A[12]!==G?(c=G&&e.canTakeover&&(0,n.jsx)(ja,{}),A[11]=e.canTakeover,A[12]=G,A[13]=c):c=A[13];let g;A[14]!==R||A[15]!==l||A[16]!==Z||A[17]!==c?(g=(0,n.jsxs)("div",{className:R,children:[l,Z,c]}),A[14]=R,A[15]=l,A[16]=Z,A[17]=c,A[18]=g):g=A[18];let h;return A[19]!==r||A[20]!==g?(h=(0,n.jsxs)(n.Fragment,{children:[r,g]}),A[19]=r,A[20]=g,A[21]=h):h=A[21],h};var iA="no-print pointer-events-auto hover:cursor-pointer",Fa=()=>{let a=(0,U.c)(1),A;return a[0]===Symbol.for("react.memo_cache_sentinel")?(A=(0,n.jsx)(RA,{content:"App disconnected",children:(0,n.jsx)("div",{className:iA,children:(0,n.jsx)(Ba,{className:"w-[25px] h-[25px] text-(--red-11)"})})}),a[0]=A):A=a[0],A},ja=()=>{let a=(0,U.c)(1),A;return a[0]===Symbol.for("react.memo_cache_sentinel")?(A=(0,n.jsx)(RA,{content:"Notebook locked",children:(0,n.jsx)("div",{className:iA,children:(0,n.jsx)(ze,{className:"w-[25px] h-[25px] text-(--blue-11)"})})}),a[0]=A):A=a[0],A},_a=()=>{let a=(0,U.c)(1),A;return a[0]===Symbol.for("react.memo_cache_sentinel")?(A=(0,n.jsx)(RA,{content:"Jump to running cell",side:"right",children:(0,n.jsx)("div",{className:iA,"data-testid":"loading-indicator",onClick:Ma,children:(0,n.jsx)(ha,{className:"running-app-icon",size:30,strokeWidth:1})})}),a[0]=A):A=a[0],A},Qa=()=>{let a=(0,U.c)(1),A;return a[0]===Symbol.for("react.memo_cache_sentinel")?(A=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"noise"}),(0,n.jsx)("div",{className:"disconnected-gradient"})]}),a[0]=A):A=a[0],A},L=B(m()),La=oa,Oa=na,Pa=ea(sa),LA=f.forwardRef((a,A)=>{let e=(0,L.c)(9),t,o;e[0]===a?(t=e[1],o=e[2]):({className:t,...o}=a,e[0]=a,e[1]=t,e[2]=o);let G;e[3]===t?G=e[4]:(G=D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),e[3]=t,e[4]=G);let s;return e[5]!==o||e[6]!==A||e[7]!==G?(s=(0,n.jsx)(MA,{className:G,...o,ref:A}),e[5]=o,e[6]=A,e[7]=G,e[8]=s):s=e[8],s});LA.displayName=MA.displayName;var Ia=Oe("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),OA=f.forwardRef((a,A)=>{let e=(0,L.c)(15),t,o,G,s;e[0]===a?(t=e[1],o=e[2],G=e[3],s=e[4]):({side:s,className:o,children:t,...G}=a,e[0]=a,e[1]=t,e[2]=o,e[3]=G,e[4]=s);let r=s===void 0?"right":s,k;e[5]===Symbol.for("react.memo_cache_sentinel")?(k=(0,n.jsx)(LA,{}),e[5]=k):k=e[5];let R;e[6]!==o||e[7]!==r?(R=D(Ia({side:r}),o),e[6]=o,e[7]=r,e[8]=R):R=e[8];let l;e[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsxs)(Ga,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(Je,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]}),e[9]=l):l=e[9];let Z;return e[10]!==t||e[11]!==G||e[12]!==A||e[13]!==R?(Z=(0,n.jsx)(Pa,{children:(0,n.jsxs)(Aa,{children:[k,(0,n.jsxs)(NA,{ref:A,className:R,...G,children:[t,l]})]})}),e[10]=t,e[11]=G,e[12]=A,e[13]=R,e[14]=Z):Z=e[14],Z});OA.displayName=NA.displayName;var Ta=a=>{let A=(0,L.c)(8),e,t;A[0]===a?(e=A[1],t=A[2]):({className:e,...t}=a,A[0]=a,A[1]=e,A[2]=t);let o;A[3]===e?o=A[4]:(o=D("flex flex-col space-y-2 text-center sm:text-left",e),A[3]=e,A[4]=o);let G;return A[5]!==t||A[6]!==o?(G=(0,n.jsx)("div",{className:o,...t}),A[5]=t,A[6]=o,A[7]=G):G=A[7],G};Ta.displayName="SheetHeader";var Ha=a=>{let A=(0,L.c)(8),e,t;A[0]===a?(e=A[1],t=A[2]):({className:e,...t}=a,A[0]=a,A[1]=e,A[2]=t);let o;A[3]===e?o=A[4]:(o=D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),A[3]=e,A[4]=o);let G;return A[5]!==t||A[6]!==o?(G=(0,n.jsx)("div",{className:o,...t}),A[5]=t,A[6]=o,A[7]=G):G=A[7],G};Ha.displayName="SheetFooter";var Ka=f.forwardRef((a,A)=>{let e=(0,L.c)(9),t,o;e[0]===a?(t=e[1],o=e[2]):({className:t,...o}=a,e[0]=a,e[1]=t,e[2]=o);let G;e[3]===t?G=e[4]:(G=D("text-lg font-semibold text-foreground",t),e[3]=t,e[4]=G);let s;return e[5]!==o||e[6]!==A||e[7]!==G?(s=(0,n.jsx)(bA,{ref:A,className:G,...o}),e[5]=o,e[6]=A,e[7]=G,e[8]=s):s=e[8],s});Ka.displayName=bA.displayName;var Ua=f.forwardRef((a,A)=>{let e=(0,L.c)(9),t,o;e[0]===a?(t=e[1],o=e[2]):({className:t,...o}=a,e[0]=a,e[1]=t,e[2]=o);let G;e[3]===t?G=e[4]:(G=D("text-sm text-muted-foreground",t),e[3]=t,e[4]=G);let s;return e[5]!==o||e[6]!==A||e[7]!==G?(s=(0,n.jsx)(SA,{ref:A,className:G,...o}),e[5]=o,e[6]=A,e[7]=G,e[8]=s):s=e[8],s});Ua.displayName=SA.displayName;var Va=B(m());const ZA=(0,f.memo)(()=>{let a=(0,Va.c)(1),A;return a[0]===Symbol.for("react.memo_cache_sentinel")?(A=(0,n.jsx)(je,{name:wA.SIDEBAR}),a[0]=A):A=a[0],A});ZA.displayName="SidebarSlot";var Wa=B(m());const Ja=a=>{let A=(0,Wa.c)(6),{openWidth:e}=a,t;A[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(Oa,{className:"lg:hidden",asChild:!0,children:(0,n.jsx)(rA,{variant:"ghost",className:"bg-background",children:(0,n.jsx)(_A,{className:"w-5 h-5"})})}),A[0]=t):t=A[0];let o;A[1]===e?o=A[2]:(o={maxWidth:e},A[1]=e,A[2]=o);let G;A[3]===Symbol.for("react.memo_cache_sentinel")?(G=(0,n.jsx)(ZA,{}),A[3]=G):G=A[3];let s;return A[4]===o?s=A[5]:(s=(0,n.jsxs)(La,{children:[t,(0,n.jsx)(OA,{className:"w-full px-3 h-full flex flex-col overflow-y-auto",style:o,side:"left",children:G})]}),A[4]=o,A[5]=s),s};var Xa=B(m());const qa=a=>{let A=(0,Xa.c)(7),{isOpen:e,toggle:t}=a,o=e?"rotate-0":"rotate-180",G;A[0]===o?G=A[1]:(G=D("h-5 w-5 transition-transform ease-in-out duration-700",o),A[0]=o,A[1]=G);let s;A[2]===G?s=A[3]:(s=(0,n.jsx)(We,{className:G}),A[2]=G,A[3]=s);let r;return A[4]!==s||A[5]!==t?(r=(0,n.jsx)("div",{className:"invisible lg:visible absolute top-[12px] right-[16px] z-20",children:(0,n.jsx)(rA,{onClick:t,className:"w-10 h-8",variant:"ghost",size:"icon",children:s})}),A[4]=s,A[5]=t,A[6]=r):r=A[6],r};var za=B(m());const $a=a=>{let A=(0,za.c)(11),{isOpen:e,toggle:t,width:o}=a,G=e?o:_e,s;A[0]===G?s=A[1]:(s={width:G},A[0]=G,A[1]=s);let r;A[2]===Symbol.for("react.memo_cache_sentinel")?(r=D("app-sidebar auto-collapse-nav","top-0 left-0 z-20 h-full hidden lg:block relative transition-[width] ease-in-out duration-300"),A[2]=r):r=A[2];let k;A[3]!==e||A[4]!==t?(k=(0,n.jsx)(qa,{isOpen:e,toggle:t}),A[3]=e,A[4]=t,A[5]=k):k=A[5];let R;A[6]===Symbol.for("react.memo_cache_sentinel")?(R=(0,n.jsx)("div",{className:"relative h-full flex flex-col px-3 pb-16 pt-14 overflow-y-auto shadow-sm border-l",children:(0,n.jsx)(ZA,{})}),A[6]=R):R=A[6];let l;return A[7]!==e||A[8]!==s||A[9]!==k?(l=(0,n.jsxs)("aside",{"data-expanded":e,style:s,className:r,children:[k,R]}),A[7]=e,A[8]=s,A[9]=k,A[10]=l):l=A[10],l};var At=B(m());const et=a=>{let A=(0,At.c)(15),{children:e}=a,[t,o]=BA(Ne),{isOpen:G,width:s}=t;if(Se(wA.SIDEBAR).length===0)return e;let r;A[0]===s?r=A[1]:(r=De(s),A[0]=s,A[1]=r);let k=r,R;A[2]!==o||A[3]!==G?(R=()=>o({type:"toggle",isOpen:!G}),A[2]=o,A[3]=G,A[4]=R):R=A[4];let l;A[5]!==G||A[6]!==k||A[7]!==R?(l=(0,n.jsx)($a,{isOpen:G,width:k,toggle:R}),A[5]=G,A[6]=k,A[7]=R,A[8]=l):l=A[8];let Z;A[9]===k?Z=A[10]:(Z=(0,n.jsx)("div",{className:"absolute top-3 left-4 flex items-center z-50",children:(0,n.jsx)(Ja,{openWidth:k})}),A[9]=k,A[10]=Z);let c;return A[11]!==e||A[12]!==l||A[13]!==Z?(c=(0,n.jsxs)("div",{className:"inset-0 absolute flex",children:[l,Z,e]}),A[11]=e,A[12]=l,A[13]=Z,A[14]=c):c=A[14],c};var at=B(m());const tt=a=>{let A=(0,at.c)(18),{width:e,connection:t,isRunning:o,children:G}=a,s=t.state,r;A[0]===o?r=A[1]:(r=(0,n.jsx)(Na,{isRunning:o}),A[0]=o,A[1]=r);let k;A[2]!==t||A[3]!==o?(k=(0,n.jsx)(Sa,{connection:t,isRunning:o}),A[2]=t,A[3]=o,A[4]=k):k=A[4];let R=s===v.CLOSED&&"disconnected",l=e==="full"&&"config-width-full",Z=e==="columns"?"overflow-x-auto":"overflow-x-hidden",c;A[5]!==R||A[6]!==l||A[7]!==Z?(c=D("mathjax_ignore",R,"bg-background w-full h-full text-textColor","flex flex-col overflow-y-auto",l,Z,"print:height-fit"),A[5]=R,A[6]=l,A[7]=Z,A[8]=c):c=A[8];let g;A[9]!==G||A[10]!==s||A[11]!==c||A[12]!==e?(g=(0,n.jsx)(Da,{children:(0,n.jsx)(et,{children:(0,n.jsx)("div",{id:"App","data-config-width":e,"data-connection-state":s,className:c,children:G})})}),A[9]=G,A[10]=s,A[11]=c,A[12]=e,A[13]=g):g=A[13];let h;return A[14]!==r||A[15]!==k||A[16]!==g?(h=(0,n.jsxs)(n.Fragment,{children:[r,k,g]}),A[14]=r,A[15]=k,A[16]=g,A[17]=h):h=A[17],h};function Gt(a){return a.kind==="missing"}function PA(a){return a.kind==="installing"}var{valueAtom:ot,useActions:st}=DA(()=>({packageAlert:null,startupLogsAlert:null,packageLogs:{}}),{addPackageAlert:(a,A)=>{var o;let e={...a.packageLogs};if(PA(A)&&A.logs&&A.log_status)for(let[G,s]of Object.entries(A.logs))switch(A.log_status){case"start":e[G]=s;break;case"append":e[G]=(e[G]||"")+s;break;case"done":e[G]=(e[G]||"")+s;break}let t=((o=a.packageAlert)==null?void 0:o.id)||vA();return{...a,packageAlert:{id:t,...A},packageLogs:e}},clearPackageAlert:(a,A)=>a.packageAlert!==null&&a.packageAlert.id===A?{...a,packageAlert:null,packageLogs:{}}:a,addStartupLog:(a,A)=>{var t;let e=((t=a.startupLogsAlert)==null?void 0:t.content)||"";return{...a,startupLogsAlert:{...a.startupLogsAlert,content:e+A.content,status:A.status}}},clearStartupLogsAlert:a=>({...a,startupLogsAlert:null})});const nt=()=>Q(ot);function IA(){return st()}var{valueAtom:rt,useActions:kt}=DA(()=>({banners:[]}),{addBanner:(a,A)=>({...a,banners:[...a.banners,{...A,id:vA()}]}),removeBanner:(a,A)=>({...a,banners:a.banners.filter(e=>e.id!==A)}),clearBanners:a=>({...a,banners:[]})});const Rt=()=>Q(rt);function TA(){return kt()}var HA=B(m());const KA=(0,f.memo)(a=>{let A=(0,HA.c)(11),{appConfig:e,mode:t,children:o}=a,{selectedLayout:G,layoutData:s}=He(),r=Q(CA);if(t==="edit"&&!r)return o;let k;if(A[0]!==t||A[1]!==G){k=G;let c=new URLSearchParams(window.location.search);if(t==="read"&&c.has(sA.viewAs)){let g=c.get(sA.viewAs);ca.includes(g)&&(k=g)}A[0]=t,A[1]=G,A[2]=k}else k=A[2];let R;A[3]===k?R=A[4]:(R=Ue.find(c=>c.type===k),A[3]=k,A[4]=R);let l=R;if(!l)return o;let Z;return A[5]!==e||A[6]!==k||A[7]!==s||A[8]!==t||A[9]!==l?(Z=(0,n.jsx)(lt,{appConfig:e,mode:t,plugin:l,layoutData:s,finalLayout:k}),A[5]=e,A[6]=k,A[7]=s,A[8]=t,A[9]=l,A[10]=Z):Z=A[10],Z});KA.displayName="CellsRenderer";const lt=a=>{let A=(0,HA.c)(18),{appConfig:e,mode:t,plugin:o,layoutData:G,finalLayout:s}=a,r=Ae(),{setCurrentLayoutData:k}=yA(),R,l,Z,c,g;if(A[0]!==e||A[1]!==s||A[2]!==G||A[3]!==t||A[4]!==r||A[5]!==o){let E=ie(r);R=o.Component,l=e,Z=t,c=E,g=G[s]||o.getInitialLayout(E),A[0]=e,A[1]=s,A[2]=G,A[3]=t,A[4]=r,A[5]=o,A[6]=R,A[7]=l,A[8]=Z,A[9]=c,A[10]=g}else R=A[6],l=A[7],Z=A[8],c=A[9],g=A[10];let h;return A[11]!==R||A[12]!==k||A[13]!==l||A[14]!==Z||A[15]!==c||A[16]!==g?(h=(0,n.jsx)(R,{appConfig:l,mode:Z,cells:c,layout:g,setLayout:k}),A[11]=R,A[12]=k,A[13]=l,A[14]=Z,A[15]=c,A[16]=g,A[17]=h):h=A[17],h};var it=class WA{constructor(A){d(this,"hasStarted",!1);d(this,"handleReadyEvent",A=>{let e=A.detail.objectId;if(!this.uiElementRegistry.has(e))return;let t=this.uiElementRegistry.lookupValue(e);t!==void 0&&this.sendComponentValues({objectIds:[e],values:[t]}).catch(o=>{C.warn(o)})});this.uiElementRegistry=A}static get INSTANCE(){let A="_marimo_private_RuntimeState";return window[A]||(window[A]=new WA(H)),window[A]}get sendComponentValues(){if(!this._sendComponentValues)throw Error("sendComponentValues is not set");return this._sendComponentValues}start(A){if(this.hasStarted){C.warn("RuntimeState already started");return}this._sendComponentValues=A,document.addEventListener(xA.TYPE,this.handleReadyEvent),this.hasStarted=!0}stop(){if(!this.hasStarted){C.warn("RuntimeState already stopped");return}document.removeEventListener(xA.TYPE,this.handleReadyEvent),this.hasStarted=!1}},Zt=class{constructor(){d(this,"CONNECTING",WebSocket.CONNECTING);d(this,"OPEN",WebSocket.OPEN);d(this,"CLOSING",WebSocket.CLOSING);d(this,"CLOSED",WebSocket.CLOSED);d(this,"binaryType","blob");d(this,"bufferedAmount",0);d(this,"extensions","");d(this,"protocol","");d(this,"url","");d(this,"onclose",null);d(this,"onerror",null);d(this,"onmessage",null);d(this,"onopen",null);d(this,"readyState",WebSocket.OPEN);d(this,"retryCount",0);d(this,"shouldReconnect",!1)}addEventListener(a,A,e){a==="open"&&!fe()&&queueMicrotask(()=>{A(new Event("open"))})}removeEventListener(a,A,e){}dispatchEvent(a){return!1}reconnect(a,A){}send(a){}close(){}};function ct(a){let{onOpen:A,onMessage:e,onClose:t,onError:o,waitToConnect:G,...s}=a,[r]=(0,f.useState)(()=>{let k=nA()?new Me(pA.INSTANCE):a.static?new Zt:new Za(s.url,void 0,{maxRetries:10,debug:!1,startClosed:!0,connectionTimeout:1e4});return A&&k.addEventListener("open",A),t&&k.addEventListener("close",t),o&&k.addEventListener("error",o),e&&k.addEventListener("message",e),k});return(0,f.useEffect)(()=>(r.readyState===WebSocket.CLOSED&&(G&&!YA()&&!nA()?G().then(()=>{r.reconnect()}).catch(k=>{C.error("Healthy connection never made",k),r.close()}):r.reconnect()),()=>{C.warn("useWebSocket is unmounting. This likely means there is a bug."),r.close(),A&&r.removeEventListener("open",A),t&&r.removeEventListener("close",t),o&&r.removeEventListener("error",o),e&&r.removeEventListener("message",e)}),[r]),r}function gt(a,A){let{autoInstantiate:e,setCells:t,setLayoutData:o,onError:G,setAppConfig:s,setCapabilities:r}=A,{codes:k,names:R,layout:l,configs:Z,resumed:c,ui_values:g,cell_ids:h,last_executed_code:E,last_execution_time:O={},app_config:P,capabilities:I}=a,M=E||{},T=O||{},S=k.map((u,Y)=>{let w=h[Y],N=!1,_=M[w];return _&&(N=_!==u),se({id:w,code:u,edited:N,name:R[Y],lastCodeRun:M[w]??null,lastExecutionTime:T[w]??null,config:Z[Y]})}),x=Ke();if(l){let u=l.type,Y=Ve({type:u,data:l.data,cells:S});x.selectedLayout=u,x.layoutData[u]=Y,o({layoutView:u,data:Y})}t(S,x);let F=pe.safeParse(P);if(F.success&&s(F.data),r(I),c){for(let[u,Y]of AA.entries(g||{}))H.set(u,Y);return}let b=[],j=[];H.entries.forEach((u,Y)=>{b.push(Y),j.push(u.value)}),Ie().sendInstantiate({objectIds:b,values:j,autoRun:e}).catch(u=>{G(Error("Failed to instantiate",{cause:u}))})}function ht(a){let A=a.cell_id;H.removeElementsByCell(A),EA.INSTANCE.removeForCellId(A)}function dt(a,A){A(a),EA.INSTANCE.track(a)}const tA={append:a=>{let A=new URL(window.location.href);A.searchParams.append(a.key,a.value),window.history.pushState({},"",`${A.pathname}${A.search}`)},set:a=>{let A=new URL(window.location.href);Array.isArray(a.value)?(A.searchParams.delete(a.key),a.value.forEach(e=>A.searchParams.append(a.key,e))):A.searchParams.set(a.key,a.value),window.history.pushState({},"",`${A.pathname}${A.search}`)},delete:a=>{let A=new URL(window.location.href);a.value==null?A.searchParams.delete(a.key):A.searchParams.delete(a.key,a.value),window.history.pushState({},"",`${A.pathname}${A.search}`)},clear:()=>{let a=new URL(window.location.href);a.search="",window.history.pushState({},"",`${a.pathname}${a.search}`)}};var Bt=B(m());const UA=qA([]),ut=()=>{let a=(0,Bt.c)(2),A=oA(UA),e;return a[0]===A?e=a[1]:(e={addSuggestions:t=>{A(o=>[...o,...t])},clearSuggestions:()=>{A([])},setSuggestions:t=>{A(t)}},a[0]=A,a[1]=e),e};var mt=B(m());function Yt(a){let A=(0,mt.c)(35),e=(0,f.useRef)(!0),{autoInstantiate:t,sessionId:o,setCells:G}=a,{showBoundary:s}=Le(),{handleCellMessage:r,setCellCodes:k,setCellIds:R}=$A(),{addCellOperation:l}=ga(),Z=xe(),{setVariables:c,setMetadata:g}=le(),{addColumnPreview:h}=uA(),{addDatasets:E,filterDatasetsFromVariables:O}=uA(),{addDataSourceConnection:P,filterDataSourcesFromVariables:I}=Ge(),{setSuggestions:M}=ut(),{setLayoutData:T}=yA(),[S,x]=BA(Te),{addBanner:F}=TA(),{addPackageAlert:b,addStartupLog:j}=IA(),u=oA(CA),Y=oA(te),w=Ye(),N;A[0]!==F||A[1]!==l||A[2]!==h||A[3]!==P||A[4]!==E||A[5]!==b||A[6]!==j||A[7]!==t||A[8]!==I||A[9]!==O||A[10]!==r||A[11]!==Z||A[12]!==Y||A[13]!==k||A[14]!==R||A[15]!==G||A[16]!==u||A[17]!==T||A[18]!==g||A[19]!==M||A[20]!==c||A[21]!==s?(N=p=>{let i=ee(p.data);switch(i.data.op){case"reload":FA();return;case"kernel-ready":gt(i.data,{autoInstantiate:t,setCells:G,setLayoutData:T,setAppConfig:Z,setCapabilities:Y,onError:s}),u(i.data.kiosk);return;case"completed-run":return;case"interrupted":return;case"send-ui-element-message":{let y=i.data.model_id,gA=i.data.ui_element,hA=i.data.message,dA=Xe(i.data);y&&Ce(hA)&&ye({modelId:y,msg:hA,buffers:dA,modelManager:ve}),gA&&H.broadcastMessage(gA,i.data.message,dA);return}case"remove-ui-elements":ht(i.data);return;case"completion-result":re.resolve(i.data.completion_id,i.data);return;case"function-call-result":Ee.resolve(i.data.function_call_id,i.data);return;case"cell-op":{dt(i.data,r);let y=ke().cellData[i.data.cell_id];if(!y)return;l({cellOperation:i.data,code:y.code});return}case"variables":c(i.data.variables.map(Dt)),O(i.data.variables.map(wt)),I(i.data.variables.map(xt));return;case"variable-values":g(i.data.variables.map(pt));return;case"alert":kA({title:i.data.title,description:ra({html:i.data.description}),variant:i.data.variant});return;case"banner":F(i.data);return;case"missing-package-alert":b({...i.data,kind:"missing"});return;case"installing-package-alert":b({...i.data,kind:"installing"});return;case"startup-logs":j({content:i.data.content,status:i.data.status});return;case"query-params-append":tA.append(i.data);return;case"query-params-set":tA.set(i.data);return;case"query-params-delete":tA.delete(i.data);return;case"query-params-clear":tA.clear();return;case"datasets":E(i.data);return;case"data-column-preview":h(i.data);return;case"sql-table-preview":ae.resolve(i.data.request_id,i.data);return;case"sql-table-list-preview":oe.resolve(i.data.request_id,i.data);return;case"validate-sql-result":ne.resolve(i.data.request_id,i.data);return;case"secret-keys-result":ia.resolve(i.data.request_id,i.data);return;case"data-source-connections":P({connections:i.data.connections.map(ft)});return;case"reconnected":return;case"focus-cell":ce(i.data.cell_id);return;case"update-cell-codes":k({codes:i.data.codes,ids:i.data.cell_ids,codeIsStale:i.data.code_is_stale});return;case"update-cell-ids":R({cellIds:i.data.cell_ids});return;case"suggestions":M(i.data.suggestions);return;default:$e(i.data)}},A[0]=F,A[1]=l,A[2]=h,A[3]=P,A[4]=E,A[5]=b,A[6]=j,A[7]=t,A[8]=I,A[9]=O,A[10]=r,A[11]=Z,A[12]=Y,A[13]=k,A[14]=R,A[15]=G,A[16]=u,A[17]=T,A[18]=g,A[19]=M,A[20]=c,A[21]=s,A[22]=N):N=A[22];let _=N,cA=(p,i)=>{e.current&&(e.current=!1,GA.reconnect(p,i))},W;A[23]===Symbol.for("react.memo_cache_sentinel")?(W=YA(),A[23]=W):W=A[23];let J;A[24]!==w||A[25]!==o?(J=()=>w.getWsURL(o).toString(),A[24]=w,A[25]=o,A[26]=J):J=A[26];let X;A[27]===x?X=A[28]:(X=async()=>{e.current=!0,x({state:v.OPEN})},A[27]=x,A[28]=X);let q;A[29]===w?q=A[30]:(q=async()=>{w.isSameOrigin||await w.waitForHealthy()},A[29]=w,A[30]=q);let z;A[31]===_?z=A[32]:(z=p=>{try{_(p)}catch(i){let y=i;C.error("Failed to handle message",y),kA({title:"Failed to handle message",description:jA(y),variant:"danger"})}},A[31]=_,A[32]=z);let GA=ct({static:W,url:J,onOpen:X,waitToConnect:q,onMessage:z,onClose:p=>{switch(C.warn("WebSocket closed",p.code,p.reason),p.reason){case"MARIMO_ALREADY_CONNECTED":x({state:v.CLOSED,code:eA.ALREADY_RUNNING,reason:"another browser tab is already connected to the kernel",canTakeover:!0}),GA.close();return;case"MARIMO_WRONG_KERNEL_ID":case"MARIMO_NO_FILE_KEY":case"MARIMO_NO_SESSION_ID":case"MARIMO_NO_SESSION":case"MARIMO_SHUTDOWN":x({state:v.CLOSED,code:eA.KERNEL_DISCONNECTED,reason:"kernel not found"}),GA.close();return;case"MARIMO_MALFORMED_QUERY":x({state:v.CLOSED,code:eA.MALFORMED_QUERY,reason:"the kernel did not recognize a request; please file a bug with marimo"});return;default:x({state:v.CONNECTING}),cA(p.code,p.reason)}},onError:p=>{C.warn("WebSocket error",p),x({state:v.CLOSED,code:eA.KERNEL_DISCONNECTED,reason:"kernel not found"}),cA()}}),$;return A[33]===S?$=A[34]:($={connection:S},A[33]=S,A[34]=$),$}function ft(a){return{...a,name:a.name}}function pt(a){return{name:a.name,dataType:a.datatype,value:a.value}}function xt(a){return a.name}function wt(a){return a.name}function Dt(a){return{name:a.name,declaredBy:a.declared_by,usedBy:a.used_by}}var vt=B(m());const Et=a=>{let A=(0,vt.c)(2),{children:e}=a,t;return A[0]===e?t=A[1]:(t=(0,n.jsx)("div",{className:"flex flex-col flex-1 overflow-hidden absolute inset-0 print:relative",children:e}),A[0]=e,A[1]=t),t};var VA=he(de(),ge([mA(),mA()])),V=null;function yt(a){return{getItem(A){if(!V)return V??null;if(a==="left")return V;try{let e=VA.parse(JSON.parse(V));return JSON.stringify(AA.mapValues(e,t=>t.reverse()))}catch{return null}},setItem(A,e){if(a!=="left")try{let t=VA.parse(JSON.parse(e));e=JSON.stringify(AA.mapValues(t,o=>o.reverse()))}catch{return null}V=e||null}}}export{it as a,TA as c,IA as d,nt as f,_A as h,UA as i,PA as l,pa as m,Et as n,KA as o,tt as p,Yt as r,Rt as s,yt as t,Gt as u};
