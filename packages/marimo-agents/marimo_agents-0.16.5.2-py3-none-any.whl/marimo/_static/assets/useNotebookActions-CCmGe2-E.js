import{s as M}from"./chunk-DZLz74EQ.js";import{i as H,n as Ue,o as Ye,r as U}from"./react-7g8sREeT.js";import{t as Ge}from"./react-BcIddLXZ.js";import{E as ce,Gn as $e,Mr as pe,Nt as he,Ot as me,Sn as ye,Wn as Fe,_ as Ke,h as te,ir as Ze,mn as Je,r as Qe,rr as Xe,tn as ue,v as et,xn as tt}from"./cells-Cu8VFzqb.js";import{n as N,t as at}from"./jsx-runtime-DvsdsEjx.js";import{H as ot,L as ae,Q as fe,_ as it,q as A,v as nt}from"./config-qe5QH71b.js";import{n as st}from"./add-database-form-9AMPOuIQ.js";import{a as oe}from"./hotkeys-B6RmRq9l.js";import{t as lt}from"./events-DeIoPUd7.js";import{t as ie}from"./button-CtXpvmEK.js";import{a as D}from"./key-Bbtykojp.js";import{t as z}from"./use-toast-DkqvBA-s.js";import{s as rt,t as dt}from"./connection-EQhJerFr.js";import{t as c}from"./createLucideIcon-D2ExLlYe.js";import{t as ct}from"./activity-DzHOnfji.js";import{a as ke,f as pt,i as be,p as xe,u as we}from"./layout-p1EuMs1Q.js";import{n as ht,t as mt}from"./square-DXca05gZ.js";import{p as yt,t as ut,u as ft}from"./state-DEI8KWfC.js";import{t as ge}from"./check-DdKonHHo.js";import{a as kt,c as bt,i as xt,n as wt,r as gt,s as jt,t as vt}from"./select-BdzgTzLI.js";import{i as je,r as Mt,t as ve}from"./download-DrHZIzG4.js";import{f as zt}from"./maps-DAonNwtj.js";import{i as Ct,o as Wt,r as _t}from"./useCellActionButton-DoblUzDk.js";import{t as Me}from"./circle-x-CmH9EBUz.js";import{t as At}from"./eye-off-Df-KAboT.js";import{t as It}from"./copy-DJ9e8Pye.js";import{t as St}from"./download-14j806nU.js";import{t as Nt}from"./file-plus-2-CYduDAHT.js";import{t as ze}from"./file-text-3f_wgMUn.js";import{t as Et}from"./file-Bpc-ngJ5.js";import{i as Pt,n as Ht,r as Dt,t as Tt}from"./youtube-ULv526h5.js";import{t as Lt}from"./globe-12Gk1aM8.js";import{t as Vt}from"./image-DaANHw5j.js";import{t as qt}from"./link-BM2JGWYr.js";import{n as Rt}from"./MarimoErrorOutput-Chpagbv6.js";import{t as Ot}from"./scroll-text-B_Wzzl3N.js";import{r as Bt}from"./input-DYl9pNu1.js";import{t as Ut}from"./settings-oUlvFQrI.js";import{t as Yt}from"./square-function-B-a0ra77.js";import{g as Gt}from"./form-gMwrtU1E.js";import{t as $t}from"./text-search-ZuMFcKHK.js";import{r as Ft}from"./useNonce-BUl5Llhg.js";import{t as Kt}from"./tooltip-Cm87HNT4.js";import{a as Ce,i as Zt,r as Jt}from"./mode-HqVxJRUR.js";import{o as Qt}from"./alert-dialog-DIUeqg2n.js";import{a as Xt,c as ea,i as ta,n as aa,r as oa}from"./dialog-C4GYD4Bo.js";import{n as ne}from"./ImperativeModal-C6f_jDAq.js";import{r as ia,t as na}from"./share-BcJf1LSd.js";import{t as Y}from"./copy-6XLAzOKk.js";import{a as We}from"./renderShortcut-B1ylL9Te.js";import{t as sa}from"./icons-nXTLRJby.js";import{t as la}from"./filename-Dae00hVY.js";import{n as ra}from"./useSplitCell-YnsAdiBF.js";import{t as da}from"./links-BOS6ZDes.js";import{t as _e}from"./types-BriObLcR.js";var ca=c("circle-chevron-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 10-4 4-4-4",key:"894hmk"}]]),pa=c("circle-chevron-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m10 8 4 4-4 4",key:"1wy4r4"}]]),Ae=c("clipboard-copy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),ha=c("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),Ie=c("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),Se=c("diamond-plus",[["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z",key:"1ey20j"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),ma=c("fast-forward",[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]]),ya=c("files",[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]]),ua=c("folder-tree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]),fa=c("hat-glasses",[["path",{d:"M14 18a2 2 0 0 0-4 0",key:"1v8fkw"}],["path",{d:"m19 11-2.11-6.657a2 2 0 0 0-2.752-1.148l-1.276.61A2 2 0 0 1 12 4H8.5a2 2 0 0 0-1.925 1.456L5 11",key:"1fkr7p"}],["path",{d:"M2 11h20",key:"3eubbj"}],["circle",{cx:"17",cy:"18",r:"3",key:"82mm0e"}],["circle",{cx:"7",cy:"18",r:"3",key:"lvkj7j"}]]),ka=c("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),ba=c("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),xa=c("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),Ne=c("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),Ee=c("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),wa=c("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),ga=c("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),Pe=c("presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),ja=c("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),va=c("square-dashed-bottom-code",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["path",{d:"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2",key:"as5y1o"}],["path",{d:"M9 21h1",key:"15o7lz"}]]),Ma=c("square-power",[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M7.998 9.003a5 5 0 1 0 8-.005",key:"1pek45"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]]),He=c("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),De=M(N()),se=M(Ge()),a=M(at()),G="https://static.marimo.app";const za=e=>{let t=(0,De.c)(25),{onClose:o}=e,[i,r]=(0,se.useState)(""),{exportAsHTML:l}=D(),n=Math.random().toString(36).slice(2,6),s=`${i}-${n}`,d=`${G}/static/${s}`,h;t[0]!==l||t[1]!==o||t[2]!==s?(h=async C=>{C.preventDefault(),o();let W=await l({download:!1,includeCode:!0,files:pt.INSTANCE.filenames()}),I=z({title:"Uploading static notebook...",description:"Please wait."});await fetch(`${G}/api/static`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html:W,path:s})}).catch(()=>{I.dismiss(),z({title:"Error uploading static page",description:(0,a.jsxs)("div",{children:["Please try again later. If the problem persists, please file a bug report on"," ",(0,a.jsx)("a",{href:A.issuesPage,target:"_blank",className:"underline",children:"GitHub"}),"."]})})}),I.dismiss(),z({title:"Static page uploaded!",description:(0,a.jsxs)("div",{children:["The URL has been copied to your clipboard.",(0,a.jsx)("br",{}),"You can share it with anyone."]})})},t[0]=l,t[1]=o,t[2]=s,t[3]=h):h=t[3];let w;t[4]===Symbol.for("react.memo_cache_sentinel")?(w=(0,a.jsx)(ea,{children:"Share static notebook"}),t[4]=w):w=t[4];let g;t[5]===Symbol.for("react.memo_cache_sentinel")?(g=(0,a.jsxs)(Xt,{children:[w,(0,a.jsxs)(oa,{children:["You can publish a static, non-interactive version of this notebook to the public web. We will create a link for you that lives on"," ",(0,a.jsx)("a",{href:G,target:"_blank",children:G}),"."]})]}),t[5]=g):g=t[5];let j;t[6]===Symbol.for("react.memo_cache_sentinel")?(j=C=>{let W=C.target.value.toLowerCase().replaceAll(/\s/g,"-").replaceAll(/[^\da-z-]/g,"");r(W)},t[6]=j):j=t[6];let y;t[7]===i?y=t[8]:(y=(0,a.jsx)(Bt,{"data-testid":"slug-input",id:"slug",autoFocus:!0,value:i,placeholder:"Notebook slug",onChange:j,required:!0,autoComplete:"off"}),t[7]=i,t[8]=y);let u;t[9]===d?u=t[10]:(u=(0,a.jsxs)("div",{className:"font-semibold text-sm text-muted-foreground gap-2 flex flex-col",children:["Anyone will be able to access your notebook at this URL:",(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Ca,{text:d}),(0,a.jsx)("span",{className:"text-primary",children:d})]})]}),t[9]=d,t[10]=u);let f;t[11]!==y||t[12]!==u?(f=(0,a.jsxs)("div",{className:"flex flex-col gap-6 py-4",children:[y,u]}),t[11]=y,t[12]=u,t[13]=f):f=t[13];let k;t[14]===o?k=t[15]:(k=(0,a.jsx)(ie,{"data-testid":"cancel-share-static-notebook-button",variant:"secondary",onClick:o,children:"Cancel"}),t[14]=o,t[15]=k);let b;t[16]===d?b=t[17]:(b=(0,a.jsx)(ie,{"data-testid":"share-static-notebook-button","aria-label":"Save",variant:"default",type:"submit",onClick:async()=>{await Y(d)},children:"Create"}),t[16]=d,t[17]=b);let x;t[18]!==k||t[19]!==b?(x=(0,a.jsxs)(ta,{children:[k,b]}),t[18]=k,t[19]=b,t[20]=x):x=t[20];let v;return t[21]!==h||t[22]!==x||t[23]!==f?(v=(0,a.jsx)(aa,{className:"w-fit",children:(0,a.jsxs)("form",{onSubmit:h,children:[g,f,x]})}),t[21]=h,t[22]=x,t[23]=f,t[24]=v):v=t[24],v};var Ca=e=>{let t=(0,De.c)(8),[o,i]=se.useState(!1),r;t[0]===e.text?r=t[1]:(r=lt.stopPropagation(async h=>{h.preventDefault(),await Y(e.text),i(!0),setTimeout(()=>i(!1),2e3)}),t[0]=e.text,t[1]=r);let l=r,n;t[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(It,{size:14,strokeWidth:1.5}),t[2]=n):n=t[2];let s;t[3]===l?s=t[4]:(s=(0,a.jsx)(ie,{"data-testid":"copy-static-notebook-url-button",onClick:l,size:"xs",variant:"secondary",children:n}),t[3]=l,t[4]=s);let d;return t[5]!==o||t[6]!==s?(d=(0,a.jsx)(Kt,{content:"Copied!",open:o,children:s}),t[5]=o,t[6]=s,t[7]=d):d=t[7],d},Wa=M(N());function Te(){let e=(0,Wa.c)(2),t=H(Ce),o;return e[0]===t?o=e[1]:(o=()=>{let i=document.getElementsByClassName("output-area"),r=window.innerHeight||document.documentElement.clientHeight,l=null;for(let n of Array.from(i)){let s=n.getBoundingClientRect();if(s.top>=0&&s.top<=r||s.bottom>=0&&s.bottom<=r){l=pe.parse(n.parentNode.id);break}}t(n=>({mode:Zt(n.mode),cellAnchor:l})),requestAnimationFrame(()=>{var n;l!==null&&((n=document.getElementById(pe.create(l)))==null||n.scrollIntoView())})},e[0]=t,e[1]=o),o}const Le=[{type:"files",Icon:ua,tooltip:"View files",position:"sidebar"},{type:"variables",Icon:Yt,tooltip:"Explore variables",position:"sidebar"},{type:"datasources",Icon:me,tooltip:"Explore data sources",position:"sidebar"},{type:"dependencies",Icon:Wt,tooltip:"Explore dependencies",position:"sidebar"},{type:"packages",Icon:yt,tooltip:"Manage packages",position:"sidebar"},{type:"outline",Icon:Ot,tooltip:"View outline",position:"sidebar"},{type:"chat",Icon:ht,tooltip:"Chat with AI",position:"sidebar"},{type:"agents",Icon:fa,tooltip:"Agents",position:"sidebar",hidden:!ue("external_agents")},{type:"documentation",Icon:$t,tooltip:"View live docs",position:"sidebar"},{type:"logs",Icon:ze,tooltip:"Notebook logs",position:"sidebar"},{type:"tracing",Icon:ct,tooltip:"Tracing",position:"sidebar"},{type:"snippets",Icon:va,tooltip:"Snippets",position:"sidebar"},{type:"secrets",Icon:ba,tooltip:"Secrets",hidden:ae(),position:"sidebar"},{type:"scratchpad",Icon:Rt,tooltip:"Scratchpad",position:"sidebar"},{type:"suggestions",Icon:Ee,tooltip:"View suggestions",position:"sidebar"},{type:"errors",Icon:Me,tooltip:"View errors",position:"footer"}],Ve=Ye(!1);var _a=M(N());const Aa=()=>{let e=(0,_a.c)(7),{selectedLayout:t}=ke(),{setLayoutView:o}=be();if(ae()&&!ue("wasm_layouts"))return null;let i;e[0]===o?i=e[1]:(i=s=>o(s),e[0]=o,e[1]=i);let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(jt,{className:"min-w-[110px] border-border bg-background","data-testid":"layout-select",children:(0,a.jsx)(bt,{placeholder:"Select a view"})}),e[2]=r):r=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(wt,{children:(0,a.jsxs)(gt,{children:[(0,a.jsx)(kt,{children:"View as"}),_e.map(Sa)]})}),e[3]=l):l=e[3];let n;return e[4]!==t||e[5]!==i?(n=(0,a.jsxs)(vt,{"data-testid":"layout-select",value:t,onValueChange:i,children:[r,l]}),e[4]=t,e[5]=i,e[6]=n):n=e[6],n};function Ia(e){let t=qe(e);return(0,a.jsx)(t,{className:"h-4 w-4"})}function qe(e){switch(e){case"vertical":return wa;case"grid":return Dt;case"slides":return Pe;default:return Ft(e),mt}}function Re(e){return fe(e)}function Sa(e){return(0,a.jsx)(xt,{value:e,children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5 leading-5",children:[Ia(e),(0,a.jsx)("span",{children:Re(e)})]})},e)}var Na=M(N());function Ea(e){let t=(0,Na.c)(5),{openPrompt:o,closeModal:i}=ne(),{sendCopy:r}=D(),l;return t[0]!==i||t[1]!==o||t[2]!==r||t[3]!==e?(l=()=>{if(!e)return null;let n=tt.guessDeliminator(e),s=ye.basename(e);o({title:"Copy notebook",description:"Enter a new filename for the notebook copy.",defaultValue:`_${s}`,confirmText:"Copy notebook",spellCheck:!1,onConfirm:d=>{let h=n.join(ye.dirname(e),d);r({source:e,destination:h}).then(()=>{i(),z({title:"Notebook copied",description:"A copy of the notebook has been created."}),da(h)})}})},t[0]=i,t[1]=o,t[2]=r,t[3]=e,t[4]=l):l=t[4],l}const Pa=()=>{let{updateCellConfig:e}=ce(),{saveCellConfig:t}=D();return(0,se.useCallback)(async()=>{let o=new Je,i=te(),r=i.cellIds.inOrderIds,l={};for(let s of r){if(i.cellData[s]===void 0)continue;let{code:d,config:h}=i.cellData[s];h.hide_code||o.isSupported(d)&&(l[s]={hide_code:!0})}let n=oe.entries(l);if(n.length!==0){await t({configs:l});for(let[s,d]of n)e({cellId:s,config:d})}},[e])};var Ha=M(N());function Oe(){let e=(0,Ha.c)(4),{openConfirm:t}=ne(),o=H(dt),{sendRestart:i}=D(),r;return e[0]!==t||e[1]!==i||e[2]!==o?(r=()=>{t({title:"Restart Kernel",description:"This will restart the Python kernel. You'll lose all data that's in memory. You will also lose any unsaved changes, so make sure to save your work before restarting.",variant:"destructive",confirmAction:(0,a.jsx)(Qt,{onClick:async()=>{o({state:rt.CLOSING}),await i(),ia()},"aria-label":"Confirm Restart",children:"Restart"})})},e[0]=t,e[1]=i,e[2]=o,e[3]=r):r=e[3],r}var Da=M(N()),T=e=>{e==null||e.preventDefault(),e==null||e.stopPropagation()};function Ta(){var re,de;let e=(0,Da.c)(40),t=la(),{openModal:o,closeModal:i}=ne(),{toggleApplication:r}=Fe(),{selectedPanel:l}=$e(),[n]=Ue(Ce),s=U(Jt),d=Pa(),[h]=it(),w=nt(),{updateCellConfig:g,undoDeleteCell:j,clearAllCellOutputs:y,addSetupCellIfDoesntExist:u,collapseAllCells:f,expandAllCells:k}=ce(),b=Oe(),x=ra(),v=Ea(t),C=H(Ve),W=H(ut),I=H(ft),{exportAsMarkdown:$,readCode:E,saveCellConfig:L}=D(),F=U(Ke),K=U(et),Z=U(Qe),{selectedLayout:J}=ke(),{setLayoutView:Q}=be(),V=Te(),le=((re=h.sharing)==null?void 0:re.html)??!0,q=((de=h.sharing)==null?void 0:de.wasm)??!0,Be=oo,R;e[0]===Symbol.for("react.memo_cache_sentinel")?(R=(0,a.jsx)(ja,{size:14,strokeWidth:1.5}),e[0]=R):R=e[0];let X=!le&&!q,O;e[1]===Symbol.for("react.memo_cache_sentinel")?(O=(0,a.jsx)(Lt,{size:14,strokeWidth:1.5}),e[1]=O):O=e[1];let ee=!le,S;e[2]!==i||e[3]!==o?(S=async()=>{o((0,a.jsx)(za,{onClose:i}))},e[2]=i,e[3]=o,e[4]=S):S=e[4];let B;return e[5]!==u||e[6]!==Z||e[7]!==y||e[8]!==i||e[9]!==f||e[10]!==v||e[11]!==k||e[12]!==$||e[13]!==t||e[14]!==F||e[15]!==K||e[16]!==d||e[17]!==s||e[18]!==o||e[19]!==E||e[20]!==b||e[21]!==x||e[22]!==L||e[23]!==J||e[24]!==l||e[25]!==w||e[26]!==C||e[27]!==I||e[28]!==Q||e[29]!==W||e[30]!==q||e[31]!==X||e[32]!==ee||e[33]!==S||e[34]!==r||e[35]!==V||e[36]!==j||e[37]!==g||e[38]!==n.mode?(B=[{icon:R,label:"Share",handle:T,hidden:X,dropdown:[{icon:O,label:"Publish HTML to web",hidden:ee,handle:S},{icon:(0,a.jsx)(qt,{size:14,strokeWidth:1.5}),label:"Create WebAssembly link",hidden:!q,handle:async()=>{let p=await E(),m=na({code:p.contents});await Y(m),z({title:"Copied",description:"Link copied to clipboard."})}}]},{icon:(0,a.jsx)(St,{size:14,strokeWidth:1.5}),label:"Download",handle:T,dropdown:[{icon:(0,a.jsx)(xe,{size:14,strokeWidth:1.5}),label:"Download as HTML",handle:async()=>{if(!t){z({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."});return}await we({filename:t,includeCode:!0})}},{icon:(0,a.jsx)(xe,{size:14,strokeWidth:1.5}),label:"Download as HTML (exclude code)",handle:async()=>{if(!t){z({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."});return}await we({filename:t,includeCode:!1})}},{icon:(0,a.jsx)(sa,{strokeWidth:1.5,style:{width:14,height:14}}),label:"Download as Markdown",handle:async()=>{let p=await $({download:!1});ve(new Blob([p],{type:"text/plain"}),je.toMarkdown(document.title))}},{icon:(0,a.jsx)(ha,{size:14,strokeWidth:1.5}),label:"Download Python code",handle:async()=>{let p=await E();ve(new Blob([p.contents],{type:"text/plain"}),je.toPY(document.title))}},{divider:!0,icon:(0,a.jsx)(Vt,{size:14,strokeWidth:1.5}),label:"Download as PNG",disabled:n.mode!=="present",tooltip:n.mode==="present"?void 0:(0,a.jsxs)("span",{children:["Only available in app view. ",(0,a.jsx)("br",{}),"Toggle with: ",We("global.hideCode",!1)]}),handle:ao},{icon:(0,a.jsx)(Et,{size:14,strokeWidth:1.5}),label:"Download as PDF",disabled:n.mode!=="present",tooltip:n.mode==="present"?void 0:(0,a.jsxs)("span",{children:["Only available in app view. ",(0,a.jsx)("br",{}),"Toggle with: ",We("global.hideCode",!1)]}),handle:eo}]},{divider:!0,icon:(0,a.jsx)(ga,{size:14,strokeWidth:1.5}),label:"Helper panel",handle:T,dropdown:Le.flatMap(p=>{let{type:m,Icon:_,hidden:P}=p;return P||w.disabled_panels.includes(m)?[]:{label:fe(m),rightElement:Be(l===m),icon:(0,a.jsx)(_,{size:14,strokeWidth:1.5}),handle:()=>r(m)}})},{icon:(0,a.jsx)(Pe,{size:14,strokeWidth:1.5}),label:"Present as",handle:T,dropdown:[{icon:n.mode==="present"?(0,a.jsx)(Gt,{size:14,strokeWidth:1.5}):(0,a.jsx)(Ne,{size:14,strokeWidth:1.5}),label:"Toggle app view",hotkey:"global.hideCode",handle:()=>{V()}},..._e.map((p,m)=>{let _=qe(p);return{divider:m===0,label:Re(p),icon:(0,a.jsx)(_,{size:14,strokeWidth:1.5}),rightElement:(0,a.jsx)("div",{className:"w-8 flex justify-end",children:J===p&&(0,a.jsx)(ge,{size:14})}),handle:()=>{Q(p),n.mode==="edit"&&V()}}})]},{icon:(0,a.jsx)(ya,{size:14,strokeWidth:1.5}),label:"Create notebook copy",hidden:!t||ae(),handle:v},{icon:(0,a.jsx)(Ae,{size:14,strokeWidth:1.5}),label:"Copy code to clipboard",hidden:!t,handle:async()=>{let p=await E();await Y(p.contents),z({title:"Copied",description:"Code copied to clipboard."})}},{icon:(0,a.jsx)(_t,{size:14,strokeWidth:1.5}),label:"Enable all cells",hidden:!F||s,handle:async()=>{let p=te(),m=Xe(p),_=oe.fromEntries(m.map(Xa));await L({configs:_});for(let P of m)g({cellId:P,config:{disabled:!1}})}},{icon:(0,a.jsx)(Ct,{size:14,strokeWidth:1.5}),label:"Disable all cells",hidden:!K||s,handle:async()=>{let p=te(),m=Ze(p),_=oe.fromEntries(m.map(Qa));await L({configs:_});for(let P of m)g({cellId:P,config:{disabled:!0}})}},{icon:(0,a.jsx)(At,{size:14,strokeWidth:1.5}),label:"Hide all markdown code",handle:d},{icon:(0,a.jsx)(pa,{size:14,strokeWidth:1.5}),label:"Collapse all sections",hotkey:"global.collapseAllSections",handle:f},{icon:(0,a.jsx)(ca,{size:14,strokeWidth:1.5}),label:"Expand all sections",hotkey:"global.expandAllSections",handle:k},{icon:(0,a.jsx)(Se,{size:14,strokeWidth:1.5}),label:"Add setup cell",handle:()=>{u({})}},{icon:(0,a.jsx)(Me,{size:14,strokeWidth:1.5}),label:"Clear all outputs",handle:()=>{y()}},{icon:(0,a.jsx)(ma,{size:14,strokeWidth:1.5}),label:"Re-run all cells",hotkey:"global.runAll",handle:async()=>{x()}},{icon:(0,a.jsx)(He,{size:14,strokeWidth:1.5}),label:"Undo cell deletion",hidden:!Z||s,handle:()=>{j()}},{icon:(0,a.jsx)(me,{size:14,strokeWidth:1.5}),label:"Add database connection",handle:()=>{o((0,a.jsx)(st,{onClose:i}))}},{divider:!0,icon:(0,a.jsx)(Ie,{size:14,strokeWidth:1.5}),label:"Command palette",hotkey:"global.commandPalette",handle:()=>C(Ja)},{icon:(0,a.jsx)(Ut,{size:14,strokeWidth:1.5}),label:"User settings",handle:()=>W(Za)},{icon:(0,a.jsx)(xa,{size:14,strokeWidth:1.5}),label:"Keyboard shortcuts",hotkey:"global.showHelp",handle:()=>I(Ka)},{icon:(0,a.jsx)(he,{size:14,strokeWidth:1.5}),label:"Open documentation",handle:Fa},{icon:(0,a.jsx)(zt,{size:14,strokeWidth:1.5}),label:"Resources",handle:T,dropdown:[{icon:(0,a.jsx)(he,{size:14,strokeWidth:1.5}),label:"Documentation",handle:$a},{icon:(0,a.jsx)(Pt,{size:14,strokeWidth:1.5}),label:"GitHub",handle:Ga},{icon:(0,a.jsx)(Ht,{size:14,strokeWidth:1.5}),label:"Discord Community",handle:Ya},{icon:(0,a.jsx)(Tt,{size:14,strokeWidth:1.5}),label:"YouTube",handle:Ua},{icon:(0,a.jsx)(ze,{size:14,strokeWidth:1.5}),label:"Changelog",handle:Ba}]},{divider:!0,icon:(0,a.jsx)(ka,{size:14,strokeWidth:1.5}),label:"Return home",hidden:!location.search.includes("file")||w.disable_home_page,handle:Oa},{icon:(0,a.jsx)(Nt,{size:14,strokeWidth:1.5}),label:"New notebook",hidden:!location.search.includes("file"),handle:Ra},{icon:(0,a.jsx)(Ma,{size:14,strokeWidth:1.5}),label:"Restart kernel",variant:"danger",handle:b}].filter(qa).map(La),e[5]=u,e[6]=Z,e[7]=y,e[8]=i,e[9]=f,e[10]=v,e[11]=k,e[12]=$,e[13]=t,e[14]=F,e[15]=K,e[16]=d,e[17]=s,e[18]=o,e[19]=E,e[20]=b,e[21]=x,e[22]=L,e[23]=J,e[24]=l,e[25]=w,e[26]=C,e[27]=I,e[28]=Q,e[29]=W,e[30]=q,e[31]=X,e[32]=ee,e[33]=S,e[34]=r,e[35]=V,e[36]=j,e[37]=g,e[38]=n.mode,e[39]=B):B=e[39],B}function La(e){return e.dropdown?{...e,dropdown:e.dropdown.filter(Va)}:e}function Va(e){return!e.hidden}function qa(e){return!e.hidden}function Ra(){let e=ot();window.open(e,"_blank")}function Oa(){let e=document.baseURI.split("?")[0];window.open(e,"_self")}function Ba(){window.open(A.releasesPage,"_blank")}function Ua(){window.open(A.youtube,"_blank")}function Ya(){window.open(A.discordLink,"_blank")}function Ga(){window.open(A.githubPage,"_blank")}function $a(){window.open(A.docsPage,"_blank")}function Fa(){window.open(A.docsPage,"_blank")}function Ka(e){return!e}function Za(e){return!e}function Ja(e){return!e}function Qa(e){return[e,{disabled:!0}]}function Xa(e){return[e,{disabled:!1}]}async function eo(){let e=new Event("export-beforeprint"),t=new Event("export-afterprint");(function(){window.dispatchEvent(e),setTimeout(to,0),setTimeout(()=>window.dispatchEvent(t),0)})()}function to(){return window.print()}async function ao(){let e=document.getElementById("App");e&&await Mt(e,document.title)}function oo(e){return(0,a.jsx)("div",{className:"w-8 flex justify-end",children:e&&(0,a.jsx)(ge,{size:14})})}export{Le as a,Ee as c,Ie as d,Ae as f,Ve as i,Ne as l,Oe as n,Te as o,Aa as r,He as s,Ta as t,Se as u};
