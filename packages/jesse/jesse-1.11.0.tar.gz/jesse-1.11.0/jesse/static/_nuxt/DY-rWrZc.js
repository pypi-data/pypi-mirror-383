import{ag as _e,g as Q,ah as Z,h as D,ai as fe,v as le,x as Be,aj as De,ak as ge,al as d,am as H,an as x,ao as Re,ap as te,aq as Fe,ar as ye,as as ke,at as N,au as de,av as ce,F as W,aw as R,r as O,ax as He,ay as me,az as ze,aA as J,aB as Ge,aC as Ke,aD as qe,aE as We,aF as Xe,aG as Je,aH as be,aI as L,aJ as pe,aK as Ie,aL as ae,a as Ae,j as ne,k as M,o as b,w as U,d as T,l as V,c as B,m as E,B as K,b as P,aM as we,aN as X,y as Qe,aO as Oe,aP as oe,aQ as ve,aR as Ye,i as Pe,aS as Ze,aT as et,aU as Ue,p as se,t as q,N as tt,e as at,q as he,aV as je,aW as ot,aX as re,aY as Ce,W as lt,T as nt,a3 as st,A as rt,ab as $e,ac as Ee,X as it,K as ie,H as G}from"./DClyChXX.js";import{_ as ut}from"./Cyc7KzJj.js";import{_ as Ve}from"./AmEUVatr.js";const dt={wrapper:"relative overflow-x-auto",base:"min-w-full table-fixed",divide:"divide-y divide-gray-300 dark:divide-gray-700",thead:"relative",tbody:"divide-y divide-gray-200 dark:divide-gray-800",tr:{base:"",selected:"bg-gray-50 dark:bg-gray-800/50",active:"hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer"},th:{base:"text-left rtl:text-right",padding:"px-4 py-3.5",color:"text-gray-900 dark:text-white",font:"font-semibold",size:"text-sm"},td:{base:"whitespace-nowrap",padding:"px-4 py-4",color:"text-gray-500 dark:text-gray-400",font:"",size:"text-sm"},checkbox:{padding:"ps-4"},loadingState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4 animate-spin"},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},progress:{wrapper:"absolute inset-x-0 -bottom-[0.5px] p-0"},default:{sortAscIcon:"i-heroicons-bars-arrow-up-20-solid",sortDescIcon:"i-heroicons-bars-arrow-down-20-solid",sortButton:{icon:"i-heroicons-arrows-up-down-20-solid",trailing:!0,square:!0,color:"gray",variant:"ghost",class:"-m-1.5"},progress:{color:"primary",animation:"carousel"},loadingState:{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."},emptyState:{icon:"i-heroicons-circle-stack-20-solid",label:"No items."}}},ct={wrapper:"relative",container:"z-50 group",trigger:"inline-flex w-full",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},overlay:{base:"fixed inset-0 transition-opacity z-50",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enterActiveClass:"ease-out duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in duration-150",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"}},popper:{strategy:"fixed"},default:{openDelay:0,closeDelay:0},arrow:_e};var pt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(pt||{});let xe=Symbol("PopoverContext");function Se(e){let c=be(xe,null);if(c===null){let w=new Error(`<${e} /> is missing a parent <${Me.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(w,Se),w}return c}let vt=Symbol("PopoverGroupContext");function Le(){return be(vt,null)}let Ne=Symbol("PopoverPanelContext");function ft(){return be(Ne,null)}let Me=Q({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:c,attrs:w,expose:F}){var C;let $=O(null);F({el:$,$el:$});let t=O(1),l=O(null),v=O(null),f=O(null),s=O(null),h=D(()=>fe($)),S=D(()=>{var a,i;if(!d(l)||!d(s))return!1;for(let z of document.querySelectorAll("body > *"))if(Number(z==null?void 0:z.contains(d(l)))^Number(z==null?void 0:z.contains(d(s))))return!0;let p=me(),u=p.indexOf(d(l)),A=(u+p.length-1)%p.length,j=(u+1)%p.length,Y=p[A],ee=p[j];return!((a=d(s))!=null&&a.contains(Y))&&!((i=d(s))!=null&&i.contains(ee))}),k={popoverState:t,buttonId:O(null),panelId:O(null),panel:s,button:l,isPortalled:S,beforePanelSentinel:v,afterPanelSentinel:f,togglePopover(){t.value=J(t.value,{0:1,1:0})},closePopover(){t.value!==1&&(t.value=1)},close(a){k.closePopover();let i=a?a instanceof HTMLElement?a:a.value instanceof HTMLElement?d(a):d(k.button):d(k.button);i==null||i.focus()}};De(xe,k),ze(D(()=>J(t.value,{0:te.Open,1:te.Closed})));let I={buttonId:k.buttonId,panelId:k.panelId,close(){k.closePopover()}},n=Le(),r=n==null?void 0:n.registerPopover,[g,y]=Ge(),m=Ke({mainTreeNodeRef:n==null?void 0:n.mainTreeNodeRef,portals:g,defaultContainers:[l,s]});function o(){var a,i,p,u;return(u=n==null?void 0:n.isFocusWithinPopoverGroup())!=null?u:((a=h.value)==null?void 0:a.activeElement)&&(((i=d(l))==null?void 0:i.contains(h.value.activeElement))||((p=d(s))==null?void 0:p.contains(h.value.activeElement)))}return ge(()=>r==null?void 0:r(I)),qe((C=h.value)==null?void 0:C.defaultView,"focus",a=>{var i,p;a.target!==window&&a.target instanceof HTMLElement&&t.value===0&&(o()||l&&s&&(m.contains(a.target)||(i=d(k.beforePanelSentinel))!=null&&i.contains(a.target)||(p=d(k.afterPanelSentinel))!=null&&p.contains(a.target)||k.closePopover()))},!0),We(m.resolveContainers,(a,i)=>{var p;k.closePopover(),Xe(i,Je.Loose)||(a.preventDefault(),(p=d(l))==null||p.focus())},D(()=>t.value===0)),()=>{let a={open:t.value===0,close:k.close};return N(W,[N(y,{},()=>ye({theirProps:{...e,...w},ourProps:{ref:$},slot:a,slots:c,attrs:w,name:"Popover"})),N(m.MainTreeNode)])}}}),gt=Q({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:c,slots:w,expose:F}){var C;let $=(C=e.id)!=null?C:`headlessui-popover-button-${Z()}`,t=Se("PopoverButton"),l=D(()=>fe(t.button));F({el:t.button,$el:t.button}),le(()=>{t.buttonId.value=$}),Be(()=>{t.buttonId.value=null});let v=Le(),f=v==null?void 0:v.closeOthers,s=ft(),h=D(()=>s===null?!1:s.value===t.panelId.value),S=O(null),k=`headlessui-focus-sentinel-${Z()}`;h.value||ge(()=>{t.button.value=d(S)});let I=He(D(()=>({as:e.as,type:c.type})),S);function n(a){var i,p,u,A,j;if(h.value){if(t.popoverState.value===1)return;switch(a.key){case R.Space:case R.Enter:a.preventDefault(),(p=(i=a.target).click)==null||p.call(i),t.closePopover(),(u=d(t.button))==null||u.focus();break}}else switch(a.key){case R.Space:case R.Enter:a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(f==null||f(t.buttonId.value)),t.togglePopover();break;case R.Escape:if(t.popoverState.value!==0)return f==null?void 0:f(t.buttonId.value);if(!d(t.button)||(A=l.value)!=null&&A.activeElement&&!((j=d(t.button))!=null&&j.contains(l.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),t.closePopover();break}}function r(a){h.value||a.key===R.Space&&a.preventDefault()}function g(a){var i,p;e.disabled||(h.value?(t.closePopover(),(i=d(t.button))==null||i.focus()):(a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(f==null||f(t.buttonId.value)),t.togglePopover(),(p=d(t.button))==null||p.focus()))}function y(a){a.preventDefault(),a.stopPropagation()}let m=Fe();function o(){let a=d(t.panel);if(!a)return;function i(){J(m.value,{[L.Forwards]:()=>H(a,x.First),[L.Backwards]:()=>H(a,x.Last)})===pe.Error&&H(me().filter(p=>p.dataset.headlessuiFocusGuard!=="true"),J(m.value,{[L.Forwards]:x.Next,[L.Backwards]:x.Previous}),{relativeTo:d(t.button)})}i()}return()=>{let a=t.popoverState.value===0,i={open:a},{...p}=e,u=h.value?{ref:S,type:I.value,onKeydown:n,onClick:g}:{ref:S,id:$,type:I.value,"aria-expanded":t.popoverState.value===0,"aria-controls":d(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:n,onKeyup:r,onClick:g,onMousedown:y};return N(W,[ye({ourProps:u,theirProps:{...c,...p},slot:i,attrs:c,slots:w,name:"PopoverButton"}),a&&!h.value&&t.isPortalled.value&&N(de,{id:k,features:ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:o})])}}}),yt=Q({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:c,slots:w,expose:F}){var C;let $=(C=e.id)!=null?C:`headlessui-popover-panel-${Z()}`,{focus:t}=e,l=Se("PopoverPanel"),v=D(()=>fe(l.panel)),f=`headlessui-focus-sentinel-before-${Z()}`,s=`headlessui-focus-sentinel-after-${Z()}`;F({el:l.panel,$el:l.panel}),le(()=>{l.panelId.value=$}),Be(()=>{l.panelId.value=null}),De(Ne,l.panelId),ge(()=>{var y,m;if(!t||l.popoverState.value!==0||!l.panel)return;let o=(y=v.value)==null?void 0:y.activeElement;(m=d(l.panel))!=null&&m.contains(o)||H(d(l.panel),x.First)});let h=Re(),S=D(()=>h!==null?(h.value&te.Open)===te.Open:l.popoverState.value===0);function k(y){var m,o;switch(y.key){case R.Escape:if(l.popoverState.value!==0||!d(l.panel)||v.value&&!((m=d(l.panel))!=null&&m.contains(v.value.activeElement)))return;y.preventDefault(),y.stopPropagation(),l.closePopover(),(o=d(l.button))==null||o.focus();break}}function I(y){var m,o,a,i,p;let u=y.relatedTarget;u&&d(l.panel)&&((m=d(l.panel))!=null&&m.contains(u)||(l.closePopover(),((a=(o=d(l.beforePanelSentinel))==null?void 0:o.contains)!=null&&a.call(o,u)||(p=(i=d(l.afterPanelSentinel))==null?void 0:i.contains)!=null&&p.call(i,u))&&u.focus({preventScroll:!0})))}let n=Fe();function r(){let y=d(l.panel);if(!y)return;function m(){J(n.value,{[L.Forwards]:()=>{var o;H(y,x.First)===pe.Error&&((o=d(l.afterPanelSentinel))==null||o.focus())},[L.Backwards]:()=>{var o;(o=d(l.button))==null||o.focus({preventScroll:!0})}})}m()}function g(){let y=d(l.panel);if(!y)return;function m(){J(n.value,{[L.Forwards]:()=>{let o=d(l.button),a=d(l.panel);if(!o)return;let i=me(),p=i.indexOf(o),u=i.slice(0,p+1),A=[...i.slice(p+1),...u];for(let j of A.slice())if(j.dataset.headlessuiFocusGuard==="true"||a!=null&&a.contains(j)){let Y=A.indexOf(j);Y!==-1&&A.splice(Y,1)}H(A,x.First,{sorted:!1})},[L.Backwards]:()=>{var o;H(y,x.Previous)===pe.Error&&((o=d(l.button))==null||o.focus())}})}m()}return()=>{let y={open:l.popoverState.value===0,close:l.close},{focus:m,...o}=e,a={ref:l.panel,id:$,onKeydown:k,onFocusout:t&&l.popoverState.value===0?I:void 0,tabIndex:-1};return ye({ourProps:a,theirProps:{...c,...o},attrs:c,slot:y,slots:{...w,default:(...i)=>{var p;return[N(W,[S.value&&l.isPortalled.value&&N(de,{id:f,ref:l.beforePanelSentinel,features:ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:r}),(p=w.default)==null?void 0:p.call(w,...i),S.value&&l.isPortalled.value&&N(de,{id:s,ref:l.afterPanelSentinel,features:ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:g})])]}},features:ke.RenderStrategy|ke.Static,visible:S.value,name:"PopoverPanel"})}}});const ue=Ie(ae.ui.strategy,ae.ui.popover,ct),mt=Q({components:{HPopover:Me,HPopoverButton:gt,HPopoverPanel:yt},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:()=>ue.default.openDelay},closeDelay:{type:Number,default:()=>ue.default.closeDelay},overlay:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:c}){const{ui:w,attrs:F}=Oe("popover",oe(e,"ui"),ue,oe(e,"class")),C=D(()=>ve(e.mode==="hover"?{offsetDistance:0}:{},e.popper,w.value.popper)),[$,t]=Ye(C.value),l=O(null),v=O(null);let f=null,s=null;le(()=>{var g,y;const n=(g=l.value)==null?void 0:g.$.provides;if(!n)return;const r=Object.getOwnPropertySymbols(n);v.value=r.length&&n[r[0]],e.open&&((y=v.value)==null||y.togglePopover())});const h=D(()=>{var y,m,o;if(e.mode!=="hover")return{};const n=((y=e.popper)==null?void 0:y.offsetDistance)||((m=w.value.popper)==null?void 0:m.offsetDistance)||8,r=(o=C.value.placement)==null?void 0:o.split("-")[0],g=`${n}px`;return r==="top"||r==="bottom"?{paddingTop:g,paddingBottom:g}:r==="left"||r==="right"?{paddingLeft:g,paddingRight:g}:{paddingTop:g,paddingBottom:g,paddingLeft:g,paddingRight:g}});function S(){v.value&&(v.value.popoverState===0?v.value.closePopover():v.value.togglePopover())}function k(){e.mode!=="hover"||!v.value||(s&&(clearTimeout(s),s=null),v.value.popoverState!==0&&(f=f||setTimeout(()=>{v.value.togglePopover&&v.value.togglePopover(),f=null},e.openDelay)))}function I(){e.mode!=="hover"||!v.value||(f&&(clearTimeout(f),f=null),v.value.popoverState!==1&&(s=s||setTimeout(()=>{v.value.closePopover&&v.value.closePopover(),s=null},e.closeDelay)))}return Pe(()=>e.open,(n,r)=>{v.value&&(r===void 0||n===r||(n?v.value.popoverState=0:v.value.closePopover()))}),Pe(()=>{var n;return(n=v.value)==null?void 0:n.popoverState},(n,r)=>{r===void 0||n===r||c("update:open",n===0)}),Ze(()=>et()),{ui:w,attrs:F,popover:l,popper:C,trigger:$,container:t,containerStyle:h,onTouchStart:S,onMouseEnter:k,onMouseLeave:I}}}),bt=["disabled"];function ht(e,c,w,F,C,$){const t=ne("HPopoverButton"),l=ne("HPopoverPanel"),v=ne("HPopover");return b(),M(v,X({ref:"popover",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:U(({open:f,close:s})=>[T(t,{ref:"trigger",as:"div",disabled:e.disabled,class:E(e.ui.trigger),role:"button",onMouseenter:e.onMouseEnter,onTouchstartPassive:e.onTouchStart},{default:U(()=>[K(e.$slots,"default",{open:f,close:s},()=>[P("button",{disabled:e.disabled}," Open ",8,bt)])]),_:2},1032,["disabled","class","onMouseenter","onTouchstartPassive"]),e.overlay?(b(),M(we,X({key:0,appear:""},e.ui.overlay.transition),{default:U(()=>[f?(b(),B("div",{key:0,class:E([e.ui.overlay.base,e.ui.overlay.background])},null,2)):V("",!0)]),_:2},1040)):V("",!0),f?(b(),B("div",{key:1,ref:"container",class:E([e.ui.container,e.ui.width]),style:Qe(e.containerStyle)},[T(we,X({appear:""},e.ui.transition),{default:U(()=>[P("div",null,[e.popper.arrow?(b(),B("div",{key:0,"data-popper-arrow":"",class:E(Object.values(e.ui.arrow))},null,2)):V("",!0),T(l,{class:E([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:U(()=>[K(e.$slots,"panel",{open:f,close:s})]),_:2},1032,["class"])])]),_:2},1040)],6)):V("",!0)]),_:3},16,["class","onMouseleave"])}const St=Ae(mt,[["render",ht]]);function kt(e){return e?e[0].toUpperCase()+e.slice(1):""}const _=Ie(ae.ui.strategy,ae.ui.table,dt);function wt(e,c){return e===c}function Te(e,c,w){return e===c?0:w==="asc"?e<c?-1:1:e>c?-1:1}const Pt=Q({components:{UIcon:je,UButton:he,UProgress:Ve,UCheckbox:Ue},inheritAttrs:!1,props:{modelValue:{type:Array,default:null},by:{type:[String,Function],default:()=>wt},rows:{type:Array,default:()=>[]},columns:{type:Array,default:null},columnAttribute:{type:String,default:"label"},sort:{type:Object,default:()=>({})},sortMode:{type:String,default:"auto"},sortButton:{type:Object,default:()=>_.default.sortButton},sortAscIcon:{type:String,default:()=>_.default.sortAscIcon},sortDescIcon:{type:String,default:()=>_.default.sortDescIcon},loading:{type:Boolean,default:!1},loadingState:{type:Object,default:()=>_.default.loadingState},emptyState:{type:Object,default:()=>_.default.emptyState},progress:{type:Object,default:()=>_.default.progress},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","update:sort"],setup(e,{emit:c,attrs:w}){const{ui:F,attrs:C}=Oe("table",oe(e,"ui"),_,oe(e,"class")),$=D(()=>e.columns??Object.keys(e.rows[0]??{}).map(o=>({key:o,label:kt(o),sortable:!1,class:void 0,sort:Te}))),t=ot(e,"sort",c,{passive:!0,defaultValue:ve({},e.sort,{column:null,direction:"asc"})}),l={column:t.value.column,direction:null},v=D(()=>{var i;if(!((i=t.value)!=null&&i.column)||e.sortMode==="manual")return e.rows;const{column:o,direction:a}=t.value;return e.rows.slice().sort((p,u)=>{var ee;const A=re(p,o),j=re(u,o);return(((ee=$.value.find(z=>z.key===o))==null?void 0:ee.sort)??Te)(A,j,a)})}),f=D({get(){return e.modelValue},set(o){c("update:modelValue",o)}}),s=D(()=>f.value&&f.value.length>0&&f.value.length<e.rows.length),h=D(()=>e.emptyState===null?null:{...F.value.default.emptyState,...e.emptyState}),S=D(()=>e.loadingState===null?null:{...F.value.default.loadingState,...e.loadingState});function k(o,a){if(typeof e.by=="string"){const i=e.by;return(o==null?void 0:o[i])===(a==null?void 0:a[i])}return e.by(o,a)}function I(o){return e.modelValue?f.value.some(a=>k(Ce(a),Ce(o))):!1}function n(o){if(t.value.column===o.key){const a=!o.direction||o.direction==="asc"?"desc":"asc";t.value.direction===a?t.value=ve({},l,{column:null,direction:"asc"}):t.value={column:t.value.column,direction:t.value.direction==="asc"?"desc":"asc"}}else t.value={column:o.key,direction:o.direction||"asc"}}function r(o){w.onSelect&&w.onSelect(o)}function g(){e.rows.forEach(o=>{I(o)||f.value.push(o)})}function y(o){o.target.checked?g():f.value=[]}function m(o,a,i=""){return re(o,a,i)}return{ui:F,attrs:C,sort:t,columns:$,rows:v,selected:f,indeterminate:s,emptyState:h,loadingState:S,isSelected:I,onSort:n,onSelect:r,onChange:y,getRowData:m}}}),Ct={key:1},$t={key:0},Et={key:0},Tt=["colspan"],Bt={key:1},Dt=["colspan"],Ft=["onClick"];function It(e,c,w,F,C,$){const t=Ue,l=he,v=Ve,f=je;return b(),B("div",X({class:e.ui.wrapper},e.attrs),[P("table",{class:E([e.ui.base,e.ui.divide])},[P("thead",{class:E(e.ui.thead)},[P("tr",{class:E(e.ui.tr.base)},[e.modelValue?(b(),B("th",{key:0,scope:"col",class:E(e.ui.checkbox.padding)},[T(t,{"model-value":e.indeterminate||e.selected.length===e.rows.length,indeterminate:e.indeterminate,"aria-label":"Select all",onChange:e.onChange},null,8,["model-value","indeterminate","onChange"])],2)):V("",!0),(b(!0),B(W,null,se(e.columns,(s,h)=>(b(),B("th",{key:h,scope:"col",class:E([e.ui.th.base,e.ui.th.padding,e.ui.th.color,e.ui.th.font,e.ui.th.size,s.class])},[K(e.$slots,`${s.key}-header`,{column:s,sort:e.sort,onSort:e.onSort},()=>[s.sortable?(b(),M(l,X({key:0,ref_for:!0},{...e.ui.default.sortButton||{},...e.sortButton},{icon:!e.sort.column||e.sort.column!==s.key?e.sortButton.icon||e.ui.default.sortButton.icon:e.sort.direction==="asc"?e.sortAscIcon:e.sortDescIcon,label:s[e.columnAttribute],onClick:S=>e.onSort(s)}),null,16,["icon","label","onClick"])):(b(),B("span",Ct,q(s[e.columnAttribute]),1))])],2))),128))],2),e.loading&&e.progress?(b(),B("tr",$t,[P("td",{colspan:0,class:E(e.ui.progress.wrapper)},[T(v,X({...e.ui.default.progress||{},...e.progress},{size:"2xs"}),null,16)],2)])):V("",!0)],2),P("tbody",{class:E(e.ui.tbody)},[e.loadingState&&e.loading&&!e.rows.length?(b(),B("tr",Et,[P("td",{colspan:e.columns.length+(e.modelValue?1:0)},[K(e.$slots,"loading-state",{},()=>[P("div",{class:E(e.ui.loadingState.wrapper)},[e.loadingState.icon?(b(),M(f,{key:0,name:e.loadingState.icon,class:E(e.ui.loadingState.icon),"aria-hidden":"true"},null,8,["name","class"])):V("",!0),P("p",{class:E(e.ui.loadingState.label)},q(e.loadingState.label),3)],2)])],8,Tt)])):e.emptyState&&!e.rows.length?(b(),B("tr",Bt,[P("td",{colspan:e.columns.length+(e.modelValue?1:0)},[K(e.$slots,"empty-state",{},()=>[P("div",{class:E(e.ui.emptyState.wrapper)},[e.emptyState.icon?(b(),M(f,{key:0,name:e.emptyState.icon,class:E(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):V("",!0),P("p",{class:E(e.ui.emptyState.label)},q(e.emptyState.label),3)],2)])],8,Dt)])):(b(!0),B(W,{key:2},se(e.rows,(s,h)=>(b(),B("tr",{key:h,class:E([e.ui.tr.base,e.isSelected(s)&&e.ui.tr.selected,e.$attrs.onSelect&&e.ui.tr.active,s==null?void 0:s.class]),onClick:()=>e.onSelect(s)},[e.modelValue?(b(),B("td",{key:0,class:E(e.ui.checkbox.padding)},[T(t,{modelValue:e.selected,"onUpdate:modelValue":c[0]||(c[0]=S=>e.selected=S),value:s,"aria-label":"Select row",onClick:c[1]||(c[1]=tt(()=>{},["stop"]))},null,8,["modelValue","value"])],2)):V("",!0),(b(!0),B(W,null,se(e.columns,(S,k)=>{var I;return b(),B("td",{key:k,class:E([e.ui.td.base,e.ui.td.padding,e.ui.td.color,e.ui.td.font,e.ui.td.size,(I=s[S.key])==null?void 0:I.class])},[K(e.$slots,`${S.key}-data`,{column:S,row:s,index:h,getRowData:n=>e.getRowData(s,S.key,n)},()=>[at(q(e.getRowData(s,S.key)),1)])],2)}),128))],10,Ft))),128))],2)],2)],16)}const At=Ae(Pt,[["render",It]]),Ot={class:"container my-8 pb-24"},Ut={class:"flex justify-between items-center mb-6"},jt={class:"flex gap-4 mb-6"},Vt={class:"flex flex-col items-center justify-center py-12 gap-4"},xt={key:0},Lt={class:"flex flex-col items-center gap-2"},Nt={key:1},Mt={class:"flex items-center gap-2"},_t={class:"p-4 space-y-4"},Rt={class:"flex justify-end gap-2"},Kt=Q({__name:"manage",setup(e){const c=lt(),w=nt(),F=O(!1),C=O(!1),$=O(new Set),t=O({exchange:"",symbol:""}),l=[{key:"exchange",label:"Exchange"},{key:"symbol",label:"Symbol"},{key:"start_date",label:"Start Date"},{key:"end_date",label:"End Date"},{key:"actions",label:"Actions"}],v=D(()=>{let n=c.existingCandles;return t.value.exchange&&(n=n.filter(r=>r.exchange.toLowerCase().includes(t.value.exchange.toLowerCase()))),t.value.symbol&&(n=n.filter(r=>r.symbol.toLowerCase().includes(t.value.symbol.toLowerCase()))),n}),f=D(()=>F.value||C.value),s=n=>`${n.exchange}-${n.symbol}`;async function h(){G("success","Fetching latest candle details. This process might take from a few seconds up to a few minutes depending on the database size."),C.value=!0;try{await c.fetchExistingCandles()}finally{C.value=!1,G("success","Candles information updated successfully")}}async function S(n){const r=s(n);$.value.add(r);try{await c.deleteCandles(n.exchange,n.symbol),G("success","Candles deleted successfully")}catch{G("error","Failed to delete candles")}finally{$.value.delete(r)}}async function k(n){try{await c.updateCandles(n.exchange,n.symbol,n.start_date),G("success",`Started updating candles for ${n.symbol} on ${n.exchange}`)}catch{G("error","Failed to start candle update")}}const I=n=>w.backtestingExchangeNames.includes(n);return le(async()=>{if(!c.existingCandles.length){F.value=!0;try{await c.fetchExistingCandles()}finally{F.value=!1}}}),(n,r)=>{const g=he,y=st,m=ut,o=it,a=St,i=At,p=rt;return b(),B("div",Ot,[P("div",Ut,[T(g,{class:"shadow-sm",icon:"i-heroicons-arrow-left",variant:"outline",to:"/candles",label:"Back"}),T(g,{class:"shadow-sm",icon:"i-heroicons-arrow-path",loading:C.value,label:"Refresh",onClick:h},null,8,["loading"])]),P("div",jt,[T(y,{modelValue:t.value.exchange,"onUpdate:modelValue":r[1]||(r[1]=u=>t.value.exchange=u),class:"w-64",icon:"i-heroicons-magnifying-glass",placeholder:"Filter by Exchange",ui:{icon:{trailing:{pointer:""}}}},{trailing:U(()=>[$e(T(g,{color:"gray",variant:"link",icon:"i-heroicons-x-mark-20-solid",padded:!1,onClick:r[0]||(r[0]=u=>t.value.exchange="")},null,512),[[Ee,t.value.exchange!==""]])]),_:1},8,["modelValue"]),T(y,{modelValue:t.value.symbol,"onUpdate:modelValue":r[3]||(r[3]=u=>t.value.symbol=u),icon:"i-heroicons-magnifying-glass",placeholder:"Filter by Symbol",class:"w-64",ui:{icon:{trailing:{pointer:""}}}},{trailing:U(()=>[$e(T(g,{color:"gray",variant:"link",icon:"i-heroicons-x-mark-20-solid",padded:!1,onClick:r[2]||(r[2]=u=>t.value.symbol="")},null,512),[[Ee,t.value.symbol!==""]])]),_:1},8,["modelValue"])]),F.value?(b(),M(m,{key:0,icon:"i-heroicons-information-circle",color:"gray",title:"Loading candles...",description:"This process might take from a few seconds up to a few minutes.",class:"mb-6"})):V("",!0),T(p,null,{default:U(()=>[T(i,{rows:v.value,columns:l,loading:f.value,"loading-state":{icon:"i-heroicons-arrow-path-20-solid",label:"Loading candles..."},progress:{color:"primary",animation:"carousel"}},{"empty-state":U(()=>[P("div",Vt,[ie(c).existingCandles.length===0?(b(),B("div",xt,[r[5]||(r[5]=P("span",{class:"text-gray-500 dark:text-gray-400 mb-4 block"}," Click the button below to fetch existing candles from the database ",-1)),P("div",Lt,[T(g,{icon:"i-heroicons-arrow-path",label:"Fetch Candles",onClick:h}),r[4]||(r[4]=P("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2"}," Note: This process might take a few minutes depending on the database size ",-1))])])):(b(),B("div",Nt,r[6]||(r[6]=[P("span",{class:"text-gray-500 dark:text-gray-400"}," No candles found matching your filters ",-1)])))])]),"actions-data":U(({row:u})=>[P("div",Mt,[I(u.exchange)?(b(),M(g,{key:1,color:"teal",variant:"soft",icon:"i-heroicons-arrow-path",size:"xs",label:"Update",loading:ie(c).isSymbolUpdating(u.exchange,u.symbol),disabled:!I(u.exchange),onClick:A=>k(u)},null,8,["loading","disabled","onClick"])):(b(),M(o,{key:0,text:"This exchange doesn't support backtesting"},{default:U(()=>[T(g,{color:"teal",variant:"soft",icon:"i-heroicons-arrow-path",size:"xs",label:"Update",loading:ie(c).isSymbolUpdating(u.exchange,u.symbol),disabled:!I(u.exchange),onClick:A=>k(u)},null,8,["loading","disabled","onClick"])]),_:2},1024)),T(a,{popper:{placement:"bottom-end"}},{panel:U(({close:A})=>[P("div",_t,[P("p",null,'Are you sure you want to delete all candles for "'+q(u.symbol)+'" on "'+q(u.exchange)+'"?',1),P("div",Rt,[T(g,{color:"gray",variant:"soft",label:"Cancel",onClick:A},null,8,["onClick"]),T(g,{color:"red",variant:"soft",label:"Delete",onClick:()=>{S(u),A()}},null,8,["onClick"])])])]),default:U(()=>[T(g,{color:"red",variant:"soft",icon:"i-heroicons-trash",size:"xs",loading:$.value.has(s(u)),label:"Delete"},null,8,["loading"])]),_:2},1024)])]),_:1},8,["rows","loading"])]),_:1})])}}});export{Kt as default};
