import{_ as rt}from"./Df8SRAdQ.js";import{_ as at}from"./BQd0uCFJ.js";import{g as oe,r as h,h as O,i as q,n as qe,j as nt,c as p,o as a,k as B,l as x,d as r,m as X,b as s,t as _,F as W,p as ie,q as be,s as Re,v as $e,x as We,y as it,z as Ce,w as L,A as He,B as Pe,C as ze,D as _e,e as ye,E as dt,G as ut,H as Z,I as ct,J as Ue,K as o,L as se,M as fe,N as De,O as ft,P as Ye,Q as ne,R as Ge,S as te,T as Le,U as mt,V as Je,W as pt,X as vt,Y as gt,Z as yt,$ as bt,a0 as me,a1 as ht,a2 as wt,a3 as kt,a4 as xt,a5 as _t,a6 as $t}from"./DClyChXX.js";import{T as Ee,r as Ct,_ as Vt,a as St,b as Tt,c as jt,d as Lt}from"./5p1eMV4W.js";import{_ as Et}from"./Cyc7KzJj.js";import{_ as Rt}from"./B65OE2Ty.js";import{s as Ie,l as zt,d as Ut}from"./lA_J2Fq2.js";import{_ as Mt}from"./HOilEgTM.js";import{_ as Ot}from"./BewFpM0p.js";import{s as xe,l as Ae,d as Fe,_ as Bt,u as Nt}from"./U2EcLivl.js";import{_ as Pt}from"./BSYxhJPh.js";import{_ as Dt}from"./CB7fxO7O.js";import{u as It}from"./C3vgktDp.js";import"./BKzONYoj.js";const At={class:"w-full h-full flex flex-col"},Ft={key:0,class:"flex justify-center items-center py-8"},qt={class:"w-full relative"},Wt={key:0,class:"whitespace-pre-line select-text text-base dark:text-gray-300 w-full mb-1"},Ht={key:3,class:"mt-4 flex justify-center"},pe=1e3,Yt=oe({__name:"Logs",props:{logs:{},sections:{},totalLogs:{}},setup(P){const n=P,b=h(""),c=h(!1),i=h(!1),d=h([]),u=h(null),t=h(1),f=h(!1),k=h(pe),C=O(()=>f.value?d.value:d.value.slice(0,k.value));q(()=>n.logs,async v=>{v&&(c.value=!0,await qe(),setTimeout(()=>{d.value=v.slice(0,pe),t.value=1,f.value=v.length<=pe,c.value=!1},0),setTimeout(()=>{b.value=n.logs.join(`
`)},0))},{immediate:!0}),q(t,()=>{k.value=t.value*pe});function g(v){const y=v.target;y.scrollHeight-y.scrollTop<=y.clientHeight+50&&V()}async function V(){i.value||f.value||(i.value=!0,setTimeout(()=>{const v=t.value*pe,y=(t.value+1)*pe;if(v<n.logs.length){const E=n.logs.slice(v,y);d.value=[...d.value,...E],t.value++,f.value=y>=n.logs.length}else f.value=!0;i.value=!1},0))}return(v,y)=>{const E=nt("ULoading"),H=at,A=be;return a(),p("div",At,[c.value?(a(),p("div",Ft,[r(E,{size:"lg"})])):d.value.length?(a(),p("div",{key:2,ref_key:"logContainer",ref:u,class:X([f.value?"h-[calc(100vh-120px)]":"h-[calc(100vh-180px)]","w-full overflow-y-scroll rounded border dark:border-gray-600 bg-gray-50 dark:bg-gray-700 px-4 sm:px-6 py-2"]),onScroll:g},[s("div",qt,[f.value?(a(),p("pre",Wt,"          "+_(b.value)+`
        `,1)):(a(!0),p(W,{key:1},ie(C.value,(j,R)=>(a(),p("pre",{key:0+R,class:"whitespace-pre-line select-text text-base dark:text-gray-300 w-full mb-1"},_(j),1))),128))])],34)):(a(),B(H,{key:1})),d.value.length&&!f.value?(a(),p("div",Ht,[r(A,{loading:i.value,class:"w-full flex justify-center",label:`(loaded ${d.value.length} / ${n.logs.length}) Load All Logs`,onClick:y[0]||(y[0]=j=>f.value=!0)},null,8,["loading","label"])])):x("",!0)])}}}),Gt={class:"mt-2"},Jt={class:"ml-2"},Qt=oe({__name:"EquityCurve",props:{data:{}},setup(P){const n=Re(),b=O(()=>n.value),c=h();let i=null,d=[];const u=P;q(u.data,C=>{}),q(b,C=>{k(C)}),$e(async()=>{await t()});async function t(){Ie.width=c.value.clientWidth,i=Ee(c.value,Ie);for(const C of u.data){const g=i.addLineSeries({lineWidth:2});g.setData(C.data),d.push(g)}i.timeScale().fitContent(),k(b.value)}We(()=>{f()});function f(){i!==null&&(i.remove(),i=null),d&&(d=[])}function k(C){i===null||d===null||i.applyOptions(C==="light"?zt.chart:Ut.chart)}return(C,g)=>(a(),p(W,null,[s("div",{ref_key:"chartContainer",ref:c,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600"},null,512),s("div",Gt,[(a(!0),p(W,null,ie(C.data,V=>(a(),p("span",{key:V.name,class:"text-xs mr-2 rounded bg-white dark:bg-gray-700 p-1"},[s("span",{class:"inline-block",style:it({backgroundColor:V.color,width:"25px",height:"10px"})},null,4),s("span",Jt,_(V.name),1)]))),128))])],64))}}),Zt={class:"flex items-center justify-between"},Xt=oe({__name:"FullscreenModal",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(P){const n=Ce(P,"modelValue");return(b,c)=>{const i=be,d=He,u=ze;return a(),B(u,{modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=t=>n.value=t),fullscreen:""},{default:L(()=>[r(d,{ui:{base:"h-full flex flex-col",rounded:"",divide:"divide-y divide-gray-100 dark:divide-gray-800",body:{base:"grow"}}},{header:L(()=>[s("div",Zt,[s("div",null,[Pe(b.$slots,"title")]),r(i,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:c[0]||(c[0]=t=>n.value=!1)})])]),default:L(()=>[Pe(b.$slots,"default")]),_:3})]),_:3},8,["modelValue"])}}}),Kt=ut(Dt),es={class:"flex items-center justify-between"},ts={class:"flex flex-col space-y-4"},ss={key:0,class:"flex flex-wrap gap-2"},os={class:"flex flex-col"},ls={class:"flex items-center justify-between mb-2"},rs={class:"flex gap-2"},as=oe({__name:"BacktestStrategyCodeModal",props:_e({routes:{},exchange:{},strategyCodes:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(P){const n=P,b=Ce(P,"modelValue"),c=h(""),i=h(null),d=h(""),u=h(),t=Re(),f=O(()=>t.value==="light"?"vs-light":"vs-dark"),k=O(()=>({automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:21,readOnly:!0}));q(f,v=>{var y,E;(E=(y=u.value)==null?void 0:y.$editor)==null||E.updateOptions({theme:v})}),q(b,async v=>{v&&n.routes.length>0&&(await qe(),setTimeout(()=>{var y;(y=u.value)!=null&&y.$editor&&u.value.$editor.updateOptions({theme:f.value}),C(n.routes[0])},50))}),q(()=>n.strategyCodes,v=>{v&&c.value&&(d.value=v[c.value]||"# No strategy code snapshot available for this route")},{deep:!0,immediate:!0});function C(v){var E;const y=`${n.exchange}-${v.symbol}`;c.value=y,i.value=v,d.value=((E=n.strategyCodes)==null?void 0:E[y])||"# No strategy code snapshot available for this route"}async function g(){try{await navigator.clipboard.writeText(d.value),Z("success","Strategy code copied to clipboard")}catch(v){ct(v)}}function V(){var v;(v=i.value)!=null&&v.strategy?Ue(`/strategies/${i.value.strategy}`):Z("error","No strategy selected")}return(v,y)=>{const E=be,H=Kt,A=dt,j=He,R=ze;return a(),B(R,{modelValue:b.value,"onUpdate:modelValue":y[2]||(y[2]=U=>b.value=U),ui:{width:"sm:max-w-5xl"}},{default:L(()=>[r(j,null,{header:L(()=>[s("div",es,[y[3]||(y[3]=s("h3",{class:"text-lg font-semibold"},"Strategy Code Snapshot",-1)),r(E,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark",size:"sm",onClick:y[0]||(y[0]=U=>b.value=!1)})])]),default:L(()=>[s("div",ts,[v.routes.length>1?(a(),p("div",ss,[(a(!0),p(W,null,ie(v.routes,U=>(a(),B(E,{key:`${v.exchange}-${U.symbol}`,variant:"soft",color:"gray",disabled:c.value===`${v.exchange}-${U.symbol}`,onClick:G=>C(U)},{default:L(()=>[ye(_(U.strategy)+" â€¢ "+_(U.symbol),1)]),_:2},1032,["disabled","onClick"]))),128))])):x("",!0),s("div",os,[s("div",ls,[y[4]||(y[4]=s("label",{class:"block text-sm font-medium"},"Strategy Code",-1)),s("div",rs,[r(E,{icon:"i-heroicons-clipboard-document",label:"Copy",variant:"soft",color:"gray",size:"sm",onClick:g}),r(E,{icon:"i-heroicons-pencil-square",label:"Go to Strategy Editor",variant:"soft",color:"primary",size:"sm",onClick:V})])]),r(A,null,{default:L(()=>[r(H,{ref_key:"codeEditorRef",ref:u,modelValue:d.value,"onUpdate:modelValue":y[1]||(y[1]=U=>d.value=U),lang:"python",options:k.value,class:"border border-gray-200 dark:border-gray-800 rounded",style:{height:"500px"}},{default:L(()=>y[5]||(y[5]=[ye(" Loading editor... ")])),_:1},8,["modelValue","options"])]),_:1})])])]),_:1})]),_:1},8,["modelValue"])}}}),ns={class:"w-16 overflow-hidden"},is={class:"w-8 overflow-hidden"},ds={key:0,class:"w-full transition-all overflow-hidden duration-300 bg-gray-50 dark:bg-gray-800"},us=["onClick"],cs={class:"w-16 overflow-hidden text-center"},fs={class:"w-12 overflow-hidden text-center"},ms={class:"w-8 overflow-hidden text-center"},ps={class:"p-4"},vs={class:"mt-4"},gs={class:"w-full text-sm"},ys={class:"w-full"},bs={class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},hs={class:"w-full flex justify-between py-2 px-4"},ws={class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},ks={class:"w-full flex justify-between py-2 px-4"},xs={class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},_s={class:"w-full flex justify-between py-2 px-4"},$s={class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},Cs={class:"w-full flex justify-between py-2 px-4"},Vs={class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},Ss={class:"w-full"},Ts={class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},js={class:"w-full flex justify-between py-2 px-4"},Ls={class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},Es={key:0,class:"w-full flex justify-between py-2 px-4"},Rs={key:1,class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},zs={key:2,class:"w-full flex justify-between py-2 px-4"},Us={class:"flex justify-end mt-4"},Ms=oe({__name:"ChartOrders",props:{trade:{}},emits:["zoom","hoverbg"],setup(P,{emit:n}){const b=n,c=h(null),i=h(!1),d=h(!1);return(u,t)=>{const f=ft,k=be,C=ze;return a(),p(W,null,[r(k,{variant:"ghost",color:"gray",class:"w-full flex justify-between hover:bg-gray-100 dark:hover:bg-gray-800 text-xs border-b border-gray-100 dark:border-gray-800 rounded-none p-2",onClick:t[1]||(t[1]=g=>d.value=!o(d)),onMouseover:t[2]||(t[2]=g=>b("hoverbg",u.trade.orders[0].id))},{default:L(()=>[s("div",{class:X(["w-2 transition-all duration-300",[o(d)?"rotate-90":"rotate-0"]])},t[5]||(t[5]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-4"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1)]),2),s("div",ns,_(o(se).roundPrice(u.trade.entry_price)),1),t[6]||(t[6]=s("div",{class:"w-1 opacity-20"},"|",-1)),s("div",{class:X(["w-16 overflow-hidden",u.trade.type.toLowerCase()==="long"?"text-green-500":"text-red-500"])},_(o(fe).round(u.trade.qty,2)),3),t[7]||(t[7]=s("div",{class:"w-1 opacity-20"},"|",-1)),s("div",{class:X([[u.trade.PNL_percentage>0?"text-green-500":"text-red-500"],"w-16 overflow-hidden text-xs"])},_(o(fe).round(u.trade.PNL_percentage,2))+"% ",3),t[8]||(t[8]=s("div",{class:"w-1 opacity-20"},"|",-1)),s("div",is,[r(k,{color:"gray",size:"xs",onClick:t[0]||(t[0]=De(g=>b("zoom",u.trade.orders[0].id),["stop"]))},{default:L(()=>[r(f,{name:"i-heroicons-arrow-right"})]),_:1})])]),_:1}),o(d)?(a(),p("div",ds,[t[13]||(t[13]=Ye('<div class="flex justify-between items-center border-b-2 border-gray-200 dark:border-gray-700 px-1 py-2 text-xs"><div class="w-16 overflow-hidden italic font-bold uppercase text-center">PRICE</div><div class="w-1 opacity-20">|</div><div class="w-10 overflow-hidden italic font-bold uppercase text-center">QTY</div><div class="w-1 opacity-20">|</div><div class="w-12 overflow-hidden italic font-bold uppercase text-center">TYPE</div><div class="w-1 opacity-20">|</div><div class="w-10 overflow-hidden italic font-bold uppercase text-center">SIDE</div><div class="w-1 opacity-20">|</div><div class="w-8 overflow-hidden italic font-bold uppercase text-center"></div></div>',1)),(a(!0),p(W,null,ie(u.trade.orders,(g,V)=>(a(),p("div",{key:V,class:"w-full flex justify-between items-center hover:bg-gray-200 dark:hover:bg-gray-900 text-xs py-2 border-b border-gray-200 cursor-pointer dark:border-gray-700 px-1",onClick:v=>{c.value=g,i.value=!0}},[s("div",cs,_(o(se).roundPrice(g.price)),1),t[9]||(t[9]=s("div",{class:"w-1 opacity-20"},"|",-1)),s("div",{class:X(["w-10 overflow-hidden text-center",g.side==="buy"?"text-green-500":"text-red-500"])},_(o(fe).round(g.qty,2)),3),t[10]||(t[10]=s("div",{class:"w-1 opacity-20"},"|",-1)),s("div",fs,_(g.type),1),t[11]||(t[11]=s("div",{class:"w-1 opacity-20"},"|",-1)),s("div",{class:X([[g.side==="buy"?"text-green-500":"text-red-500"],"w-10 overflow-hidden text-center"])},_(g.side.toUpperCase()),3),t[12]||(t[12]=s("div",{class:"w-1 opacity-20"},"|",-1)),s("div",ms,[r(k,{color:"gray",size:"xs",onClick:De(v=>b("zoom",g.id),["stop"])},{default:L(()=>[r(f,{name:"i-heroicons-arrow-right"})]),_:2},1032,["onClick"])])],8,us))),128))])):x("",!0),r(C,{modelValue:o(i),"onUpdate:modelValue":t[4]||(t[4]=g=>ne(i)?i.value=g:null)},{default:L(()=>{var g,V,v,y,E,H,A,j,R,U,G;return[s("div",ps,[s("div",vs,[s("div",gs,[t[29]||(t[29]=s("h2",{class:"text-lg mb-2 font-bold italic dark:text-white text-center"}," Trade ",-1)),s("div",ys,[s("div",bs,[t[14]||(t[14]=s("div",{class:"font-bold"},"Entry Price",-1)),s("div",null,_(o(se).roundPrice(u.trade.entry_price)),1)]),s("div",hs,[t[15]||(t[15]=s("div",{class:"font-bold"},"Exit Price",-1)),s("div",null,_(o(se).roundPrice(u.trade.exit_price)),1)]),s("div",ws,[t[16]||(t[16]=s("div",{class:"font-bold"},"Qty",-1)),s("div",null,_(u.trade.qty),1)]),s("div",ks,[t[17]||(t[17]=s("div",{class:"font-bold"},"Size",-1)),s("div",null,_(o(se).roundPrice(u.trade.size)),1)]),s("div",xs,[t[18]||(t[18]=s("div",{class:"font-bold"},"PNL",-1)),s("div",{class:X([u.trade.PNL>0?"text-green-500":"text-red-500"])},_(o(fe).round(u.trade.PNL,2))+" ("+_(o(fe).round(u.trade.PNL_percentage,2))+"%) ",3)]),s("div",_s,[t[19]||(t[19]=s("div",{class:"font-bold"},"Fee",-1)),s("div",null,_(o(fe).round(u.trade.fee,2)),1)]),s("div",$s,[t[20]||(t[20]=s("div",{class:"font-bold"},"Holding Period",-1)),s("div",null,_(o(se).secondsToHumanReadable(u.trade.holding_period)),1)]),s("div",Cs,[t[21]||(t[21]=s("div",{class:"font-bold"},"Opened At",-1)),s("div",null,_(new Date(u.trade.opened_at).toLocaleString()),1)]),s("div",Vs,[t[22]||(t[22]=s("div",{class:"font-bold"},"Closed At",-1)),s("div",null,_(new Date(u.trade.closed_at).toLocaleString()),1)])]),t[30]||(t[30]=s("h2",{class:"text-lg font-bold italic dark:text-white mt-6 mb-2 text-center"}," Order ",-1)),s("div",Ss,[s("div",Ts,[t[23]||(t[23]=s("div",{class:"font-bold"},"Side",-1)),s("div",{class:X([((g=o(c))==null?void 0:g.side)==="buy"?"text-green-500":"text-red-500"])},_((v=(V=o(c))==null?void 0:V.side)==null?void 0:v.toUpperCase()),3)]),s("div",js,[t[24]||(t[24]=s("div",{class:"font-bold"},"Type",-1)),s("div",null,_((y=o(c))==null?void 0:y.type),1)]),s("div",Ls,[t[25]||(t[25]=s("div",{class:"font-bold"},"Qty",-1)),s("div",null,_((E=o(c))==null?void 0:E.qty),1)]),(H=o(c))!=null&&H.created_at?(a(),p("div",Es,[t[26]||(t[26]=s("div",{class:"font-bold"},"Created At",-1)),s("div",null,_(new Date((A=o(c))==null?void 0:A.created_at).toLocaleString()),1)])):x("",!0),(j=o(c))!=null&&j.executed_at?(a(),p("div",Rs,[t[27]||(t[27]=s("div",{class:"font-bold"},"Executed At",-1)),s("div",null,_(new Date((R=o(c))==null?void 0:R.executed_at).toLocaleString()),1)])):x("",!0),(U=o(c))!=null&&U.canceled_at?(a(),p("div",zs,[t[28]||(t[28]=s("div",{class:"font-bold"},"Canceled At",-1)),s("div",null,_(new Date((G=o(c))==null?void 0:G.canceled_at).toLocaleString()),1)])):x("",!0)])]),s("div",Us,[r(k,{color:"gray",block:"",onClick:t[3]||(t[3]=J=>i.value=!1)},{default:L(()=>t[31]||(t[31]=[ye(" Close ")])),_:1})])])])]}),_:1},8,["modelValue"])],64)}}}),Os={class:"w-0 sidebar whitespace-nowrap relative transition-all duration-300"},Bs={key:1,class:"h-full flex justify-center items-center text-xs text-gray-500"},Ns=oe({__name:"ChartSidebar",props:_e({items:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:_e(["zoom","hoverbg"],["update:modelValue"]),setup(P,{emit:n}){const b=Ce(P,"modelValue"),c=n;return(i,d)=>{const u=Ms;return a(),p("div",Os,[s("div",{class:X([b.value?"w-96 p-2":"w-0 p-0","absolute h-full overflow-y-auto border-r-2 dark:border-gray-800 transition-all duration-300 z-0"])},[i.items.length>0?(a(),p(W,{key:0},[d[2]||(d[2]=Ye('<div class="flex justify-between items-center border-b-2 p-2 text-xs dark:border-gray-800"><div class="w-2"></div><div class="w-16 overflow-hidden italic font-bold uppercase text-center">ENTRY</div><div class="w-1 opacity-20">|</div><div class="w-16 overflow-hidden italic font-bold uppercase text-center">QTY</div><div class="w-1 opacity-20">|</div><div class="w-16 overflow-hidden italic font-bold uppercase text-center">PNL</div><div class="w-1 opacity-20">|</div><div class="w-8 overflow-hidden italic font-bold uppercase text-center"></div></div>',1)),(a(!0),p(W,null,ie(i.items,(t,f)=>(a(),p("div",{key:f,class:"w-full"},[r(u,{trade:t,onZoom:d[0]||(d[0]=k=>c("zoom",k)),onHoverbg:d[1]||(d[1]=k=>c("hoverbg",k))},null,8,["trade"])]))),128))],64)):(a(),p("div",Bs," No trades were executed "))],2)])}}}),Ps={class:"w-full h-full flex justify-between border-2 border-gray-200 dark:border-gray-800 rounded-lg"},Ds={class:"w-full flex flex-col h-full border dark:border-gray-800"},Is={key:0},As=oe({__name:"BacktestCandlesChart",props:_e({form:{},results:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(P){const n=Re(),b=h(2),c=Ce(P,"modelValue"),i=P,d=h(),u=h([]);let t=null,f=null;const k=[],C=[],g=O(()=>Ge().params.id),V=O(()=>te.extraChartLines[g.value].find(w=>w.symbol===i.results.selectedRoute.symbol)),v=O(()=>n.value),y=O(()=>Ve());q(v,w=>{U(w)}),q(()=>i.results.selectedRoute.symbol,()=>{R(),setTimeout(async()=>{await E()},100)}),$e(async()=>{setTimeout(async()=>{await E()},200)}),q(c,()=>{setTimeout(()=>{H()},300)});async function E(){var de,ue,ce,F;xe.width=d.value.clientWidth,xe.height=d.value.clientHeight-Object.keys(V.value.charts).length*150,t=Ee(d.value,xe),t.applyOptions({rightPriceScale:{borderColor:v.value==="light"?"#d1d4dc":"#4b5563",minimumWidth:80},watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:`${i.results.selectedRoute.symbol} â€¢ ${i.results.selectedRoute.timeframe}`}}),f=t.addCandlestickSeries();const w=te.candles[g.value].find(T=>T.symbol===i.results.selectedRoute.symbol).candles;f.setData(w),f.setMarkers(te.orders[g.value].find(T=>T.symbol===i.results.selectedRoute.symbol).orders);const $=String(w[0].open).indexOf("."),S=$===-1?0:String(w[w.length-1].open).length-$-1;b.value!==S&&(b.value=S,(b.value<0||b.value>100)&&(b.value=0),f.applyOptions({priceFormat:{type:"price",precision:b.value,minMove:Math.pow(10,-b.value).toFixed(b.value)}}));const N=(ue=(de=te.lines[g.value])==null?void 0:de.find(T=>T.symbol===i.results.selectedRoute.symbol))==null?void 0:ue.lines;if(N)for(const T of Object.keys(N)){const z=N[T];t.addLineSeries({lineWidth:1,title:T}).setData(z.data)}const D=(F=(ce=te.horizontalLines[g.value])==null?void 0:ce.find(T=>T.symbol===i.results.selectedRoute.symbol))==null?void 0:F.lines;if(D)for(const T of Object.keys(D)){const Y=D[T];f.createPriceLine(Y)}t.timeScale().fitContent();const re=new Set;Object.keys(V.value.charts).forEach((T,z)=>{const Y={...xe};Y.width=u.value[z].clientWidth,Y.height=150;const I=Ee(u.value[z],Y);k.push(I),Object.keys(V.value.charts[T]).forEach(le=>{var he,we;const K=I.addLineSeries({lineWidth:1,title:le}),ve=(we=(he=te.horizontalExtraLines[g.value])==null?void 0:he.find(e=>e.symbol===i.results.selectedRoute.symbol))==null?void 0:we.lines[T];if(ve&&!re.has(T)){for(const e of Object.keys(ve)){const Q=ve[e];K.createPriceLine(Q)}re.add(T)}K.setData(V.value.charts[T][le].data),C.push(K)}),I.applyOptions({rightPriceScale:{borderColor:v.value==="light"?"#d1d4dc":"#4b5563",minimumWidth:80},watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:T}}),I.timeScale().subscribeVisibleLogicalRangeChange(le=>{t.timeScale().setVisibleLogicalRange(le)}),z!==Object.keys(V.value.charts).length-1&&I.timeScale().applyOptions({visible:!1})}),t.subscribeCrosshairMove(T=>{const z=A(f,T);Object.keys(V.value.charts).forEach((Y,I)=>{j(k[I],C[I],z)})}),Object.keys(V.value.charts).forEach((T,z)=>{k[z].subscribeCrosshairMove(Y=>{const I=A(C[z],Y);j(t,f,I),k.forEach((le,K)=>{K!==z&&j(le,C[K],I)})})}),t.timeScale().subscribeVisibleLogicalRangeChange(T=>{k.forEach(z=>{z.timeScale().setVisibleLogicalRange(T)})}),U(v.value),k.length>0&&t.timeScale().applyOptions({visible:!1})}function H(){var w;t!==null&&(t.applyOptions({width:(w=d.value)==null?void 0:w.clientWidth}),k.forEach($=>{var S;$.applyOptions({width:(S=d.value)==null?void 0:S.clientWidth})}))}We(()=>{R()});function A(w,$){return $.time&&$.seriesData.get(w)||null}function j(w,$,S){if(S){w.setCrosshairPosition(S.value,S.time,$);return}w.clearCrosshairPosition()}function R(){t!==null&&(t.remove(),t=null),f!==null&&(f=null),k.length>0&&(k.forEach(w=>{w.remove()}),k.length=0),C.length>0&&(C.length=0)}function U(w){t!==null&&(t.applyOptions(w==="light"?Ae.chart:Fe.chart),k.forEach($=>{$.applyOptions(w==="light"?Ae.chart:Fe.chart)}))}function G(w){const $=te.orders[g.value].find(N=>N.symbol===i.results.selectedRoute.symbol).orders,S=$.find(N=>N.order_id===w);if(S&&t){const N=(typeof S.time=="number",S.time),D=t.timeScale(),re=$[1].time-$[0].time,de=N-re*5,ue=N+re*5,ce=S.color;f==null||f.setMarkers($.map(F=>F.order_id===w?{...F,color:"#FFA500"}:F)),D.setVisibleRange({from:de,to:ue}),setTimeout(()=>{f==null||f.setMarkers($.map(F=>F.order_id===w?{...F,color:ce}:F))},2e3)}}function J(w){const $=te.orders[g.value].find(N=>N.symbol===i.results.selectedRoute.symbol).orders,S=$.find(N=>N.order_id===w);if(S&&t){const N=S.color;f==null||f.setMarkers($.map(D=>D.order_id===w?{...D,color:"#FFA500"}:D)),setTimeout(()=>{f==null||f.setMarkers($.map(D=>D.order_id===w?{...D,color:N}:D))},2e3)}}function Ve(){return i.results.trades.filter(w=>w.symbol===i.results.selectedRoute.symbol)}return(w,$)=>(a(),p("div",Ps,[r(Ns,{modelValue:c.value,"onUpdate:modelValue":$[0]||($[0]=S=>c.value=S),items:o(y),onHoverbg:$[1]||($[1]=S=>J(S)),onZoom:$[2]||($[2]=S=>G(S))},null,8,["modelValue","items"]),s("div",{class:X([[c.value?"w-[calc(100%-384px)]":"w-full"],"h-full transition-all duration-300"])},[s("div",Ds,[s("div",{ref_key:"chartContainer",ref:d,class:"rounded overflow-hidden flex-grow"},null,512),o(V)&&Object.keys(o(V).charts).length?(a(),p("div",Is,[(a(!0),p(W,null,ie(Object.keys(o(V).charts),S=>(a(),p("div",{key:S,ref_for:!0,ref_key:"extraChartsRef",ref:u,class:"relative border-t-[1.5px] dark:border-gray-800"}))),128))])):x("",!0)])],2)]))}}),Fs={key:0,class:"flex flex-col items-center justify-center select-none mt-[10%]"},qs=["textContent"],Ws={class:"mt-8"},Hs={class:"mt-8 flex flex-col gap-4"},Ys={key:0,class:"mt-4"},Gs={key:1,class:"mx-auto container mt-8"},Js={key:0},Qs={class:"mb-4 mt-4"},Zs={class:"flex items-center select-none flex-1 my-4"},Xs={class:"grid grid-cols-1 gap-6 mt-8"},Ks={key:1,class:"w-full mx-auto"},eo={key:4,class:"text-yellow-500 border-yellow-400 bg-yellow-50 dark:bg-gray-700 dark:text-yellow-400 mt-16 text-center text-2xl rounded border-2 border-dashed dark:border-gray-800 py-16 select-none"},to={class:"flex justify-start"},so={key:0,class:"flex h-[800px] border border-gray-200 dark:border-gray-800 rounded overflow-hidden"},oo={class:"w-[460px] flex-shrink-0 border-r border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900"},lo={class:"flex items-center border-b border-gray-200 dark:border-gray-800 px-6 py-3 bg-gray-50 dark:bg-gray-900"},ro={class:"flex gap-16"},ao={class:"overflow-auto"},no={class:"flex gap-12 flex-1"},io={class:"flex-1 bg-white dark:bg-gray-900"},uo={key:0},co={key:0},fo=["href"],mo=["href"],po=["href"],vo={key:5,class:"my-4"},go={key:1},yo=oe({__name:"BacktestTab",props:{form:{},results:{}},setup(P){const n=P,b=h(!1),c=h(!1),i=h(!0),d=h(!1),u=h([]),t=h([]),f=h(!1),k=h(!1),C=Le().authToken,g=h(mt().public.apiBaseUrl),V=h(!1),v=h(!1),y=h(!1),E=h(null),H=h(null),A=h(null),j=O(()=>Ge().params.id),R=Je(),U=Le(),G=pt(),J=h([]),Ve=O(()=>U.jesseSupportedTimeframes.map(e=>({label:e,value:e}))),w=O(()=>n.form.routes.map(e=>({label:`${e.strategy} â€¢ ${e.symbol}`,value:e})));n.results.selectedRoute=n.form.routes[0],$e(async()=>{setTimeout(async()=>{await U.initiate(),!n.form.exchange&&U.backtestingExchangeNames.length&&(n.form.exchange=U.backtestingExchangeNames[0]),(!n.results.showResults&&n.form.exchange||!J.value.length)&&await $()},50)});async function $(){if(n.form.exchange)try{J.value=await U.getExchangeSupportedSymbols(n.form.exchange);for(let e=0;e<n.form.routes.length;e++)J.value.includes(n.form.routes[e].symbol)||(n.form.routes[e].symbol=J.value[0]);if(n.form.data_routes.length>0)for(let e=0;e<n.form.data_routes.length;e++)J.value.includes(n.form.data_routes[e].symbol)||(n.form.data_routes[e].symbol=J.value[0])}catch(e){console.error("Error updating supported symbols:",e)}}q(()=>n.form.exchange,async(e,l)=>{e!==l&&await $()}),q([v,y],async([e,l])=>{if(e||l){const Q=await R.getSessionData(j.value);Q&&(E.value=Q.title||null,H.value=Q.description||null,A.value=Q.strategy_codes||null)}});const{cancel:S,newBacktest:N,retry:D}=R;function re(e){if(t.value.length){for(let l=0;l<t.value.length;l++)Z("error",t.value[l]);return}u.value=[],R.start(e)}function de(e){u.value=[],R.rerun(e)}const ue=e=>{if(t.value.length){for(let l=0;l<t.value.length;l++)Z("error",t.value[l]);return}u.value=[],R.startInNewTab(e)},ce=O(()=>{let e=`/download/backtest/tradingview/${n.results.generalInfo.session_id}?token=${C}`;return g.value!=="/"&&(e=g.value+e),e});O(()=>{let e=`/download/backtest/full-reports/${n.results.generalInfo.session_id}?token=${C}`;return g.value!=="/"&&(e=g.value+e),e});const F=O(()=>{let e=`/download/backtest/csv/${n.results.generalInfo.session_id}?token=${C}`;return g.value!=="/"&&(e=g.value+e),e}),T=O(()=>{let e=`/download/backtest/json/${n.results.generalInfo.session_id}?token=${C}`;return g.value!=="/"&&(e=g.value+e),e}),z=O(()=>R.formattedMetrics(j.value).length>0),Y=O(()=>se.remainingTimeText(n.results.progressbar.estimated_remaining_seconds));function I(){try{u.value.length>1e6&&Z("success","Copying large log file, please wait..."),setTimeout(()=>{navigator.clipboard.writeText(u.value.join(`
`)),Z("success","Logs copied successfully"),k.value=!0,setTimeout(()=>{k.value=!1},3e3)},0)}catch{Z("error","Failed to copy logs")}}async function le(){const e=R.missingCandlesErrors[j.value];e&&(G.forms.push({id:se.uuid(),exchange:e.exchange,symbol:e.symbol,start_date:e.start_date,executing:!1,waiting:!1,progressbar:{current:0,estimated_remaining_seconds:0},exception:{error:"",traceback:""},alert:{message:"",type:""}}),await Ue("/candles/"),await G.start(G.forms[G.forms.length-1].id))}async function K(){u.value.length===0?await ve():d.value=!0}async function ve(){b.value=!0;try{const{data:e,error:l}=await _t(`/backtest/logs/${j.value}?token=${C}`,!1);if(l.value){Z("error",l.value.message),b.value=!1;return}const Q=e.value;setTimeout(()=>{const Te=se.decompressData(Q.content).split(`
`).map(ke=>{const M=ke.match(/\[INFO \| (.*?)\] (.*)/);return M?`[${M[1]}] ${M[2]}`:ke});u.value=Te,b.value=!1,d.value=!0},0)}catch{Z("error","Failed to fetch logs"),b.value=!1}}async function he(){let e=`/backtest/download-log/${j.value}?token=${C}`;g.value!=="/"&&(e=g.value+e),window.open(e,"_blank")}async function we(){if(V.value=!0,!te.candles[j.value]){c.value=!0;const e=await R.loadChartData(j.value);if(c.value=!1,!e){Z("error","Failed to load chart data"),V.value=!1;return}}}return(e,l)=>{const Q=Yt,Se=vt,Te=bt,ke=Vt,M=be,Qe=St,Me=Et,ge=wt,Oe=Rt,Ze=jt,Be=kt,ae=xt,Xe=Qt,Ne=ht,ee=Mt,Ke=Xt,je=Ot,et=Bt,tt=Tt,st=Lt,ot=Pt,lt=as;return a(),p(W,null,[r(Te,{modelValue:o(d),"onUpdate:modelValue":l[0]||(l[0]=m=>ne(d)?d.value=m:null),title:"Logs"},{default:L(()=>[r(Q,{logs:o(u)},null,8,["logs"])]),buttons:L(()=>[r(Se,{text:"Copy",class:"inline-block",popper:{arrow:!0}},{default:L(()=>[s("button",{class:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:I},[o(k)?(a(),B(o(gt),{key:0,class:"h-6 w-6","aria-hidden":"true"})):x("",!0),!o(k)&&o(u).length!=0?(a(),B(o(Ct),{key:1,class:"h-6 w-6","aria-hidden":"true"})):x("",!0)])]),_:1}),r(Se,{text:"Download",class:"inline-block ml-2",popper:{arrow:!0}},{default:L(()=>[s("button",{class:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:he},[o(u).length!=0?(a(),B(o(yt),{key:0,class:"h-6 w-6","aria-hidden":"true"})):x("",!0)])]),_:1})]),_:1},8,["modelValue"]),e.results.executing&&!e.results.showResults?(a(),p("div",Fs,[s("div",null,[r(ke,{progress:e.results.progressbar.current},null,8,["progress"])]),e.results.exception.error?x("",!0):(a(),p("h3",{key:0,class:"mt-8 animate-pulse",textContent:_(o(Y))},null,8,qs)),s("div",Ws,[s("div",Hs,[e.results.exception.error?(a(),B(M,{key:0,color:"primary",class:"w-64 flex justify-center",icon:"i-heroicons-arrow-path",size:"xl",variant:"solid",label:"Retry",trailing:!1,onClick:l[1]||(l[1]=m=>o(D)((e._.provides[me]||e.$route).params.id))})):x("",!0),r(M,{color:"gray",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},class:"w-64 flex justify-center",icon:"i-heroicons-no-symbol",size:"xl",variant:"solid",label:"Cancel",trailing:!1,onClick:l[2]||(l[2]=m=>o(S)((e._.provides[me]||e.$route).params.id))})]),e.form.debug_mode&&e.results.exception.error?(a(),p("div",Ys,[r(M,{icon:"i-heroicons-clipboard-document-list",label:"Debugging Logs",color:"gray",size:"xl",variant:"solid",trailing:!1,class:"w-64 flex justify-center",onClick:K})])):x("",!0)]),e.results.exception.error&&e.results.executing?(a(),p("div",Gs,[r(Qe,{modelValue:o(f),"onUpdate:modelValue":l[3]||(l[3]=m=>ne(f)?f.value=m:null),title:e.results.exception.error,content:e.results.exception.traceback,mode:"backtest","debug-mode":e.form.debug_mode},null,8,["modelValue","title","content","debug-mode"])])):x("",!0)])):x("",!0),r(st,null,{left:L(()=>[!e.results.executing&&!e.results.showResults?(a(),p("div",Js,[o(R).missingCandlesErrors[o(j)]?(a(),B(Me,{key:0,icon:"i-heroicons-exclamation-triangle",color:"rose",variant:"soft",class:"mb-4"},{title:L(()=>l[29]||(l[29]=[s("h3",{class:"text-lg font-semibold"},"Missing Required Warmup Candles",-1)])),description:L(()=>[s("p",Qs,[l[30]||(l[30]=ye(" Your strategy requires ")),l[31]||(l[31]=s("strong",{class:"font-bold"},"warmup candles",-1)),ye(' for "'+_(o(R).missingCandlesErrors[o(j)].symbol)+'" on "'+_(o(R).missingCandlesErrors[o(j)].exchange)+'" starting from "'+_(o(R).missingCandlesErrors[o(j)].start_date)+'". These candles are needed for proper strategy initialization. ',1)]),r(M,{label:"Import Required Candles",icon:"i-heroicons-arrow-down-tray",onClick:le})]),_:1})):x("",!0),r(ge,{class:"mb-4",title:"Exchange"}),r(Oe,{modelValue:e.form.exchange,"onUpdate:modelValue":l[4]||(l[4]=m=>e.form.exchange=m),placeholder:"Select an exchange...",searchable:"",options:o(Le)().backtestingExchangeNames,size:"lg",class:"mt-2 mb-16"},null,8,["modelValue","options"]),r(Ze,{"total-routes-error":o(t),timeframes:o(Ve),form:e.form,results:e.results,symbols:o(J),mode:"backtest"},null,8,["total-routes-error","timeframes","form","results","symbols"]),r(ge,{class:"mt-16",title:"Duration"}),s("div",Zs,[r(Be,{modelValue:e.form.start_date,"onUpdate:modelValue":l[5]||(l[5]=m=>e.form.start_date=m),type:"date",variant:"outline",size:"lg",class:"w-full mr-2"},null,8,["modelValue"]),r(Be,{modelValue:e.form.finish_date,"onUpdate:modelValue":l[6]||(l[6]=m=>e.form.finish_date=m),type:"date",variant:"outline",size:"lg",class:"w-full ml-2"},null,8,["modelValue"])]),r(ge,{class:"mt-16",title:"Options"}),s("div",Xs,[r(ae,{modelValue:e.form.debug_mode,"onUpdate:modelValue":l[7]||(l[7]=m=>e.form.debug_mode=m),title:"Debug Mode",description:"Logs every step of the execution. Very helpful for debugging your strategy but takes a lot longer to execute"},null,8,["modelValue"]),r(ae,{modelValue:e.form.export_chart,"onUpdate:modelValue":l[8]||(l[8]=m=>e.form.export_chart=m),title:"Generate Interactive Charts",description:"Generate interactive charts for backtest results with details."},null,8,["modelValue"]),r(ae,{modelValue:e.form.export_tradingview,"onUpdate:modelValue":l[9]||(l[9]=m=>e.form.export_tradingview=m),title:"Export Tradingview",description:"Exports the executed trades in a format accepted by TradingView's Pine Editor. Useful to look at the executed orders on their chart."},null,8,["modelValue"]),r(ae,{modelValue:e.form.export_csv,"onUpdate:modelValue":l[10]||(l[10]=m=>e.form.export_csv=m),title:"Export CSV",description:"Exports executed trades in a CSV format"},null,8,["modelValue"]),r(ae,{modelValue:e.form.export_json,"onUpdate:modelValue":l[11]||(l[11]=m=>e.form.export_json=m),title:"Export JSON",description:"Exports executed trades in a JSON format"},null,8,["modelValue"]),r(ae,{modelValue:e.form.fast_mode,"onUpdate:modelValue":l[12]||(l[12]=m=>e.form.fast_mode=m),title:"Fast Mode",description:"Runs the backtest faster by using an improved algorithm. This is supposed to yield the same results; however, it's currently experimental, which is why it's an option."},null,8,["modelValue"]),r(ae,{modelValue:e.form.benchmark,"onUpdate:modelValue":l[13]||(l[13]=m=>e.form.benchmark=m),title:"Benchmark",description:"If enabled, the backtest will compare the performance of the strategy against the buy and hold strategy of the market."},null,8,["modelValue"])])])):x("",!0),e.results.showResults?(a(),p("div",Ks,[s("div",null,[o(z)?(a(),B(ge,{key:0,class:"mb-4",title:"Equity Curve"})):x("",!0),o(z)?(a(),B(Xe,{key:1,data:e.results.charts.equity_curve},null,8,["data"])):x("",!0),o(z)?(a(),B(ge,{key:2,class:"mt-16 mb-4",title:"Performance"})):x("",!0),o(z)?(a(),B(Ne,{key:3,data:o(R).formattedMetrics(o(j))},null,8,["data"])):x("",!0),o(z)?x("",!0):(a(),p("div",eo," No trades were executed via this strategy! "))]),r(Ke,{modelValue:o(V),"onUpdate:modelValue":l[17]||(l[17]=m=>ne(V)?V.value=m:null)},{title:L(()=>[s("div",to,[r(Oe,{modelValue:e.results.selectedRoute,"onUpdate:modelValue":l[14]||(l[14]=m=>e.results.selectedRoute=m),"value-attribute":"value",options:o(w)},null,8,["modelValue","options"]),r(M,{class:"ml-2",color:"gray",label:o(i)?"Hide Trades":"Show Trades",onClick:l[15]||(l[15]=m=>i.value=!o(i))},null,8,["label"])])]),default:L(()=>[o(c)?(a(),p("div",so,[s("div",oo,[s("div",lo,[s("div",ro,[r(ee,{class:"h-4 w-12"}),r(ee,{class:"h-4 w-12"}),r(ee,{class:"h-4 w-12"})])]),s("div",ao,[(a(),p(W,null,ie(14,m=>s("div",{key:m,class:"flex items-center px-4 py-3.5 border-b border-gray-200 dark:border-gray-800"},[r(ee,{class:"h-4 w-4 mr-4"}),s("div",no,[r(ee,{class:"h-4 w-14"}),r(ee,{class:"h-4 w-10"}),r(ee,{class:"h-4 w-14"})]),r(ee,{class:"h-7 w-7 rounded"})])),64))])]),s("div",io,[r(ee,{class:"w-full h-full"})])])):(a(),B(As,{key:1,modelValue:o(i),"onUpdate:modelValue":l[16]||(l[16]=m=>ne(i)?i.value=m:null),results:e.results,form:e.form},null,8,["modelValue","results","form"]))]),_:1},8,["modelValue"])])):x("",!0)]),right:L(()=>[e.results.executing?x("",!0):(a(),p("div",uo,[e.results.showResults?(a(),p("div",co,[r(M,{class:"w-full flex justify-center",icon:"i-heroicons-arrow-path",size:"xl",variant:"solid",label:"Rerun",trailing:!1,onClick:l[18]||(l[18]=m=>de((e._.provides[me]||e.$route).params.id))}),r(M,{class:"w-full flex justify-center mt-4",color:"green",icon:"i-heroicons-arrow-uturn-left",size:"xl",variant:"solid",label:"New session",trailing:!1,onClick:l[19]||(l[19]=m=>o(N)((e._.provides[me]||e.$route).params.id))}),r(M,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-pencil-square",size:"xl",variant:"solid",label:"Title & Notes",trailing:!1,onClick:l[20]||(l[20]=m=>v.value=!0)}),r(M,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-code-bracket",size:"xl",variant:"solid",label:"View Strategy Snapshot",trailing:!1,onClick:l[21]||(l[21]=m=>y.value=!0)}),e.form.debug_mode?(a(),B(M,{key:0,class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-clipboard-document-list",size:"xl",variant:"solid",label:"Debugging Logs",loading:o(b),trailing:!1,onClick:l[22]||(l[22]=m=>K())},null,8,["loading"])):x("",!0),e.form.export_chart?(a(),B(M,{key:1,class:"mt-4 flex justify-center items-center btn-secondary text-center",color:"gray",icon:"i-heroicons-chart-bar",size:"xl",block:"",variant:"solid",label:"View charts",trailing:!1,onClick:l[23]||(l[23]=m=>we())})):x("",!0),e.form.export_csv&&o(z)?(a(),p("a",{key:2,href:o(F),target:"_blank",class:"flex justify-center items-center btn-secondary text-center w-full"},[r(M,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"CSV",trailing:!1})],8,fo)):x("",!0),e.form.export_json&&o(z)?(a(),p("a",{key:3,href:o(T),target:"_blank",class:"flex justify-center items-center btn-secondary text-center w-full"},[r(M,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"JSON",trailing:!1})],8,mo)):x("",!0),e.form.export_tradingview&&o(z)?(a(),p("a",{key:4,href:o(ce),target:"_blank",class:"flex justify-center items-center btn-secondary text-center mb-4 w-full"},[r(M,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"TradingView Pine Editor",trailing:!1})],8,po)):x("",!0),e.results.showResults&&e.results.alert&&e.results.alert.message?(a(),p("div",vo,[r(Me,{color:"teal",icon:"i-heroicons-check-circle",variant:"soft",title:e.results.alert.message,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"white",variant:"link"},onClose:l[24]||(l[24]=m=>e.results.alert.message="")},null,8,["title"])])):x("",!0),r(je,{class:"mt-8 mb-4",size:"lg",label:"General Info"}),r(et,{data:e.results.info},null,8,["data"]),r(je,{class:"mt-8 mb-4",size:"lg",label:"Routes"}),r(tt,{data:e.results.routes_info,"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"]),e.results.hyperparameters.length?(a(),B(je,{key:6,class:"mt-8 mb-4",size:"lg",label:"Hyperparameters"})):x("",!0),e.results.hyperparameters.length?(a(),B(Ne,{key:7,data:e.results.hyperparameters},null,8,["data"])):x("",!0)])):(a(),p("div",go,[r(M,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:l[25]||(l[25]=m=>re((e._.provides[me]||e.$route).params.id))}),r(M,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-plus",size:"xl",variant:"solid",label:"Start in a new tab",trailing:!1,onClick:l[26]||(l[26]=m=>ue((e._.provides[me]||e.$route).params.id))})]))]))]),_:1}),r(ot,{modelValue:o(v),"onUpdate:modelValue":l[27]||(l[27]=m=>ne(v)?v.value=m:null),"session-id":o(j),"initial-title":o(E),"initial-description":o(H)},null,8,["modelValue","session-id","initial-title","initial-description"]),r(lt,{modelValue:o(y),"onUpdate:modelValue":l[28]||(l[28]=m=>ne(y)?y.value=m:null),routes:n.form.routes,exchange:n.form.exchange,"strategy-codes":o(A)},null,8,["modelValue","routes","exchange","strategy-codes"])],64)}}}),bo={class:"w-full"},zo=oe({__name:"[id]",setup(P){It({title:"Backtest - Jesse"});const n=Je(),b=O(()=>n.tabs),c=O(()=>$t().params.id),i=O(()=>b.value[c.value]);return n.tabIds.length===0&&n.addTab(),$e(()=>{setTimeout(async()=>{!i.value&&c.value&&(await n.loadSession(c.value)||(n.tabIds.length>0?await Ue(`/backtest/${n.tabIds[0]}`):await n.addTab()))},20)}),Nt({w:()=>{i.value&&n.closeTab(i.value.id)},ArrowLeft:()=>n.goToPrevTab(c.value),ArrowRight:()=>n.goToNextTab(c.value)}),(d,u)=>{const t=rt,f=yo;return a(),p(W,null,[s("div",bo,[r(t,{"current-tab":i.value?i.value.id:null,tabs:b.value,onClose:o(n).closeTab,onCancel:o(n).cancel},null,8,["current-tab","tabs","onClose","onCancel"])]),i.value?(a(),B(f,{key:0,form:i.value.form,results:i.value.results},null,8,["form","results"])):x("",!0)],64)}}});export{zo as default};
