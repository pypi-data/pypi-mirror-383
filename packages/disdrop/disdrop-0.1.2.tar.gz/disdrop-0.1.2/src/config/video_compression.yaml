# Video Compression Configuration (packaged defaults)
video_compression:
  # General settings
  max_file_size_mb: 10
  # temp_dir is ignored as of v0.1.2; temp is fixed at <package_root>/temp
  temp_dir: "./temp"

  # Hardware acceleration settings
  hardware_acceleration:
    nvidia: "h264_nvenc"
    amd: "h264_amf"
    fallback: "libx264"

  # Video segmentation settings - LAST RESORT only
  segmentation:
    # Enable watchdog timeout to prevent hanging ffmpeg segment encodes
    enable_timeout: true
    # Size-based thresholds (primary decision factors) - More conservative
    size_threshold_multiplier: 3.0 # Split if estimated size > 3.0x target (increased from 2.5)
    fallback_duration_limit: 600 # Split extremely long videos (10 minutes, increased from 5)

    # Segment duration preferences
    min_segment_duration: 15 # Minimum 15 seconds per segment
    max_segment_duration: 120 # Maximum 2 minutes per segment

    # Base durations by video length
    base_durations:
      short_video_max: 60 # Videos up to 1 minute
      short_segment_duration: 30 # 30-second segments
      medium_video_max: 180 # Videos up to 3 minutes
      medium_segment_duration: 45 # 45-second segments
      long_video_max: 600 # Videos up to 10 minutes
      long_segment_duration: 60 # 1-minute segments
      very_long_segment_duration: 90 # 1.5-minute segments

    # Quality adjustments for longer segments
    quality_scaling:
      enabled: true
      long_segment_fps_reduction: 0.9 # Reduce FPS for longer segments
      long_segment_quality_reduction: 0.95 # Slightly reduce quality for longer segments

    # Size estimation parameters
    estimation:
      # Parameters used for initial size estimation
      default_fps: 30
      default_bitrate: "1000k"
      default_crf: 28

      # Aggressive compression test parameters
      aggressive_fps: 24
      aggressive_bitrate: "800k"
      aggressive_crf: 32

  # Social media platform presets
  platforms:
    instagram:
      max_width: 1080
      max_height: 1080
      aspect_ratio: "1:1"
      bitrate: "1000k"
      fps: 30

    twitter:
      max_width: 1280
      max_height: 720
      aspect_ratio: "16:9"
      bitrate: "1200k"
      fps: 30

    tiktok:
      max_width: 1080
      max_height: 1920
      aspect_ratio: "9:16"
      bitrate: "1500k"
      fps: 30

    youtube_shorts:
      max_width: 1080
      max_height: 1920
      aspect_ratio: "9:16"
      bitrate: "2000k"
      fps: 30

    facebook:
      max_width: 1280
      max_height: 720
      aspect_ratio: "16:9"
      bitrate: "1000k"
      fps: 30

    discord:
      max_width: 1280
      max_height: 720
      aspect_ratio: "16:9"
      bitrate: "800k"
      fps: 30
      max_file_size_mb: 8 # Discord's 8MB limit for free users

  # Quality settings
  quality:
    crf: 28 # Constant Rate Factor (lower = higher quality)
    preset: "medium" # ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow
    tune: "film" # film, animation, grain, stillimage, fastdecode, zerolatency

