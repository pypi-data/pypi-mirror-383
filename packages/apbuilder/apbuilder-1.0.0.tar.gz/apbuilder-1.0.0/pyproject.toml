[build-system]
build-backend = "setuptools.build_meta"
requires = [
  "setuptools>=63",
  "wheel",
  "setuptools-scm"
]

[project]
authors = [
  {name = "Raul Viera-Mercado", email = "vieramercado1@llnl.gov"},
  {name = "Keehoon Kim", email = "kim48@llnl.gov"},
]
#license = "BSD-Commercial"
license-files = ["LICEN[CS]E*"]

classifiers = [
  "Development Status :: 5 - Production/Stable",
  "Environment :: Console",
  "Intended Audience :: Science/Research",
  "Operating System :: MacOS :: MacOS X",
  "Operating System :: Microsoft :: Windows",
  "Operating System :: POSIX :: Linux",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Topic :: Scientific/Engineering",
  "Topic :: Scientific/Engineering :: Atmospheric Science",
]

dependencies = [
  "pyyaml ~= 6.0",
  "herbie-data ~= 2025.7.0",
  "pygmt ~= 0.12",
  "matplotlib ~= 3.9.0",
  "prettytable ~= 3.11",
  "scipy ~= 1.15.1",
]

name = "apbuilder"
description = "Atmospheric Profile Builder (APBuilder)"
dynamic = ["version"]
keywords = [
  "atmosphere",  
  "climate",
  "forecast",
  "grib2",
  "models",  
  "weather",
]
readme = "README.md"
requires-python = ">=3.11"

[project.optional-dependencies]
dev = ["build", "virtualenv", "setuptools-scm"]
docs = [
  "mkdocs ~= 1.6.0",
  "mkdocstrings[python] ~= 0.25.1",
  "mkdocs-print-site-plugin ~= 2.8"
]
test = [
  "pytest ~= 8.2.2",
  "pytest-cov ~= 5.0.0",
  "Pillow ~= 10.4.0"
]

[project.scripts]
apbuilder = "apbuilder.main:run_apb"

[project.urls]
Changelog = "https://github.com/llnl/apbuilder/blob/main/CHANGELOG.md"
Documentation = "https://software.llnl.gov/APBuilder/"
Homepage = "https://github.com/llnl/apbuilder"
Releases = "https://github.com/llnl/apbuilder/releases"
Repository = "https://github.com/llnl/apbuilder"

[tool.setuptools.packages.find]
where = ["src", "config" ]

[tool.setuptools.package-data]
"*" = ["*.yaml"]

[tool.setuptools_scm]
version_file = "src/apbuilder/_version.py"
local_scheme = "no-local-version"

[tool.coverage.run]
omit = ['*\_version.py']
source = ['src']

[tool.pytest.ini_options]
testpaths = [
    "tests/unit",
    "tests/integration/test_local_integration.py"
]
addopts = """
  --cov=src
  --junitxml=coverage-reports/report.xml
  --cov-report term-missing
  --cov-report html:coverage-reports/htmlcov/
  --cov-report xml:coverage-reports/coverage.xml
"""
