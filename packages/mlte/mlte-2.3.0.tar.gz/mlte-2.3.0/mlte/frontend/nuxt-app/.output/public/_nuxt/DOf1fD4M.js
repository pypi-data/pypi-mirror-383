import{j as w,r as d,m as v,n as k,w as a,z as V,o as b,a as c,b as f,q as m,y as x,d as t,A as y,k as _,B as U}from"./C8NgpPpc.js";import{r as B}from"./DueXm2QC.js";import{i as E}from"./DeaeknEB.js";import{k as A,l as C}from"./DJksR8kQ.js";const T={style:{"max-width":"30rem"}},N={class:"margin-button centered-container"},j=w({__name:"login-page",setup(L){const r=d(""),n=d(""),o=d({username:!1,password:!1});async function g(){o.value=B(o.value);let l=!1;if(r.value.trim()===""&&(o.value.username=!0,l=!0),n.value.trim()===""&&(o.value.password=!0,l=!0),l){E();return}const e=await A(r.value,n.value);if(e){const u=_("token",{maxAge:e.expires_in}),p=_("user",{maxAge:e.expires_in});u.value=e.access_token,p.value=r.value;const i=await C(u.value);if(i){const s=_("userRole",{maxAge:e.expires_in});s.value=i.role}}U("/")}return(l,e)=>{const u=v("UsaTextInput"),p=v("UsaButton"),i=V;return b(),k(i,{name:"base-layout"},{"page-title":a(()=>[t("Login")]),default:a(()=>[c("form",null,[c("div",T,[f(u,{modelValue:m(r),"onUpdate:modelValue":e[0]||(e[0]=s=>x(r)?r.value=s:null),error:m(o).username},{label:a(()=>[t(" Username ")]),"error-message":a(()=>[t(" Enter a username ")]),_:1},8,["modelValue","error"]),f(u,{modelValue:m(n),"onUpdate:modelValue":e[1]||(e[1]=s=>x(n)?n.value=s:null),error:m(o).password,type:"password"},{label:a(()=>[t(" Password ")]),"error-message":a(()=>[t(" Enter a password ")]),_:1},8,["modelValue","error"]),c("div",N,[f(p,{type:"submit",class:"primary-button",onClick:e[2]||(e[2]=y(s=>g(),["prevent"]))},{default:a(()=>[t(" Login ")]),_:1})])])])]),_:1})}}});export{j as default};
