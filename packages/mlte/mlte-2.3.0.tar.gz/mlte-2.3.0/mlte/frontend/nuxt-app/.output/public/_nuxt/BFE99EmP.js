import{_ as U}from"./BTXuNL8M.js";import{_ as F}from"./Gj0bNNaE.js";import{j as S,C as D,r as u,l as B,m as H,n as z,w as m,z as O,o,a as r,c as a,q as c,b as I,F as b,v as x,d as y,t as d}from"./C8NgpPpc.js";import{a as W,b as G}from"./DJksR8kQ.js";import{i as J}from"./CpBh97f4.js";const K=r("title",null,"Report Evolution",-1),P={key:0},Q={key:1},X={key:2},Y={class:"multi-line-checkbox-div",style:{width:"100%",display:"inline-block"}},Z=r("label",{class:"usa-label"},"Versions",-1),ee={style:{"overflow-x":"scroll"}},te={class:"table usa-table usa-table--borderless"},se={key:0},oe={key:1,class:"success-td"},le=["onClick"],ae={key:2,class:"info-td"},ne=["onClick"],ie={key:3,class:"failure-td"},re=["onClick"],ue={key:4},he=S({__name:"report-evolution",async setup(ce){let _,k;const C=D().query.model,V=u(!1),A=u(""),R=u(),v=u({}),$=u([]),h=([_,k]=B(()=>W(C)),_=await _,k(),_),g=u(["Version","Identifier"]),E=u([]),f=u([]),N=u(-1);if(h.length>0){h.forEach(t=>{$.value.push(new J(t,!0))});for(const t of h)v.value[t]=[],([_,k]=B(()=>G(C,t)),_=await _,k(),_).forEach(e=>{e.body.artifact_type==="report"&&v.value[t].push(e)});N.value=Object.keys(v.value).findIndex(t=>v.value[t].length>0),N.value>-1&&(Object.keys(v.value).forEach(t=>{v.value[t].forEach(n=>{Object.keys(n.body.test_results.results).forEach(e=>{g.value.includes(e)||g.value.push(e)})})}),h.forEach(t=>{v.value[t].forEach(n=>{const e={version:{value:t},identifier:{value:n.header.identifier}};g.value.forEach(i=>{i!=="Version"&&i!=="Identifier"&&(i in n.body.test_results.results?e[i]={value:n.body.test_results.results[i].type,message:n.body.test_results.results[i].message}:e[i]={value:"N/A",message:"N/A"})}),E.value.push(e)})})),f.value=E.value}function L(t,n){t?(E.value.forEach(e=>{e.version.value==n&&f.value.push(e)}),f.value.sort((e,i)=>e.version.value<i.version.value?-1:e.version.value>i.version.value?1:0)):f.value=f.value.filter(e=>e.version.value!==n)}function w(t,n,e){A.value=t,R.value=n+": "+e,V.value=!0}return(t,n)=>{const e=H("UsaCheckbox"),i=U,M=F,T=O;return o(),z(T,{name:"base-layout"},{"page-title":m(()=>[y("Artifact Store")]),default:m(()=>[K,c(h).length===0?(o(),a("div",P,"No versions in model.")):c(N)===-1?(o(),a("div",Q," No reports in any model versions. ")):(o(),a("div",X,[r("div",Y,[Z,(o(!0),a(b,null,x(c($),(l,p)=>(o(),a("span",{key:p,class:"multiple-per-line-checkbox",style:{width:"30%"}},[I(e,{modelValue:l.selected,"onUpdate:modelValue":[s=>l.selected=s,s=>L(l.selected,l.name)]},{default:m(()=>[y(d(l.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))]),I(i,{visible:c(V),onToggleVisible:n[0]||(n[0]=l=>V.value=l)},{heading:m(()=>[y(d(c(A)),1)]),default:m(()=>[y(" "+d(c(R)),1)]),_:1},8,["visible"]),r("div",ee,[r("table",te,[r("thead",null,[r("tr",null,[(o(!0),a(b,null,x(c(g),(l,p)=>(o(),a("th",{key:p,scope:"col",role:"columnheader"},d(l),1))),128))])]),r("tbody",null,[(o(!0),a(b,null,x(c(f),(l,p)=>(o(),a("tr",{key:p},[(o(!0),a(b,null,x(l,(s,j)=>(o(),a(b,{key:j},[j==="identifier"?(o(),a("td",se,[I(M,{to:{path:"/artifact-views/report-view",query:{model:c(C),version:l.version.value,artifactId:l.identifier.value}},target:"_blank"},{default:m(()=>[y(d(s.value),1)]),_:2},1032,["to"])])):s.value==="Success"?(o(),a("td",oe,[r("div",{class:"modal-button",onClick:q=>w(l.identifier.value,s.value,s.message)},d(s.value),9,le)])):s.value==="Info"?(o(),a("td",ae,[r("div",{class:"modal-button",onClick:q=>w(l.identifier.value,s.value,s.message)},d(s.value),9,ne)])):s.value==="Failure"?(o(),a("td",ie,[r("div",{class:"modal-button",onClick:q=>w(l.identifier.value,s.value,s.message)},d(s.value),9,re)])):(o(),a("td",ue,d(s.value),1))],64))),128))]))),128))])])])]))]),_:1})}}});export{he as default};
