import{j,m as k,c as y,o as d,a as s,F as T,v as Q,t as U,s as q,n as I,w as t,d as a,b as n,_ as G,r as C,l as J,q as c,z as P,x as K,y as F}from"./C8NgpPpc.js";import{_ as W,a as X}from"./BoQX3tiQ.js";import{u as Y,a as Z}from"./Xfrq4m1R.js";import{x as R,y as z,z as ee,A as te,B as ae}from"./DJksR8kQ.js";import{S as le,d as M}from"./CpBh97f4.js";import{r as oe}from"./DueXm2QC.js";import{i as ne}from"./DeaeknEB.js";const se={class:"table usa-table usa-table--borderless"},ie=s("thead",null,[s("tr",null,[s("th",{scope:"col",role:"columnheader"},"Identifier"),s("th",{scope:"col",role:"columnheader"},"Catalog"),s("th",{scope:"col",role:"columnheader"},"Tags"),s("th",{scope:"col",role:"columnheader"},"Quality Attribute"),s("th",{scope:"col",role:"columnheader"},"Actions")])],-1),re={key:0},ue=j({__name:"entry-list",props:{modelValue:{type:Array,required:!0},catalogLookup:{type:Object,required:!0}},emits:["addEntry","editEntry","deleteEntry"],setup(u,{emit:V}){const g=V;return(h,_)=>{const l=k("UsaButton");return d(),y("table",se,[ie,(d(!0),y(T,null,Q(u.modelValue,(r,m)=>(d(),y("tr",{key:m},[s("td",null,U(r.header.identifier),1),s("td",null,U(r.header.catalog_id),1),s("td",null,[(d(!0),y(T,null,Q(r.tags,(x,w)=>(d(),y("span",{key:w},[s("span",null,U(x),1),w+1<r.tags.length?(d(),y("span",re,", ")):q("",!0)]))),128))]),s("td",null,U(r.quality_attribute),1),s("td",null,[u.catalogLookup[r.header.catalog_id].read_only?(d(),I(l,{key:0,class:"secondary-button",onClick:x=>g("editEntry",r)},{default:t(()=>[a(" View ")]),_:2},1032,["onClick"])):(d(),y(T,{key:1},[n(l,{class:"secondary-button",onClick:x=>g("editEntry",r)},{default:t(()=>[a(" Edit ")]),_:2},1032,["onClick"]),n(l,{class:"usa-button usa-button--secondary",onClick:x=>g("deleteEntry",r.header.catalog_id,r.header.identifier)},{default:t(()=>[a(" Delete ")]),_:2},1032,["onClick"])],64))])]))),128))])}}}),de="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%201H4c-1.1%200-2%20.9-2%202v14h2V3h12V1zm3%204H8c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h11c1.1%200%202-.9%202-2V7c0-1.1-.9-2-2-2zm0%2016H8V7h11v14z'/%3e%3c/svg%3e",ce={},me=s("img",{src:de,class:"inline-icon usa-icon"},null,-1);function pe(u,V){const g=k("UsaButton");return d(),I(g,{variant:"unstyled",class:"inline-icon"},{default:t(()=>[me]),_:1})}const fe=G(ce,[["render",pe]]),ye={key:0},ge={class:"section-header"},_e=s("h3",{style:{display:"inline"}},"Created by:",-1),ve={key:1},be={class:"multi-line-checkbox-div"},he={class:"usa-label"},Ve={class:"submit-footer"},we=j({__name:"entry-edit",props:{modelValue:{type:Object,required:!0},newEntryFlag:{type:Boolean,required:!0},readOnly:{type:Boolean,required:!0}},emits:["cancel","submit","updateEntry"],async setup(u,{emit:V}){let g,h;const _=V,l=u,r=C("");r.value=new Date(l.modelValue.header.created*1e3).toLocaleString("en-US");const m=C({catalog:!1,identifier:!1}),x=C([]),w=Y();[g,h]=J(()=>Z()),await g,h(),A(),w.value.forEach(f=>{l.modelValue.tags.find(e=>e===f.name)?f.selected=!0:f.selected=!1});async function A(){const f=await R();f&&f.forEach(e=>{e.read_only||x.value.push(new le(e.id,e.id+" ("+e.type.replaceAll("_"," ")+")"))})}async function S(){m.value=oe(m.value);let f=!1;if(l.modelValue.header.catalog_id===""&&(m.value.catalog=!0,f=!0),l.modelValue.header.identifier===""&&(m.value.identifier=!0,f=!0),f){ne();return}_("submit",l.modelValue)}function N(f,e){if(f)l.modelValue.tags.push(e),l.modelValue.tags.sort();else{const v=l.modelValue.tags.find($=>$===e);if(v){const $=l.modelValue.tags.indexOf(v);l.modelValue.tags.splice($,1)}}}function D(){navigator.clipboard.writeText(l.modelValue.code)}return(f,e)=>{const v=W,$=k("UsaSelect"),p=k("UsaTextInput"),o=k("UsaCheckbox"),E=X,O=fe,L=k("UsaTextarea"),B=k("UsaButton");return d(),y("div",null,[u.newEntryFlag?q("",!0):(d(),y("div",ye,[s("h1",ge,U(u.modelValue.header.identifier),1),_e,a(" "+U(u.modelValue.header.creator)+" - "+U(c(r)),1)])),u.newEntryFlag?(d(),y("div",ve,[n($,{modelValue:u.modelValue.header.catalog_id,"onUpdate:modelValue":e[0]||(e[0]=i=>u.modelValue.header.catalog_id=i),options:c(x),error:c(m).catalog,onChange:e[1]||(e[1]=i=>c(m).catalog=!1)},{label:t(()=>[a(" Catalog "),n(v,null,{default:t(()=>[a(" Catalog where test example will be stored. ")]),_:1})]),"error-message":t(()=>[a("A catalog must be selected")]),_:1},8,["modelValue","options","error"]),n(p,{modelValue:l.modelValue.header.identifier,"onUpdate:modelValue":e[2]||(e[2]=i=>l.modelValue.header.identifier=i),error:c(m).identifier},{label:t(()=>[a(" Identifier "),n(v,null,{default:t(()=>[a(" User-defined identifier for the test example. ")]),_:1})]),"error-message":t(()=>[a("Identifier is required.")]),_:1},8,["modelValue","error"])])):q("",!0),s("div",be,[s("label",he,[a(" Tags "),n(v,null,{default:t(()=>[a(" System-defined tags that are used in catalog search. Select as many as are relevant to the test example. ")]),_:1})]),(d(!0),y(T,null,Q(c(w),(i,b)=>(d(),y("span",{key:b,class:"multiple-per-line-checkbox"},[n(o,{modelValue:i.selected,"onUpdate:modelValue":[H=>i.selected=H,H=>N(i.selected,i.name)],disabled:l.readOnly},{default:t(()=>[a(U(i.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]))),128))]),n(E,{"initial-quality-attribute":l.modelValue.quality_attribute,disabled:l.readOnly,onUpdateAttribute:e[3]||(e[3]=i=>l.modelValue.quality_attribute=i)},{default:t(()=>[a(" Quality Attribute Category "),n(v,null,{default:t(()=>[a(" High-level quality attribute category that the test example is validating, e.g., functional correctness, performance, robustness. ")]),_:1})]),_:1},8,["initial-quality-attribute","disabled"]),n(L,{modelValue:u.modelValue.code,"onUpdate:modelValue":e[5]||(e[5]=i=>u.modelValue.code=i),disabled:l.readOnly,style:{resize:"both",width:"30rem","max-width":"100%"}},{label:t(()=>[a(" Code "),n(v,null,{default:t(()=>[a(" Code for the test example. ")]),_:1}),n(O,{onClick:e[4]||(e[4]=i=>D())})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue","disabled"]),n(L,{modelValue:u.modelValue.description,"onUpdate:modelValue":e[6]||(e[6]=i=>u.modelValue.description=i),disabled:l.readOnly,style:{resize:"both",width:"30rem","max-width":"100%"}},{label:t(()=>[a(" Description "),n(v,null,{default:t(()=>[a(" Description of the test example. ")]),_:1})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue","disabled"]),n(p,{modelValue:u.modelValue.inputs,"onUpdate:modelValue":e[7]||(e[7]=i=>u.modelValue.inputs=i),disabled:l.readOnly},{label:t(()=>[a(" Inputs "),n(v,null,{default:t(()=>[a(" Inputs that are required to run the test example, e.g., data sets, parameters. ")]),_:1})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue","disabled"]),n(p,{modelValue:u.modelValue.output,"onUpdate:modelValue":e[8]||(e[8]=i=>u.modelValue.output=i),disabled:l.readOnly},{label:t(()=>[a(" Output "),n(v,null,{default:t(()=>[a(" Output of the test example, e.g., value, log entry, database entry, alert. ")]),_:1})]),"error-message":t(()=>[a("Not defined")]),_:1},8,["modelValue","disabled"]),s("div",Ve,[l.readOnly?(d(),I(B,{key:0,class:"primary-button",onClick:e[9]||(e[9]=i=>_("cancel",!0))},{default:t(()=>[a(" Back ")]),_:1})):(d(),y(T,{key:1},[n(B,{class:"primary-button",onClick:e[10]||(e[10]=i=>_("cancel"))},{default:t(()=>[a(" Cancel ")]),_:1}),n(B,{class:"primary-button",onClick:S},{default:t(()=>[a(" Save ")]),_:1})],64))])])}}}),Ce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M15.5%2014h-.79l-.28-.27A6.471%206.471%200%200%200%2016%209.5%206.5%206.5%200%201%200%209.5%2016c1.61%200%203.09-.59%204.23-1.57l.27.28v.79l5%204.99L20.49%2019l-4.99-5zm-6%200C7.01%2014%205%2011.99%205%209.5S7.01%205%209.5%205%2014%207.01%2014%209.5%2011.99%2014%209.5%2014z'/%3e%3c/svg%3e",xe=s("title",null,"Test Catalog",-1),ke={key:0},Ee={class:"inline-input-left"},Ue=s("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Tag ",-1),$e={class:"inline-input-right",style:{"margin-bottom":"1em"}},Ae=s("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Quality Attribute ",-1),Se={class:"inline-button"},Be=s("img",{src:Ce,class:"usa-icon"},null,-1),Te={key:1},De=j({__name:"test-catalog",setup(u){const V=C(!1),g=C(!1),h=C(""),_=C(""),l=C({}),r=C([]),m=C(new M);x(),w();async function x(){(await R()).forEach(o=>{l.value[o.id]=o})}async function w(){r.value=await z({filter:{type:"all"}})}async function A(){h.value===""&&_.value===""?w():_.value===""?r.value=await z({filter:{type:"tag",name:"tags",tag:h.value}}):h.value===""?r.value=await z({filter:{type:"property",name:"quality_attribute",property:_.value}}):r.value=await z({filter:{type:"and",filters:[{type:"tag",name:"tags",tag:h.value},{type:"property",name:"quality_attribute",property:_.value}]}})}function S(){m.value=new M}async function N(){h.value="",_.value="",await A()}function D(){S(),V.value=!0,g.value=!0}function f(p){m.value=p,V.value=!0,g.value=!1}async function e(p,o){if(!confirm("Are you sure you want to delete the entry: "+o+" in the "+p+" catalog?"))return;await ee(p,o)&&w()}function v(p=!1){(p||confirm("Are you sure you want to cancel? All changes will be lost."))&&(V.value=!1,S())}async function $(p){let o=!0;g.value?await te(p.header.catalog_id,p)&&(o=!1):await ae(p.header.catalog_id,p)&&(o=!1),o||(w(),S(),V.value=!1)}return(p,o)=>{const E=k("UsaButton"),O=k("UsaTextInput"),L=ue,B=we,i=P;return d(),I(i,{name:"base-layout"},{"page-title":t(()=>[a("Test Catalog")]),default:t(()=>[xe,c(V)?q("",!0):(d(),y("div",ke,[n(E,{class:"secondary-button sub-header-float-button",onClick:D},{default:t(()=>[a(" Add Catalog Entry ")]),_:1}),s("div",Ee,[Ue,n(O,{modelValue:c(h),"onUpdate:modelValue":o[0]||(o[0]=b=>F(h)?h.value=b:null),onKeyup:o[1]||(o[1]=K(b=>A(),["enter"]))},null,8,["modelValue"])]),s("div",$e,[Ae,n(O,{modelValue:c(_),"onUpdate:modelValue":o[2]||(o[2]=b=>F(_)?_.value=b:null),onKeyup:o[3]||(o[3]=K(b=>A(),["enter"]))},null,8,["modelValue"])]),s("div",Se,[n(E,{class:"usa-button--unstyled",onClick:o[4]||(o[4]=b=>A())},{default:t(()=>[Be]),_:1})]),s("div",null,[n(E,{class:"secondary-button",onClick:o[5]||(o[5]=b=>N())},{default:t(()=>[a(" Clear Search ")]),_:1})]),n(L,{modelValue:c(r),"onUpdate:modelValue":o[6]||(o[6]=b=>F(r)?r.value=b:null),"catalog-lookup":c(l),onEditEntry:f,onDeleteEntry:e},null,8,["modelValue","catalog-lookup"])])),c(V)?(d(),y("div",Te,[n(B,{modelValue:c(m),"onUpdate:modelValue":o[7]||(o[7]=b=>F(m)?m.value=b:null),"new-entry-flag":c(g),"read-only":c(l)[c(m).header.catalog_id]?c(l)[c(m).header.catalog_id].read_only:!1,onCancel:v,onSubmit:$},null,8,["modelValue","new-entry-flag","read-only"])])):q("",!0)]),_:1})}}});export{De as default};
