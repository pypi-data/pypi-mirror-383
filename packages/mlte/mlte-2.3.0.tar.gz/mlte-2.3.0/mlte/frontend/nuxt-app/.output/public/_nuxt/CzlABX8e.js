import{j as A,m as U,c as b,o as C,a,F as z,v as G,t as h,b as m,w as r,d as u,r as v,l as q,s as B,q as o,y as x,n as H,z as I}from"./C8NgpPpc.js";import{E as R,F as P,G as J,H as K,I as M}from"./DJksR8kQ.js";import{S as Q,C as O}from"./CpBh97f4.js";import{r as W}from"./DueXm2QC.js";import{i as X}from"./DeaeknEB.js";import{b as Y}from"./Xfrq4m1R.js";const Z={class:"table usa-table usa-table--borderless sortable"},ee=a("thead",null,[a("tr",null,[a("th",{scope:"col",role:"columnheader"},"Parent"),a("th",{scope:"col",role:"columnheader"},"Name"),a("th",{scope:"col",role:"columnheader"},"Description"),a("th",{scope:"col",role:"columnheader"},"Actions")])],-1),te=A({__name:"entry-list",props:{modelValue:{type:Array,required:!0}},emits:["addEntry","editEntry","deleteEntry"],setup(f,{emit:V}){const E=V;return(c,y)=>{const e=U("UsaButton");return C(),b("table",Z,[ee,(C(!0),b(z,null,G(f.modelValue,(t,d)=>(C(),b("tr",{key:d},[a("td",null,h(t.parent),1),a("td",null,h(t.name),1),a("td",null,h(t.description),1),a("td",null,[m(e,{class:"secondary-button",onClick:l=>E("editEntry",t)},{default:r(()=>[u(" Edit ")]),_:2},1032,["onClick"]),m(e,{class:"usa-button usa-button--secondary",onClick:l=>E("deleteEntry",t.name)},{default:r(()=>[u(" Delete ")]),_:2},1032,["onClick"])])]))),128))])}}}),ne={key:0},se={class:"section-header"},oe=a("h3",{style:{display:"inline"}},"Custom List:",-1),ae={key:1},le={class:"submit-footer"},ue=A({__name:"entry-edit",props:{modelValue:{type:Object,required:!0},newEntryFlag:{type:Boolean,required:!0},initialCustomListName:{type:String,required:!0},customListOptions:{type:Array,required:!0}},emits:["cancel","submit","updateEntry"],async setup(f,{emit:V}){let E,c;const y=V,e=f,t=v(e.initialCustomListName),d=v("None"),l=v([]),_=v({custom_list:!1,name:!1,parent:!1});[E,c]=q(()=>L(e.initialCustomListName)),await E,c();async function L(p){if(p===""){l.value=[];return}const s=await R(p);s?(d.value=s,(await P(s)).forEach(g=>{l.value.push(new Q(g.name,g.name))})):(d.value="None",l.value=[])}async function k(){_.value=W(_.value);let p=!1;if(e.newEntryFlag&&t.value===""&&(_.value.custom_list=!0,p=!0),e.modelValue.name===""&&(_.value.name=!0,p=!0),e.modelValue.parent===""&&l.value.length>0&&(_.value.parent=!0,p=!0),p){X();return}e.newEntryFlag?y("submit",t.value,e.modelValue):y("submit",e.initialCustomListName,e.modelValue)}return(p,s)=>{const N=U("UsaSelect"),g=U("UsaTextInput"),S=U("UsaButton");return C(),b("div",null,[f.newEntryFlag?B("",!0):(C(),b("div",ne,[a("h1",se,h(f.modelValue.name),1),oe,u(" "+h(f.initialCustomListName),1)])),f.newEntryFlag?(C(),b("div",ae,[m(N,{modelValue:o(t),"onUpdate:modelValue":s[0]||(s[0]=n=>x(t)?t.value=n:null),options:f.customListOptions,onChange:s[1]||(s[1]=n=>L(o(t)))},{label:r(()=>[u(" Custom List ")]),"error-message":r(()=>[u("Custom List must be selected.")]),_:1},8,["modelValue","options"]),m(g,{modelValue:e.modelValue.name,"onUpdate:modelValue":s[2]||(s[2]=n=>e.modelValue.name=n),error:o(_).name},{label:r(()=>[u("Name")]),"error-message":r(()=>[u("Name is required.")]),_:1},8,["modelValue","error"])])):B("",!0),m(g,{modelValue:e.modelValue.description,"onUpdate:modelValue":s[3]||(s[3]=n=>e.modelValue.description=n)},{label:r(()=>[u(" Description ")]),_:1},8,["modelValue"]),m(N,{modelValue:e.modelValue.parent,"onUpdate:modelValue":s[4]||(s[4]=n=>e.modelValue.parent=n),options:o(l),error:o(_).parent,disabled:o(l).length==0},{label:r(()=>[u(" Parent: "+h(o(d)),1)]),"error-message":r(()=>[u("Parent must be selected.")]),_:1},8,["modelValue","options","error","disabled"]),a("div",le,[m(S,{class:"primary-button",onClick:s[5]||(s[5]=n=>y("cancel"))},{default:r(()=>[u(" Cancel ")]),_:1}),m(S,{class:"primary-button",onClick:k},{default:r(()=>[u(" Save ")]),_:1})])])}}}),re=a("title",null,"Custom Lists",-1),ie={key:0},me={class:"inline-input-left"},de={key:1},Ce=A({__name:"custom-list",async setup(f){let V,E;const c=v(!1),y=v(!1),{customListOptions:e}=([V,E]=q(()=>Y()),V=await V,E(),V),t=v(""),d=v([]),l=v(new O);_();async function _(){e.value.length>0&&(t.value=e.value[0].value,L(e.value[0].value))}async function L(n){n===""?d.value=[]:d.value=await P(n)}function k(){l.value=new O}function p(){k(),c.value=!0,y.value=!0}function s(n){l.value=n,c.value=!0,y.value=!1}async function N(n){if(!confirm("Are you sure you want to delete the entry: "+n+"?"))return;await J(t.value,n)&&L(t.value)}function g(){confirm("Are you sure you want to cancel? All changes will be lost.")&&(c.value=!1,k())}async function S(n,i){let $=!0;y.value?await K(n,i)&&($=!1):await M(n,i)&&($=!1),$||(L(t.value),k(),c.value=!1)}return(n,i)=>{const $=U("UsaButton"),F=U("UsaSelect"),D=te,T=ue,j=I;return C(),H(j,{name:"base-layout"},{"page-title":r(()=>[u("Custom Lists")]),default:r(()=>[re,o(c)?B("",!0):(C(),b("div",ie,[m($,{class:"secondary-button sub-header-float-button",onClick:p},{default:r(()=>[u(" Add Entry ")]),_:1}),a("div",me,[m(F,{modelValue:o(t),"onUpdate:modelValue":i[0]||(i[0]=w=>x(t)?t.value=w:null),options:o(e),onChange:i[1]||(i[1]=w=>L(o(t)))},null,8,["modelValue","options"])]),m(D,{modelValue:o(d),"onUpdate:modelValue":i[2]||(i[2]=w=>x(d)?d.value=w:null),onEditEntry:s,onDeleteEntry:N},null,8,["modelValue"])])),o(c)?(C(),b("div",de,[m(T,{modelValue:o(l),"onUpdate:modelValue":i[3]||(i[3]=w=>x(l)?l.value=w:null),"new-entry-flag":o(y),"initial-custom-list-name":o(t),"custom-list-options":o(e),onCancel:g,onSubmit:S},null,8,["modelValue","new-entry-flag","initial-custom-list-name","custom-list-options"])])):B("",!0)]),_:1})}}});export{Ce as default};
