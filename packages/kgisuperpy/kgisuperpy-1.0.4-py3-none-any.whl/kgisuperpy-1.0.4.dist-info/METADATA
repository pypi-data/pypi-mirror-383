Metadata-Version: 2.4
Name: kgisuperpy
Version: 1.0.4
Summary: KGI project
Author: KGI Securities
Author-email: ec.service@kgi.com
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pythonnet
Dynamic: author
Dynamic: author-email
Dynamic: description
Dynamic: description-content-type
Dynamic: license-file
Dynamic: requires-dist
Dynamic: summary

# README.md

# SuperPy

---

# æ›´æ–°ç´€éŒ„

| **æ—¥æœŸ** | é …ç›® | ç‰ˆæœ¬ |
| --- | --- | --- |
| 2024/07/05 | åˆç‰ˆ | 1.0.0 |
| 2024/09/18 | 1. æ–°å¢æ–°ç·¨æŒ‡æ•¸ <br> 2. æ–°å¢å­å¸³ç™»å…¥åŠŸèƒ½ | 1.0.1 |
| 2024/12/09 | èª¿æ•´èªªæ˜ | 1.0.2 |
| 2025/09/30 | èª¿æ•´è­‰åˆ¸ä¸‹å–®å›å ±åŠŸèƒ½ å¢åŠ [4002]é›»æ–‡æ¢ä»¶åˆ¤æ–· | 1.0.3 |
| 2025/10/13 | èª¿æ•´èªªæ˜ | 1.0.4 |

---

# **å¿«é€Ÿå…¥é–€**

âš ï¸ åœ¨é–‹å§‹å‰è«‹é‚„éœ€å®Œæˆå‰ç½®ä½œæ¥­ï¼ŒåŒ…å«**é–‹æˆ¶**ã€**æœå‹™æ¢æ¬¾** åŠ **Token**ã€‚

ä¾æ“šä¸»ç®¡æ©Ÿé—œè¦ç¯„ï¼Œä½¿ç”¨APIå…ƒä»¶æ‡‰ç°½ç½²ã€è­‰åˆ¸APIæœå‹™é¢¨éšªé å‘Šæ›¸æš¨ä½¿ç”¨åŒæ„æ›¸ã€

[æˆ‘è¦ç·šä¸Šç”³è«‹API](https://h5webtrade.kgieworld.com.tw/ServicesWeb/Auth/Login?orign=o&applytype=21)

## å®‰è£

ä½¿ç”¨ pip ç°¡å–®å®‰è£

```bash
pip install kgisuperpy

```

æ›´æ–°superpy

```bash
pip install -U kgisuperpy

```

## SuperPyç‰©ä»¶

â¡ï¸ In

```python
import superpy as sp
sp.SuperPy()

```

âœ… Out

```python
Init signature:
sp.SuperPy(
    simulation: bool = False,
)
Docstring:
superpy api
Functions:
    login
    logout
    list_accounts
    set_default_account
    place_order
    update_order
    update_status
    list_trades
Objects:
    Quote
    Contracts
    Order
Init docstring:
initialize superpy to start trading
Args:
    simulation (bool):
        - False: to trading on real market (just use your account to start trading)
        - True: become simulation account(need to contract as to open simulation account)

```

## **æ¨¡æ“¬æ¨¡å¼**

ä½¿ç”¨è€…èƒ½å…ˆåœ¨æ¨¡æ“¬ç’°å¢ƒç†Ÿæ‚‰æˆ‘å€‘æ‰€æä¾›çš„æœå‹™ï¼Œå¯é¿å…åœ¨æ­£å¼ç’°å¢ƒæ“ä½œå¤±èª¤é€ æˆè²¡ç‰©çš„æå¤±ã€‚ä»¥ä¸‹æœƒè©³ç´°èªªæ˜åœ¨æ¸¬è©¦ç’°å¢ƒæ‰€æä¾›çš„åŠŸèƒ½ã€‚

â˜‘ï¸ **æ¨¡æ“¬ç’°å¢ƒ**

```python
import superpy as sp
api = sp.SuperPy(simulation=True) #Default

```

## **æ­£å¼æ¨¡å¼**

â˜‘ï¸ æ­£å¼**ç’°å¢ƒ**

```python
import superpy as sp
api = sp.SuperPy(simulation=False)

```

---

# ç™»å…¥

â¡ï¸ In

```python
import superpy as sp
api = sp.SuperPy()
api.login(
    userID = "YOUR_USER_ID",
    password = "YOUR_PASSWORD")

```

âœ… Out

```python
[
    FutureAccount(person_id='A123456789', broker_id='F004009', account_id='1234567', signed=True),
    StockAccount(person_id='A123456789', broker_id='9268', account_id='1234567', signed=True)
]

```

- å¦‚æœåœ¨å¸³è™Ÿæ¸…å–®ä¸­æ‰¾ä¸åˆ°Â `signed`ï¼Œè«‹è‡³**æœå‹™æ¢æ¬¾**äº†è§£ä½¿ç”¨APIæœå‹™æ‰€éœ€è¦æ­¥é©Ÿã€‚

ğŸ”† **Login Arguments**

```python
UserID (str): ç”¨æˆ¶ID
password (str): å¯†ç¢¼
fetch_contract (bool): æ˜¯å¦å¾å¿«å–ä¸­è®€å–å•†å“æª”æˆ–å¾ä¼ºæœå™¨ä¸‹è¼‰å•†å“æª” (é è¨­å€¼: True)
contracts_timeout (int): ç²å–å•†å“æª” timeout (é è¨­å€¼: 0 ms)
contracts_cb (typing.Callable): ç²å–å•†å“æª” callback (é è¨­å€¼: None)
subscribe_trade (bool): æ˜¯å¦è¨‚é–±å§”è¨—/æˆäº¤å›å ± (é è¨­å€¼: True)
receive_window (int): ç™»å…¥å‹•ä½œæœ‰æ•ˆåŸ·è¡Œæ™‚é–“ (é è¨­å€¼: 30,000 æ¯«ç§’)

```

### å¸³è™Ÿåˆ—è¡¨

â¡ï¸ In

```python
accounts = api.list_accounts()

```

âœ… Out

```python
# print(accounts)
[
	FutureAccount(person_id='A123456789', broker_id='F004009', account_id='1234567', signed=True),
    FutureAccount(person_id='A123456789', broker_id='F004009', account_id='7654321'),
    StockAccount(person_id='A123456789', broker_id='9268', account_id='7654321'),
    StockAccount(person_id='A123456789', broker_id='9268', account_id='1234567', signed=True)
]

```

## é è¨­å¸³è™Ÿ

â¡ï¸ In

```python
# æœŸè²¨é è¨­å¸³è™Ÿ
print(api.futopt_account)

```

âœ… Out

```python
FutureAccount(person_id='A123456789', broker_id='F004009', account_id='1234567', signed=True)

```

## è¨­å®šé è¨­å¸³è™Ÿ

â¡ï¸ In

```python
# é è¨­çš„æœŸè²¨å¸³è™Ÿå¾ ACCOUNT_ID_1è½‰æ›æˆ ACCOUNT_ID_2
api.set_default_account(accounts[1])
print(api.futopt_account)

```

âœ… Out

```python
FutureAccount(person_id='A123456789', broker_id='F004009', account_id='7654321')

```

ä¸‹å–®Orderç‰©ä»¶ä¸­éœ€è¦æŒ‡å®šå¸³è™Ÿã€‚æ›´å¤šè³‡è¨Šè«‹åƒè€ƒç¾è²¨å’ŒæœŸæ¬Šä¸‹å–®ã€‚

```python
order = api.Order(
    price=12,
    quantity=1,
    action=sp.constant.Action.Buy,
    price_type=sp.constant.StockPriceType.LMT,
    order_type=sp.constant.OrderType.ROD,
    order_lot=sp.constant.StockOrderLot.Common,
    account=api.stock_account
)

```

## å­å¸³ç™»å…¥

å­å¸³ç™»å…¥æ–¹å¼ï¼Œç™»å…¥ ID æ ¼å¼ç‚º: Trader@ID.Broker+Accountï¼›Ex: 1001@A123456789.F0040001234567

- ç™»å…¥æƒ…å¢ƒ

```python
# åŒä¸‹å–®å¸³è™Ÿä¸åŒå­å¸³
1001@A123456789.F0040091234567,,0000|1002@A123456789.F0040091234567,,0000
# ç¾¤çµ„å­å¸³
G1@A123456789.F0040091234567,,0000
```

å‚³å…¥åƒæ•¸loginInfosä¾›å­å¸³ç™»å…¥

â¡ï¸ In

```python
import superpy as sp
api = sp.SuperPy()
api.login(
    userID = "YOUR_USER_ID",
    password = "YOUR_PASSWORD",
    loginInfos = "1001@A123456789.F0040001234567,,password"    
)

```

âœ… Out

```python
[
    FutureAccount(person_id='A123456789', broker_id='F004000', account_id='1234567', signed=True, trader='1001'),
]
```

å­å¸³ä¸‹å–®

```python
accounts = api.list_accounts()
api.set_default_account(accounts[0])
print(api.futopt_account)
#FutureAccount(person_id='A123456789', broker_id='F004000', account_id='1234567', signed=True, trader='1001')

order = api.Order(
    action=sp.constant.Action.Buy,
    price=20000,
    quantity=1,
    price_type=sp.constant.FuturesPriceType.LMT,
    order_type=sp.constant.OrderType.ROD,
    octype=sp.constant.FuturesOCType.Auto,
    account=api.futopt_account
)
```

## **ç™»å‡º**

ç™»å‡ºåŠŸèƒ½å°‡é—œé–‰å®¢æˆ¶ç«¯åŠæœå‹™ç«¯ä¹‹é–“çš„é€£æ¥ï¼Œåœ¨ä¸ä½¿ç”¨çš„æ™‚å€™çµ‚æ­¢ç¨‹å¼æ˜¯ä¸€å€‹è‰¯å¥½çš„ç¿’æ…£ã€‚

```python
api.logout()
# True

```

---

# å•†å“æª”

å•†å“æª”å°‡åœ¨å¾ˆå¤šåœ°æ–¹è¢«ä½¿ç”¨ï¼Œä¾‹å¦‚ä¸‹å–®ã€è¨‚é–±è¡Œæƒ…â€¦ç­‰ã€‚

### **å–å¾—å•†å“æª”**

ä¸‹æ–¹æä¾›å…©ç¨®æ–¹æ³•å–å¾—å•†å“æª”ï¼š

- æ–¹æ³•1ï¼šç™»å…¥æˆåŠŸå¾Œï¼Œå°‡é–‹å§‹ä¸‹è¼‰å•†å“æª”ã€‚ä½†é€™å€‹ä¸‹è¼‰éç¨‹å°‡ä¸æœƒå½±éŸ¿å…¶ä»–çš„æ“ä½œã€‚è‹¥æ‚¨æƒ³äº†è§£æ˜¯å¦ä¸‹è¼‰å®Œæˆï¼Œå¯åˆ©ç”¨`Contracts.status`å»å¾—åˆ°ä¸‹è¼‰ç‹€æ…‹ã€‚`contracts_timeout`Â è¨­å®šç‚º10000ï¼Œå®ƒå°‡ç­‰å¾…10ç§’ä¸‹è¼‰å•†å“æª”ã€‚

â˜‘ï¸ In

```python
import superpy as sp
api = sp.SuperPy()
api.login(
    userID = "YOUR_USER_ID",
    password = "YOUR_PASSWORD",
    contracts_timeout=10000,
)

```

- æ–¹æ³•2ï¼šè‹¥ä¸æƒ³åœ¨ç™»å…¥æ™‚ä¸‹è¼‰å•†å“æª”ï¼Œå°‡`fetch_contract`Â è¨­å®šç‚º`False`ã€‚åˆ©ç”¨Â `fetch_contracts`Â ä¸‹è¼‰å•†å“æª”

â˜‘ï¸ In

```python
import superpy as sp
api = sp.SuperPy()
api.login(
    userID = "YOUR_USER_ID",
    password = "YOUR_PASSWORD",
    fetch_contract=False,
)
api.fetch_contracts(contract_download=True)

```

### **å•†å“æª”è³‡è¨Š**

ç›®å‰æˆ‘å€‘æ‰€æä¾›çš„å•†å“åŒ…å«:è­‰åˆ¸ã€æœŸè²¨ã€é¸æ“‡æ¬Šä»¥åŠ~~æŒ‡æ•¸~~ã€‚å¯å¾ä¸‹åˆ—æ–¹æ³•æ›´è©³ç´°å¾—åˆ°æˆ‘å€‘æ‰€æä¾›çš„å•†å“ã€‚

- **è­‰åˆ¸**

â¡ï¸ In

```python
api.Contracts.Stocks["2883"]

```

âœ… Out

```python
Stock {
	'exchange': 'T',
	'code': '2883',
	'symbol': '2883',
	'name': 'å‡±åŸºé‡‘',
	'limit_up': 15.8,
	'limit_down': 13.0,
	'reference': 14.4
}

```

ğŸ”† Stock

```python
exchange (Exchange): äº¤æ˜“æ‰€ {OES, OTC, TSE ...ç­‰}
code (str): å•†å“ä»£ç¢¼
symbol (str): ç¬¦è™Ÿ
name (str): å•†å“åç¨±
category (str): é¡åˆ¥
unit (int): å–®ä½
limit_up (float): æ¼²åœåƒ¹
limit_down (float): è·Œåœåƒ¹
reference (float): åƒè€ƒåƒ¹
update_date (str): æ›´æ–°æ—¥æœŸ
margin_trading_balance (int): èè³‡é¤˜é¡
short_selling_balance (int): èåˆ¸é¤˜é¡
day_trade (DayTrade): å¯å¦ç•¶æ²– {Yes, No, OnlyBuy}

```

- **æœŸè²¨**

â¡ï¸ In

```python
api.Contracts.Futures["TXFF4"]

```

âœ… Out

```python
Future {
	'exchange': 'F',
	'code': 'TXFF4',
	'symbol': 'TXFF4',
	'name': 'å¤§å°æŒ‡',
	'category': 'TXF',
	'limit_up': 0.0,
	'limit_down': 0.0
}

```

ğŸ”† Future

```python
code (str): å•†å“ä»£ç¢¼
symbol (str): ç¬¦è™Ÿ
name (str): å•†å“åç¨±
category (str): é¡åˆ¥
delivery_month (str): äº¤å‰²æœˆä»½
delivery_date (str): çµç®—æ—¥
underlying_kind (str): æ¨™çš„é¡å‹
unit (int): å–®ä½
limit_up (float): æ¼²åœåƒ¹
limit_down (float): è·Œåœåƒ¹
reference (float): åƒè€ƒåƒ¹
update_date (str): æ›´æ–°æ™‚é–“

```

- é¸æ“‡æ¬Š

â¡ï¸ In

```python
api.Contracts.Options["TXO18000R3"]

```

âœ… Out

```python
Option {
	'exchange': 'O',
	'code': 'TXO21200F4',
	'symbol': 'TXO21200F4',
	'name': 'TXOå°æŒ‡é¸',
	'category': 'TXO',
	'limit_up': 0.0,
	'limit_down': 0.0
}

```

ğŸ”† **Option**

```python
code (str): å•†å“ä»£ç¢¼
symbol (str): ç¬¦è™Ÿ
name (str): å•†å“åç¨±
category (str): é¡å‹
delivery_month (str): äº¤å‰²æœˆä»½
delivery_date (str): äº¤å‰²æ—¥æœŸ
strike_price (int or float): å±¢ç´„åƒ¹
option_right (OptionRight): è²·è³£æ¬Šåˆ¥
underlying_kind (str): æ¨™çš„é¡å‹
limit_up (float): æ¼²åœåƒ¹
limit_down (float): è·Œåœåƒ¹
reference (float): åƒè€ƒåƒ¹
update_date (str): æ›´æ–°æ™‚é–“

```

---

# å§”è¨—ä¸‹å–®

## **è­‰åˆ¸ä¸‹å–®**

â˜‘ï¸ **StockOrder ç‰©ä»¶æ ¼å¼**

```python
>> sp.order.StockOrder?
Init signature:
sp.order.StockOrder(
    *,
    action: superpy.constant.Action,
    price: Union[float],
    quantity: superpy.order.ConstrainedIntValue,
    id: str = '',
    seqno: str = '',
    ordno: str = '',
    account: superpy.account.Account = None,
    custom_field: str = '',
    ca: str = '',
    price_type: superpy.constant.StockPriceType,
    order_type: superpy.constant.OrderType,
    order_lot: superpy.constant.StockOrderLot = <StockOrderLot.Common: 'Common'>,
    order_cond: superpy.constant.StockOrderCond = <StockOrderCond.Cash: 'Cash'>,
    daytrade_short: bool = False,
) -> None

```

ğŸ”† è­‰åˆ¸å§”è¨—å–®

```python
price (float or int): åƒ¹æ ¼
quantity (int): å§”è¨—æ•¸é‡
action (str): {Buy: è²·, Sell: è³£}
price_type (str): {LMT: é™åƒ¹, MKT: å¸‚åƒ¹, MKP: ç¯„åœå¸‚åƒ¹, FallStopPrice: è·Œåœ, UnchangePrice: å¹³ç›¤, RiseStopPrice: æ¼²åœ}
# è¨»ï¼šå› äº¤æ˜“æ‰€åªæœ‰é™åƒ¹è·Ÿå·¿åƒ¹ï¼Œæ•…è¨­å®šprice_typeç‚ºéå¸‚åƒ¹å–®æ™‚ï¼Œå›å ±æœƒçµ±ä¸€ç‚ºé™åƒ¹+å¯¦éš›åƒ¹æ ¼
order_type (str): å§”è¨—é¡åˆ¥ {ROD, IOC, FOK}
order_cond (str): {Cash:ç¾è‚¡, MarginTrading:èè³‡, ShortSelling:èåˆ¸, ShortUnLimit:å€Ÿåˆ¸è³£å‡º, EDN:è³£å‡ºæ“”ä¿å“}
order_lot (str): { Common:æ•´è‚¡, Fixing:å®šç›¤, Odd:ç›¤å¾Œé›¶è‚¡, IntradayOdd:ç›¤ä¸­é›¶è‚¡ }
daytrade_short (bool): å…ˆè³£å¾Œè²·
custom_field (str): å‚™è¨»ï¼Œåªå…è¨±è¼¸å…¥å¤§å°å¯«è‹±æ–‡å­—æ¯åŠæ•¸å­—ï¼Œä¸”é•·åº¦æœ€é•·ç‚º 6
account (:obj:Account): ä¸‹å–®å¸³è™Ÿ
ca (binary): æ†‘è­‰

```

### ä¸‹å–®

ä¸‹å–®æ™‚å¿…é ˆæä¾›å•†å“è³‡è¨Š`contract`åŠä¸‹å–®è³‡è¨Š`order`ã€‚

ğŸ”† **ä¸‹å–®**

```python
api.place_order?
    Signature:
        api.place_order(
            contract: superpy.contracts.Contract,
            order: superpy.order.Order,
            timeout: int = 5000,
            cb: Callable[[superpy.order.Trade], NoneType] = None,
        ) -> superpy.order.Trade
    Docstring:
    placing order

```

â˜‘ï¸ å•†å“æª” Contracts

```python
contract = api.Contracts.Stocks["2883"]

```

â˜‘ï¸ å§”è¨—å–® Order

```python
order = api.Order(
    price=17,
    quantity=3,
    action=sp.constant.Action.Buy,
    price_type=sp.constant.StockPriceType.LMT,
    order_type=sp.constant.OrderType.ROD,
    # order_lot=sp.constant.StockOrderLot.Common, # Default
    # order_cond=sp.constant.StockOrderCond.Cash, # Default
    # daytrade_short=False,
    account=api.stock_account
)

```

â¡ï¸ In

```python
trade = api.place_order(contract, order)

```

âœ… Out

```python
Trade(
	contract=Stock {
		'exchange': 'T',
		'code': '2883',
		'symbol': '2883',
		'name': 'å‡±åŸºé‡‘',
		'limit_up': 15.8,
		'limit_down': 13.0,
		'reference': 14.4
	},
	order=Order {
		'action': <Action.Buy: 'Buy'>,
		'price': 14.4,
		'quantity': 3,
		'account': {
			'person_id': 'A123456789',
			'broker_id': '9268',
			'account_id': '1234567',
			'signed': True
		},
		'custom_field': '',
		'price_type': <StockPriceType.LMT: 'LMT'>,
		'order_type': <OrderType.ROD: 'ROD'>,
		'order_lot': <StockOrderLot.Common: 'Common'>,
		'order_cond': <StockOrderCond.Cash: 'Cash'>,
		'daytrade_short': False,
		'ordno': 'Y004X',
		'id': '1220006369'
	},
	status=OrderStatus {
		'id': '1220006369',
		'status': <Status.Submitted: 'Submitted'>,
		'status_code': '0',
		'order_datetime': datetime.datetime(2024, 5, 20, 14, 13, 31, 380000),
		'order_quantity': '3'
	}
)

```

ä¸‹å–®å®ŒåŒæ™‚ä¹Ÿæœƒæ”¶åˆ°å¾äº¤æ˜“æ‰€å‚³å›ä¾†çš„è³‡æ–™ï¼Œè©³æƒ…å…§å®¹å¯è©³è¦‹**ä¸‹å–®å›å ±**ã€‚

ğŸ”† å§”è¨—å–®ç‹€æ…‹

- `PendingSubmit`: å‚³é€ä¸­
- `PreSubmitted`: é ç´„å–®
- `Submitted`: å‚³é€æˆåŠŸ
- `Failed`: å¤±æ•—
- `Cancelled`: å·²åˆªé™¤
- `Filled`: å®Œå…¨æˆäº¤
- `Filling`: éƒ¨åˆ†æˆäº¤

### æ”¹å–®

ğŸ”† **æ”¹å–®**

```python
api.update_order?
    Signature:
        api.update_order(
            trade: superpy.order.Trade,
            price: Union[pydantic.types.StrictInt, float] = None,
            qty: int = None,
            timeout: int = 5000,
            cb: Ca  lable[[superpy.order.Trade], NoneType] = None,
        ) -> superpy.order.Trade
    Docstring: update the order price or qty

```

- æ”¹åƒ¹

â¡ï¸ In

```python
trade = api.update_order(trade=trade, price=17.5)

```

âœ… Out

```python
Trade(
	contract=Stock {
		'exchange': 'T',
		'code': '2883',
		'symbol': '2883',
		'name': 'å‡±åŸºé‡‘',
		'limit_up': 15.8,
		'limit_down': 13.0,
		'reference': 14.4
	},
	order=Order {
		'action': <Action.Buy: 'Buy'>,
		'price': 14.4,
		'quantity': 3,
		'account': {
			'person_id': 'A123456789',
			'broker_id': '9268',
			'account_id': '1234567',
			'signed': True
		},
		'custom_field': '',
		'price_type': <StockPriceType.LMT: 'LMT'>,
		'order_type': <OrderType.ROD: 'ROD'>,
		'order_lot': <StockOrderLot.Common: 'Common'>,
		'order_cond': <StockOrderCond.Cash: 'Cash'>,
		'daytrade_short': False,
		'ordno': 'Y004X',
		'id': '1220006369'
	},
	status=OrderStatus {
		'id': '1220006369',
		'status': <Status.Submitted: 'Submitted'>,
		'status_code': '0',
		'order_datetime': datetime.datetime(2024, 5, 20, 14, 13, 31, 400000),
		'order_quantity': '3',
		'modified_price': 14.3
	}
)

```

- æ”¹é‡(æ¸›é‡)

`update_order`Â åªèƒ½ç”¨ä¾†**æ¸›å°‘**åŸå§”è¨—å–®çš„å§”è¨—æ•¸é‡ã€‚

â¡ï¸ In

```python
trade = api.update_order(trade=trade, qty=1)

```

âœ… Out

```python
Trade(
	contract=Stock {
		'exchange': 'T',
		'code': '2883',
		'symbol': '2883',
		'name': 'å‡±åŸºé‡‘',
		'limit_up': 15.8,
		'limit_down': 13.0,
		'reference': 14.4
	},
	order=Order {
		'action': <Action.Buy: 'Buy'>,
		'price': 14.4,
		'quantity': 3,
		'account': {
			'person_id': 'A123456789',
			'broker_id': '9268',
			'account_id': '1234567',
			'signed': True
		},
		'custom_field': '',
		'price_type': <StockPriceType.LMT: 'LMT'>,
		'order_type': <OrderType.ROD: 'ROD'>,
		'order_lot': <StockOrderLot.Common: 'Common'>,
		'order_cond': <StockOrderCond.Cash: 'Cash'>,
		'daytrade_short': False,
		'ordno': 'Y004X',
		'id': '1220006369'
	},
	status=OrderStatus {
		'id': '1220006369',
		'status': <Status.Submitted: 'Submitted'>,
		'status_code': '0',
		'order_datetime': datetime.datetime(2024, 5, 20, 14, 13, 31, 410000),
		'order_quantity': '3',
		'modified_price': 14.3,
		'cancel_quantity': 1
	}
)

```

---

### åˆªå–®

â¡ï¸ In

```python
trade = api.cancel_order(trade)

```

âœ… Out

```python
Trade(
	contract=Stock {
		'exchange': 'T',
		'code': '2883',
		'symbol': '2883',
		'name': 'å‡±åŸºé‡‘',
		'limit_up': 15.8,
		'limit_down': 13.0,
		'reference': 14.4
	},
	order=Order {
		'action': <Action.Buy: 'Buy'>,
		'price': 14.4,
		'quantity': 3,
		'account': {
			'person_id': 'A123456789',
			'broker_id': '9268',
			'account_id': '1234567',
			'signed': True
		},
		'custom_field': '',
		'price_type': <StockPriceType.LMT: 'LMT'>,
		'order_type': <OrderType.ROD: 'ROD'>,
		'order_lot': <StockOrderLot.Common: 'Common'>,
		'order_cond': <StockOrderCond.Cash: 'Cash'>,
		'daytrade_short': False,
		'ordno': 'Y004X',
		'id': '1220006369'
	},
	status=OrderStatus {
		'id': '1220006369',
		'status': <Status.Submitted: 'Submitted'>,
		'status_code': '0',
		'order_datetime': datetime.datetime(2024, 5, 20, 14, 13, 31, 420000),
		'order_quantity': '3',
		'modified_price': 14.3,
		'cancel_quantity': '2'
	}
)

```

---

## **æœŸè²¨ä¸‹å–®**

â˜‘ï¸ **FuturesOrder ç‰©ä»¶æ ¼å¼**

```python
>> sp.order.FuturesOrder?
Init signature:
sp.order.FuturesOrder(
    *,
    action: superpy.constant.Action,
    price: Union[pydantic.types.StrictInt, float],
    quantity: superpy.order.ConstrainedIntValue,
    id: str = '',
    seqno: str = '',
    ordno: str = '',
    account: superpy.account.Account = None,
    custom_field: superpy.order.ConstrainedStrValue = '',
    ca: str = '',
    price_type: superpy.constant.FuturesPriceType,
    order_type: superpy.constant.OrderType,
    octype: superpy.constant.FuturesOCType = <FuturesOCType.Auto: 'Auto'>,
) -> None

```

ğŸ”† æœŸè²¨å§”è¨—å–®

```python
price (float or int): åƒ¹æ ¼
quantity (int): å§”è¨—æ•¸é‡
action (str): {Buy: è²·, Sell: è³£}
price_type (str): {LMT: é™åƒ¹, MKT: å¸‚åƒ¹, MKP: ç¯„åœå¸‚åƒ¹}
order_type (str): å§”è¨—é¡åˆ¥ {ROD, IOC, FOK}
octype (str): {Auto: è‡ªå‹•, New: æ–°å€‰, Cover: å¹³å€‰, DayTrade: ç•¶æ²–}
account (:obj:Account): ä¸‹å–®å¸³è™Ÿ
ca (binary): æ†‘è­‰

```

### ä¸‹å–®

ä¸‹å–®æ™‚å¿…é ˆæä¾›å•†å“è³‡è¨Š`contract`åŠä¸‹å–®è³‡è¨Š`order`ã€‚

ğŸ”† **ä¸‹å–®**

```python
api.place_order?
    Signature:
        api.place_order(
            contract: superpy.contracts.Contract,
            order: superpy.order.Order,
            timeout: int = 5000,
            cb: Callable[[superpy.order.Trade], NoneType] = None,
        ) -> superpy.order.Trade
    Docstring:
    placing order

```

â˜‘ï¸ å•†å“æª” Contracts

```python
contract = api.Contracts.Futures["TXFF4"]

```

â˜‘ï¸ å§”è¨—å–® Order

```python
order = api.Order(
    action=sp.constant.Action.Buy,
    price=21300,
    quantity=3,
    price_type=sp.constant.FuturesPriceType.LMT,
    order_type=sp.constant.OrderType.ROD,
    octype=sp.constant.FuturesOCType.Auto,
    account=api.futopt_account
)

```

â¡ï¸ In

```python
trade = api.place_order(contract, order)

```

âœ… Out

```python
Trade(
	contract=Future {
		'exchange': 'F',
		'code': 'TXFF4',
		'symbol': 'TXFF4',
		'name': 'å¤§å°æŒ‡',
		'category': 'TXF',
		'limit_up': 0.0,
		'limit_down': 0.0
	},
	order=Order {
		'action': <Action.Buy: 'Buy'>,
		'price': 21300,
		'quantity': 3,
		'account': {
			'person_id': 'A123456789',
			'broker_id': 'F004009',
			'account_id': '1234567',
			'signed': True
		},
		'custom_field': '',
		'price_type': <FuturesPriceType.LMT: 'LMT'>,
		'order_type': <OrderType.ROD: 'ROD'>,
		'octype': <FuturesOCType.Auto: 'Auto'>,
		'ordno': 'wAaaq',
		'id': '00380617'
	}
	status=OrderStatus {
		'id': '00380617',
		'status': <Status.Submitted: 'Submitted'>,
		'status_code': '10000000',
		'order_datetime': datetime.datetime(2024, 5, 20, 15, 6, 4),
		'order_quantity': '3',
		'web_id': '126'
	}
)

```

ä¸‹å–®å®ŒåŒæ™‚ä¹Ÿæœƒæ”¶åˆ°å¾äº¤æ˜“æ‰€å‚³å›ä¾†çš„è³‡æ–™ï¼Œè©³æƒ…å…§å®¹å¯è©³è¦‹**ä¸‹å–®å›å ±**ã€‚

ğŸ”† å§”è¨—å–®ç‹€æ…‹

- `PendingSubmit`: å‚³é€ä¸­
- `PreSubmitted`: é ç´„å–®
- `Submitted`: å‚³é€æˆåŠŸ
- `Failed`: å¤±æ•—
- `Cancelled`: å·²åˆªé™¤
- `Filled`: å®Œå…¨æˆäº¤
- `Filling`: éƒ¨åˆ†æˆäº¤

### æ”¹å–®

ğŸ”† **æ”¹å–®**

```python
api.update_order?
    Signature:
        api.update_order(
            trade: superpy.order.Trade,
            price: Union[pydantic.types.StrictInt, float] = None,
            qty: int = None,
            timeout: int = 5000,
            cb: Ca  lable[[superpy.order.Trade], NoneType] = None,
        ) -> superpy.order.Trade
    Docstring: update the order price or qty

```

- æ”¹åƒ¹

â¡ï¸ In

```python
trade = api.update_order(trade=trade, price=21350)

```

âœ… Out

```python
Trade(
	contract=Future {
		'exchange': 'F',
		'code': 'TXFF4',
		'symbol': 'TXFF4',
		'name': 'å¤§å°æŒ‡',
		'category': 'TXF',
		'limit_up': 0.0,
		'limit_down': 0.0
	},
	order=Order {
		'action': <Action.Buy: 'Buy'>,
		'price': 21300,
		'quantity': 3,
		'account': {
			'person_id': 'A123456789',
			'broker_id': 'F004009',
			'account_id': '1234567',
			'signed': True
		},
		'custom_field': '',
		'price_type': <FuturesPriceType.LMT: 'LMT'>,
		'order_type': <OrderType.ROD: 'ROD'>,
		'octype': <FuturesOCType.Auto: 'Auto'>,
		'ordno': 'wAaaq',
		'id': '00380617'
	}
	status=OrderStatus {
		'id': '00380617',
		'status': <Status.Submitted: 'Submitted'>,
		'status_code': '10000000',
		'order_datetime': datetime.datetime(2024, 5, 20, 15, 11, 14),
		'order_quantity': '3',
		'web_id': '126',
		'modified_price': 21350
	}
)

```

- æ”¹é‡(æ¸›é‡)

`update_order`Â åªèƒ½ç”¨ä¾†**æ¸›å°‘**åŸå§”è¨—å–®çš„å§”è¨—æ•¸é‡ã€‚

â¡ï¸ In

```python
trade = api.update_order(trade=trade, qty=1)

```

âœ… Out

```python
Trade(
	contract=Future {
		'exchange': 'F',
		'code': 'TXFF4',
		'symbol': 'TXFF4',
		'name': 'å¤§å°æŒ‡',
		'category': 'TXF',
		'limit_up': 0.0,
		'limit_down': 0.0
	},
	order=Order {
		'action': <Action.Buy: 'Buy'>,
		'price': 21300,
		'quantity': 3,
		'account': {
			'person_id': 'A123456789',
			'broker_id': 'F004009',
			'account_id': '1234567',
			'signed': True
		},
		'custom_field': '',
		'price_type': <FuturesPriceType.LMT: 'LMT'>,
		'order_type': <OrderType.ROD: 'ROD'>,
		'octype': <FuturesOCType.Auto: 'Auto'>,
		'ordno': 'wAaaq',
		'id': '00380617'
	}
	status=OrderStatus {
		'id': '00380617',
		'status': <Status.Submitted: 'Submitted'>,
		'status_code': '10000000',
		'order_datetime': datetime.datetime(2024, 5, 20, 15, 11, 15),
		'order_quantity': '3',
		'web_id': '126',
		'modified_price': 21350,
		'cancel_quantity': 1
	}
)

```

---

### åˆªå–®

â¡ï¸ In

```python
trade = api.cancel_order(trade)

```

âœ… Out

```python
Trade(
	contract=Future {
		'exchange': 'F',
		'code': 'TXFF4',
		'symbol': 'TXFF4',
		'name': 'å¤§å°æŒ‡',
		'category': 'TXF',
		'limit_up': 0.0,
		'limit_down': 0.0
	},
	order=Order {
		'action': <Action.Buy: 'Buy'>,
		'price': 21300,
		'quantity': 3,
		'account': {
			'person_id': 'A123456789',
			'broker_id': 'F004009',
			'account_id': '1234567',
			'signed': True
		},
		'custom_field': '',
		'price_type': <FuturesPriceType.LMT: 'LMT'>,
		'order_type': <OrderType.ROD: 'ROD'>,
		'octype': <FuturesOCType.Auto: 'Auto'>,
		'ordno': 'wAaaq',
		'id': '00380617'
	}
	status=OrderStatus {
		'id': '00380617',
		'status': <Status.Submitted: 'Submitted'>,
		'status_code': '10000000',
		'order_datetime': datetime.datetime(2024, 5, 20, 15, 11, 15),
		'order_quantity': '3',
		'web_id': '126',
		'modified_price': 21350,
		'cancel_quantity': 2
	}
)

```

---

## æŸ¥è©¢ç‹€æ…‹

åœ¨å–å¾—Â `Trade`Â ç‹€æ…‹å‰ï¼Œå¿…é ˆå…ˆåˆ©ç”¨`update_status`é€²è¡Œæ›´æ–°ã€‚å¦‚æœç„¡æ³•æˆåŠŸåˆªå–®æˆ–æ”¹å–®ï¼Œä½ å¯ä»¥å°ç‰¹å®š`trade`ç‰©ä»¶é€²è¡Œæ›´æ–°ï¼Œä¸¦ç¢ºèªåœ¨`trade`ä¸­çš„`OrderStatus`ï¼Œæ˜¯å¦ç‚ºå¯åˆªæ”¹ç‹€æ…‹ã€‚`update_status`Â é è¨­æŸ¥è©¢ç‚ºåä¸‹æ‰€æœ‰å¸³è™Ÿã€‚è‹¥æƒ³æŸ¥è©¢ç‰¹å®šå¸³è™Ÿï¼Œå°‡å¸³è™Ÿå¸¶å…¥`account`ã€‚

â˜‘ï¸ **Update Status**

```python
api.update_status?
```

âœ… Out

```python
Signature:
    api.update_status(
        account: superpy.account.Account = None,
        trade: superpy.order.Trade = None,
    )
Docstring: update status of all trades you have
```

### **å–å¾—è­‰åˆ¸å§”è¨—ç‹€æ…‹**

â¡ï¸ In

```python
api.update_status(api.stock_account)
api.list_trades()
```

âœ… Out

```python
[
	Trade(
		contract=Stock {
			'exchange': 'T',
			'code': '2883',
			'symbol': '2883',
			'name': 'å‡±åŸºé‡‘',
			'limit_up': 15.8,
			'limit_down': 13.0,
			'reference': 14.4
		},
		order=Order {
			'action': <Action.Buy: 'Buy'>,
			'price': 14.4,
			'quantity': 3,
			'account': {
				'person_id': 'A123456789',
				'broker_id': '9268',
				'account_id': '1234567',
				'signed': True
			},
			'custom_field': '',
			'price_type': <StockPriceType.LMT: 'LMT'>,
			'order_type': <OrderType.ROD: 'ROD'>,
			'order_lot': <StockOrderLot.Common: 'Common'>,
			'order_cond': <StockOrderCond.Cash: 'Cash'>,
			'daytrade_short': False,
			'ordno': 'Y004X',
			'id': '1220006369'
		},
		status=OrderStatus {
			'id': '1220006369',
			'status': <Status.Submitted: 'Submitted'>,
			'status_code': '0',
			'order_datetime': datetime.datetime(2024, 5, 20, 14, 13, 31, 380000),
			'order_quantity': '3'
		}
	)
]
```

### **å–å¾—æœŸè²¨å§”è¨—ç‹€æ…‹**

â¡ï¸ In

```python
api.update_status(api.futopt_account)
api.list_trades()
```

âœ… Out

```python
[
	Trade(
		contract=Future {
			'exchange': 'F',
			'code': 'TXFF4',
			'symbol': 'TXFF4',
			'name': 'å¤§å°æŒ‡',
			'category': 'TXF',
			'limit_up': 0.0,
			'limit_down': 0.0
		},
		order=Order {
			'action': <Action.Buy: 'Buy'>,
			'price': 21300,
			'quantity': 3,
			'account': {
				'person_id': 'A123456789',
				'broker_id': 'F004009',
				'account_id': '1234567',
				'signed': True
			},
			'custom_field': '',
			'price_type': <FuturesPriceType.LMT: 'LMT'>,
			'order_type': <OrderType.ROD: 'ROD'>,
			'octype': <FuturesOCType.Auto: 'Auto'>,
			'ordno': 'wAaaq',
			'id': '00380617'
		}
		status=OrderStatus {
			'id': '00380617',
			'status': <Status.Submitted: 'Submitted'>,
			'status_code': '10000000',
			'order_datetime': datetime.datetime(2024, 5, 20, 15, 6, 4),
			'order_quantity': '3',
			'web_id': '126'
		}
	)
]
```

### **æ›´æ–°ç‰¹å®šäº¤æ˜“ç‹€æ…‹**

â˜‘ï¸ **æ›´æ–°ç‰¹å®šäº¤æ˜“ç‹€æ…‹**

```python
# you can get trade from place_order
# trade = api.place_order(contract, order)

# or get from api.list_trades
# trade = api.list_trades()[0]

api.update_status(trade=trade)
```

### **å§”è¨—åŠæˆäº¤ç‹€æ…‹å±¬æ€§**

ğŸ”† **å§”è¨—ç‹€æ…‹å±¬æ€§**

```python
id (str): é—œè¯Orderç‰©ä»¶ç·¨ç¢¼
status (:obj:Status): {
            Cancelled: å·²åˆªé™¤, 
            Filled: å®Œå…¨æˆäº¤, 
            PartFilled: éƒ¨åˆ†æˆäº¤, 
            Failed: å¤±æ•—, 
            PendingSubmit: å‚³é€ä¸­, 
            PreSubmitted: é ç´„å–®, 
            Submitted: å‚³é€æˆåŠŸ
        }
status_code (str): ç‹€æ…‹ç¢¼
order_datetime (datetime): å§”è¨—æ™‚é–“
order_quantity (int): å§”è¨—æ•¸é‡
modified_price (float): æ”¹åƒ¹é‡‘é¡
cancel_quantity (int): å–æ¶ˆå§”è¨—æ•¸é‡
deals (:List:Deal): æˆäº¤è³‡è¨Š
```

ğŸ”† **æˆäº¤å±¬æ€§**

```python
seq (str): æˆäº¤åºè™Ÿ
price (int or float): æˆäº¤åƒ¹
quantity (int): æˆäº¤æ•¸é‡
```

---

# å§”è¨—å›å ±

æ¯æ¬¡æ‚¨ä½¿ç”¨Â `place_order`ã€`update_order`Â æˆ–è€…Â `cancel_order`Â æ™‚ï¼Œé è¨­çš†æœƒæ”¶åˆ°ä¾†è‡ªäº¤æ˜“æ‰€çš„å§”è¨—æˆ–æˆäº¤å›å ±ã€‚å¦‚æœæ‚¨ä¸æƒ³æ”¶åˆ°ä»»ä½•å›å ±é€šçŸ¥ï¼Œæ‚¨å¯ä»¥åƒè€ƒè¨‚é–±å§”è¨—å›å ±å°‡å…¶é—œé–‰ã€‚æˆ‘å€‘äº¦æä¾›äº†è™•ç†å§”è¨—åŠæˆäº¤å›å ±çš„ä»‹é¢ã€‚å¦‚æœæ‚¨æ­£åœ¨å»ºç«‹è‡ªå·±çš„äº¤æ˜“ç³»çµ±ï¼Œé€™æœƒéå¸¸æœ‰å¹«åŠ©ã€‚

## **è™•ç†å§”è¨—åŠæˆäº¤å›å ±**

æ‚¨å¯ä»¥ä½¿ç”¨Â `set_order_callback`Â ä¾†è™•ç†å§”è¨—åŠæˆäº¤å›å ±ã€‚ä»¥ä¸‹ç¯„ä¾‹é¡¯ç¤ºï¼Œè‡ªè£½çš„å§”è¨—å›å ±å‡½æ•¸(`order_cb`)å°‡å…ˆ printÂ `my_order_callback`Â ç„¶å¾Œæ‰ print å§”è¨—åŠæˆäº¤å›å ±ã€‚

â˜‘ï¸ **è¨­å®šå§”è¨—å›å ±å‡½å¼**

```python
def order_cb(stat, msg):
    print('my_order_callback')
    print(stat, msg)
api.set_order_callback(order_cb)

```

## **å§”è¨—å›å ±**

ç•¶æœŸäº¤æ‰€æ”¶åˆ°å§”è¨—å°‡æœƒå›å‚³å›å ±ã€‚åœ¨å›å ±ä¸­åˆ†ç‚ºå››éƒ¨åˆ†ï¼ŒåŒ…æ‹¬`operation`ã€`order`ã€`status`åŠ`contract`ã€‚ä»¥ä¸‹æˆ‘å€‘æœƒåœ¨é€²è¡Œè©³ç´°çš„èªªæ˜ã€‚

- **operation**

```python
op_type (str): {
        "New": æ–°å–®,
        "Cancel": åˆªå–®,
        "UpdatePrice": æ”¹åƒ¹,
        "UpdateQty": æ”¹é‡
    }
op_code (str): {"00": æˆåŠŸ, others: å¤±æ•—}
op_msg (str): éŒ¯èª¤è¨Šæ¯

```

- **status**

```python
id (str): èˆ‡æˆäº¤å›å ±çš„trade_idç›¸åŒ
exchange_ts (int): äº¤æ˜“æ‰€æ™‚é–“
modified_price (float or int): æ”¹åƒ¹
cancel_quantity (int): å–æ¶ˆæ•¸é‡
order_quantity (int): å§”è¨—æ•¸é‡
web_id (str): ä¸‹å–®å¹³å°ä»£ç¢¼

```

- **orderã€contractï¼šåƒè€ƒè­‰åˆ¸ã€æœŸè²¨å›å ±**

## **æˆäº¤å›å ±**

ç•¶æ“åˆæˆåŠŸï¼ŒæœŸäº¤æ‰€æœƒå‚³é€æˆäº¤å›å ±å‘ŠçŸ¥ã€‚æ“åˆæˆåŠŸåŒ…å«éƒ¨åˆ†æˆäº¤ä»¥åŠå®Œå…¨æˆäº¤ï¼Œå¯ä»¥å¾å§”è¨—å›å ±ä¸­çš„`id`å»å°æ‡‰æˆäº¤å›å ±ä¸­çš„`trade_id`å»ç¢ºèªæ˜¯å¦ç‚ºåŒä¸€ç­†å§”è¨—å–®ã€‚

âš ï¸ äº¤æ˜“æ‰€å›å‚³è¨Šæ¯å„ªå…ˆé †åºæˆäº¤å›å ±å¤§æ–¼å§”è¨—å›å ±ï¼Œæ‰€ä»¥ç•¶å§”è¨—ç«‹å³æˆäº¤å¯èƒ½æœƒå…ˆæ”¶åˆ°æˆäº¤å›å ±ã€‚

## è­‰åˆ¸å›å ±

### å§”è¨—

â˜‘ï¸ Order Callback

```python
OrderState.StockOrder {
	'operation': {
		'op_type': 'New',
		'op_code': '0',
		'op_msg': ''
	},
	'order': {
		'id': '1220006374',
		'ordno': 'Y005M',
		'account': {
			'account_type': 'S',
			'broker_id':
			'9268',
			'account_id': '1234567'
		},
		'action': 'Buy',
		'price': '14.4',
		'quantity': '3',
		'order_type': 'ROD',
		'price_type': 'MKT',
		'order_cond': 'CASH',
		'order_lot': 'Common'
	},
	'status': {
		'id': '1220006374',
		'modified_price': 0,
		'cancel_quantity': 0,
		'order_quantity': '3'
	},
	'contract': {
		'security_type': 'STK',
		'exchange': 'TSE',
		'code': '2883',
		'symbol': '',
		'name': '',
		'currency': 'TWD'
	}
}

```

ğŸ”† **å§”è¨—å›å ±è³‡è¨Š**

- order

```python
id (str): èˆ‡æˆäº¤å›å ±çš„trade_idç›¸åŒ
seqno (str): å¹³å°å–®è™Ÿ
ordno (str): å§”è¨—å–®è™Ÿ
account (dict): å¸³è™Ÿè³‡è¨Š
action (str): è²·è³£åˆ¥ {Buy, Sell}
price (float or int): å§”è¨—åƒ¹æ ¼
quantity (int): å§”è¨—æ•¸é‡
order_type (str): å§”è¨—é¡åˆ¥ {ROD, IOC, FOK}
price_type (str): {
			LMT: é™åƒ¹,
			MKT: å¸‚åƒ¹,
			MKP: ç¯„åœå¸‚åƒ¹
			# è¨»ï¼šå› äº¤æ˜“æ‰€åªæœ‰é™åƒ¹è·Ÿå·¿åƒ¹ï¼Œæ•…è¨­å®šprice_typeç‚ºéå¸‚åƒ¹å–®æ™‚ï¼Œå›å ±æœƒçµ±ä¸€ç‚ºé™åƒ¹+å¯¦éš›åƒ¹æ ¼
		}
order_cond (str): {
			Cash: ç¾è‚¡,
			MarginTrading: èè³‡,
			ShortSelling:èåˆ¸,
			ShortUnLimit:å€Ÿåˆ¸è³£å‡º,
			EDN:è³£å‡ºæ“”ä¿å“
        }
order_lot (str): {
            Common: æ•´è‚¡,
            Fixing: å®šç›¤,
            Odd: ç›¤å¾Œé›¶è‚¡,
            IntradayOdd: ç›¤ä¸­é›¶è‚¡
        }
custom_field (str): è‡ªè¨‚æ¬„ä½

```

- contract

```python
security_type (str): å•†å“é¡åˆ¥
exchange (str): äº¤æ˜“æ‰€
code (str): å•†å“ä»£ç¢¼
symbol (str): ç¬¦è™Ÿ
name (str): å•†å“åç¨±
currency (str): å¹£åˆ¥

```

### æˆäº¤

â˜‘ï¸ Deal Callback

```python
OrderState.StockDeal {
	'trade_id': '1220006374',
	'ordno': 'Y005M',
	'broker_id': '9268',
	'account_id': '1234567',
	'action': 'Buy',
	'code': '2883',
	'order_cond': 'CASH',
	'order_lot': 'Common',
	'price': '14.4',
	'quantity': '3'
}

```

ğŸ”† **æˆäº¤å›å ±è³‡è¨Š**

```python
trade_id (str): èˆ‡å§”è¨—å›å ±idç›¸åŒ
seqno (str): å¹³å°å–®è™Ÿ
ordno (str): å‰äº”ç¢¼ç‚ºåŒå§”è¨—å›å ±å§”è¨—å–®è™Ÿï¼Œå¾Œä¸‰ç¢¼ç‚ºåŒç­†å§”è¨—æˆäº¤äº¤æ˜“åºè™Ÿã€‚
exchange_seq (str): å›å ±åºè™Ÿ
broker_id (str): åˆ†è¡Œä»£ç¢¼
account_id (str): å¸³è™Ÿ
action (str): è²·è³£åˆ¥ {Buy, Sell}
code (str): å•†å“ä»£ç¢¼
order_cond (str): {
            Cash: ç¾è‚¡,
            MarginTrading: èè³‡,
            ShortSelling: èåˆ¸,
            ShortUnLimit: å€Ÿåˆ¸è³£å‡º,
            EDN: è³£å‡ºæ“”ä¿å“
        }
order_lot (str): {
            Common: æ•´è‚¡,
            Fixing: å®šç›¤,
            Odd: ç›¤å¾Œé›¶è‚¡,
            IntradayOdd: ç›¤ä¸­é›¶è‚¡
        }
price (float or int): æˆäº¤åƒ¹
quantity (int): æˆäº¤é‡
web_id (str): å¹³å°ä»£ç¢¼
custom_field (str): è‡ªè¨‚æ¬„ä½
ts (int): æˆäº¤æ™‚é–“æˆ³

```

## æœŸè²¨å›å ±

### å§”è¨—

â˜‘ï¸ Order Callback

```python
OrderState.FuturesOrder {
	'operation': {
		'op_type': 'New',
		'op_code': '0',
		'op_msg': '10000000'
	},
	'order': {
		'id': '00380622',
		'ordno': 'wAaas',
		'account': {
			'account_type': 'F',
			'broker_id': 'F004009',
			'account_id': '1234567'
		},
		'action': 'Buy',
		'price': '0021300.00',
		'quantity': '3',
		'order_type': 'ROD',
		'price_type': 'MKT',
		'oc_type': 'New'
	},
	'status': {
		'id': '00380622',
		'modified_price': 0,
		'cancel_quantity': 0,
		'order_quantity': '3',
		'web_id': '126'
	},
	'contract': {
		'security_type': 'FUT',
		'exchange': 'TAIFEX',
		'code': 'TXFF4'
	}
}

```

ğŸ”† **å§”è¨—å›å ±è³‡è¨Š**

- order

```python
id (str): èˆ‡æˆäº¤å›å ±çš„trade_idç›¸åŒ
seqno (str): å¹³å°å–®è™Ÿ
ordno (str): å§”è¨—å–®è™Ÿ
account (dict): å¸³è™Ÿè³‡è¨Š
action (str): è²·è³£åˆ¥
price (float or int): å§”è¨—åƒ¹
quantity (int): å§”è¨—é‡
order_cond (str): {
            Cash: ç¾è‚¡,
            MarginTrading: èè³‡,
            ShortSelling: èåˆ¸
        }
order_type (str): å§”è¨—é¡åˆ¥ {ROD, IOC, FOK}
price_type (str): {LMT: é™åƒ¹, MKT: å¸‚åƒ¹, MKP: ç¯„åœå¸‚åƒ¹}
market_type (str): å¸‚å ´åˆ¥ {Day:æ—¥ç›¤, Night:å¤œç›¤}
oc_type(str): {New: æ–°å€‰, Cover: å¹³å€‰, Auto: è‡ªå‹•}
subaccount(str): å­å¸³è™Ÿ
combo (bool): æ˜¯å¦ç‚ºçµ„åˆå–®

```

- contract

```python
security_type (str): å•†å“é¡åˆ¥
code (str): å•†å“ä»£ç¢¼
exchange (str): äº¤æ˜“æ‰€
delivery_month (str): äº¤å‰²æœˆä»½
delivery_date (str): äº¤å‰²æ—¥æœŸ
strike_price (float): å±¥ç´„åƒ¹
option_right (str): {Future, OptionCall, OptionPut}

```

### æˆäº¤

â˜‘ï¸ Deal Callback

```python
OrderState.FuturesDeal {
	'trade_id': '00380622',
	'ordno': 'wAaas',
	'exchange_seq': '00000005',
	'broker_id': 'F004009',
	'account_id': '0118131',
	'action': 'Buy',
	'code': 'TXFF4',
	'price': '0021300.00',
	'quantity': '3',
	'security_type': '1'
}

```

ğŸ”† **æˆäº¤å›å ±è³‡è¨Š**

```python
trade_id (str): èˆ‡å§”è¨—å›å ±idç›¸åŒ
seqno (str): å¹³å°å–®è™Ÿ
ordno (str): å‰äº”ç¢¼ç‚ºåŒå§”è¨—å›å ±å§”è¨—å–®è™Ÿï¼Œå¾Œä¸‰ç¢¼ç‚ºåŒç­†å§”è¨—æˆäº¤äº¤æ˜“åºè™Ÿã€‚
exchange_seq (str): å›å ±åºè™Ÿ
broker_id (str): åˆ†è¡Œä»£ç¢¼
account_id (str): å¸³è™Ÿ
action (str): è²·è³£åˆ¥
code (str): å•†å“ä»£ç¢¼
price (float or int): æˆäº¤åƒ¹
quantity (int): æˆäº¤é‡
subaccount (str): å­å¸³è™Ÿ
security_type (str): å•†å“é¡åˆ¥
delivery_month (str): äº¤å‰²æœˆä»½
strike_price (float): å±¥ç´„åƒ¹
option_right (str): {Future, OptionCall, OptionPut}
market_type (str): {Day, Night}
ts (int): æˆäº¤æ™‚é–“æˆ³

```

---

# è¡Œæƒ…è³‡æ–™

åˆ©ç”¨è¨‚é–±å•†å“æª”çš„æ–¹å¼å»å–å¾—å³æ™‚è¡Œæƒ…ã€‚

### **Callback**

é è¨­ç‹€æ³ä¸‹æˆ‘å€‘å°‡å³æ™‚è¡Œæƒ…ä½¿ç”¨`print`çš„æ–¹å¼å‘ˆç¾ã€‚å¯æ ¹æ“šå€‹äººéœ€æ±‚ä¿®æ”¹å‡½æ•¸ã€‚è«‹é¿å…åœ¨å‡½æ•¸å…§é€²è¡Œé‹ç®—ã€‚

## è¨‚é–±è­‰åˆ¸è¡Œæƒ…

â˜‘ï¸ **Subscribe**

```python
>> api.quote.subscribe?
Signature:
    api.quote.subscribe(
        contract:superpy.contracts.Contract,
        quote_type:superpy.constant.QuoteType=<QuoteType.Tick: 'tick'>,
        intraday_odd:bool=False,
    )

```

ğŸ”† **Quote Parameters**

```python
quote_type: è¨‚é–±é¡å‹ {'tick', 'bidask'}
intraday_odd: ç›¤ä¸­é›¶è‚¡ {True, False}

```

## Tick

### **æ•´è‚¡**

**â¡ï¸ In**

```python
api.quote.subscribe(
    api.Contracts.Stocks["2330"],
    quote_type = sp.constant.QuoteType.Tick,
)

```

### **ç›¤ä¸­é›¶è‚¡**

**â¡ï¸ In**

```python
api.quote.subscribe(
    api.Contracts.Stocks["2330"],
    quote_type = sp.constant.QuoteType.Tick,
    intraday_odd = True)

```

**âœ… Out**

```python
Exchange.TSE
Tick: {
	'code': '2330',
	'datetime': 120048039,
	'amount': 827.0,
	'volume': 2.0,
	'total_volume': 18668.0,
	'simtrade': False,
	'intraday_odd': 0
}

```

### **å±¬æ€§**

```python
code (str): å•†å“ä»£ç¢¼
datetime (datetime): æ™‚é–“
open (decimal): é–‹ç›¤åƒ¹
avg_price (decimal): å‡åƒ¹
close (decimal): æˆäº¤åƒ¹
high (decimal): æœ€é«˜åƒ¹(è‡ªé–‹ç›¤)
low (decimal): æœ€ä½åƒ¹(è‡ªé–‹ç›¤)
amount (decimal): æˆäº¤é¡ (NTD)
total_amount (decimal): ç¸½æˆäº¤é¡ (NTD)
volume (int): æˆäº¤é‡ (æ•´è‚¡:å¼µ, ç›¤ä¸­é›¶è‚¡: è‚¡)
total_volume (int): ç¸½æˆäº¤é‡ (æ•´è‚¡:å¼µ, ç›¤ä¸­é›¶è‚¡: è‚¡)
tick_type (int): å…§å¤–ç›¤åˆ¥{1: å¤–ç›¤, 2: å…§ç›¤, 0: ç„¡æ³•åˆ¤å®š}
chg_type (int): æ¼²è·Œè¨»è¨˜{1: æ¼²åœ, 2: æ¼², 3: å¹³ç›¤, 4: è·Œ, 5: è·Œåœ}
price_chg (decimal): æ¼²è·Œ
pct_chg (decimal):  æ¼²è·Œå¹…
bid_side_total_vol (int): è²·ç›¤æˆäº¤ç¸½é‡ (æ•´è‚¡:å¼µ, ç›¤ä¸­é›¶è‚¡: è‚¡)
ask_side_total_vol (int): è³£ç›¤æˆäº¤ç¸½é‡ (æ•´è‚¡:å¼µ, ç›¤ä¸­é›¶è‚¡: è‚¡)
bid_side_total_cnt (int): è²·ç›¤æˆäº¤ç­†æ•¸
ask_side_total_cnt (int): è³£ç›¤æˆäº¤ç­†æ•¸
closing_oddlot_shares (int): ç›¤å¾Œé›¶è‚¡æˆäº¤è‚¡æ•¸(è‚¡)
fixed_trade_vol (int): å®šç›¤æˆäº¤é‡ (æ•´è‚¡:å¼µ, ç›¤ä¸­é›¶è‚¡: è‚¡)
suspend (bool): æš«åœäº¤æ˜“
simtrade (bool): è©¦æ’®
intraday_odd (int): ç›¤ä¸­é›¶è‚¡ {0: æ•´è‚¡, 1:ç›¤ä¸­é›¶è‚¡}

```

## **BidAsk**

### **æ•´è‚¡**

**â¡ï¸ In**

```python
api.quote.subscribe(
    api.Contracts.Stocks["2330"],
    quote_type = sp.constant.QuoteType.BidAsk,
)

```

### **ç›¤ä¸­é›¶è‚¡**

**â¡ï¸ In**

```python
api.quote.subscribe(
    api.Contracts.Stocks["2330"],
    quote_type = sp.constant.QuoteType.BidAsk,
    intraday_odd = True)

```

**âœ… Out**

```python
Exchange.TSE
BidAsk: {
	'code': '2330',
	'datetime': 120048039,
	'bid_price': [827.0, 826.0, 825.0, 824.0, 823.0],
	'bid_volume': [82, 72, 183, 119, 144],
	'ask_price': [828.0, 829.0, 830.0, 831.0, 832.0],
	'ask_volume': [4, 170, 266, 627, 185],
	'simtrade': False,
	'intraday_odd': 0
}

```

### **å±¬æ€§**

```python
code (str): å•†å“ä»£ç¢¼
datetime (datetime): æ™‚é–“
bid_price (:List:decimal): å§”è²·åƒ¹
bid_volume (:List:int): å§”è²·é‡ (å¼µ)
diff_bid_vol (:List:int): è²·åƒ¹å¢æ¸›é‡ (å¼µ)
ask_price (:List:decimal): å§”è³£åƒ¹
ask_volume (:List:int): å§”è³£é‡
diff_ask_vol (:List:int): è³£åƒ¹å¢æ¸›é‡ (å¼µ)
suspend (bool): æš«åœäº¤æ˜“
simtrade (bool): è©¦æ’®

```

## **Callback**

### Tick

â˜‘ï¸ **decoratoræ–¹å¼**

```python
from superpy import TickSTKv1, Exchange
@api.on_tick_stk_v1()
def quote_callback(exchange: Exchange, tick:TickSTKv1):
    print(f"Exchange: {exchange}, Tick: {tick}")

```

â˜‘ï¸ **å‚³çµ±æ–¹å¼**

```python
from superpy import TickSTKv1, Exchange
def quote_callback(exchange: Exchange, tick:TickSTKv1):
    print(f"Exchange: {exchange}, Tick: {tick}")
api.quote.set_on_tick_stk_v1_callback(quote_callback)

```

### **BidAsk**

â˜‘ï¸ **decoratoræ–¹å¼**

```python
from superpy import BidAskSTKv1, Exchange
@api.on_bidask_stk_v1()
def quote_callback(exchange: Exchange, bidask:BidAskSTKv1):
    print(f"Exchange: {exchange}, BidAsk: {bidask}")

```

â˜‘ï¸ **å‚³çµ±æ–¹å¼**

```python
from superpy import BidAskSTKv1, Exchange
def quote_callback(exchange: Exchange, bidask:BidAskSTKv1):
    print(f"Exchange: {exchange}, BidAsk: {bidask}")
api.quote.set_on_bidask_stk_v1_callback(quote_callback)

```

---

## è¨‚é–±æœŸè²¨è¡Œæƒ…

â˜‘ï¸ **Subscribe**

```python
>> api.quote.subscribe?
Signature:
    api.quote.subscribe(
        contract:superpy.contracts.Contract,
        quote_type:superpy.constant.QuoteType=<QuoteType.Tick: 'tick'>,
    )

```

ğŸ”† **Quote Parameters**

```python
quote_type: è¨‚é–±é¡å‹ {'tick', 'bidask'}

```

## Tick

### ç¯„ä¾‹

**â¡ï¸ In**

```python
api.quote.subscribe(
    api.Contracts.Futures['TXFF4'],
    quote_type = sp.constant.QuoteType.Tick,
)

```

**âœ… Out**

```python
Exchange.TAIFEX
Tick: {
	'code': 'TXFF4',
	'datetime': 12022614,
	'amount': 21260.0,
	'volume': 7,
	'total_volume': 80869,
	'bid_side_total_vol': 54879,
	'ask_side_total_vol': 50711,
	'simtrade': 0
}

```

### **å±¬æ€§**

```python
code (str): å•†å“ä»£ç¢¼
datetime (datetime.datetime): æ—¥æœŸ
open (Decimal): é–‹ç›¤åƒ¹
underlying_price (Decimal): æ¨™çš„ç‰©åƒ¹æ ¼
bid_side_total_vol(int): è²·ç›¤æˆäº¤ç¸½é‡ (lot)
ask_side_total_vol(int): è³£ç›¤æˆäº¤ç¸½é‡ (lot)
avg_price (Decimal): å‡åƒ¹
close (Decimal): æˆäº¤åƒ¹
high (Decimal): æœ€é«˜åƒ¹(è‡ªé–‹ç›¤)
low (Decimal): æœ€ä½åƒ¹(è‡ªé–‹ç›¤)
amount (Decimal): æˆäº¤é¡ (NTD)
total_amount (Decimal): ç¸½æˆäº¤é¡ (NTD)
volume (int): æˆäº¤é‡ (lot)
total_volume (int): ç¸½æˆäº¤é‡ (lot)
tick_type (int): å…§å¤–ç›¤åˆ¥{1: å¤–ç›¤, 2: å…§ç›¤, 0: ç„¡æ³•åˆ¤å®š}
chg_type (int): æ¼²è·Œè¨»è¨˜{1: æ¼²åœ, 2: æ¼², 3: å¹³ç›¤, 4: è·Œ, 5: è·Œåœ}
price_chg (Decimal): æ¼²è·Œ
pct_chg (Decimal): æ¼²è·Œå¹… (%)
simtrade (int): è©¦æ’®

```

## **BidAsk**

### ç¯„ä¾‹

**â¡ï¸ In**

```python
api.quote.subscribe(
    api.Contracts.Futures['TXFF4'],
    quote_type = sp.constant.QuoteType.BidAsk,
)

```

**âœ… Out**

```python
Exchange.TAIFEX
BidAsk: {
	'code': 'TXFF4',
	'datetime': 12022617,
	'bid_price': [21260.0, 21259.0, 21258.0, 21257.0, 21256.0],
	'bid_volume': [4, 8, 9, 13, 9],
	'ask_price': [21262.0, 21263.0, 21264.0, 21265.0, 21266.0],
	'ask_volume': [10, 11, 11, 19, 8],
	'first_derived_bid_price': 0.0,
	'first_derived_ask_price': 0.0,
	'first_derived_bid_vol': 0,
	'first_derived_ask_vol': 0,
	'simtrade': 0
}

```

### **å±¬æ€§**

```python
code (str): å•†å“ä»£ç¢¼
datetime (datetime.datetime): æ™‚é–“
bid_total_vol (int): å§”è²·é‡ç¸½è¨ˆ (lot)
ask_total_vol (int): å§”è³£é‡ç¸½è¨ˆ (lot)
bid_price (:List:decimal): å§”è²·åƒ¹
bid_volume (:List:int): å§”è²·é‡ (lot)
diff_bid_vol (:List:int): å§”è²·åƒ¹å¢æ¸›é‡ (lot)
ask_price (:List:decimal): å§”è³£åƒ¹
ask_volume (:List:int): å§”è³£é‡ (lot)
diff_ask_vol (:List:int): å§”è³£åƒ¹å¢æ¸›é‡ (lot)
first_derived_bid_price (decimal): è¡ç”Ÿä¸€æª”å§”è²·åƒ¹
first_derived_ask_price (decimal): è¡ç”Ÿä¸€æª”å§”è³£åƒ¹
first_derived_bid_vol (int): è¡ç”Ÿä¸€æª”å§”è²·é‡
first_derived_ask_vol (int): è¡ç”Ÿä¸€æª”å§”è³£é‡
underlying_price (decimal): æ¨™çš„ç‰©åƒ¹æ ¼
simtrade (int): è©¦æ’®

```

## **Callback**

### Tick

â˜‘ï¸ **decoratoræ–¹å¼**

```python
from superpy import TickFOPv1, Exchange
@api.on_tick_fop_v1()
def quote_callback(exchange:Exchange, tick:TickFOPv1):
    print(f"Exchange: {exchange}, Tick: {tick}")

```

â˜‘ï¸ **å‚³çµ±æ–¹å¼**

```python
from superpy import TickFOPv1, Exchange
def quote_callback(exchange:Exchange, tick:TickFOPv1):
    print(f"Exchange: {exchange}, Tick: {tick}")
api.quote.set_on_tick_fop_v1_callback(quote_callback)

```

### **BidAsk**

â˜‘ï¸ **decoratoræ–¹å¼**

```python
from superpy import BidAskFOPv1, Exchange
@api.on_bidask_fop_v1()
def quote_callback(exchange:Exchange, bidask:BidAskFOPv1):
    print(f"Exchange: {exchange}, BidAsk: {bidask}")

```

â˜‘ï¸ **å‚³çµ±æ–¹å¼**

```python
from superpy import BidAskFOPv1, Exchange
def quote_callback(exchange:Exchange, bidask:BidAskFOPv1):
    print(f"Exchange: {exchange}, BidAsk: {bidask}")
api.quote.set_on_bidask_fop_v1_callback(quote_callback)

```

## è¨‚é–±æ–°ç·¨æŒ‡æ•¸è¡Œæƒ…

[**æœ¬åœ‹æŒ‡æ•¸åœ‹éš›è­‰åˆ¸è¾¨è­˜è™Ÿç¢¼ä¸€è¦½è¡¨**](https://isin.twse.com.tw/isin/C_public.jsp?strMode=11)

â˜‘ï¸ **Subscribe**

```python
>> api.quote.subNewIndex?
Signature:
    api.quote.subNewIndex(
				code
    )
```

â˜‘ï¸ Un**Subscribe**

```python
>> api.quote.unsubNewIndex?
Signature:
    api.quote.unsubNewIndex(
				code
    )
```

ğŸ”† **Quote Parameters**

```python
code: æ–°ç·¨æŒ‡æ•¸ä»£è™Ÿ

```

### ç¯„ä¾‹

**â¡ï¸ In**

```python
api.quote.subNewIndex("IX0001")
```

**âœ… Out**

```python
Exchange.TSE
NewIndex: {
	'IndexNo': 'IX0001',
	'IndexTime': 090000,
	'LastestIndex': 123456789,
}

```

### **å±¬æ€§**

```python
IndexNo (str): æŒ‡æ•¸ä»£è™Ÿ
IndexTime (datetime.datetime): æŒ‡æ•¸æ™‚é–“
LastestIndex (Decimal): æœ€æ–°æŒ‡æ•¸
```
