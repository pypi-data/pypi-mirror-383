{% load aratinga_tags navigation_tags i18n static wagtailcore_tags wagtailimages_tags wagtailsettings_tags wagtailuserbar %}
{% get_settings %}
{% get_current_language as LANGUAGE_CODE %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
    <head>
        <meta charset="utf-8">
        <title>
            {% block title %}
                {% if page.seo_title %}
                    {{ page.seo_title }}
                {% else %}
                    {{ page.title }}
                {% endif %}
            {% endblock %}
            {% block title_suffix %}
                | {{SiteSettings.title_suffix}}
            {% endblock %}
        </title>
        <meta name="description" content="{% block search_description %}{% if page.search_description %}{{ page.search_description }}{% endif %}{% endblock %}">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        {# Force all links in the live preview panel to be opened in a new tab #}
        {% if request.in_preview_panel %}
            <base target="_blank">
        {% endif %}

        {# Pass in CMS variables to JavaScript #}
        <script>
            cms_site_url = "{{site.root_url}}";
            cms_version = "{% aratinga_version %}";
            {% if not disable_layout %}
            cms_external_new_tab = {{cms_settings.SiteSettings.external_new_tab|yesno:"true,false"}};
            {% else %}
            cms_external_new_tab = false;
            {% endif %}
        </script>

        {% block aratinga_assets %}
            {# Bootstrap 5 CSS #}
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
            <link rel="stylesheet" href="{% static 'css/font-marcellus.css' %}">
        {% endblock %}

        {% block extra_head %}{% endblock %}
    </head>

    <body class="{% block body_class %}template-{{ self.get_verbose_name|slugify }}{% endblock %}">
        {% wagtailuserbar %}

        {% block header %}
            {% include "includes/header.html" %}
        {% endblock header %}

        {% block breadcrumbs %}
            {# breadcrumbs is defined in base/templatetags/navigation_tags.py #}
            {% breadcrumbs %}
        {% endblock breadcrumbs %}

        {% block navbar %}{% endblock %}

        <main>
            {% block content %}
            {% block messages %}
                {% include "includes/messages.html" %}
            {% endblock messages %}

            {% block content_body %}
                {% for block in page.body %}
                    {% include_block block with settings=settings %}
                {% endfor %}
            {% endblock %}
        
            {% block content_post_body %}{% endblock %}
        
            {% endblock content %}
        </main>

        <hr>

        {% include "includes/footer.html" %}

        {% block js %}
            {# Bootstrap 5 JS bundle (com Popper inclu√≠do) #}
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        {% endblock %}
    </body>
</html>