# Generated by https://smithery.ai. See: https://smithery.ai/docs/config#dockerfile
# Start with a Python image that meets the minimum requirement
FROM python:3.10-slim as base

# Set work directory
WORKDIR /app

# Copy only the necessary files for installing dependencies first
COPY pyproject.toml uv.lock /app/

# Use 'uv' to install dependencies without the rest of the source for better caching
RUN pip install uv && uv sync --frozen

# Then copy the entire source code
COPY src /app/src

# Run the application
ENTRYPOINT ["uv", "run", "mcp-server-vikingdb"]

# Set environment variables (or these can be provided at runtime)
# ENV vikingdb_host=<your_host>
# ENV vikingdb_region=<your_region>
# ENV vikingdb_ak=<your_access_key>
# ENV vikingdb_sk=<your_secret_key>
# ENV collection_name=<your_collection_name>
# ENV index_name=<your_index_name>
