"use strict";(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[734],{13734:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ae});t(62010);var a=t(20641),r=t(90033),o=t(53751),i=t(31969),l=t(13892),u=t(4189),c=t(30697),s=t(93745),d=t(40276),f=t(87524),m=t(43813),p=t(56756),v=t(35526),k=t(41720),b=t(79669),_=t(86449),h=t(69915),g=t(4529),x=t(57254),F=t(4913),w=t(98477),A=t(88249),y=t(10381),C=t(76686),W=t(43948),D=t(36048),z=t(81781),V={class:"section d-flex flex-column"},$={class:"header font-weight-medium text-h6 pa-8"},M={class:"pa-4 pt-2"},O={key:0,class:"text--secondary font-italic ml-4"},T={class:"pt-2"};function U(e,n,t,U,X,E){var I=(0,a.g2)("loading-spinner"),S=(0,a.g2)("edit-dialog"),B=(0,a.g2)("individuals-table"),L=(0,a.g2)("generic-modal");return(0,a.uX)(),(0,a.Wv)(w.Y,{class:"mt-md-3"},{default:(0,a.k6)((function(){return[e.$apollo.queries.organizations.loading?((0,a.uX)(),(0,a.Wv)(I,{key:0,label:"Loading"})):X.organization?((0,a.uX)(),(0,a.Wv)(m.I,{key:1},{default:(0,a.k6)((function(){return[(0,a.Lk)("div",V,[(0,a.Lk)("h1",$,[(0,a.eW)((0,r.v_)(X.organization.name)+" ",1),(0,a.bF)(l.D,{onClick:n[0]||(n[0]=function(e){return E.confirmDelete(E.deleteOrganization,X.organization.name)})},{default:(0,a.k6)((function(){return[(0,a.bF)(b.w,{size:"small",start:""},{default:(0,a.k6)((function(){return n[11]||(n[11]=[(0,a.eW)("mdi-delete",-1)])})),_:1,__:[11]}),n[12]||(n[12]=(0,a.eW)(" Delete ",-1))]})),_:1,__:[12]})]),(0,a.bF)(p.L,{class:"mt-0 mb-0"},{default:(0,a.k6)((function(){return[(0,a.bF)(v.B,{sm:"12",md:"4",class:"border-right"},{default:(0,a.k6)((function(){return[(0,a.Lk)("section",M,[(0,a.bF)(_.w,{class:"d-flex justify-space-between text-subtitle-2 ml-4"},{default:(0,a.k6)((function(){return[n[13]||(n[13]=(0,a.eW)(" Teams ",-1)),(0,a.bF)(S,{activator:"button",label:"Team name",onSave:n[1]||(n[1]=function(e){return E.addTeam(e)})})]})),_:1,__:[13]}),(0,a.bF)(h.x8,{opened:X.teams.open,"onUpdate:opened":n[2]||(n[2]=function(e){return X.teams.open=e}),color:"primary",density:"compact",nav:"","onUpdate:selected":E.filterByTeam},{default:(0,a.k6)((function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(X.teams.items,(function(e){return(0,a.uX)(),(0,a.CE)("div",{key:e.id},[e.children?((0,a.uX)(),(0,a.Wv)(g.K,{key:0,value:e.name},{activator:(0,a.k6)((function(t){var i=t.props;return[(0,a.bF)(x.g,(0,a.v6)({ref_for:!0},i,{onClickOnce:function(n){return E.loadChildren(e)},value:e}),{default:(0,a.k6)((function(){return[(0,a.bF)(F.U,{class:"d-flex justify-space-between align-center"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.name)+" ",1),(0,a.Lk)("div",null,[(0,a.bF)(A.q,{modelValue:e.menu,"onUpdate:modelValue":function(n){return e.menu=n},"close-on-content-click":!1},{activator:(0,a.k6)((function(e){var n=e.props;return[(0,a.bF)(l.D,(0,a.v6)({ref_for:!0},n,{"aria-label":"Add team",density:"comfortable",icon:"mdi-plus",size:"small",variant:"text"}),null,16)]})),default:(0,a.k6)((function(){return[(0,a.bF)(u.J,{"min-width":"200"},{default:(0,a.k6)((function(){return[(0,a.bF)(c.O,null,{default:(0,a.k6)((function(){return[(0,a.bF)(W.W,{modelValue:X.form.team,"onUpdate:modelValue":function(e){return X.form.team=e},label:"Team name",color:"primary",density:"compact","hide-details":"","single-line":""},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,a.bF)(s.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(l.D,{onClick:function(n){e.menu=!1,X.form.team=""}},{default:(0,a.k6)((function(){return n[14]||(n[14]=[(0,a.eW)(" Cancel ",-1)])})),_:2,__:[14]},1032,["onClick"]),(0,a.bF)(l.D,{onClick:function(n){E.addTeam(X.form.team,e),e.menu=!1}},{default:(0,a.k6)((function(){return n[15]||(n[15]=[(0,a.eW)(" Save ",-1)])})),_:2,__:[15]},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,a.bF)(l.D,{"aria-label":"Delete team",density:"comfortable",icon:"mdi-delete",size:"small",variant:"text",onClick:(0,o.D$)((function(n){return E.confirmDelete(E.deleteTeam,e.name)}),["stop"])},null,8,["onClick"])])]})),_:2},1024)]})),_:2},1040,["onClickOnce","value"])]})),default:(0,a.k6)((function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.children,(function(e){return(0,a.uX)(),(0,a.Wv)(x.g,{key:e.id,value:e},{default:(0,a.k6)((function(){return[(0,a.bF)(F.U,{class:"d-flex justify-space-between align-center"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.name)+" ",1),(0,a.bF)(l.D,{"aria-label":"Delete team",class:"mr-7",density:"comfortable",icon:"mdi-delete",size:"small",variant:"text",onClick:(0,o.D$)((function(n){return E.confirmDelete(E.deleteTeam,e.name)}),["stop"])},null,8,["onClick"])]})),_:2},1024)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["value"])):((0,a.uX)(),(0,a.Wv)(x.g,{key:1,value:e},{default:(0,a.k6)((function(){return[(0,a.bF)(F.U,{class:"d-flex justify-space-between align-center"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.name)+" ",1),(0,a.Lk)("div",null,[(0,a.bF)(A.q,{modelValue:e.menu,"onUpdate:modelValue":function(n){return e.menu=n},"close-on-content-click":!1},{activator:(0,a.k6)((function(e){var n=e.props;return[(0,a.bF)(l.D,(0,a.v6)({ref_for:!0},n,{"aria-label":"Add team",density:"comfortable",icon:"mdi-plus",size:"small",variant:"text"}),null,16)]})),default:(0,a.k6)((function(){return[(0,a.bF)(u.J,{"min-width":"200"},{default:(0,a.k6)((function(){return[(0,a.bF)(c.O,null,{default:(0,a.k6)((function(){return[(0,a.bF)(W.W,{modelValue:X.form.team,"onUpdate:modelValue":function(e){return X.form.team=e},label:"Team name",color:"primary",density:"compact","hide-details":"","single-line":""},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,a.bF)(s.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(l.D,{onClick:function(n){e.menu=!1,X.form.team=""}},{default:(0,a.k6)((function(){return n[16]||(n[16]=[(0,a.eW)(" Cancel ",-1)])})),_:2,__:[16]},1032,["onClick"]),(0,a.bF)(l.D,{onClick:function(n){E.addTeam(X.form.team,e),e.menu=!1}},{default:(0,a.k6)((function(){return n[17]||(n[17]=[(0,a.eW)(" Save ",-1)])})),_:2,__:[17]},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,a.bF)(l.D,{"aria-label":"Delete team",class:"mr-7",density:"comfortable",icon:"mdi-delete",size:"small",variant:"text",onClick:(0,o.D$)((function(n){return E.confirmDelete(E.deleteTeam,e.name)}),["stop"])},null,8,["onClick"])])]})),_:2},1024)]})),_:2},1032,["value"]))])})),128))]})),_:1},8,["opened","onUpdate:selected"]),0===X.teams.items.length?((0,a.uX)(),(0,a.CE)("p",O," No teams ")):(0,a.Q3)("",!0)])]})),_:1}),(0,a.bF)(v.B,{sm:"12",md:"8",class:"pl-md-0"},{default:(0,a.k6)((function(){return[(0,a.Lk)("section",T,[(0,a.bF)(y.h,{modelValue:X.tab,"onUpdate:modelValue":n[3]||(n[3]=function(e){return X.tab=e}),color:"primary"},{default:(0,a.k6)((function(){return[(0,a.bF)(C.U,{value:1,class:"ml-4"},{default:(0,a.k6)((function(){return n[18]||(n[18]=[(0,a.eW)("Details",-1)])})),_:1,__:[18]}),(0,a.bF)(C.U,{value:2},{default:(0,a.k6)((function(){return[n[19]||(n[19]=(0,a.eW)(" Members ",-1)),(0,a.bF)(f.x,{size:"small",class:"ml-2"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(X.totalMembers),1)]})),_:1})]})),_:1,__:[19]})]})),_:1},8,["modelValue"]),(0,a.bF)(D.r3,{modelValue:X.tab,"onUpdate:modelValue":n[9]||(n[9]=function(e){return X.tab=e})},{default:(0,a.k6)((function(){return[(0,a.bF)(z.m,{value:1},{default:(0,a.k6)((function(){return[(0,a.bF)(m.I,null,{default:(0,a.k6)((function(){return[(0,a.bF)(h.x8,null,{default:(0,a.k6)((function(){return[(0,a.bF)(_.w,{class:"d-flex justify-space-between text-subtitle-2"},{default:(0,a.k6)((function(){return[n[25]||(n[25]=(0,a.eW)(" Domains ",-1)),(0,a.bF)(A.q,{modelValue:X.menu,"onUpdate:modelValue":n[7]||(n[7]=function(e){return X.menu=e}),"close-on-content-click":!1},{activator:(0,a.k6)((function(e){var t=e.props;return[(0,a.bF)(l.D,(0,a.v6)(t,{size:"small",variant:"outlined"}),{default:(0,a.k6)((function(){return[(0,a.bF)(b.w,{start:""},{default:(0,a.k6)((function(){return n[20]||(n[20]=[(0,a.eW)("mdi-plus",-1)])})),_:1,__:[20]}),n[21]||(n[21]=(0,a.eW)(" Add ",-1))]})),_:2,__:[21]},1040)]})),default:(0,a.k6)((function(){return[(0,a.bF)(u.J,{"min-width":"200"},{default:(0,a.k6)((function(){return[(0,a.bF)(c.O,null,{default:(0,a.k6)((function(){return[(0,a.bF)(_.w,{class:"pl-0 text-subtitle-2"},{default:(0,a.k6)((function(){return n[22]||(n[22]=[(0,a.eW)(" New domain ",-1)])})),_:1,__:[22]}),(0,a.bF)(W.W,{modelValue:X.form.domain,"onUpdate:modelValue":n[4]||(n[4]=function(e){return X.form.domain=e}),label:"Domain","single-line":"",density:"compact"},null,8,["modelValue"]),(0,a.bF)(d.a,{modelValue:X.form.isTopDomain,"onUpdate:modelValue":n[5]||(n[5]=function(e){return X.form.isTopDomain=e}),label:"Top domain",density:"compact","hide-details":""},null,8,["modelValue"])]})),_:1}),(0,a.bF)(s.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(k.h),(0,a.bF)(l.D,{size:"small",onClick:n[6]||(n[6]=function(e){X.menu=!1,X.form.domain=null})},{default:(0,a.k6)((function(){return n[23]||(n[23]=[(0,a.eW)(" Cancel ",-1)])})),_:1,__:[23]}),(0,a.bF)(l.D,{size:"small",onClick:E.addDomain},{default:(0,a.k6)((function(){return n[24]||(n[24]=[(0,a.eW)(" Save ",-1)])})),_:1,__:[24]},8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1,__:[25]}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(X.organization.domains,(function(e){return(0,a.uX)(),(0,a.Wv)(x.g,{key:e.id},{append:(0,a.k6)((function(){return[(0,a.bF)(l.D,{"aria-label":"Delete domain",size:"small",variant:"text",icon:"",onClick:function(n){return E.confirmDelete(E.deleteDomain,e.domain)}},{default:(0,a.k6)((function(){return[(0,a.bF)(b.w,{small:""},{default:(0,a.k6)((function(){return n[27]||(n[27]=[(0,a.eW)("mdi-delete",-1)])})),_:1,__:[27]})]})),_:2},1032,["onClick"])]})),default:(0,a.k6)((function(){return[(0,a.bF)(F.U,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.domain)+" ",1),e.isTopDomain?((0,a.uX)(),(0,a.Wv)(f.x,{key:0,class:"ml-2",color:"primary",size:"small"},{default:(0,a.k6)((function(){return n[26]||(n[26]=[(0,a.eW)(" top domain ",-1)])})),_:1,__:[26]})):(0,a.Q3)("",!0)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),(0,a.bF)(h.x8,null,{default:(0,a.k6)((function(){return[(0,a.bF)(_.w,{class:"d-flex justify-space-between text-subtitle-2"},{default:(0,a.k6)((function(){return[n[28]||(n[28]=(0,a.eW)(" Aliases ",-1)),(0,a.bF)(S,{activator:"button",label:"New alias",onSave:n[8]||(n[8]=function(e){return E.addAlias(e)})})]})),_:1,__:[28]}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(X.organization.aliases,(function(e,n){return(0,a.uX)(),(0,a.Wv)(x.g,{key:n},{append:(0,a.k6)((function(){return[(0,a.bF)(l.D,{"aria-label":"Delete alias",variant:"text",icon:"mdi-delete",onClick:function(n){return E.confirmDelete(E.deleteAlias,e.alias)}},null,8,["onClick"])]})),default:(0,a.k6)((function(){return[(0,a.bF)(F.U,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(e.alias),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1}),(0,a.bF)(z.m,{value:2,eager:""},{default:(0,a.k6)((function(){return[(0,a.bF)(m.I,{class:"pa-0"},{default:(0,a.k6)((function(){return[(0,a.bF)(B,{class:"mt-4","hide-header":"","fetch-page":E.fetchMembers,"delete-item":E.deleteIndividual,"merge-items":E.mergeIndividuals,"unmerge-items":function(){},"move-item":function(){},"add-identity":function(){},updateProfile:E.updateProfile,enroll:function(){},"fetch-organizations":function(){},"get-countries":function(){},"lock-individual":E.lockIndividual,"unlock-individual":E.unlockIndividual,"recommend-matches":function(){},"set-filters":X.filters,withdraw:function(){},"update-enrollment":function(){},ref:"membersTable"},null,8,["fetch-page","delete-item","merge-items","updateProfile","lock-individual","unlock-individual","set-filters"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])]})),_:1})]})),_:1})])]})),_:1})):(0,a.Q3)("",!0),X.error?((0,a.uX)(),(0,a.Wv)(m.I,{key:2},{default:(0,a.k6)((function(){return[(0,a.bF)(i.l,{text:"",type:"error"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(X.error),1)]})),_:1}),(0,a.bF)(l.D,{to:"/",color:"primary",depressed:""},{default:(0,a.k6)((function(){return[(0,a.bF)(b.w,{left:"",dark:""},{default:(0,a.k6)((function(){return n[29]||(n[29]=[(0,a.eW)("mdi-arrow-left",-1)])})),_:1,__:[29]}),n[30]||(n[30]=(0,a.eW)(" Go to dashboard ",-1))]})),_:1,__:[30]})]})),_:1})):(0,a.Q3)("",!0),(0,a.bF)(L,(0,a.v6)({"is-open":U.modalProps.isOpen,"onUpdate:isOpen":n[10]||(n[10]=function(e){return U.modalProps.isOpen=e})},U.modalProps),null,16,["is-open"])]})),_:1})}var X=t(74721),E=t(14048),I=t(30388),S=(t(28706),t(88431),t(50113),t(48980),t(74423),t(62062),t(44114),t(54554),t(18111),t(81148),t(20116),t(61701),t(26099),t(21699),t(58663)),B=t(20595),L=t(84803),j=t(52790),q=t(83102),P=t(91606),N=t(91772),Q={key:0,class:"modal-text"};function G(e,n,t,i,d,f){return(0,a.uX)(),(0,a.Wv)(N.p,{"model-value":t.isOpen,"max-width":"500"},{default:(0,a.k6)((function(){return[(0,a.bF)(u.J,{class:"pa-3"},{default:(0,a.k6)((function(){return[t.title?((0,a.uX)(),(0,a.Wv)(P.r,{key:0,class:"headline"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(t.title),1)]})),_:1})):(0,a.Q3)("",!0),(0,a.bF)(c.O,{class:"pa-4"},{default:(0,a.k6)((function(){return[t.text?((0,a.uX)(),(0,a.CE)("p",Q,(0,r.v_)(t.text),1)):(0,a.Q3)("",!0),(0,a.RG)(e.$slots,"body",{},void 0,!0)]})),_:3}),(0,a.bF)(s.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(k.h),(0,a.bF)(l.D,{variant:"text",onClick:f.closeModal},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(t.dismissButtonLabel),1)]})),_:1},8,["onClick"]),t.action?((0,a.uX)(),(0,a.Wv)(l.D,{key:0,color:t.actionButtonColor,id:"confirm",variant:"flat",onClick:(0,o.D$)(f.onAction,["stop"])},{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(t.actionButtonLabel),1)]})),_:1},8,["color","onClick"])):(0,a.Q3)("",!0)]})),_:1})]})),_:3})]})),_:3},8,["model-value"])}const K={props:{isOpen:{type:Boolean,default:!1},title:{type:String,default:null},text:{type:String,default:null},action:{type:Function,default:null},actionButtonLabel:{type:String,default:"Confirm"},actionButtonColor:{type:String,default:"primary"},dismissButtonLabel:{type:String,default:"Close"}},methods:{closeModal:function(){this.$emit("update:isOpen",!1)},onAction:function(){var e=this;return(0,I.A)((0,E.A)().mark((function n(){return(0,E.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.action();case 2:e.closeModal();case 3:case"end":return n.stop()}}),n)})))()}}};var R=t(64621);const J=(0,R.A)(K,[["render",G],["__scopeId","data-v-fee09ca4"]]),Z=J;var Y=t(41034),H=t(50953);function ee(){var e={isOpen:!1,title:"",text:null,action:null,actionButtonLabel:null,actionButtonColor:"primary",dismissButtonLabel:"Close"},n=(0,H.KR)(Object.assign({},e)),t=function(e){n.value=(0,Y.A)({isOpen:!0},e)},a=function(){n.value=(0,Y.A)({},e)};return{modalProps:n,openModal:t,closeModal:a}}const ne={name:"Organization",components:{IndividualsTable:L.A,EditDialog:j.A,LoadingSpinner:q.A,GenericModal:Z},apollo:{organizations:function(){return{query:S.rM,variables:{filters:{name:this.name}},result:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){var a;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==(null===(a=e.data)||void 0===a?void 0:a.organizations.entities.length)){t.next=7;break}return n.organization=Object.assign({},e.data.organizations.entities[0]),t.next=4,n.fetchTeams();case 4:n.teams.items=t.sent,t.next=8;break;case 7:e.errors?n.error=n.$getErrorMessage(e.errors[0]):n.error="Organization ".concat(n.name," not found");case 8:case"end":return t.stop()}}),t)})))()}}}},setup:function(){var e=ee(),n=e.modalProps,t=e.openModal,a=e.closeModal;return{modalProps:n,openModal:t,closeModal:a}},data:function(){return{organization:null,isLoading:!0,teams:{items:[],open:[],menu:!1},totalMembers:0,form:{domain:null,isTopDomain:!0,team:null,alias:null},filters:null,tab:null,menu:!1,error:null}},computed:{name:function(){return decodeURIComponent(this.$route.params.name)}},methods:{confirmDelete:function(e,n){this.openModal({action:function(){return e(n)},title:"Delete ".concat(n,"?"),actionButtonColor:"error"})},deleteOrganization:function(){var e=this;return(0,I.A)((0,E.A)().mark((function n(){var t;return(0,E.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,B.Dp)(e.$apollo,e.name);case 3:t=n.sent,t&&!t.errors&&e.$router.push({name:"Dashboard"}),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e.openModal({text:e.$getErrorMessage(n.t0)});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},addDomain:function(){var e=this;return(0,I.A)((0,E.A)().mark((function n(){var t;return(0,E.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.menu=!1,e.form.domain){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,(0,B.sn)(e.$apollo,e.form.domain,e.form.isTopDomain,e.name);case 6:t=n.sent,e.organization.domains=[].concat((0,X.A)(e.organization.domains),[t.data.addDomain.domain]),e.form.domain=null,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),e.openModal({title:"Error creating domain",text:e.$getErrorMessage(n.t0)});case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},deleteDomain:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){var a,r,o;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,B.Kr)(n.$apollo,e);case 3:a=t.sent,a&&!a.errors&&(r=(0,X.A)(n.organization.domains),o=r.findIndex((function(n){return n.domain===e})),r.splice(o,1),n.organization.domains=r),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),n.openModal({text:n.$getErrorMessage(t.t0)});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchTeams:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){var a,r,o;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,S.ZN)(n.$apollo,{organization:null===(a=n.organization)||void 0===a?void 0:a.name,parent:e});case 2:return r=t.sent,o=r.data.teams.entities.map((function(e){return{id:e.id,name:e.name,children:e.numchild>0?[]:void 0}})),t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)})))()},addTeam:function(e,n){var t=this;return(0,I.A)((0,E.A)().mark((function a(){return(0,E.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,B.Zs)(t.$apollo,e,t.name,null===n||void 0===n?void 0:n.name);case 3:n?(n.children=n.children||[],n.children.push({name:t.form.team,children:void 0})):t.teams.items.push({name:e,children:void 0}),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),t.openModal({title:"Error creating team",text:t.$getErrorMessage(a.t0)});case 9:t.form.team=null;case 10:case"end":return a.stop()}}),a,null,[[0,6]])})))()},deleteTeam:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){var a;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,B.To)(n.$apollo,e,n.name);case 3:a=t.sent,a&&!a.errors&&n.removeTeamNode(e),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),n.openModal({text:n.$getErrorMessage(t.t0)});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},removeTeamNode:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.teams.items;t.every((function(a,r){return a.name===e?(t.splice(r,1),!1):(a.children&&n.removeTeamNode(e,a.children),!0)}))},loadChildren:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.fetchTeams(e.name);case 2:e.children=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchMembers:function(){var e=arguments,n=this;return(0,I.A)((0,E.A)().mark((function t(){var a,r,o,i,l;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:1,r=e.length>1&&void 0!==e[1]?e[1]:10,o=e.length>2&&void 0!==e[2]?e[2]:{},i=e.length>3?e[3]:void 0,o.enrollment||(o=Object.assign(o,{enrollment:n.name})),t.next=7,(0,S.su)(n.$apollo,a,r,o,i);case 7:return l=t.sent,l&&!l.errors&&(n.totalMembers=l.data.individuals.pageInfo.totalResults),t.abrupt("return",l);case 10:case"end":return t.stop()}}),t)})))()},filterByTeam:function(e){var n=this;e[0]?this.$nextTick((function(){return n.filters='enrollment:"'.concat(e[0].name,'" enrollmentParentOrg:"').concat(n.name,'"')})):this.$nextTick((function(){return n.filters=null}))},deleteIndividual:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){var a;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,B.Ut)(n.$apollo,e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()},mergeIndividuals:function(e,n){var t=this;return(0,I.A)((0,E.A)().mark((function a(){var r;return(0,E.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,B.h1)(t.$apollo,e,n);case 2:return r=a.sent,a.abrupt("return",r);case 4:case"end":return a.stop()}}),a)})))()},lockIndividual:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){var a;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,B.pG)(n.$apollo,e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()},unlockIndividual:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){var a;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,B.Cr)(n.$apollo,e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()},updateProfile:function(e,n){var t=this;return(0,I.A)((0,E.A)().mark((function a(){var r;return(0,E.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=(0,B.r7)(t.$apollo,e,n),a.abrupt("return",r);case 2:case"end":return a.stop()}}),a)})))()},addAlias:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){var a,r,o,i;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,B.kX)(n.$apollo,e,n.name);case 4:a=t.sent,a.errors?(r={title:"Error creating alias",text:n.$getErrorMessage(a.errors[0])},o=a.errors.find((function(e){return 2===e.extensions.code&&e.message.includes("Organization")})),i=a.errors.find((function(e){return 2===e.extensions.code&&e.message.includes("Alias")})),o?Object.assign(r,{action:function(){return n.mergeOrgs(e,n.name)},dismissButtonLabel:"Cancel",actionButtonLabel:"Merge",text:r.text+=". Click 'merge' to turn it into an alias of '".concat(n.name,"'.")}):i&&Object.assign(r,{action:function(){return n.mergeOrgs(e,n.name)},dismissButtonLabel:"Cancel",actionButtonLabel:"Merge",text:r.text+=". Click 'merge' to turn it and its organization into aliases of '".concat(n.name,"'.")}),n.openModal(r)):n.organization.aliases=[].concat((0,X.A)(n.organization.aliases),[a.data.addAlias.alias]);case 6:case"end":return t.stop()}}),t)})))()},mergeOrgs:function(e,n){var t=this;return(0,I.A)((0,E.A)().mark((function a(){var r;return(0,E.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,B.nP)(t.$apollo,e,n);case 3:r=a.sent,r&&!r.errors&&(t.organization=Object.assign({},r.data.mergeOrganizations.organization),t.$refs.membersTable.queryIndividuals()),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.openModal({text:t.$getErrorMessage(a.t0)});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},deleteAlias:function(e){var n=this;return(0,I.A)((0,E.A)().mark((function t(){var a,r,o;return(0,E.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,B.Gd)(n.$apollo,e);case 3:a=t.sent,a&&!a.errors&&(r=(0,X.A)(n.organization.aliases),o=r.findIndex((function(n){return n.alias===e})),r.splice(o,1),n.organization.aliases=r),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),n.openModal({text:n.$getErrorMessage(t.t0)});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},te=(0,R.A)(ne,[["render",U],["__scopeId","data-v-7c633a9a"]]),ae=te},52790:(e,n,t)=>{t.d(n,{A:()=>g});var a=t(20641),r=t(90033),o=t(13892),i=t(4189),l=t(30697),u=t(93745),c=t(74270),s=t(41720),d=t(79669),f=t(88249),m=t(43948),p={key:0},v={key:1,class:"font-italic"};function k(e,n,t,k,b,_){return(0,a.uX)(),(0,a.Wv)(f.q,{modelValue:e.menu,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.menu=n}),"close-on-content-click":!1},{activator:(0,a.k6)((function(i){var l=i.props;return["text"===t.activator?((0,a.uX)(),(0,a.CE)("button",(0,a.v6)({key:0,class:"hide-icon"},l),[t.modelValue?((0,a.uX)(),(0,a.CE)("span",p,[(0,a.RG)(e.$slots,"value",(0,r._B)((0,a.Ng)(l)),(function(){return[(0,a.eW)((0,r.v_)(t.modelValue),1)]}),!0)])):((0,a.uX)(),(0,a.CE)("span",v,(0,r.v_)(t.emptyValue),1)),(0,a.bF)(d.w,{class:"icon--hidden ml-2","aria-label":t.label,size:"x-small"},{default:(0,a.k6)((function(){return n[3]||(n[3]=[(0,a.eW)(" mdi-lead-pencil ",-1)])})),_:1,__:[3]},8,["aria-label"])],16)):((0,a.uX)(),(0,a.Wv)(o.D,(0,r._B)((0,a.v6)({key:1},l)),{default:(0,a.k6)((function(){return[(0,a.bF)(d.w,{start:""},{default:(0,a.k6)((function(){return n[4]||(n[4]=[(0,a.eW)("mdi-plus",-1)])})),_:1,__:[4]}),n[5]||(n[5]=(0,a.eW)(" Add ",-1))]})),_:2,__:[5]},1040))]})),default:(0,a.k6)((function(){return[(0,a.bF)(i.J,{"min-width":"250"},{default:(0,a.k6)((function(){return[(0,a.bF)(c.Z,{"model-value":t.modelValue,"ok-text":"Save",onCancel:n[0]||(n[0]=function(n){return e.menu=!1}),onSave:n[1]||(n[1]=function(e){return _.save(e)})},{default:(0,a.k6)((function(n){var r=n.model,o=n.actions;return[(0,a.bF)(l.O,null,{default:(0,a.k6)((function(){return[(0,a.RG)(e.$slots,"input",{model:r},(function(){return[(0,a.bF)(m.W,{modelValue:r.value,"onUpdate:modelValue":function(e){return r.value=e},label:t.label,color:"primary",density:"compact","hide-details":"","single-line":""},null,8,["modelValue","onUpdate:modelValue","label"])]}),!0)]})),_:2},1024),(0,a.bF)(u.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(s.h),((0,a.uX)(),(0,a.Wv)((0,a.$y)(o),{color:"primary"}))]})),_:2},1024)]})),_:3},8,["model-value"])]})),_:3})]})),_:3},8,["modelValue"])}const b={name:"EditDialog",props:{modelValue:{type:[String,Object],required:!1},label:{type:String,required:!0},activator:{type:String,required:!1,default:"text"},emptyValue:{type:String,required:!1}},data:function(){return{menu:!1}},methods:{save:function(e){this.$emit("save",e),this.menu=!1}}};var _=t(64621);const h=(0,_.A)(b,[["render",k],["__scopeId","data-v-3daedc2c"]]),g=h},83102:(e,n,t)=>{t.d(n,{A:()=>f});var a=t(20641),r=t(90033),o=t(26106),i={class:"d-flex flex-column justify-center align-center pa-4 h-100"},l={key:0,class:"subtitle-1 text-medium-emphasis mt-4"};function u(e,n,t,u,c,s){return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(o.x,{size:t.size,color:"primary",indeterminate:""},null,8,["size"]),t.label?((0,a.uX)(),(0,a.CE)("p",l,(0,r.v_)(t.label),1)):(0,a.Q3)("",!0)])}t(2892);const c={name:"LoadingSpinner",props:{label:{type:String,required:!1,default:null},size:{type:[String,Number],required:!1,default:48}}};var s=t(64621);const d=(0,s.A)(c,[["render",u]]),f=d}}]);
//# sourceMappingURL=734.30a361d8.js.map