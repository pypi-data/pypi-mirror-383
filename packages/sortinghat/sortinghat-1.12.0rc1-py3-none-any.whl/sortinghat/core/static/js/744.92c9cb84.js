"use strict";(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[744],{22744:(e,n,t)=>{t.r(n),t.d(n,{default:()=>fe});t(62010),t(50778);var i=t(20641),r=t(90033),a=t(53751),o=t(31969),l=t(13892),u=t(93745),d=t(4189),c=t(91606),s=t(30697),f=t(20396),m=t(91772),p=t(7511),v=t(43813),k=t(56756),g=t(35526),b=t(41720),h=t(79669),_=t(57254),y=t(4913),w=t(97505),x=t(69915),F=t(86449),M=t(98477),A=t(88249),E=t(43948),L=t(51161),C={key:0},$=["href","data-profile-link"],W={key:0},I={key:0},X={key:0},D={key:0,class:"pt-2 pb-2 text-body-2"};function U(e,n,t,U,V,O){var z=this,B=(0,i.g2)("loading-spinner"),P=(0,i.g2)("avatar"),S=(0,i.g2)("edit-dialog"),R=(0,i.g2)("identities-list"),j=(0,i.g2)("enrollment-list"),q=(0,i.g2)("change-log"),Q=(0,i.g2)("individual-card"),T=(0,i.g2)("enroll-modal"),Y=(0,i.g2)("team-enroll-modal"),G=(0,i.g2)("matches-modal");return(0,i.uX)(),(0,i.Wv)(M.Y,null,{default:(0,i.k6)((function(){return[e.$apollo.loading?((0,i.uX)(),(0,i.Wv)(B,{key:0,label:"Loading"})):V.individual?((0,i.uX)(),(0,i.Wv)(v.I,{key:1,class:"mx-auto mb-8"},{default:(0,i.k6)((function(){return[(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:O.showRecommendations?8:12,xl:O.showRecommendations?9:12},{default:(0,i.k6)((function(){return[(0,i.bF)(k.L,{class:"section pa-3 mb-4 mt-0"},{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[(0,i.bF)(_.g,{class:"pl-1 my-n4 v-list-item--three-line"},{prepend:(0,i.k6)((function(){return[(0,i.bF)(P,{name:V.individual.name,email:V.individual.email},null,8,["name","email"])]})),default:(0,i.k6)((function(){return[(0,i.bF)(y.U,{class:"font-weight-medium text-h6"},{default:(0,i.k6)((function(){return[V.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",C,(0,r.v_)(V.individual.name||"no name"),1)):((0,i.uX)(),(0,i.Wv)(S,{key:1,modelValue:V.individual.name,"onUpdate:modelValue":n[0]||(n[0]=function(e){return V.individual.name=e}),"empty-value":"no name",label:"Edit name",onSave:n[1]||(n[1]=function(e){return O.updateProfile({name:e})})},null,8,["modelValue"]))]})),_:1}),(0,i.bF)(w.w,{class:"mb-1"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(V.individual.organization),1)]})),_:1}),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(V.socialProfiles,(function(e,n){return(0,i.uX)(),(0,i.CE)("p",{key:n,class:"d-flex align-center"},[(0,i.bF)(h.w,{size:"small",start:""},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(e.icon),1)]})),_:2},1024),(0,i.Lk)("a",{href:e.link,"data-profile-link":e.source,class:"link--underline font-weight-regular",target:"_blank"},(0,r.v_)(e.username),9,$)])})),128))]})),_:1})]})),_:1}),(0,i.bF)(g.B,{cols:"2",class:"d-flex justify-end align-start mr-1"},{default:(0,i.k6)((function(){return[(0,i.bF)(L.y,{location:"bottom","max-width":"200"},{activator:(0,i.k6)((function(e){var t=e.props;return[(0,i.bF)(l.D,(0,i.v6)({disabled:V.individual.isLocked,"aria-label":O.reviewButton.tooltip,icon:O.reviewButton.icon},t,{class:"mr-1","data-testid":"review-btn",variant:"text",onClick:n[2]||(n[2]=function(e){return O.review(z.mk)})}),null,16,["disabled","aria-label","icon"])]})),default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(O.reviewButton.tooltip),1)]})),_:1}),(0,i.bF)(L.y,{location:"bottom"},{activator:(0,i.k6)((function(e){var t=e.props;return[(0,i.bF)(l.D,(0,i.v6)({disabled:V.individual.isLocked,"aria-label":V.individual.isBot?"Unmark as bot":"Mark as bot",icon:V.individual.isBot?"mdi-robot":"mdi-robot-outline"},t,{class:"mr-1",variant:"text",onClick:n[3]||(n[3]=function(e){return O.updateProfile({isBot:!V.individual.isBot})})}),null,16,["disabled","aria-label","icon"])]})),default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(V.individual.isBot?"Unmark as bot":"Mark as bot"),1)]})),_:1}),(0,i.bF)(L.y,{location:"bottom"},{activator:(0,i.k6)((function(t){var r=t.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":O.isInWorkspace?"In workspace":"Add to workspace",class:"mr-1",variant:"text"},r,{icon:O.isInWorkspace?"mdi-pin":"mdi-pin-outline",onClick:n[4]||(n[4]=function(n){return e.$store.dispatch("togglePin",V.mk)})}),null,16,["aria-label","icon"])]})),default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(O.isInWorkspace?"In workspace":"Add to workspace"),1)]})),_:1}),V.individual.isLocked?((0,i.uX)(),(0,i.Wv)(L.y,{key:0,location:"bottom"},{activator:(0,i.k6)((function(e){var n=e.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":"Unlock",class:"mr-1"},n,{icon:"mdi-lock",variant:"text",onClick:O.unlock}),null,16,["onClick"])]})),default:(0,i.k6)((function(){return[n[22]||(n[22]=(0,i.Lk)("span",null,"Unlock",-1))]})),_:1,__:[22]})):((0,i.uX)(),(0,i.Wv)(L.y,{key:1,location:"bottom"},{activator:(0,i.k6)((function(e){var n=e.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":"Lock",class:"mr-1"},n,{icon:"mdi-lock-outline",variant:"text",onClick:O.lock}),null,16,["onClick"])]})),default:(0,i.k6)((function(){return[n[23]||(n[23]=(0,i.Lk)("span",null,"Lock",-1))]})),_:1,__:[23]})),(0,i.bF)(A.q,{location:"bottom",left:"","nudge-bottom":"38"},{activator:(0,i.k6)((function(e){var n=e.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":"See more actions"},n,{icon:"mdi-dots-vertical",variant:"text"}),null,16)]})),default:(0,i.k6)((function(){return[(0,i.bF)(x.x8,{density:"compact"},{default:(0,i.k6)((function(){return[(0,i.bF)(_.g,{disabled:V.individual.isLocked,onClick:n[5]||(n[5]=function(e){return V.matchesModal.open=!0})},{default:(0,i.k6)((function(){return[(0,i.bF)(y.U,null,{default:(0,i.k6)((function(){return n[24]||(n[24]=[(0,i.eW)("Find matches",-1)])})),_:1,__:[24]})]})),_:1},8,["disabled"]),O.hasLinkedinProfile?((0,i.uX)(),(0,i.Wv)(_.g,{key:0,disabled:V.individual.isLocked,onClick:O.confirmRemoveIdentity},{default:(0,i.k6)((function(){return[(0,i.bF)(y.U,null,{default:(0,i.k6)((function(){return n[25]||(n[25]=[(0,i.eW)(" Remove LinkedIn profile ",-1)])})),_:1,__:[25]})]})),_:1},8,["disabled","onClick"])):((0,i.uX)(),(0,i.Wv)(_.g,{key:1,disabled:V.individual.isLocked,onClick:n[6]||(n[6]=function(e){return V.linkedinModal.open=!0})},{default:(0,i.k6)((function(){return[(0,i.bF)(y.U,null,{default:(0,i.k6)((function(){return n[26]||(n[26]=[(0,i.eW)("Add LinkedIn profile",-1)])})),_:1,__:[26]})]})),_:1},8,["disabled"])),(0,i.bF)(p.G,{inline:""}),(0,i.bF)(_.g,{disabled:V.individual.isLocked,"base-color":"error",onClick:O.confirmDelete},{default:(0,i.k6)((function(){return[(0,i.bF)(y.U,null,{default:(0,i.k6)((function(){return n[27]||(n[27]=[(0,i.eW)("Delete individual",-1)])})),_:1,__:[27]})]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,i.bF)(k.L,{class:"section mb-4"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.I,{class:"pb-6",fluid:""},{default:(0,i.k6)((function(){return[(0,i.bF)(F.w,{class:"text-subtitle-2 mb-4"},{default:(0,i.k6)((function(){return n[28]||(n[28]=[(0,i.eW)("Profile",-1)])})),_:1,__:[28]}),(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return n[29]||(n[29]=[(0,i.eW)(" Email: ",-1)])})),_:1,__:[29]}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[V.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",W,(0,r.v_)(V.individual.email||"none"),1)):((0,i.uX)(),(0,i.Wv)(S,{key:1,modelValue:V.individual.email,"onUpdate:modelValue":n[7]||(n[7]=function(e){return V.individual.email=e}),"empty-value":"none",label:"Edit email",onSave:n[8]||(n[8]=function(e){return O.updateProfile({email:e})})},null,8,["modelValue"]))]})),_:1})]})),_:1}),(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return n[30]||(n[30]=[(0,i.eW)(" Country: ",-1)])})),_:1,__:[30]}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[V.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",I,(0,r.v_)(V.individual.country?V.individual.country.name:"none"),1)):((0,i.uX)(),(0,i.Wv)(S,{key:1,modelValue:V.individual.country,"onUpdate:modelValue":n[9]||(n[9]=function(e){return V.individual.country=e}),"empty-value":"none",label:"Edit country",onSave:n[10]||(n[10]=function(e){return O.updateProfile({countryCode:e.code})})},{value:(0,i.k6)((function(e){var n=e.props;return[(0,i.Lk)("span",(0,r._B)((0,i.Ng)(n)),(0,r.v_)(V.individual.country.name),17)]})),input:(0,i.k6)((function(e){var n=e.model;return[(0,i.bF)(f.A,{modelValue:n.value,"onUpdate:modelValue":function(e){return n.value=e},items:V.countries,label:"Country","item-title":"name","hide-details":"","single-line":"",onClickOnce:O.getCountryList,onKeypressOnce:O.getCountryList},null,8,["modelValue","onUpdate:modelValue","items","onClickOnce","onKeypressOnce"])]})),_:1},8,["modelValue"]))]})),_:1})]})),_:1}),(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return n[31]||(n[31]=[(0,i.eW)(" Gender: ",-1)])})),_:1,__:[31]}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[V.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",X,(0,r.v_)(V.individual.gender||"none"),1)):((0,i.uX)(),(0,i.Wv)(S,{key:1,modelValue:V.individual.gender,"onUpdate:modelValue":n[11]||(n[11]=function(e){return V.individual.gender=e}),"empty-value":"none",label:"Edit gender",onSave:n[12]||(n[12]=function(e){return O.updateProfile({gender:e})})},null,8,["modelValue"]))]})),_:1})]})),_:1}),(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return n[32]||(n[32]=[(0,i.Lk)("span",null,"UUID:",-1)])})),_:1,__:[32]}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(V.individual.uuid),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,i.bF)(k.L,{class:"section mb-4"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.I,{fluid:""},{default:(0,i.k6)((function(){return[V.individual.identities?((0,i.uX)(),(0,i.Wv)(R,{key:0,class:"mb-8",identities:V.individual.identities,uuid:V.individual.uuid,"is-locked":V.individual.isLocked,onUnmerge:O.unmergeIdentities},null,8,["identities","uuid","is-locked","onUnmerge"])):(0,i.Q3)("",!0)]})),_:1})]})),_:1}),(0,i.bF)(k.L,{class:"section mb-4"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.I,{fluid:""},{default:(0,i.k6)((function(){return[V.individual.enrollments?((0,i.uX)(),(0,i.Wv)(j,{key:0,enrollments:V.individual.enrollments,"is-locked":V.individual.isLocked,onOpenEnrollmentModal:n[13]||(n[13]=function(n){return e.confirmEnroll(V.individual)}),onOpenTeamModal:O.openTeamModal,onUpdateEnrollment:O.updateEnrollment,onWithdraw:O.withdraw},null,8,["enrollments","is-locked","onOpenTeamModal","onUpdateEnrollment","onWithdraw"])):(0,i.Q3)("",!0)]})),_:1})]})),_:1}),(0,i.bF)(k.L,{class:"section mb-0"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.I,null,{default:(0,i.k6)((function(){return[(0,i.bF)(q,{changes:V.changelog},null,8,["changes"])]})),_:1})]})),_:1})]})),_:1},8,["cols","xl"]),O.showRecommendations?((0,i.uX)(),(0,i.Wv)(g.B,{key:0,cols:"4",xl:"3"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.I,{class:"section"},{default:(0,i.k6)((function(){return[(0,i.bF)(F.w,{class:"text-subtitle-2"},{default:(0,i.k6)((function(){return n[33]||(n[33]=[(0,i.eW)(" Possible matches ",-1)])})),_:1,__:[33]}),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(V.individual.matchRecommendations,(function(e,t){var o=e.id,d=e.individual;return(0,i.uX)(),(0,i.CE)("div",{key:o,class:"ml-2 mr-2"},[(0,i.bF)(Q,{name:d.name,email:d.email,enrollments:d.enrollments,identities:d.identities,"is-locked":d.isLocked,sources:d.sources,uuid:d.uuid,class:(0,r.C4)({"mt-4":t>0,"mt-2":0===t}),detailed:""},null,8,["name","email","enrollments","identities","is-locked","sources","uuid","class"]),(0,i.bF)(u.S,null,{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{variant:"text",size:"small",onClick:(0,a.D$)((function(e){return O.applyRecommendation(o,!1)}),["prevent"])},{default:(0,i.k6)((function(){return n[34]||(n[34]=[(0,i.eW)(" Dismiss ",-1)])})),_:2,__:[34]},1032,["onClick"]),(0,i.bF)(l.D,{size:"small",variant:"outlined",onClick:(0,a.D$)((function(e){return O.applyRecommendation(o,!0)}),["prevent"])},{default:(0,i.k6)((function(){return n[35]||(n[35]=[(0,i.eW)(" Merge ",-1)])})),_:2,__:[35]},1032,["onClick"])]})),_:2},1024)])})),128))]})),_:1})]})),_:1})):(0,i.Q3)("",!0)]})),_:1})]})),_:1})):(0,i.Q3)("",!0),V.error?((0,i.uX)(),(0,i.Wv)(v.I,{key:2},{default:(0,i.k6)((function(){return[(0,i.bF)(o.l,{dense:"",text:"",type:"error"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Individual "+(0,r.v_)(V.error),1)]})),_:1}),(0,i.bF)(l.D,{to:"/",color:"primary",depressed:""},{default:(0,i.k6)((function(){return[(0,i.bF)(h.w,{left:"",dark:""},{default:(0,i.k6)((function(){return n[36]||(n[36]=[(0,i.eW)("mdi-arrow-left",-1)])})),_:1,__:[36]}),n[37]||(n[37]=(0,i.eW)(" Go to dashboard ",-1))]})),_:1,__:[37]})]})),_:1})):(0,i.Q3)("",!0),(0,i.bF)(T,{"is-open":e.enrollmentModal.open,"onUpdate:isOpen":n[14]||(n[14]=function(n){return e.enrollmentModal.open=n}),title:e.enrollmentModal.title,text:e.enrollmentModal.text,uuid:V.mk,enroll:e.enrollIndividual,"fetch-organizations":O.fetchOrganizations,"add-organization":e.addOrganization},null,8,["is-open","title","text","uuid","enroll","fetch-organizations","add-organization"]),V.teamModal.open?((0,i.uX)(),(0,i.Wv)(Y,{key:3,"is-open":V.teamModal.open,"onUpdate:isOpen":n[15]||(n[15]=function(e){return V.teamModal.open=e}),organization:V.teamModal.organization,uuid:V.mk,enroll:O.enroll,enrollments:V.individual.enrollments,onUpdateIndividual:n[16]||(n[16]=function(e){return O.updateIndividual(e)})},null,8,["is-open","organization","uuid","enroll","enrollments"])):(0,i.Q3)("",!0),(0,i.bF)(G,{"is-open":V.matchesModal.open,"onUpdate:isOpen":n[17]||(n[17]=function(e){return V.matchesModal.open=e}),"recommend-matches":O.recommendMatches,uuid:V.mk},null,8,["is-open","recommend-matches","uuid"]),(0,i.bF)(m.p,{modelValue:V.linkedinModal.open,"onUpdate:modelValue":n[20]||(n[20]=function(e){return V.linkedinModal.open=e}),"max-width":"500px"},{default:(0,i.k6)((function(){return[(0,i.bF)(d.J,{class:"pa-3"},{default:(0,i.k6)((function(){return[(0,i.bF)(c.r,{class:"headline"},{default:(0,i.k6)((function(){return n[38]||(n[38]=[(0,i.eW)("Add LinkedIn profile",-1)])})),_:1,__:[38]}),(0,i.bF)(s.O,null,{default:(0,i.k6)((function(){return[(0,i.bF)(E.W,{modelValue:V.linkedinModal.username,"onUpdate:modelValue":n[18]||(n[18]=function(e){return V.linkedinModal.username=e}),label:"LinkedIn profile URL or username",placeholder:"https://www.linkedin.com/in/",autofocus:""},null,8,["modelValue"]),V.linkedinModal.errorMessage?((0,i.uX)(),(0,i.Wv)(o.l,{key:0,type:O.mergeIdentity?"warning":"error",class:"mt-4"},{default:(0,i.k6)((function(){return[(0,i.Lk)("p",null,(0,r.v_)(V.linkedinModal.errorMessage),1),O.mergeIdentity?((0,i.uX)(),(0,i.Wv)(l.D,{key:0,class:"mt-2 bg-surface-secondary",variant:"outlined",size:"small",onClick:n[19]||(n[19]=function(e){return O.mergeIdentity(V.linkedinModal.uuid)})},{default:(0,i.k6)((function(){return n[39]||(n[39]=[(0,i.eW)(" Merge ",-1)])})),_:1,__:[39]})):(0,i.Q3)("",!0)]})),_:1},8,["type"])):(0,i.Q3)("",!0)]})),_:1}),(0,i.bF)(u.S,null,{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{text:"",onClick:O.closeLikedinModal},{default:(0,i.k6)((function(){return n[40]||(n[40]=[(0,i.eW)(" Cancel ",-1)])})),_:1,__:[40]},8,["onClick"]),(0,i.bF)(l.D,{disabled:!V.linkedinModal.username,color:"primary",onClick:(0,a.D$)(O.addLinkedInProfile,["stop"])},{default:(0,i.k6)((function(){return n[41]||(n[41]=[(0,i.eW)(" Confirm ",-1)])})),_:1,__:[41]},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,i.bF)(m.p,{modelValue:V.dialog.open,"onUpdate:modelValue":n[21]||(n[21]=function(e){return V.dialog.open=e}),"max-width":"500px"},{default:(0,i.k6)((function(){return[(0,i.bF)(d.J,{class:"pa-3"},{default:(0,i.k6)((function(){return[(0,i.bF)(c.r,{class:"headline"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(V.dialog.title),1)]})),_:1}),(0,i.bF)(s.O,null,{default:(0,i.k6)((function(){return[V.dialog.text?((0,i.uX)(),(0,i.CE)("p",D,(0,r.v_)(V.dialog.text),1)):(0,i.Q3)("",!0),V.dialog.errorMessage?((0,i.uX)(),(0,i.Wv)(o.l,{key:1,dense:"",text:"",type:"error"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(V.dialog.errorMessage),1)]})),_:1})):(0,i.Q3)("",!0)]})),_:1}),V.dialog.action?((0,i.uX)(),(0,i.Wv)(u.S,{key:0},{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{text:"",onClick:O.closeDialog},{default:(0,i.k6)((function(){return n[42]||(n[42]=[(0,i.eW)(" Cancel ",-1)])})),_:1,__:[42]},8,["onClick"]),(0,i.bF)(l.D,{color:"primary",id:"confirm",depressed:"",onClick:(0,a.D$)(V.dialog.action,["stop"])},{default:(0,i.k6)((function(){return n[43]||(n[43]=[(0,i.eW)(" Confirm ",-1)])})),_:1,__:[43]},8,["onClick"])]})),_:1})):((0,i.uX)(),(0,i.Wv)(u.S,{key:1},{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{text:"",color:"primary",onClick:O.closeDialog},{default:(0,i.k6)((function(){return n[44]||(n[44]=[(0,i.eW)(" OK ",-1)])})),_:1,__:[44]},8,["onClick"])]})),_:1}))]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})}var V=t(41034),O=t(14048),z=t(30388),B=(t(28706),t(50113),t(74423),t(25276),t(64346),t(62062),t(44114),t(72712),t(15086),t(18111),t(20116),t(61701),t(18237),t(13579),t(26099),t(27495),t(21699),t(47764),t(71761),t(62953),t(74353)),P=t.n(B),S=t(58663),R=t(20595),j=t(87131),q=t(80220),Q=t(40018),T=t(57712),Y=t(15203),G=t(44966),K=t(56105),N=t(54640),J=t(57884),H=t(52790),Z=t(83102),ee=t(2143),ne=t(59412),te={class:"fit-content"},ie={class:"font-weight-medium"},re={key:1,class:"v-timeline"};function ae(e,n,t,a,o,l){return(0,i.uX)(),(0,i.CE)("div",te,[(0,i.bF)(F.w,{class:"text-subtitle-2 mb-2"},{default:(0,i.k6)((function(){return n[0]||(n[0]=[(0,i.eW)(" Activity ",-1)])})),_:1,__:[0]}),t.changes.length>0?((0,i.uX)(),(0,i.Wv)(ee.s,{key:0,side:"end"},{default:(0,i.k6)((function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.changes,(function(n){return(0,i.uX)(),(0,i.Wv)(ne.L,{key:n.tuid,"dot-color":"on-surface-variant",size:"x-small","line-thickness":"1"},{default:(0,i.k6)((function(){return[(0,i.Lk)("span",ie,(0,r.v_)(n.name.includes("-")?"An automated process":n.authoredBy),1),(0,i.eW)(" "+(0,r.v_)(l.parseText(n))+" on "+(0,r.v_)(e.$formatDate(n.createdAt,"YYYY-MM-DD")),1)]})),_:2},1024)})),128))]})),_:1})):((0,i.uX)(),(0,i.CE)("p",re,"No recent activity for this profile"))])}t(2008),t(48598),t(22489),t(79432),t(25440);const oe={props:{changes:{type:Array,required:!0}},methods:{parseText:function(e){var n=e.name.split("-")[0];switch(n){case"add_identity":var t,i,r=null===(t=e.operations)||void 0===t?void 0:t.find((function(e){return"identity"===e.entityType})),a=r.args.source,o=null===(i=r.args.uuid)||void 0===i?void 0:i.substring(0,7);return"added ".concat(a," identity ").concat(o);case"enroll":var l,u=null===(l=e.operations[0])||void 0===l?void 0:l.args.group;return"enrolled individual in ".concat(u);case"lock":return"locked the profile";case"merge":var d=e.operations.filter((function(e){return e.args.identity})).map((function(e){return e.args.identity.substring(0,7)}));return"merged ".concat(d.length>1?"identities":"identity"," ").concat(d.join(", "));case"merge_organizations":var c,s=null===(c=e.operations)||void 0===c?void 0:c.find((function(e){return"alias"===e.entityType}));return"merged ".concat(s.args.name," into ").concat(s.args.organization);case"review":return"reviewed the profile";case"unlock":return"unlocked the profile";case"unmerge_identities":return"split identity";case"update_profile":var f,m=Object.keys(null===(f=e.operations[0])||void 0===f?void 0:f.args).filter((function(e){return"individual"!==e})).join(", ");return"updated profile ".concat(m);case"withdraw":var p,v=null===(p=e.operations[0])||void 0===p?void 0:p.args.group;return"withdrew individual from ".concat(v);default:return n.replace("-"," ")}}}};var le=t(64621);const ue=(0,le.A)(oe,[["render",ae]]),de=ue,ce={name:"Individual",components:{Avatar:Q.A,IdentitiesList:T.A,IndividualCard:Y.A,EnrollmentList:G.A,EnrollModal:K.A,TeamEnrollModal:N.A,MatchesModal:J.A,EditDialog:H.A,LoadingSpinner:Z.A,ChangeLog:de},mixins:[q.M],apollo:{individuals:function(){return{query:S.UE,variables:{uuid:this.mk},result:function(e){1===e.data.individuals.entities.length?this.updateIndividual(e.data.individuals.entities):e.errors?this.error=this.$getErrorMessage(e.errors[0]):this.error="Individual ".concat(this.mk," not found")}}}},data:function(){return{individual:null,dialog:{open:!1,title:"",text:"",errorMessage:"",action:null},form:{},teamModal:{open:!1,organization:""},matchesModal:{open:!1},linkedinModal:{open:!1,username:"",errorMessage:"",uuid:null},countries:[],socialProfiles:[],mk:this.$route.params.mk,error:null,changelog:[]}},computed:{showRecommendations:function(){return this.individual.matchRecommendations&&this.individual.matchRecommendations.length>0},isInWorkspace:function(){var e=this.$store.getters.workspace;return e&&-1!==e.indexOf(this.mk)},hasLinkedinProfile:function(){return this.socialProfiles.some((function(e){return"linkedin"===e.source}))},reviewButton:function(){var e=this.$formatDate(this.individual.lastReviewed,"YYYY-MM-DD"),n=P()(this.individual.lastModified).isAfter(this.individual.lastReviewed,"second");return e?n?{icon:"mdi-alert-decagram",tooltip:"Changes since last review on ".concat(e)}:{icon:"mdi-check-decagram",tooltip:"Last reviewed ".concat(e)}:{icon:"mdi-check-decagram-outline",tooltip:"Mark as reviewed"}}},methods:{updateProfile:function(e){var n=this;return(0,z.A)((0,O.A)().mark((function t(){var i;return(0,O.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,R.r7)(n.$apollo,e,n.mk);case 3:i=t.sent,n.updateIndividual(i.data.updateProfile.individual),n.$logger.debug("Updated profile ".concat(n.mk),e),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error updating profile: ".concat(t.t0),e);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},lock:function(){var e=this;return(0,z.A)((0,O.A)().mark((function n(){var t;return(0,O.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,R.pG)(e.$apollo,e.mk);case 3:t=n.sent,Object.assign(e.individual,{isLocked:t.data.lock.individual.isLocked}),e.$logger.debug("Locked individual ".concat(e.mk)),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error locking profile",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error locking individual ".concat(e.mk,": ").concat(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},unlock:function(){var e=this;return(0,z.A)((0,O.A)().mark((function n(){var t;return(0,O.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,R.Cr)(e.$apollo,e.mk);case 3:t=n.sent,Object.assign(e.individual,{isLocked:t.data.unlock.individual.isLocked}),e.$logger.debug("Unlocked individual ".concat(e.mk)),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error updating profile",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error unlocking individual ".concat(e.mk,": ").concat(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},getCountryList:function(){var e=this;return(0,z.A)((0,O.A)().mark((function n(){var t;return(0,O.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,S.X6)(e.$apollo);case 3:t=n.sent,e.countries=t.data.countries.entities,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error loading country list",errorMessage:e.$getErrorMessage(n.t0)};case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},mergeIdentity:function(e){var n=this;return(0,z.A)((0,O.A)().mark((function t(){var i;return(0,O.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,R.h1)(n.$apollo,[e],n.mk);case 3:i=t.sent,n.updateIndividual(i.data.merge.individual),n.$logger.debug("Merged identity",e),n.closeLikedinModal(),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error merging identity ".concat(e,": ").concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},unmergeIdentities:function(e){var n=this;return(0,z.A)((0,O.A)().mark((function t(){var i,r;return(0,O.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,R.Io)(n.$apollo,e);case 3:i=t.sent,r=i.data.unmergeIdentities.individuals.find((function(e){return e.mk===n.mk})),n.updateIndividual(r),n.$logger.debug("Unmerged identities",e),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error unmerging identities ".concat(e,": ").concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},enroll:function(e,n,t,i,r){var a=this;return(0,z.A)((0,O.A)().mark((function o(){var l;return(0,O.A)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(0,R.xu)(a.$apollo,e,n,t,i,r);case 2:return l=o.sent,o.abrupt("return",l);case 4:case"end":return o.stop()}}),o)})))()},updateEnrollment:function(e){var n=this;return(0,z.A)((0,O.A)().mark((function t(){var i;return(0,O.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object.assign(e,{uuid:n.mk}),t.prev=1,t.next=4,(0,R.ct)(n.$apollo,e);case 4:i=t.sent,n.updateIndividual(i.data.updateEnrollment.individual),n.$logger.debug("Updated enrollment",e),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error updating enrollment: ".concat(t.t0),e);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},withdraw:function(e){var n=this;return(0,z.A)((0,O.A)().mark((function t(){var i,r,a,o,l;return(0,O.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.name,r=e.fromDate,a=e.toDate,o=e.parentOrg,t.prev=1,t.next=4,(0,R.ne)(n.$apollo,n.mk,i,r,a,o);case 4:l=t.sent,n.updateIndividual(l.data.withdraw.individual),n.$logger.debug("Removed affiliation",(0,V.A)({uuid:n.mk},e)),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error removing affiliation: ".concat(t.t0),(0,V.A)({uuid:n.mk},e));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},deleteIndividual:function(){var e=this;return(0,z.A)((0,O.A)().mark((function n(){var t;return(0,O.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,R.Ut)(e.$apollo,e.mk);case 3:t=n.sent,t&&e.$router.push("/"),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error deleting profile",errorMessage:e.$getErrorMessage(n.t0)};case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},openTeamModal:function(e){this.teamModal={open:!0,organization:e}},confirmDelete:function(){this.dialog={open:!0,title:"Delete ".concat(this.individual.name,"?"),action:this.deleteIndividual}},closeDialog:function(){this.dialog={open:!1,title:"",text:"",errorMessage:""}},updateIndividual:function(e){var n;Array.isArray(e)||(e=[e]),this.individual=(0,j.p4)(e[0]),this.socialProfiles=this.getSocialProfiles(e[0]),this.changelog=null!==(n=e[0].changelog)&&void 0!==n?n:this.changelog,Object.assign(this.form,{name:this.individual.name,email:this.individual.email,country:this.individual.country,gender:this.individual.gender}),document.title="".concat(this.individual.name||"Individual"," - Sorting Hat")},fetchOrganizations:function(e,n,t){var i=this;return(0,z.A)((0,O.A)().mark((function r(){var a;return(0,O.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,S.t2)(i.$apollo,e,n,t);case 2:return a=r.sent,r.abrupt("return",a.data.organizations);case 4:case"end":return r.stop()}}),r)})))()},applyRecommendation:function(e,n){var t=this;return(0,z.A)((0,O.A)().mark((function i(){return(0,O.A)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,R.x2)(t.$apollo,e,n);case 3:t.$apollo.queries.individuals.refetch(),t.$logger.debug("Applied recommendation ".concat(e)),i.next=11;break;case 7:i.prev=7,i.t0=i["catch"](0),t.dialog={open:!0,title:"Error applying recommendation",errorMessage:t.$getErrorMessage(i.t0)},t.$logger.error("Error applying recommendation ".concat(e,": ").concat(i.t0));case 11:case"end":return i.stop()}}),i,null,[[0,7]])})))()},recommendMatches:function(e,n,t,i,r,a){var o=this;return(0,z.A)((0,O.A)().mark((function l(){var u;return(0,O.A)().wrap((function(l){while(1)switch(l.prev=l.next){case 0:return l.next=2,(0,R.wg)(o.$apollo,e,n,t,i,r,a);case 2:return u=l.sent,l.abrupt("return",u);case 4:case"end":return l.stop()}}),l)})))()},getSocialProfiles:function(e){return e.identities.reduce((function(e,n){var t=[{source:"github",link:"http://github.com/".concat(n.username),icon:"mdi-github"},{source:"linkedin",link:"https://www.linkedin.com/in/".concat(n.username),icon:"mdi-linkedin"}],i=t.find((function(e){return e.source===n.source.toLowerCase()})),r=e.find((function(e){return e.source===n.source&&e.username===n.username}));return i&&!r&&e.push((0,V.A)((0,V.A)({},n),i)),e}),[])},closeLikedinModal:function(){Object.assign(this.linkedinModal,{open:!1,username:"",errorMessage:"",uuid:null})},addLinkedInProfile:function(){var e=this;return(0,z.A)((0,O.A)().mark((function n(){var t,i,r,a,o,l;return(0,O.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t=/(linkedin\.com\/in\/)(.*?)(\/|$|\?)(.*)/,i=e.linkedinModal.username.match(t),i&&(e.linkedinModal.username=i[2]),n.next=6,(0,R.DA)(e.$apollo,e.mk,e.linkedinModal.username);case 6:r=n.sent,e.updateIndividual(r.data.addIdentity.individual),e.closeLikedinModal(),n.next=17;break;case 11:n.prev=11,n.t0=n["catch"](0),a=e.$getErrorMessage(n.t0),o=a.includes("already exists in the registry"),o?(l=a.substring(10,50),a="An individual with that LinkedIn username already exists. Click 'merge' to merge it into this profile.",Object.assign(e.linkedinModal,{errorMessage:a,uuid:l})):e.dialog={open:!0,title:"Error adding identity",errorMessage:a},e.$logger.error("Error adding identity: ".concat(n.t0));case 17:case"end":return n.stop()}}),n,null,[[0,11]])})))()},removeLinkedInProfile:function(){var e=this;return(0,z.A)((0,O.A)().mark((function n(){var t,i,r,a,o;return(0,O.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,r="linkedin",a=null===(t=e.individual.identities.find((function(e){return e.name.toLowerCase()===r})))||void 0===t?void 0:t.identities,n.next=5,Promise.all(a.map((function(n){return(0,R.Ut)(e.$apollo,n.uuid)})));case 5:o=n.sent,e.updateIndividual(null===(i=o[o.length-1])||void 0===i?void 0:i.data.deleteIdentity.individual),e.closeDialog(),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error removing identity",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error removing identity: ".concat(n.t0));case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()},confirmRemoveIdentity:function(){this.dialog={open:!0,title:"Remove LinkedIn profile?",action:this.removeLinkedInProfile}},review:function(e){var n=this;return(0,z.A)((0,O.A)().mark((function t(){var i;return(0,O.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,R._9)(n.$apollo,e);case 3:i=t.sent,n.updateIndividual(i.data.review.individual),n.$logger.debug("Marked individual ".concat(n.mk," as reviewed")),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),n.dialog={open:!0,title:"Error reviewing individual",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error reviewing individual: ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},se=(0,le.A)(ce,[["render",U],["__scopeId","data-v-11f68677"]]),fe=se},52790:(e,n,t)=>{t.d(n,{A:()=>_});var i=t(20641),r=t(90033),a=t(13892),o=t(4189),l=t(30697),u=t(93745),d=t(74270),c=t(41720),s=t(79669),f=t(88249),m=t(43948),p={key:0},v={key:1,class:"font-italic"};function k(e,n,t,k,g,b){return(0,i.uX)(),(0,i.Wv)(f.q,{modelValue:e.menu,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.menu=n}),"close-on-content-click":!1},{activator:(0,i.k6)((function(o){var l=o.props;return["text"===t.activator?((0,i.uX)(),(0,i.CE)("button",(0,i.v6)({key:0,class:"hide-icon"},l),[t.modelValue?((0,i.uX)(),(0,i.CE)("span",p,[(0,i.RG)(e.$slots,"value",(0,r._B)((0,i.Ng)(l)),(function(){return[(0,i.eW)((0,r.v_)(t.modelValue),1)]}),!0)])):((0,i.uX)(),(0,i.CE)("span",v,(0,r.v_)(t.emptyValue),1)),(0,i.bF)(s.w,{class:"icon--hidden ml-2","aria-label":t.label,size:"x-small"},{default:(0,i.k6)((function(){return n[3]||(n[3]=[(0,i.eW)(" mdi-lead-pencil ",-1)])})),_:1,__:[3]},8,["aria-label"])],16)):((0,i.uX)(),(0,i.Wv)(a.D,(0,r._B)((0,i.v6)({key:1},l)),{default:(0,i.k6)((function(){return[(0,i.bF)(s.w,{start:""},{default:(0,i.k6)((function(){return n[4]||(n[4]=[(0,i.eW)("mdi-plus",-1)])})),_:1,__:[4]}),n[5]||(n[5]=(0,i.eW)(" Add ",-1))]})),_:2,__:[5]},1040))]})),default:(0,i.k6)((function(){return[(0,i.bF)(o.J,{"min-width":"250"},{default:(0,i.k6)((function(){return[(0,i.bF)(d.Z,{"model-value":t.modelValue,"ok-text":"Save",onCancel:n[0]||(n[0]=function(n){return e.menu=!1}),onSave:n[1]||(n[1]=function(e){return b.save(e)})},{default:(0,i.k6)((function(n){var r=n.model,a=n.actions;return[(0,i.bF)(l.O,null,{default:(0,i.k6)((function(){return[(0,i.RG)(e.$slots,"input",{model:r},(function(){return[(0,i.bF)(m.W,{modelValue:r.value,"onUpdate:modelValue":function(e){return r.value=e},label:t.label,color:"primary",density:"compact","hide-details":"","single-line":""},null,8,["modelValue","onUpdate:modelValue","label"])]}),!0)]})),_:2},1024),(0,i.bF)(u.S,null,{default:(0,i.k6)((function(){return[(0,i.bF)(c.h),((0,i.uX)(),(0,i.Wv)((0,i.$y)(a),{color:"primary"}))]})),_:2},1024)]})),_:3},8,["model-value"])]})),_:3})]})),_:3},8,["modelValue"])}const g={name:"EditDialog",props:{modelValue:{type:[String,Object],required:!1},label:{type:String,required:!0},activator:{type:String,required:!1,default:"text"},emptyValue:{type:String,required:!1}},data:function(){return{menu:!1}},methods:{save:function(e){this.$emit("save",e),this.menu=!1}}};var b=t(64621);const h=(0,b.A)(g,[["render",k],["__scopeId","data-v-3daedc2c"]]),_=h},83102:(e,n,t)=>{t.d(n,{A:()=>f});var i=t(20641),r=t(90033),a=t(26106),o={class:"d-flex flex-column justify-center align-center pa-4 h-100"},l={key:0,class:"subtitle-1 text-medium-emphasis mt-4"};function u(e,n,t,u,d,c){return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(a.x,{size:t.size,color:"primary",indeterminate:""},null,8,["size"]),t.label?((0,i.uX)(),(0,i.CE)("p",l,(0,r.v_)(t.label),1)):(0,i.Q3)("",!0)])}t(2892);const d={name:"LoadingSpinner",props:{label:{type:String,required:!1,default:null},size:{type:[String,Number],required:!1,default:48}}};var c=t(64621);const s=(0,c.A)(d,[["render",u]]),f=s}}]);
//# sourceMappingURL=744.92c9cb84.js.map