export const __webpack_id__="57465";export const __webpack_ids__=["57465"];export const __webpack_modules__={8795:function(e,t,i){i.d(t,{i:()=>o});var a=i(35297);const o=(e,t)=>(e=>{switch(e){case"de":case"lb":return!0;default:return!1}})(t)?(0,a.Z)(e):e.toLocaleLowerCase(t)},15676:function(e,t,i){i.d(t,{Z:()=>a});const a=e=>{const t=window.location.pathname;return e?t+"?"+e:t}},41042:function(e,t,i){i.a(e,async function(e,t){try{var a=i(69868),o=i(84922),s=i(22019),n=i(75907),r=i(17372),d=i(96635),l=(i(86160),e([r,d]));[r,d]=l.then?(await l)():l;const c="M2.2,16.06L3.88,12L2.2,7.94L6.26,6.26L7.94,2.2L12,3.88L16.06,2.2L17.74,6.26L21.8,7.94L20.12,12L21.8,16.06L17.74,17.74L16.06,21.8L12,20.12L7.94,21.8L6.26,17.74L2.2,16.06M13,17V15H11V17H13M13,13V7H11V13H13Z",h="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z";class p extends o.WF{render(){const e=this.progress||this._result?"accent":this.appearance;return o.qy` <ha-button .appearance="${e}" .disabled="${this.disabled}" .loading="${this.progress}" .variant="${"success"===this._result?"success":"error"===this._result?"danger":this.variant}" class="${(0,n.H)({result:!!this._result,success:"success"===this._result,error:"error"===this._result})}"> ${this.iconPath?o.qy`<ha-svg-icon .path="${this.iconPath}" slot="start"></ha-svg-icon>`:o.s6} <slot>${this.label}</slot> </ha-button> ${this._result?o.qy` <div class="progress"> ${"success"===this._result?o.qy`<ha-svg-icon .path="${h}"></ha-svg-icon>`:"error"===this._result?o.qy`<ha-svg-icon .path="${c}"></ha-svg-icon>`:o.s6} </div> `:o.s6} `}actionSuccess(){this._setResult("success")}actionError(){this._setResult("error")}_setResult(e){this._result=e,setTimeout(()=>{this._result=void 0},2e3)}constructor(...e){super(...e),this.disabled=!1,this.progress=!1,this.appearance="accent",this.variant="brand"}}p.styles=o.AH`:host{outline:0;display:inline-block;position:relative}:host([progress]){pointer-events:none}.progress{bottom:0;display:flex;justify-content:center;align-items:center;position:absolute;top:0;width:100%}ha-button{width:100%}ha-button.result::part(caret),ha-button.result::part(end),ha-button.result::part(label),ha-button.result::part(spinner),ha-button.result::part(start){visibility:hidden}ha-svg-icon{color:var(--white-color)}`,(0,a.__decorate)([(0,s.MZ)()],p.prototype,"label",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],p.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],p.prototype,"progress",void 0),(0,a.__decorate)([(0,s.MZ)()],p.prototype,"appearance",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"iconPath",void 0),(0,a.__decorate)([(0,s.MZ)()],p.prototype,"variant",void 0),(0,a.__decorate)([(0,s.wk)()],p.prototype,"_result",void 0),p=(0,a.__decorate)([(0,s.EM)("ha-progress-button")],p),t()}catch(e){t(e)}})},31109:function(e,t,i){var a=i(69868),o=i(84922),s=i(22019),n=i(75907),r=i(13802);i(71434);class d extends o.WF{render(){const e=this.label;return o.qy` <div class="badge ${(0,n.H)({"icon-only":this.iconOnly})}" role="${(0,r.J)("button"===this.type?"button":void 0)}" tabindex="${(0,r.J)("button"===this.type?"0":void 0)}"> <ha-ripple .disabled="${"button"!==this.type}"></ha-ripple> <slot name="icon"></slot> ${this.iconOnly?o.s6:o.qy`<span class="info"> ${e?o.qy`<span class="label">${e}</span>`:o.s6} <span class="content"><slot></slot></span> </span>`} </div> `}constructor(...e){super(...e),this.type="badge",this.iconOnly=!1}}d.styles=o.AH`:host{--badge-color:var(--secondary-text-color);-webkit-tap-highlight-color:transparent}.badge{position:relative;--ha-ripple-color:var(--badge-color);--ha-ripple-hover-opacity:0.04;--ha-ripple-pressed-opacity:0.12;transition:box-shadow 180ms ease-in-out,border-color 180ms ease-in-out;display:flex;flex-direction:row;align-items:center;justify-content:center;gap:8px;height:var(--ha-badge-size,36px);min-width:var(--ha-badge-size,36px);padding:0px 12px;box-sizing:border-box;width:auto;border-radius:var(--ha-badge-border-radius,calc(var(--ha-badge-size,36px)/ 2));background:var(--ha-card-background,var(--card-background-color,#fff));-webkit-backdrop-filter:var(--ha-card-backdrop-filter,none);backdrop-filter:var(--ha-card-backdrop-filter,none);border-width:var(--ha-card-border-width,1px);box-shadow:var(--ha-card-box-shadow,none);border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0))}.badge:focus-visible{--shadow-default:var(--ha-card-box-shadow, 0 0 0 0 transparent);--shadow-focus:0 0 0 1px var(--badge-color);border-color:var(--badge-color);box-shadow:var(--shadow-default),var(--shadow-focus)}[role=button]{cursor:pointer}[role=button]:focus{outline:0}.info{display:flex;flex-direction:column;align-items:flex-start;padding-inline-start:initial;text-align:center}.label{font-size:var(--ha-font-size-xs);font-style:normal;font-weight:var(--ha-font-weight-medium);line-height:10px;letter-spacing:.1px;color:var(--secondary-text-color)}.content{font-size:var(--ha-badge-font-size, var(--ha-font-size-s));font-style:normal;font-weight:var(--ha-font-weight-medium);line-height:var(--ha-line-height-condensed);letter-spacing:.1px;color:var(--primary-text-color)}::slotted([slot=icon]){--mdc-icon-size:var(--ha-badge-icon-size, 18px);color:var(--badge-color);line-height:0;margin-left:-4px;margin-right:0;margin-inline-start:-4px;margin-inline-end:0}::slotted(img[slot=icon]){width:30px;height:30px;border-radius:50%;object-fit:cover;overflow:hidden;margin-left:-10px;margin-right:0;margin-inline-start:-10px;margin-inline-end:0}.badge.icon-only{padding:0}.badge.icon-only ::slotted([slot=icon]){margin-left:0;margin-right:0;margin-inline-start:0;margin-inline-end:0}`,(0,a.__decorate)([(0,s.MZ)()],d.prototype,"type",void 0),(0,a.__decorate)([(0,s.MZ)()],d.prototype,"label",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"icon-only"})],d.prototype,"iconOnly",void 0),d=(0,a.__decorate)([(0,s.EM)("ha-badge")],d)},69752:function(e,t,i){i(65315),i(837),i(37089);var a=i(69868),o=i(84922),s=i(22019),n=i(65940),r=i(44017),d=i(63211),l=i(24730),c=i(27161);i(77510),i(53312);class h extends o.WF{open(){const e=this.shadowRoot?.querySelector("ha-select");e&&(e.menuOpen=!0)}render(){return this.hass?o.qy` <ha-select .label="${this.label||this.hass.localize("ui.components.blueprint-picker.select_blueprint")}" fixedMenuPosition naturalMenuWidth .value="${this.value}" .disabled="${this.disabled}" @selected="${this._blueprintChanged}" @closed="${d.d}"> ${this._processedBlueprints(this.blueprints).map(e=>o.qy` <ha-list-item .value="${e.path}"> ${e.name} </ha-list-item> `)} </ha-select> `:o.s6}firstUpdated(e){super.firstUpdated(e),void 0===this.blueprints&&(0,c.Xg)(this.hass,this.domain).then(e=>{this.blueprints=e})}_blueprintChanged(e){const t=e.target.value;t!==this.value&&(this.value=t,setTimeout(()=>{(0,r.r)(this,"value-changed",{value:t}),(0,r.r)(this,"change")},0))}constructor(...e){super(...e),this.value="",this.domain="automation",this.disabled=!1,this._processedBlueprints=(0,n.A)(e=>{if(!e)return[];return Object.entries(e).filter(e=>!("error"in e[1])).map(([e,t])=>({...t.metadata,path:e})).sort((e,t)=>(0,l.xL)(e.name,t.name,this.hass.locale.language))})}}h.styles=o.AH`:host{display:inline-block}ha-select{width:100%;min-width:200px;display:block}`,(0,a.__decorate)([(0,s.MZ)()],h.prototype,"label",void 0),(0,a.__decorate)([(0,s.MZ)()],h.prototype,"value",void 0),(0,a.__decorate)([(0,s.MZ)()],h.prototype,"domain",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],h.prototype,"blueprints",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],h.prototype,"disabled",void 0),h=(0,a.__decorate)([(0,s.EM)("ha-blueprint-picker")],h)},81341:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{r:()=>l});var o=i(69868),s=i(84922),n=i(78696),r=i(22019),d=e([n]);n=(d.then?(await d)():d)[0];const l=300;class c extends s.WF{_handleAfterHide(){this.open=!1;const e=new Event("closed",{bubbles:!0,composed:!0});this.dispatchEvent(e)}updated(e){super.updated(e),e.has("open")&&(this._drawerOpen=this.open)}render(){return s.qy` <wa-drawer placement="bottom" .open="${this._drawerOpen}" @wa-after-hide="${this._handleAfterHide}" without-header> <slot></slot> </wa-drawer> `}constructor(...e){super(...e),this.open=!1,this._drawerOpen=!1}}c.styles=s.AH`wa-drawer{--wa-color-surface-raised:var(
        --ha-bottom-sheet-surface-background,
        var(--ha-dialog-surface-background, var(--mdc-theme-surface, #fff)),
      );--spacing:0;--size:auto;--show-duration:${l}ms;--hide-duration:${l}ms}wa-drawer::part(dialog){border-top-left-radius:var(--ha-bottom-sheet-border-radius,var(--ha-dialog-border-radius,var(--ha-border-radius-2xl)));border-top-right-radius:var(--ha-bottom-sheet-border-radius,var(--ha-dialog-border-radius,var(--ha-border-radius-2xl)));max-height:90vh;padding-bottom:var(--safe-area-inset-bottom);padding-left:var(--safe-area-inset-left);padding-right:var(--safe-area-inset-right)}`,(0,o.__decorate)([(0,r.MZ)({type:Boolean})],c.prototype,"open",void 0),(0,o.__decorate)([(0,r.wk)()],c.prototype,"_drawerOpen",void 0),c=(0,o.__decorate)([(0,r.EM)("ha-bottom-sheet")],c),a()}catch(e){a(e)}})},71347:function(e,t,i){i(99342),i(65315),i(22416),i(37089),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030);var a=i(69868),o=i(84922),s=i(22019),n=i(44017),r=i(27161),d=i(54600),l=i(50809),c=(i(7475),i(16520),i(9058),i(14532),i(29561));class h extends o.WF{willUpdate(e){super.willUpdate(e),e.has("value")&&!(0,c.b)(this.value,e.get("value"))&&this._findRelated()}render(){return o.qy` <ha-expansion-panel left-chevron .expanded="${this.expanded}" @expanded-will-change="${this._expandedWillChange}" @expanded-changed="${this._expandedChanged}"> <div slot="header" class="header"> ${this.hass.localize("ui.panel.config.blueprint.caption")} ${this.value?.length?o.qy`<div class="badge">${this.value?.length}</div> <ha-icon-button .path="${"M21 8H3V6H21V8M13.81 16H10V18H13.09C13.21 17.28 13.46 16.61 13.81 16M18 11H6V13H18V11M21.12 15.46L19 17.59L16.88 15.46L15.47 16.88L17.59 19L15.47 21.12L16.88 22.54L19 20.41L21.12 22.54L22.54 21.12L20.41 19L22.54 16.88L21.12 15.46Z"}" @click="${this._clearFilter}"></ha-icon-button>`:o.s6} </div> ${this._blueprints&&this._shouldRender?o.qy` <ha-list @selected="${this._blueprintsSelected}" multi class="ha-scrollbar"> ${Object.entries(this._blueprints).map(([e,t])=>"error"in t?o.s6:o.qy`<ha-check-list-item .value="${e}" .selected="${(this.value||[]).includes(e)}"> ${t.metadata.name||e} </ha-check-list-item>`)} </ha-list> `:o.s6} </ha-expansion-panel> `}async firstUpdated(){this.type&&(this._blueprints=await(0,r.Xg)(this.hass,this.type))}updated(e){e.has("expanded")&&this.expanded&&setTimeout(()=>{!this.narrow&&this.expanded&&(this.renderRoot.querySelector("ha-list").style.height=this.clientHeight-49+"px")},300)}_expandedWillChange(e){this._shouldRender=e.detail.expanded}_expandedChanged(e){this.expanded=e.detail.expanded}async _blueprintsSelected(e){const t=this._blueprints;if(!e.detail.index.size)return(0,n.r)(this,"data-table-filter-changed",{value:[],items:void 0}),void(this.value=[]);const i=[];for(const a of e.detail.index){const e=Object.keys(t)[a];i.push(e)}this.value=i}async _findRelated(){if(!this.value?.length)return this.value=[],void(0,n.r)(this,"data-table-filter-changed",{value:[],items:void 0});const e=[];for(const t of this.value)this.type&&e.push((0,d.f)(this.hass,`${this.type}_blueprint`,t));const t=await Promise.all(e),i=new Set;for(const e of t)e[this.type]&&e[this.type].forEach(e=>i.add(e));(0,n.r)(this,"data-table-filter-changed",{value:this.value,items:this.type?i:void 0})}_clearFilter(e){e.preventDefault(),this.value=void 0,(0,n.r)(this,"data-table-filter-changed",{value:void 0,items:void 0})}static get styles(){return[l.dp,o.AH`:host{border-bottom:1px solid var(--divider-color)}:host([expanded]){flex:1;height:0}ha-expansion-panel{--ha-card-border-radius:0;--expansion-panel-content-padding:0}.header{display:flex;align-items:center}.header ha-icon-button{margin-inline-start:auto;margin-inline-end:8px}.badge{display:inline-block;margin-left:8px;margin-inline-start:8px;margin-inline-end:0;min-width:16px;box-sizing:border-box;border-radius:50%;font-size:var(--ha-font-size-xs);font-weight:var(--ha-font-weight-normal);background-color:var(--primary-color);line-height:var(--ha-line-height-normal);text-align:center;padding:0px 2px;color:var(--text-primary-color)}`]}constructor(...e){super(...e),this.narrow=!1,this.expanded=!1,this._shouldRender=!1}}(0,a.__decorate)([(0,s.MZ)({attribute:!1})],h.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],h.prototype,"value",void 0),(0,a.__decorate)([(0,s.MZ)()],h.prototype,"type",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],h.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],h.prototype,"expanded",void 0),(0,a.__decorate)([(0,s.wk)()],h.prototype,"_shouldRender",void 0),(0,a.__decorate)([(0,s.wk)()],h.prototype,"_blueprints",void 0),h=(0,a.__decorate)([(0,s.EM)("ha-filter-blueprints")],h)},53615:function(e,t,i){i(65315),i(837),i(37089),i(48169);var a=i(69868),o=i(84922),s=i(22019),n=i(34789),r=i.n(n),d=i(44017),l=(i(81071),i(92714),i(55885),i(57971));let c;const h=new(i(33810).G)(1e3),p={reType:/(?<input>(\[!(?<type>caution|important|note|tip|warning)\])(?:\s|\\n)?)/i,typeToHaAlert:{caution:"error",important:"info",note:"info",tip:"success",warning:"warning"}};class u extends o.mN{disconnectedCallback(){if(super.disconnectedCallback(),this.cache){const e=this._computeCacheKey();h.set(e,this.innerHTML)}}createRenderRoot(){return this}update(e){super.update(e),void 0!==this.content&&this._render()}willUpdate(e){if(!this.innerHTML&&this.cache){const e=this._computeCacheKey();h.has(e)&&(this.innerHTML=h.get(e),this._resize())}}_computeCacheKey(){return r()({content:this.content,allowSvg:this.allowSvg,allowDataUrl:this.allowDataUrl,breaks:this.breaks})}async _render(){this.innerHTML=await(async(e,t,a)=>(c||(c=(0,l.LV)(new Worker(new URL(i.p+i.u("55640"),i.b)))),c.renderMarkdown(e,t,a)))(String(this.content),{breaks:this.breaks,gfm:!0},{allowSvg:this.allowSvg,allowDataUrl:this.allowDataUrl}),this._resize();const e=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,null);for(;e.nextNode();){const t=e.currentNode;if(t instanceof HTMLAnchorElement&&t.host!==document.location.host)t.target="_blank",t.rel="noreferrer noopener";else if(t instanceof HTMLImageElement)this.lazyImages&&(t.loading="lazy"),t.addEventListener("load",this._resize);else if(t instanceof HTMLQuoteElement){const i=t.firstElementChild?.firstChild?.textContent&&p.reType.exec(t.firstElementChild.firstChild.textContent);if(i){const{type:a}=i.groups,o=document.createElement("ha-alert");o.alertType=p.typeToHaAlert[a.toLowerCase()],o.append(...Array.from(t.childNodes).map(e=>{const t=Array.from(e.childNodes);if(!this.breaks&&t.length){const e=t[0];e.nodeType===Node.TEXT_NODE&&e.textContent===i.input&&e.textContent?.includes("\n")&&(e.textContent=e.textContent.split("\n").slice(1).join("\n"))}return t}).reduce((e,t)=>e.concat(t),[]).filter(e=>e.textContent&&e.textContent!==i.input)),e.parentNode().replaceChild(o,t)}}else t instanceof HTMLElement&&["ha-alert","ha-qr-code","ha-icon","ha-svg-icon"].includes(t.localName)&&i(41073)(`./${t.localName}`)}}constructor(...e){super(...e),this.allowSvg=!1,this.allowDataUrl=!1,this.breaks=!1,this.lazyImages=!1,this.cache=!1,this._resize=()=>(0,d.r)(this,"content-resize")}}(0,a.__decorate)([(0,s.MZ)()],u.prototype,"content",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"allow-svg",type:Boolean})],u.prototype,"allowSvg",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"allow-data-url",type:Boolean})],u.prototype,"allowDataUrl",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],u.prototype,"breaks",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"lazy-images"})],u.prototype,"lazyImages",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],u.prototype,"cache",void 0),u=(0,a.__decorate)([(0,s.EM)("ha-markdown-element")],u)},56657:function(e,t,i){var a=i(69868),o=i(84922),s=i(22019);i(53615);class n extends o.WF{render(){return this.content?o.qy`<ha-markdown-element .content="${this.content}" .allowSvg="${this.allowSvg}" .allowDataUrl="${this.allowDataUrl}" .breaks="${this.breaks}" .lazyImages="${this.lazyImages}" .cache="${this.cache}"></ha-markdown-element>`:o.s6}constructor(...e){super(...e),this.allowSvg=!1,this.allowDataUrl=!1,this.breaks=!1,this.lazyImages=!1,this.cache=!1}}n.styles=o.AH`:host{display:block}ha-markdown-element{-ms-user-select:text;-webkit-user-select:text;-moz-user-select:text}ha-markdown-element>:first-child{margin-top:0}ha-markdown-element>:last-child{margin-bottom:0}ha-alert{display:block;margin:4px 0}a{color:var(--primary-color)}img{max-width:100%}code,pre{background-color:var(--markdown-code-background-color,none);border-radius:3px}svg{background-color:var(--markdown-svg-background-color,none);color:var(--markdown-svg-color,none)}code{font-size:var(--ha-font-size-s);padding:.2em .4em}pre code{padding:0}pre{padding:16px;overflow:auto;line-height:var(--ha-line-height-condensed);font-family:var(--ha-font-family-code)}h1,h2,h3,h4,h5,h6{line-height:initial}h2{font-size:var(--ha-font-size-xl);font-weight:var(--ha-font-weight-bold)}hr{border-color:var(--divider-color);border-bottom:none;margin:16px 0}`,(0,a.__decorate)([(0,s.MZ)()],n.prototype,"content",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"allow-svg",type:Boolean})],n.prototype,"allowSvg",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"allow-data-url",type:Boolean})],n.prototype,"allowDataUrl",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],n.prototype,"breaks",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"lazy-images"})],n.prototype,"lazyImages",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],n.prototype,"cache",void 0),n=(0,a.__decorate)([(0,s.EM)("ha-markdown")],n)},86133:function(e,t,i){i.a(e,async function(e,t){try{var a=i(69868),o=i(84922),s=i(22019),n=i(44017),r=i(81341),d=e([r]);r=(d.then?(await d)():d)[0];class l extends o.WF{render(){return o.qy`<dialog open @transitionend="${this._handleTransitionEnd}" style="${`\n        --height: ${this._dialogViewportHeight}vh;\n        --height: ${this._dialogViewportHeight}dvh;\n        --max-height: ${this._dialogMaxViewpointHeight}vh;\n        --max-height: ${this._dialogMaxViewpointHeight}dvh;\n        --min-height: ${this._dialogMinViewpointHeight}vh;\n        --min-height: ${this._dialogMinViewpointHeight}dvh;\n      `}"> <div class="handle-wrapper"> <div @mousedown="${this._handleMouseDown}" @touchstart="${this._handleTouchStart}" class="handle"></div> </div> <slot></slot> </dialog>`}firstUpdated(e){super.firstUpdated(e),this._openSheet()}_openSheet(){requestAnimationFrame(()=>{this._dialog.classList.add("show")})}closeSheet(){requestAnimationFrame(()=>{this._dialog.classList.remove("show")})}_handleTransitionEnd(){this._dialog.classList.contains("show")?(this._dialogViewportHeight=this._dialog.offsetHeight/window.innerHeight*100,this._dialogMaxViewpointHeight=90,this._dialogMinViewpointHeight=20):(this._dialog.close(),(0,n.r)(this,"bottom-sheet-closed"))}connectedCallback(){super.connectedCallback(),document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("touchmove",this._handleTouchMove,{passive:!1}),document.addEventListener("touchend",this._handleTouchEnd),document.addEventListener("touchcancel",this._handleTouchEnd)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("touchmove",this._handleTouchMove),document.removeEventListener("touchend",this._handleTouchEnd),document.removeEventListener("touchcancel",this._handleTouchEnd)}_startDrag(e){this._dragging=!0,this._dragStartY=e,this._initialSize=this._dialog.offsetHeight/window.innerHeight*100,document.body.style.setProperty("cursor","grabbing")}_updateSize(e){const t=this._dragStartY-e,i=t/window.innerHeight*100;let a=this._initialSize+i;if(a=Math.max(10,Math.min(90,a)),a<20&&t<0)return this._endDrag(),void this.closeSheet();this._dialogViewportHeight=a}_endDrag(){this._dragging&&(this._dragging=!1,document.body.style.removeProperty("cursor"))}constructor(...e){super(...e),this._dragging=!1,this._dragStartY=0,this._initialSize=0,this._dialogMaxViewpointHeight=70,this._dialogMinViewpointHeight=55,this._handleMouseDown=e=>{this._startDrag(e.clientY)},this._handleTouchStart=e=>{e.preventDefault(),this._startDrag(e.touches[0].clientY)},this._handleMouseMove=e=>{this._dragging&&this._updateSize(e.clientY)},this._handleTouchMove=e=>{this._dragging&&(e.preventDefault(),this._updateSize(e.touches[0].clientY))},this._handleMouseUp=()=>{this._endDrag()},this._handleTouchEnd=()=>{this._endDrag()}}}l.styles=o.AH`.handle-wrapper{position:absolute;top:0;width:100%;padding-bottom:2px;display:flex;justify-content:center;align-items:center;cursor:grab;touch-action:none}.handle-wrapper .handle{height:20px;width:200px;display:flex;justify-content:center;align-items:center;z-index:7;padding-bottom:76px}.handle-wrapper .handle::after{content:"";border-radius:8px;height:4px;background:var(--divider-color,#e0e0e0);width:80px}.handle-wrapper .handle:active::after{cursor:grabbing}dialog{height:var(--height,auto);max-height:var(--max-height,70vh);max-height:var(--max-height,70dvh);min-height:var(--min-height,30vh);min-height:var(--min-height,30dvh);background-color:var(--ha-bottom-sheet-surface-background,var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff)));display:flex;flex-direction:column;top:0;inset-inline-start:0;position:fixed;width:calc(100% - 4px - var(--safe-area-inset-left) - var(--safe-area-inset-right));max-width:100%;border:none;box-shadow:var(--wa-shadow-l);padding:0;margin:0;top:auto;inset-inline-end:auto;bottom:0;inset-inline-start:0;box-shadow:0px -8px 16px rgba(0,0,0,.2);border-top-left-radius:var(--ha-bottom-sheet-border-radius,var(--ha-dialog-border-radius,var(--ha-border-radius-2xl)));border-top-right-radius:var(--ha-bottom-sheet-border-radius,var(--ha-dialog-border-radius,var(--ha-border-radius-2xl)));transform:translateY(100%);transition:transform ${r.r}ms ease;border-top-width:var(--ha-bottom-sheet-border-width);border-right-width:var(--ha-bottom-sheet-border-width);border-left-width:var(--ha-bottom-sheet-border-width);border-bottom-width:0;border-style:var(--ha-bottom-sheet-border-style);border-color:var(--ha-bottom-sheet-border-color);margin-left:var(--safe-area-inset-left);margin-right:var(--safe-area-inset-right)}dialog.show{transform:translateY(0)}`,(0,a.__decorate)([(0,s.P)("dialog")],l.prototype,"_dialog",void 0),(0,a.__decorate)([(0,s.wk)()],l.prototype,"_dialogMaxViewpointHeight",void 0),(0,a.__decorate)([(0,s.wk)()],l.prototype,"_dialogMinViewpointHeight",void 0),(0,a.__decorate)([(0,s.wk)()],l.prototype,"_dialogViewportHeight",void 0),l=(0,a.__decorate)([(0,s.EM)("ha-resizable-bottom-sheet")],l),t()}catch(e){t(e)}})},73634:function(e,t,i){var a=i(69868),o=i(36363),s=i(20150),n=i(84922),r=i(22019);class d extends o.g{async show(){super.show(),this.menu.hasOverflow=!1}}d.styles=[s.R,n.AH`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-secondary-container:rgba(
          var(--rgb-primary-color),
          0.15
        );--md-sys-color-on-secondary-container:var(--text-primary-color);--mdc-icon-size:16px;--md-sys-color-on-primary-container:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color)}`],d=(0,a.__decorate)([(0,r.EM)("ha-sub-menu")],d)},27161:function(e,t,i){i.d(t,{Bs:()=>n,Jp:()=>o,Tk:()=>s,Xg:()=>a,oz:()=>d,x1:()=>r});const a=(e,t)=>e.callWS({type:"blueprint/list",domain:t}),o=(e,t)=>e.callWS({type:"blueprint/import",url:t}),s=(e,t,i,a,o,s)=>e.callWS({type:"blueprint/save",domain:t,path:i,yaml:a,source_url:o,allow_override:s}),n=(e,t,i)=>e.callWS({type:"blueprint/delete",domain:t,path:i}),r=e=>{const t=e.metadata.source_url;return t?t.includes("github.com/home-assistant")?"homeassistant":"community":"local"},d=(e,t,i,a)=>e.callWS({type:"blueprint/substitute",domain:t,path:i,input:a})},48727:function(e,t,i){i.d(t,{D:()=>o,i:()=>a});i(65315),i(22416),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030);const a=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:i.items instanceof Set?Array.from(i.items):i.items}}),t},o=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:Array.isArray(i.items)?new Set(i.items):i.items}}),t}},13725:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{$O:()=>v,a$:()=>y,cj:()=>p,dG:()=>_,gM:()=>b,gd:()=>g,rc:()=>f});var o=i(23800),s=i(88341),n=i(12275),r=i(8795),d=i(14523),l=i(69006),c=e([l]);l=(c.then?(await c)():c)[0];const h="ui.components.logbook.messages",p=["counter","proximity"],u={triggered_by_numeric_state_of:"numeric state of",triggered_by_state_of:"state of",triggered_by_event:"event",triggered_by_time_pattern:"time pattern",triggered_by_time:"time",triggered_by_homeassistant_stopping:"Home Assistant stopping",triggered_by_homeassistant_starting:"Home Assistant starting"},g=async(e,t,i)=>m(e,t,void 0,void 0,i),m=(e,t,i,a,o,s)=>{if((a||s)&&(!a||0===a.length)&&(!s||0===s.length))return Promise.resolve([]);const n={type:"logbook/get_events",start_time:t};return i&&(n.end_time=i),a?.length&&(n.entity_ids=a),s?.length&&(n.device_ids=s),o&&(n.context_id=o),e.callWS(n)},b=(e,t,i,a,o,s,n)=>{if((s||n)&&(!s||0===s.length)&&(!n||0===n.length))return Promise.reject("No entities or devices");const r={type:"logbook/event_stream",start_time:i,end_time:a};return s?.length&&(r.entity_ids=s),n?.length&&(r.device_ids=n),e.connection.subscribeMessage(e=>t(e,o),r)},_=(e,t)=>({entity_id:e.entity_id,state:t,attributes:{device_class:e?.attributes.device_class,source_type:e?.attributes.source_type,has_date:e?.attributes.has_date,has_time:e?.attributes.has_time,entity_picture_local:o.oL.has((0,s.m)(e.entity_id))?void 0:e?.attributes.entity_picture_local,entity_picture:o.oL.has((0,s.m)(e.entity_id))?void 0:e?.attributes.entity_picture}}),v=(e,t)=>{for(const i of Object.keys(u)){const a=u[i];if(t.startsWith(a))return t.replace(a,`${e(`ui.components.logbook.${i}`)}`)}return t},y=(e,t,i,a,s)=>{switch(s){case"device_tracker":case"person":return"not_home"===i?t(`${h}.was_away`):"home"===i?t(`${h}.was_at_home`):t(`${h}.was_at_state`,{state:i});case"sun":return t("above_horizon"===i?`${h}.rose`:`${h}.set`);case"binary_sensor":{const s=i===o.Or,n=i===o.qg,d=a.attributes.device_class;if(d&&(s||n))return t(`${h}.${s?"detected_device_classes":"cleared_device_classes"}.${d}`,{device_class:(0,r.i)(t(`component.binary_sensor.entity_component.${d}.name`)||d,e.language)})||t(`${h}.${s?"detected_device_class":"cleared_device_class"}`,{device_class:(0,r.i)(t(`component.binary_sensor.entity_component.${d}.name`)||d,e.language)});break}case"cover":switch(i){case"open":return t(`${h}.was_opened`);case"opening":return t(`${h}.is_opening`);case"closing":return t(`${h}.is_closing`);case"closed":return t(`${h}.was_closed`)}break;case"event":return t(`${h}.detected_event_no_type`);case"lock":switch(i){case"unlocked":return t(`${h}.was_unlocked`);case"locking":return t(`${h}.is_locking`);case"unlocking":return t(`${h}.is_unlocking`);case"opening":return t(`${h}.is_opening`);case"open":return t(`${h}.is_opened`);case"locked":return t(`${h}.was_locked`);case"jammed":return t(`${h}.is_jammed`)}}return i===o.Or?t(`${h}.turned_on`):i===o.qg?t(`${h}.turned_off`):i===d.HV?t(`${h}.became_unknown`):i===d.Hh?t(`${h}.became_unavailable`):e.localize(`${h}.changed_to_state`,{state:a?e.formatEntityState(a,i):i})},f=(e,t=[])=>{const i=(0,n.t)(e);return!(p.includes(i)||"sensor"===i&&(0,l.Fp)(i,e,void 0,t))};a()}catch(e){a(e)}})},70053:function(e,t,i){i.d(t,{W:()=>a});const a=["condition","action"]},7595:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{CT:()=>p,M1:()=>v,aK:()=>h,gs:()=>m,oF:()=>b,pC:()=>c,pk:()=>g,sw:()=>f,t0:()=>y});var o=i(26946),s=i(88341),n=i(76085),r=i(13725),d=i(69006),l=e([r,d]);[r,d]=l.then?(await l)():l;const c=["camera","configurator"],h=["scene","automation"],p=["script"],u=["alarm_control_panel","cover","climate","conversation","fan","humidifier","input_boolean","light","lock","siren","script","switch","valve","water_heater","weather","media_player"],g=["update"],m=["alarm_control_panel","automation","camera","climate","configurator","conversation","counter","cover","date","datetime","fan","group","humidifier","image","input_boolean","input_datetime","lawn_mower","light","lock","media_player","person","remote","script","scene","siren","sun","switch","time","timer","update","vacuum","valve","water_heater","weather"],b=["input_number","input_select","input_text","number","scene","select","text","update","event"],_=["camera","configurator"],v=(e,t)=>(0,o.x)(e,"history")&&!_.includes((0,s.m)(t)),y=(e,t,i=[])=>{if(!(0,o.x)(e,"logbook"))return!1;const a=e.states[t];if(!a)return!1;const n=(0,s.m)(t);return!(r.cj.includes(n)||"sensor"===n&&(0,d.Fp)(n,a,void 0,i)||_.includes(n))},f=e=>{const t=(0,s.m)(e.entity_id);if("group"===t){const t=(0,n.z)(e);return null!=t&&"group"!==t&&u.includes(t)}return u.includes(t)};a()}catch(e){a(e)}})},31330:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{S5:()=>c,bG:()=>d,mE:()=>l});var o=i(12275),s=i(7595),n=e([s]);s=(n.then?(await n)():n)[0];const r={alarm_control_panel:()=>i.e("92461").then(i.bind(i,99708)),automation:()=>i.e("3064").then(i.bind(i,55627)),camera:()=>i.e("47860").then(i.bind(i,96735)),climate:()=>Promise.all([i.e("89088"),i.e("98910")]).then(i.bind(i,75213)),configurator:()=>Promise.all([i.e("42153"),i.e("43942"),i.e("8338")]).then(i.bind(i,93833)),conversation:()=>Promise.all([i.e("42153"),i.e("46839"),i.e("11628")]).then(i.bind(i,2727)),counter:()=>i.e("4143").then(i.bind(i,53266)),cover:()=>i.e("29730").then(i.bind(i,25977)),date:()=>Promise.all([i.e("42153"),i.e("89088"),i.e("99889")]).then(i.bind(i,7560)),datetime:()=>Promise.all([i.e("42153"),i.e("89088"),i.e("39319"),i.e("27091"),i.e("52658")]).then(i.bind(i,56041)),fan:()=>i.e("9936").then(i.bind(i,76083)),group:()=>Promise.all([i.e("42153"),i.e("89088"),i.e("53255"),i.e("14038")]).then(i.bind(i,16885)),humidifier:()=>i.e("72049").then(i.bind(i,81736)),image:()=>i.e("82920").then(i.bind(i,30427)),input_boolean:()=>i.e("10810").then(i.bind(i,29825)),input_datetime:()=>Promise.all([i.e("42153"),i.e("89088"),i.e("99305")]).then(i.bind(i,79536)),lawn_mower:()=>i.e("16100").then(i.bind(i,16495)),light:()=>i.e("76227").then(i.bind(i,48385)),lock:()=>i.e("5168").then(i.bind(i,59315)),media_player:()=>Promise.all([i.e("89088"),i.e("56216"),i.e("67746"),i.e("86865")]).then(i.bind(i,6440)),person:()=>Promise.all([i.e("15424"),i.e("14280"),i.e("44610")]).then(i.bind(i,70265)),remote:()=>Promise.all([i.e("89088"),i.e("56591")]).then(i.bind(i,84786)),script:()=>Promise.all([i.e("42153"),i.e("87110"),i.e("30199"),i.e("43942"),i.e("80746"),i.e("78589"),i.e("395"),i.e("84622")]).then(i.bind(i,56747)),siren:()=>i.e("41396").then(i.bind(i,48863)),sun:()=>i.e("49081").then(i.bind(i,28160)),switch:()=>i.e("12969").then(i.bind(i,55312)),time:()=>Promise.all([i.e("42153"),i.e("89088"),i.e("69631"),i.e("91246")]).then(i.bind(i,85501)),timer:()=>i.e("75824").then(i.bind(i,76243)),update:()=>Promise.all([i.e("43942"),i.e("23586"),i.e("26306"),i.e("97248"),i.e("88446")]).then(i.bind(i,70733)),vacuum:()=>Promise.all([i.e("89088"),i.e("99296")]).then(i.bind(i,51075)),valve:()=>i.e("93689").then(i.bind(i,44800)),water_heater:()=>i.e("66394").then(i.bind(i,85665)),weather:()=>Promise.all([i.e("40909"),i.e("66351")]).then(i.bind(i,24978))},d=e=>{const t=(0,o.t)(e);return l(t)},l=e=>s.gs.includes(e)?e:s.oF.includes(e)?"hidden":"default",c=e=>{e in r&&r[e]()};a()}catch(e){a(e)}})},81061:function(e,t,i){i.d(t,{_:()=>o});var a=i(60252);const o=e=>class extends e{_removeListeners(){window.removeEventListener("click",this._handleClick,!0),window.removeEventListener("beforeunload",this._handleUnload)}willUpdate(e){super.willUpdate(e),this.isDirty?(window.addEventListener("click",this._handleClick,!0),window.addEventListener("beforeunload",this._handleUnload)):this._removeListeners()}disconnectedCallback(){super.disconnectedCallback(),this._removeListeners()}get isDirty(){return!1}async promptDiscardChanges(){return!0}constructor(...e){super(...e),this._handleClick=async e=>{const t=e.composedPath()[0];if(!(0,a.d)(e))return;if(await this.promptDiscardChanges()&&(this._removeListeners(),t)){const i=new MouseEvent(e.type,e);t.dispatchEvent(i)}},this._handleUnload=e=>e.preventDefault()}}},22029:function(e,t,i){i.d(t,{w:()=>a});i(99342);const a=e=>class extends e{pushToUndo(e){this._undoStack.length>=this._undoStackLimit&&this._undoStack.shift(),this._undoStack.push({...e}),this._redoStack=[]}undo(){const e=this.currentConfig;if(0===this._undoStack.length||!e)return;this._redoStack.push({...e});const t=this._undoStack.pop();this.applyUndoRedo(t)}redo(){const e=this.currentConfig;if(0===this._redoStack.length||!e)return;this._undoStack.push({...e});const t=this._redoStack.pop();this.applyUndoRedo(t)}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get currentConfig(){}applyUndoRedo(e){throw new Error("applyUndoRedo not implemented")}constructor(...e){super(...e),this._undoStack=[],this._redoStack=[],this._undoStackLimit=75}}},38525:function(e,t,i){i.d(t,{E:()=>o,J:()=>s});var a=i(44017);const o=()=>Promise.all([i.e("42153"),i.e("15265"),i.e("3245"),i.e("87110"),i.e("30199"),i.e("5255"),i.e("79584"),i.e("36427"),i.e("89137"),i.e("78589"),i.e("15088"),i.e("30521")]).then(i.bind(i,34865)),s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:o,dialogParams:t})}},8827:function(e,t,i){i.d(t,{e:()=>s});var a=i(44017);const o=()=>Promise.all([i.e("27923"),i.e("36928")]).then(i.bind(i,53271)),s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"ha-dialog-automation-mode",dialogImport:o,dialogParams:t})}},47503:function(e,t,i){i.d(t,{_:()=>s});var a=i(44017);const o=()=>i.e("84344").then(i.bind(i,50571)),s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"ha-dialog-automation-save",dialogImport:o,dialogParams:t})}},14466:function(e,t,i){i.a(e,async function(e,t){try{var a=i(69868),o=i(84922),s=i(22019),n=i(44017),r=i(54e3),d=i(86133),l=i(26539),c=i(68514),h=i(43924),p=i(97457),u=(i(67147),i(92560)),g=i(25552),m=i(75472),b=e([d,h,p,u,g,m]);[d,h,p,u,g,m]=b.then?(await b)():b;class _ extends o.WF{disconnectedCallback(){super.disconnectedCallback(),this._unregisterResizeHandlers()}_renderContent(){const e=this._getType();return"trigger"===e?o.qy` <ha-automation-sidebar-trigger class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-trigger> `:"condition"===e?o.qy` <ha-automation-sidebar-condition class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-condition> `:"action"===e?o.qy` <ha-automation-sidebar-action class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-action> `:"option"===e?o.qy` <ha-automation-sidebar-option class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-option> `:"script-field-selector"===e?o.qy` <ha-automation-sidebar-script-field-selector class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-script-field-selector> `:"script-field"===e?o.qy` <ha-automation-sidebar-script-field class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-script-field> `:o.s6}render(){return this.config?this.narrow?o.qy` <ha-resizable-bottom-sheet @bottom-sheet-closed="${this._closeSidebar}"> ${this._renderContent()} </ha-resizable-bottom-sheet> `:o.qy` <div class="handle ${this._resizing?"resizing":""}" @mousedown="${this._handleMouseDown}" @touchstart="${this._handleMouseDown}"> <div class="indicator ${this._resizing?"":"hidden"}"></div> </div> ${this._renderContent()} `:o.s6}_getType(){return this.config?.config&&((0,l.fo)(this.config?.config)||(0,c.H4)(this.config?.config))?"trigger":(0,l.G3)(this.config?.config)?"condition":this.config?.config&&(0,l.KH)(this.config?.config)?this.config?.config.selector?"script-field-selector":"script-field":this.config&&!this.config?.config?"option":this.config?.config.action?"action":void 0}triggerCloseSidebar(e){e?.stopPropagation(),this.narrow?this._bottomSheetElement?.closeSheet():this._closeSidebar()}_closeSidebar(){this.config?.close(!0)}_startResizing(e){document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._endResizing),document.addEventListener("touchmove",this._handleMouseMove,{passive:!1}),document.addEventListener("touchend",this._endResizing),document.addEventListener("touchcancel",this._endResizing),this._resizing=!0,this._resizeStartX=e}_updateSize(e){let t=this._resizeStartX-e;(0,r.qC)(this.hass)&&(t=-t),requestAnimationFrame(()=>{(0,n.r)(this,"sidebar-resized",{deltaInPx:t})})}_unregisterResizeHandlers(){document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._endResizing),document.removeEventListener("touchmove",this._handleMouseMove),document.removeEventListener("touchend",this._endResizing),document.removeEventListener("touchcancel",this._endResizing)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.narrow=!1,this._yamlMode=!1,this._resizing=!1,this._resizeStartX=0,this._toggleYamlMode=()=>{this.config?.toggleYamlMode()},this._handleMouseDown=e=>{e.preventDefault(),this._startResizing(e.touches?.length?e.touches[0].clientX:e.clientX)},this._handleMouseMove=e=>{this._updateSize(e.touches?.length?e.touches[0].clientX:e.clientX)},this._endResizing=()=>{this._unregisterResizeHandlers(),this._resizing=!1,document.body.style.removeProperty("cursor"),(0,n.r)(this,"sidebar-resizing-stopped")}}}_.styles=o.AH`:host{z-index:6;outline:0;height:calc(100% - var(--safe-area-inset-top,0px));--ha-card-border-radius:var(
        --ha-dialog-border-radius,
        var(--ha-border-radius-2xl)
      );border-radius:var(--ha-card-border-radius);--ha-bottom-sheet-border-width:2px;--ha-bottom-sheet-border-style:solid;--ha-bottom-sheet-border-color:var(--primary-color);margin-top:var(--safe-area-inset-top)}@media all and (max-width:870px){.sidebar-content{max-height:100%}}.handle{position:absolute;margin-inline-start:-11px;height:calc(100% - (2 * var(--ha-card-border-radius)));width:24px;z-index:7;cursor:ew-resize;display:flex;align-items:center;justify-content:center;padding:var(--ha-card-border-radius) 0}.handle.resizing{cursor:grabbing}.handle .indicator{background-color:var(--primary-color);height:100%;width:4px;border-radius:var(--ha-border-radius-pill);transform:scale3d(1,1,1);opacity:1;transition:transform 180ms ease-in-out,opacity 180ms ease-in-out}.handle .indicator.hidden{transform:scale3d(0,1,1);opacity:0}`,(0,a.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"config",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"wide"})],_.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],_.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],_.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"sidebar-key"})],_.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.wk)()],_.prototype,"_yamlMode",void 0),(0,a.__decorate)([(0,s.wk)()],_.prototype,"_resizing",void 0),(0,a.__decorate)([(0,s.P)("ha-resizable-bottom-sheet")],_.prototype,"_bottomSheetElement",void 0),_=(0,a.__decorate)([(0,s.EM)("ha-automation-sidebar")],_),t()}catch(e){t(e)}})},46156:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{Q:()=>S});i(99342),i(65315),i(837),i(22416);var o=i(69868),s=i(90227),n=i(84922),r=i(22019),d=i(75907),l=i(36207),c=i(11111),h=i(20051),p=i(61246),u=i(44017),g=i(15676),m=i(94372),b=i(17372),_=(i(10547),i(9058),i(56657),i(26539)),v=i(42699),y=i(72144),f=i(91197),$=i(8567),w=i(4885),M=i(14466),A=i(85173),C=i(954),x=i(26533),H=e([b,$,w,M,x]);[b,$,w,M,x]=H.then?(await H)():H;const k="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",V="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z",L=(0,l.Ik)({alias:(0,l.lq)((0,l.Yj)()),description:(0,l.lq)((0,l.Yj)()),triggers:(0,l.lq)((0,l.YO)((0,l.bz)())),conditions:(0,l.lq)((0,l.YO)((0,l.bz)())),actions:(0,l.lq)((0,l.YO)((0,l.bz)())),mode:(0,l.lq)((0,l.Yj)()),max_exceeded:(0,l.lq)((0,l.Yj)()),id:(0,l.lq)((0,l.Yj)())}),z=(0,l.KC)([(0,l.kp)(L,(0,l.Ik)({triggers:(0,l.YO)((0,l.bz)())})),(0,l.kp)(L,(0,l.Ik)({conditions:(0,l.YO)((0,l.bz)())})),(0,l.kp)(L,(0,l.Ik)({actions:(0,l.YO)((0,l.bz)())}))]),S=500;class Z extends n.WF{connectedCallback(){super.connectedCallback(),window.addEventListener("paste",this._handlePaste)}disconnectedCallback(){window.removeEventListener("paste",this._handlePaste),super.disconnectedCallback()}_renderContent(){return n.qy` ${this.config.description?n.qy`<ha-markdown class="description" breaks .content="${this.config.description}"></ha-markdown>`:n.s6} <div class="header"> <h2 id="triggers-heading" class="name"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.header")} </h2> <a href="${(0,y.o)(this.hass,"/docs/automation/trigger/")}" target="_blank" rel="noreferrer"> <ha-icon-button .path="${V}" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.learn_more")}"></ha-icon-button> </a> </div> ${(0,c.e)(this.config.triggers)?.length?n.s6:n.qy`<p> ${this.hass.localize("ui.panel.config.automation.editor.triggers.description")} </p>`} <ha-automation-trigger role="region" aria-labelledby="triggers-heading" .triggers="${this.config.triggers||[]}" .highlightedTriggers="${this._pastedConfig?.triggers}" @value-changed="${this._triggerChanged}" .hass="${this.hass}" .disabled="${this.disabled||this.saving}" .narrow="${this.narrow}" @open-sidebar="${this._openSidebar}" @request-close-sidebar="${this.triggerCloseSidebar}" @close-sidebar="${this._handleCloseSidebar}" root sidebar></ha-automation-trigger> <div class="header"> <h2 id="conditions-heading" class="name"> ${this.hass.localize("ui.panel.config.automation.editor.conditions.header")} <span class="small">(${this.hass.localize("ui.common.optional")})</span> </h2> <a href="${(0,y.o)(this.hass,"/docs/automation/condition/")}" target="_blank" rel="noreferrer"> <ha-icon-button .path="${V}" .label="${this.hass.localize("ui.panel.config.automation.editor.conditions.learn_more")}"></ha-icon-button> </a> </div> ${(0,c.e)(this.config.conditions)?.length?n.s6:n.qy`<p> ${this.hass.localize("ui.panel.config.automation.editor.conditions.description",{user:this.hass.user?.name||"Alice"})} </p>`} <ha-automation-condition role="region" aria-labelledby="conditions-heading" .conditions="${this.config.conditions||[]}" .highlightedConditions="${this._pastedConfig?.conditions}" @value-changed="${this._conditionChanged}" .hass="${this.hass}" .disabled="${this.disabled||this.saving}" .narrow="${this.narrow}" @open-sidebar="${this._openSidebar}" @request-close-sidebar="${this.triggerCloseSidebar}" @close-sidebar="${this._handleCloseSidebar}" root sidebar></ha-automation-condition> <div class="header"> <h2 id="actions-heading" class="name"> ${this.hass.localize("ui.panel.config.automation.editor.actions.header")} </h2> <div> <a href="${(0,y.o)(this.hass,"/docs/automation/action/")}" target="_blank" rel="noreferrer"> <ha-icon-button .path="${V}" .label="${this.hass.localize("ui.panel.config.automation.editor.actions.learn_more")}"></ha-icon-button> </a> </div> </div> ${(0,c.e)(this.config.actions)?.length?n.s6:n.qy`<p> ${this.hass.localize("ui.panel.config.automation.editor.actions.description")} </p>`} <ha-automation-action role="region" aria-labelledby="actions-heading" .actions="${this.config.actions||[]}" .highlightedActions="${this._pastedConfig?.actions}" @value-changed="${this._actionChanged}" @open-sidebar="${this._openSidebar}" @request-close-sidebar="${this.triggerCloseSidebar}" @close-sidebar="${this._handleCloseSidebar}" .hass="${this.hass}" .narrow="${this.narrow}" .disabled="${this.disabled||this.saving}" root sidebar></ha-automation-action> `}render(){return n.qy` <div class="${(0,d.H)({"has-sidebar":this._sidebarConfig&&!this.narrow})}"> <div class="content-wrapper"> <div class="content ${this._sidebarConfig&&this.narrow?"has-bottom-sheet":""}"> <slot name="alerts"></slot> ${this._renderContent()} </div> <div class="fab-positioner"> <ha-fab slot="fab" class="${this.dirty?"dirty":""}" .label="${this.hass.localize("ui.common.save")}" .disabled="${this.saving}" extended @click="${this._saveAutomation}"> <ha-svg-icon slot="icon" .path="${k}"></ha-svg-icon> </ha-fab> </div> </div> <div class="sidebar-positioner"> <ha-automation-sidebar tabindex="-1" class="${(0,d.H)({hidden:!this._sidebarConfig})}" .isWide="${this.isWide}" .hass="${this.hass}" .narrow="${this.narrow}" .config="${this._sidebarConfig}" .disabled="${this.disabled}" .sidebarKey="${this._sidebarKey}" @value-changed="${this._sidebarConfigChanged}" @sidebar-resized="${this._resizeSidebar}" @sidebar-resizing-stopped="${this._stopResizeSidebar}"></ha-automation-sidebar> </div> </div> `}firstUpdated(e){super.firstUpdated(e),this.style.setProperty("--sidebar-dynamic-width",`${this._sidebarWidthPx}px`);"1"===(0,m.p9)("expanded")&&(this._clearParam("expanded"),this.expandAll())}_clearParam(e){window.history.replaceState(null,"",(0,g.Z)((0,m.s8)(e)))}async _openSidebar(e){this._sidebarConfig?.close?.(),this._sidebarConfig=e.detail,this._sidebarKey=JSON.stringify(this._sidebarConfig),await(this._sidebarElement?.updateComplete),this._sidebarElement?.focus()}_sidebarConfigChanged(e){e.stopPropagation(),this._sidebarConfig&&(this._sidebarConfig={...this._sidebarConfig,...e.detail.value})}triggerCloseSidebar(){if(this._sidebarConfig){if(this._sidebarElement)return void this._sidebarElement.triggerCloseSidebar();this._sidebarConfig?.close()}}_handleCloseSidebar(){this._sidebarConfig=void 0}_triggerChanged(e){e.stopPropagation(),this.resetPastedConfig(),(0,u.r)(this,"value-changed",{value:{...this.config,triggers:e.detail.value}})}_conditionChanged(e){e.stopPropagation(),this.resetPastedConfig(),(0,u.r)(this,"value-changed",{value:{...this.config,conditions:e.detail.value}})}_actionChanged(e){e.stopPropagation(),this.resetPastedConfig(),(0,u.r)(this,"value-changed",{value:{...this.config,actions:e.detail.value}})}_saveAutomation(){this.triggerCloseSidebar(),(0,u.r)(this,"save-automation")}_appendToExistingConfig(e){this._pastedConfig=e;const t={...this.config};t&&("triggers"in e&&(t.triggers=(0,c.e)(t.triggers||[]).concat((0,c.e)(e.triggers))),"conditions"in e&&(t.conditions=(0,c.e)(t.conditions||[]).concat((0,c.e)(e.conditions))),"actions"in e&&(t.actions=(0,c.e)(t.actions||[]).concat((0,c.e)(e.actions))),this._showPastedToastWithUndo(),(0,u.r)(this,"value-changed",{value:{...t}}))}_replaceExistingConfig(e){this._pastedConfig=e,this._showPastedToastWithUndo(),(0,u.r)(this,"value-changed",{value:{...e}})}_showPastedToastWithUndo(){(0,f.P)(this,{message:this.hass.localize("ui.panel.config.automation.editor.paste_toast_message"),duration:4e3,action:{text:this.hass.localize("ui.common.undo"),action:()=>{(0,u.r)(this,"undo-paste"),this._pastedConfig=void 0}}})}resetPastedConfig(){this._pastedConfig=void 0,(0,f.P)(this,{message:"",duration:0})}expandAll(){this._collapsableElements?.forEach(e=>{e.expandAll()})}collapseAll(){this._collapsableElements?.forEach(e=>{e.collapseAll()})}_tryInsertAfterSelected(e){return!(!this._sidebarConfig||!("insertAfter"in this._sidebarConfig))&&this._sidebarConfig.insertAfter(e)}copySelectedRow(){this._sidebarConfig&&"copy"in this._sidebarConfig&&this._sidebarConfig.copy()}cutSelectedRow(){this._sidebarConfig&&"cut"in this._sidebarConfig&&this._sidebarConfig.cut()}deleteSelectedRow(){this._sidebarConfig&&"delete"in this._sidebarConfig&&this._sidebarConfig.delete()}_resizeSidebar(e){e.stopPropagation();const t=e.detail.deltaInPx;this._prevSidebarWidthPx||(this._prevSidebarWidthPx=this._sidebarElement?.clientWidth||S);const i=t+this._prevSidebarWidthPx;this._sidebarWidthPx=i,this.style.setProperty("--sidebar-dynamic-width",`${this._sidebarWidthPx}px`)}_stopResizeSidebar(e){e.stopPropagation(),this._prevSidebarWidthPx=void 0}static get styles(){return[C.T_,C.qK,n.AH`p{margin-top:0}.header{margin-top:16px;display:flex;align-items:center}.header:first-child{margin-top:-16px}.header .name{font-weight:var(--ha-font-weight-normal);flex:1;margin-bottom:8px}.header .small{font-size:small;font-weight:var(--ha-font-weight-normal);line-height:0}.description{margin-top:16px}`]}constructor(...e){super(...e),this.isWide=!1,this.narrow=!1,this.disabled=!1,this.saving=!1,this.dirty=!1,this._sidebarWidthPx=S,this._handlePaste=async e=>{if(!(0,p.u)(e.composedPath()))return;const t=e.clipboardData?.getData("text");if(!t)return;let i;try{i=(0,s.load)(t)}catch(e){return void(0,f.P)(this,{message:this.hass.localize("ui.panel.config.automation.editor.paste_invalid_yaml"),duration:4e3,dismissable:!0})}if(!i||"object"!=typeof i)return;let a,o=i;if("automation"in o&&(o=o.automation,Array.isArray(o)&&(o=o[0])),Array.isArray(o))if(1===o.length)o=o[0];else{const e={triggers:[],conditions:[],actions:[]};let t=!1;o.forEach(i=>{(0,_.fo)(i)&&(t=!0,e.triggers.push(i)),(0,_.G3)(i)&&(t=!0,e.conditions.push(i)),"unknown"!==(0,v.pq)(i)&&(t=!0,e.actions.push(i))}),t&&(o=e)}(0,_.fo)(o)&&(o={triggers:[o]}),(0,_.G3)(o)&&(o={conditions:[o]}),"unknown"!==(0,v.pq)(o)&&(o={actions:[o]});try{a=(0,_.HB)(o)}catch(e){return}try{(0,l.vA)(a,z)}catch(e){return void(0,f.P)(this,{message:this.hass.localize("ui.panel.config.automation.editor.paste_invalid_config"),duration:4e3,dismissable:!0})}if(a){e.preventDefault();const t=Object.keys(a).filter(e=>(0,c.e)(a[e]).length);if(1===t.length&&["triggers","conditions","actions"].includes(t[0])&&this._tryInsertAfterSelected(a[t[0]]))return void this._showPastedToastWithUndo();if(this.dirty||(0,c.e)(this.config.triggers)?.length||(0,c.e)(this.config.conditions)?.length||(0,c.e)(this.config.actions)?.length){if(!await new Promise(e=>{(0,A.Z)(this,{domain:"automation",pastedConfig:a,onClose:()=>e(!1),onAppend:()=>{this._appendToExistingConfig(a),e(!1)},onReplace:()=>e(!0)})}))return}this._replaceExistingConfig(a)}}}}(0,o.__decorate)([(0,r.MZ)({attribute:!1})],Z.prototype,"hass",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:"is-wide",type:Boolean})],Z.prototype,"isWide",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],Z.prototype,"narrow",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],Z.prototype,"disabled",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],Z.prototype,"saving",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:!1})],Z.prototype,"config",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:!1})],Z.prototype,"stateObj",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:!1})],Z.prototype,"dirty",void 0),(0,o.__decorate)([(0,r.wk)()],Z.prototype,"_pastedConfig",void 0),(0,o.__decorate)([(0,r.wk)()],Z.prototype,"_sidebarConfig",void 0),(0,o.__decorate)([(0,r.wk)()],Z.prototype,"_sidebarKey",void 0),(0,o.__decorate)([(0,h.I)({key:"automation-sidebar-width",state:!1,subscribe:!1})],Z.prototype,"_sidebarWidthPx",void 0),(0,o.__decorate)([(0,r.P)("ha-automation-sidebar")],Z.prototype,"_sidebarElement",void 0),(0,o.__decorate)([(0,r.YG)("ha-automation-action, ha-automation-condition")],Z.prototype,"_collapsableElements",void 0),Z=(0,o.__decorate)([(0,r.EM)("manual-automation-editor")],Z),a()}catch(e){a(e)}})},85173:function(e,t,i){i.d(t,{Z:()=>s});var a=i(44017);const o=()=>i.e("8320").then(i.bind(i,8931)),s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"ha-dialog-paste-replace",dialogImport:o,dialogParams:t})}},18885:function(e,t,i){i.d(t,{l:()=>s});var a=i(44017);const o=()=>Promise.all([i.e("3245"),i.e("10860")]).then(i.bind(i,21607)),s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"ha-dialog-new-automation",dialogImport:o,dialogParams:t})}},43924:function(e,t,i){i.a(e,async function(e,t){try{var a=i(69868),o=i(84922),s=i(22019),n=i(7622),r=i(44017),d=i(36768),l=(i(28565),i(92409),i(59054)),c=i(40980),h=i(55438),p=i(34353),u=i(954),g=i(65719),m=(i(41336),e([g,h,p]));[g,h,p]=m.then?(await m)():m;const b="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",_="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",v="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",y="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",f="M8,5.14V19.14L19,12.14L8,5.14Z",$="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z",w="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z",M="M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z",A="M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",C="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9";class x extends o.WF{willUpdate(e){e.has("config")&&(this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config.action)))}render(){const e=this.config.config.action,t="enabled"in e&&!1===e.enabled,i=(0,h.MS)(e),a="repeat"!==i?i:`repeat_${(0,p.m)(e.repeat)}`,s=l.L_.includes(a||""),r=this.hass.localize("ui.panel.config.automation.editor.actions.action"),d=this.hass.localize(`ui.panel.config.automation.editor.actions.type.${a}.label`)||a,u=s?this.hass.localize(`ui.panel.config.automation.editor.actions.type.${a}.description.picker`):"";return o.qy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${d}</span> <span slot="subtitle">${r}${t?o.qy` (${this.hass.localize("ui.panel.config.automation.editor.actions.disabled")})`:""}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.run}"> <ha-svg-icon slot="start" .path="${f}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.run")} <span class="shortcut-placeholder ${c.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.rename}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${A}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.rename")} <span class="shortcut-placeholder ${c.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.duplicate}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${M}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")} <span class="shortcut-placeholder ${c.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.copy}"> <ha-svg-icon slot="start" .path="${_}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.copy")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${c.c?o.qy`<ha-svg-icon slot="start" .path="${b}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>C</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.cut}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${v}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.cut")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${c.c?o.qy`<ha-svg-icon slot="start" .path="${b}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>X</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!this.config.uiSupported||!!this._warnings}"> <ha-svg-icon slot="start" .path="${w}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${c.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.disable}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${t?$:C}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions."+(t?"enable":"disable"))} <span class="shortcut-placeholder ${c.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${y}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${c.c?o.qy`<ha-svg-icon slot="start" .path="${b}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${u&&!this.yamlMode?o.qy`<div class="description">${u}</div>`:(0,n.D)(this.sidebarKey,o.qy`<ha-automation-action-editor class="sidebar-editor" .hass="${this.hass}" .action="${e}" .yamlMode="${this.yamlMode}" .uiSupported="${this.config.uiSupported}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}" sidebar narrow .disabled="${this.disabled}" @ui-mode-not-available="${this._handleUiModeNotAvailable}"></ha-automation-action-editor>`)} </ha-automation-sidebar-card>`}_handleUiModeNotAvailable(e){this._warnings=(0,d._)(this.hass,e.detail).warnings,this.yamlMode||(this.yamlMode=!0)}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value),this.config&&(0,r.r)(this,"value-changed",{value:{...this.config,config:{action:e.detail.value}}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._toggleYamlMode=()=>{(0,r.r)(this,"toggle-yaml-mode")}}}x.styles=[u.KC,u.Lt],(0,a.__decorate)([(0,s.MZ)({attribute:!1})],x.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],x.prototype,"config",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"wide"})],x.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],x.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"yaml-mode"})],x.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],x.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"sidebar-key"})],x.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.wk)()],x.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.P)(".sidebar-editor")],x.prototype,"editor",void 0),x=(0,a.__decorate)([(0,s.EM)("ha-automation-sidebar-action")],x),t()}catch(e){t(e)}})},41336:function(e,t,i){var a=i(69868),o=i(88006),s=i(84922),n=i(22019),r=i(75907),d=i(44017),l=i(63211);i(70490),i(87348),i(9058),i(19912),i(28565),i(92409),i(54564);class c extends s.WF{firstUpdated(e){this._contentSize.observe(this._contentElement)}render(){return s.qy` <ha-card outlined class="${(0,r.H)({mobile:!this.isWide,yaml:this.yamlMode})}"> <ha-dialog-header class="${(0,r.H)({scrolled:this._contentScrolled})}"> <ha-icon-button slot="navigationIcon" .label="${this.hass.localize("ui.common.close")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" @click="${this._closeSidebar}"></ha-icon-button> <slot slot="title" name="title"></slot> <slot slot="subtitle" name="subtitle"></slot> <slot name="overflow-menu" slot="actionItems"> <ha-md-button-menu quick @click="${this._openOverflowMenu}" @keydown="${l.d}" @closed="${l.d}" .positioning="${this.narrow?"absolute":"fixed"}" anchor-corner="end-end" menu-corner="start-end"> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"}"></ha-icon-button> <slot name="menu-items"></slot> </ha-md-button-menu> </slot> </ha-dialog-header> ${this.warnings?s.qy`<ha-automation-editor-warning .localize="${this.hass.localize}" .warnings="${this.warnings}"> </ha-automation-editor-warning>`:s.s6} <div class="card-content" @scroll="${this._onScroll}"> <slot></slot> </div> <div class="${(0,r.H)({fade:!0,scrollable:this._contentScrollable})}"></div> </ha-card> `}_onScroll(e){const t=e.target.scrollTop??0;this._contentScrolled=t>0,this._canScrollDown(e.target)}_canScrollDown(e){const t=parseFloat(getComputedStyle(e).getPropertyValue("--safe-area-inset-bottom"))||0;this._contentScrollable=(e.scrollHeight??0)-(e.clientHeight??0)>(e.scrollTop??0)+t+16}_closeSidebar(){(0,d.r)(this,"close-sidebar")}_openOverflowMenu(e){e.stopPropagation(),e.preventDefault()}constructor(...e){super(...e),this.isWide=!1,this.yamlMode=!1,this.narrow=!1,this._contentScrolled=!1,this._contentScrollable=!1,this._contentSize=new o.P(this,{target:null,callback:e=>{e[0]?.target&&this._canScrollDown(e[0].target)}})}}c.styles=s.AH`ha-card{position:relative;height:100%;width:100%;border-color:var(--primary-color);border-width:2px;display:flex;flex-direction:column}@media all and (max-width:870px){ha-card.mobile{border:none;box-shadow:none}ha-card.mobile{border-bottom-right-radius:var(--ha-border-radius-square);border-bottom-left-radius:var(--ha-border-radius-square)}}ha-dialog-header{border-radius:var(--ha-card-border-radius);box-shadow:none;transition:box-shadow 180ms ease-in-out;border-bottom-left-radius:0;border-bottom-right-radius:0;position:relative;background-color:var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff))}ha-dialog-header.scrolled{box-shadow:var(--bar-box-shadow)}.fade{position:absolute;bottom:1px;left:1px;right:1px;height:16px;pointer-events:none;transition:box-shadow 180ms ease-in-out;background-color:var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff));transform:rotate(180deg);border-radius:var(--ha-card-border-radius);border-bottom-left-radius:var(--ha-border-radius-square);border-bottom-right-radius:var(--ha-border-radius-square)}.fade.scrollable{box-shadow:var(--bar-box-shadow)}.card-content{flex:1 1 auto;min-height:0;overflow:auto;margin-top:0;padding-bottom:max(var(--safe-area-inset-bottom,0px),32px)}@media all and (max-width:870px){.fade{bottom:0;border-radius:var(--ha-border-radius-square)}.card-content{padding-bottom:42px}}`,(0,a.__decorate)([(0,n.MZ)({attribute:!1})],c.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,attribute:"wide"})],c.prototype,"isWide",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,attribute:"yaml-mode"})],c.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],c.prototype,"warnings",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean})],c.prototype,"narrow",void 0),(0,a.__decorate)([(0,n.wk)()],c.prototype,"_contentScrolled",void 0),(0,a.__decorate)([(0,n.wk)()],c.prototype,"_contentScrollable",void 0),(0,a.__decorate)([(0,n.P)(".card-content")],c.prototype,"_contentElement",void 0),(0,a.__decorate)([(0,n.Ls)({passive:!0})],c.prototype,"_onScroll",null),c=(0,a.__decorate)([(0,n.EM)("ha-automation-sidebar-card")],c)},97457:function(e,t,i){i.a(e,async function(e,t){try{var a=i(69868),o=i(84922),s=i(22019),n=i(75907),r=i(7622),d=i(44017),l=i(36768),c=i(26539),h=i(29295),p=i(40550),u=i(40980),g=i(67717),m=i(12167),b=i(954),_=(i(41336),e([m,g]));[m,g]=_.then?(await _)():_;const v="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",y="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",f="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",$="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",w="M6,22A3,3 0 0,1 3,19C3,18.4 3.18,17.84 3.5,17.37L9,7.81V6A1,1 0 0,1 8,5V4A2,2 0 0,1 10,2H14A2,2 0 0,1 16,4V5A1,1 0 0,1 15,6V7.81L20.5,17.37C20.82,17.84 21,18.4 21,19A3,3 0 0,1 18,22H6M5,19A1,1 0 0,0 6,20H18A1,1 0 0,0 19,19C19,18.79 18.93,18.59 18.82,18.43L16.53,14.47L14,17L8.93,11.93L5.18,18.43C5.07,18.59 5,18.79 5,19M13,10A1,1 0 0,0 12,11A1,1 0 0,0 13,12A1,1 0 0,0 14,11A1,1 0 0,0 13,10Z",M="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z",A="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z",C="M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z",x="M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",H="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9";class k extends o.WF{willUpdate(e){e.has("config")&&(this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config))),e.has("sidebarKey")&&(this._testing=!1)}render(){const e="enabled"in this.config.config&&!1===this.config.config.enabled,t=this.config.config.condition,i=h.I8.includes(t),a=this.hass.localize("ui.panel.config.automation.editor.conditions.condition"),s=this.hass.localize(`ui.panel.config.automation.editor.conditions.type.${t}.label`)||t,d=i?this.hass.localize(`ui.panel.config.automation.editor.conditions.type.${t}.description.picker`):"";return o.qy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${s}</span> <span slot="subtitle">${a}${e?` (${this.hass.localize("ui.panel.config.automation.editor.actions.disabled")})`:""}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this._testCondition}"> <ha-svg-icon slot="start" .path="${w}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.conditions.test")} <span class="shortcut-placeholder ${u.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.rename}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${x}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.rename")} <span class="shortcut-placeholder ${u.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.duplicate}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${C}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")} <span class="shortcut-placeholder ${u.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.copy}"> <ha-svg-icon slot="start" .path="${y}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.copy")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${u.c?o.qy`<ha-svg-icon slot="start" .path="${v}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>C</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.cut}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${f}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.cut")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${u.c?o.qy`<ha-svg-icon slot="start" .path="${v}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>X</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!this.config.uiSupported||!!this._warnings}"> <ha-svg-icon slot="start" .path="${A}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${u.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.disable}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${e?M:H}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions."+(e?"enable":"disable"))} <span class="shortcut-placeholder ${u.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${$}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${u.c?o.qy`<ha-svg-icon slot="start" .path="${v}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${d&&!this.yamlMode?o.qy`<div class="description">${d}</div>`:(0,r.D)(this.sidebarKey,o.qy`<ha-automation-condition-editor class="sidebar-editor" .hass="${this.hass}" .condition="${this.config.config}" .yamlMode="${this.yamlMode}" .uiSupported="${this.config.uiSupported}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}" .disabled="${this.disabled}" @ui-mode-not-available="${this._handleUiModeNotAvailable}" sidebar></ha-automation-condition-editor>`)} <div class="testing-wrapper"> <div class="testing ${(0,n.H)({active:this._testing,pass:!0===this._testingResult,error:!1===this._testingResult,narrow:this.narrow})}"> ${void 0===this._testingResult?o.s6:this.hass.localize("ui.panel.config.automation.editor.conditions.testing_"+(this._testingResult?"pass":"error"))} </div> </div> </ha-automation-sidebar-card>`}_handleUiModeNotAvailable(e){this._warnings=(0,l._)(this.hass,e.detail).warnings,this.yamlMode||(this.yamlMode=!0)}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value),this.config&&(0,d.r)(this,"value-changed",{value:{...this.config,config:e.detail.value}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._testing=!1,this._testCondition=async()=>{if(this._testing)return;this._testingResult=void 0,this._testing=!0;const e=this.config.config;try{const t=await(0,p.$)(this.hass,{conditions:e});if(this.config.config!==e)return void(this._testing=!1);if(!t.conditions.valid)return(0,g.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.automation.editor.conditions.invalid_condition"),text:t.conditions.error}),void(this._testing=!1);let i;try{i=await(0,c.S9)(this.hass,e)}catch(t){return this.config.config!==e||(0,g.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.automation.editor.conditions.test_failed"),text:t.message}),void(this._testing=!1)}this._testingResult=i.result}finally{setTimeout(()=>{this._testing=!1,this._testingResult=void 0},2500)}},this._toggleYamlMode=()=>{(0,d.r)(this,"toggle-yaml-mode")}}}k.styles=[b.KC,b.Lt,o.AH`ha-automation-sidebar-card{position:relative}.testing-wrapper{position:absolute;top:0px;right:0px;left:0px;margin:-1px;overflow:hidden;border-top-right-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));border-top-left-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));pointer-events:none;height:100px}.testing{--testing-color:var(--divider-color, #e0e0e0);text-transform:uppercase;font-size:var(--ha-font-size-m);font-weight:var(--ha-font-weight-bold);background-color:var(--testing-color);color:var(--text-primary-color);max-height:0px;transition:max-height .3s ease-in-out,padding-top .3s ease-in-out;text-align:center}.testing.active.narrow{padding-top:16px}.testing.active{max-height:100%}.testing.error{--testing-color:var(--accent-color)}.testing.pass{--testing-color:var(--success-color)}`],(0,a.__decorate)([(0,s.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],k.prototype,"config",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"wide"})],k.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],k.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"yaml-mode"})],k.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],k.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"sidebar-key"})],k.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.wk)()],k.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.wk)()],k.prototype,"_testing",void 0),(0,a.__decorate)([(0,s.wk)()],k.prototype,"_testingResult",void 0),(0,a.__decorate)([(0,s.P)(".sidebar-editor")],k.prototype,"editor",void 0),k=(0,a.__decorate)([(0,s.EM)("ha-automation-sidebar-condition")],k),t()}catch(e){t(e)}})},67147:function(e,t,i){var a=i(69868),o=i(84922),s=i(22019),n=i(40980),r=i(954);i(41336);class d extends o.WF{render(){const e=this.disabled,t=this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.label"),i=this.hass.localize(`ui.panel.config.automation.editor.actions.type.choose.${this.config.defaultOption?"default_":""}option_label`),a=this.hass.localize(`ui.panel.config.automation.editor.actions.type.choose.${this.config.defaultOption?"default_":""}option_description`);return o.qy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .narrow="${this.narrow}"> <span slot="title">${i}</span> <span slot="subtitle">${t}</span> ${this.config.defaultOption?o.qy`<span slot="overflow-menu"></span>`:o.qy` <ha-md-menu-item slot="menu-items" .clickAction="${this.config.rename}" .disabled="${!!e}"> <ha-svg-icon slot="start" .path="${"M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.rename")} <span class="shortcut-placeholder ${n.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" @click="${this.config.duplicate}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${"M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z"}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")} <span class="shortcut-placeholder ${n.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.remove_option")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${n.c?o.qy`<ha-svg-icon slot="start" .path="${"M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z"}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> `} <div class="description">${a}</div> </ha-automation-sidebar-card>`}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.narrow=!1}}d.styles=[r.KC,r.Lt],(0,a.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"config",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"wide"})],d.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],d.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],d.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.P)(".sidebar-editor")],d.prototype,"editor",void 0),d=(0,a.__decorate)([(0,s.EM)("ha-automation-sidebar-option")],d)},25552:function(e,t,i){i.a(e,async function(e,t){try{var a=i(69868),o=i(84922),s=i(22019),n=i(7622),r=i(44017),d=i(40980),l=i(33926),c=i(954),h=(i(41336),e([l]));l=(h.then?(await h)():h)[0];const p="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",u="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",g="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z";class m extends o.WF{willUpdate(e){e.has("config")&&(this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config)))}render(){const e=this.hass.localize("ui.panel.config.script.editor.field.field_selector"),t=this.hass.localize(`ui.components.selectors.selector.types.${Object.keys(this.config.config.field.selector)[0]}`)||Object.keys(this.config.config.field.selector)[0];return o.qy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${t}</span> <span slot="subtitle">${e}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!!this._warnings}"> <ha-svg-icon slot="start" .path="${g}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${d.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${u}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${d.c?o.qy`<ha-svg-icon slot="start" .path="${p}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${(0,n.D)(this.sidebarKey,o.qy`<ha-script-field-selector-editor class="sidebar-editor" .hass="${this.hass}" .field="${this.config.config.field}" .disabled="${this.disabled}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}" .yamlMode="${this.yamlMode}"></ha-script-field-selector-editor>`)} </ha-automation-sidebar-card>`}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.({...this.config.config.field,key:this.config.config.key,...e.detail.value}),this.config&&(0,r.r)(this,"value-changed",{value:{...this.config,config:{field:e.detail.value,key:this.config.config.key,excludeKeys:this.config.config.excludeKeys,selector:!0}}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._toggleYamlMode=()=>{(0,r.r)(this,"toggle-yaml-mode")}}}m.styles=c.KC,(0,a.__decorate)([(0,s.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],m.prototype,"config",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"wide"})],m.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],m.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"yaml-mode"})],m.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],m.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"sidebar-key"})],m.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.wk)()],m.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.P)(".sidebar-editor")],m.prototype,"editor",void 0),m=(0,a.__decorate)([(0,s.EM)("ha-automation-sidebar-script-field-selector")],m),t()}catch(e){t(e)}})},92560:function(e,t,i){i.a(e,async function(e,t){try{var a=i(69868),o=i(84922),s=i(22019),n=i(7622),r=i(44017),d=i(40980),l=i(54586),c=i(954),h=(i(41336),e([l]));l=(h.then?(await h)():h)[0];const p="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",u="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",g="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z";class m extends o.WF{willUpdate(e){e.has("config")&&(this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config)))}render(){const e=this.hass.localize("ui.panel.config.script.editor.field.label");return o.qy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${e}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!!this._warnings}"> <ha-svg-icon slot="start" .path="${g}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${d.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${u}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${d.c?o.qy`<ha-svg-icon slot="start" .path="${p}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${(0,n.D)(this.sidebarKey,o.qy`<ha-script-field-editor class="sidebar-editor" .hass="${this.hass}" .field="${this.config.config.field}" .key="${this.config.config.key}" .excludeKeys="${this.config.config.excludeKeys}" .disabled="${this.disabled}" .yamlMode="${this.yamlMode}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}"></ha-script-field-editor>`)} </ha-automation-sidebar-card>`}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.({...this.config.config.field,key:e.detail.value.key??this.config.config.key,...e.detail.value}),this.config&&(0,r.r)(this,"value-changed",{value:{...this.config,config:{field:e.detail.value,key:e.detail.value.key??this.config.config.key,excludeKeys:this.config.config.excludeKeys}}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._toggleYamlMode=()=>{(0,r.r)(this,"toggle-yaml-mode")}}}m.styles=[c.KC,c.Lt],(0,a.__decorate)([(0,s.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],m.prototype,"config",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"wide"})],m.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],m.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"yaml-mode"})],m.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],m.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"sidebar-key"})],m.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.wk)()],m.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.P)(".sidebar-editor")],m.prototype,"editor",void 0),m=(0,a.__decorate)([(0,s.EM)("ha-automation-sidebar-script-field")],m),t()}catch(e){t(e)}})},75472:function(e,t,i){i.a(e,async function(e,t){try{var a=i(69868),o=i(84922),s=i(22019),n=i(7622),r=i(44017),d=i(36768),l=i(68514),c=i(40980),h=i(954),p=i(65719),u=(i(41336),e([p]));p=(u.then?(await u)():u)[0];const g="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",m="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",b="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",_="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",v="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z",y="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z",f="M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z",$="M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",w="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9";class M extends o.WF{willUpdate(e){e.has("config")&&(this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config)))}render(){const e=this.disabled||"enabled"in this.config.config&&!1===this.config.config.enabled,t=(0,l.H4)(this.config.config)?"list":this.config.config.trigger,i=this.hass.localize("ui.panel.config.automation.editor.triggers.trigger"),a=this.hass.localize(`ui.panel.config.automation.editor.triggers.type.${t}.label`);return o.qy` <ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${a}</span> <span slot="subtitle">${i}${e?` (${this.hass.localize("ui.panel.config.automation.editor.actions.disabled")})`:""}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.rename}" .disabled="${this.disabled||"list"===t}"> <ha-svg-icon slot="start" .path="${$}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.rename")} <span class="shortcut-placeholder ${c.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.duplicate}" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.duplicate")} <ha-svg-icon slot="start" .path="${f}"></ha-svg-icon> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.copy}"> <ha-svg-icon slot="start" .path="${m}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.copy")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${c.c?o.qy`<ha-svg-icon slot="start" .path="${g}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>C</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.cut}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${b}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.cut")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${c.c?o.qy`<ha-svg-icon slot="start" .path="${g}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>X</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!this.config.uiSupported||!!this._warnings}"> <ha-svg-icon slot="start" .path="${y}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${c.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.disable}" .disabled="${this.disabled||"list"===t}"> <ha-svg-icon slot="start" .path="${e?v:w}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions."+(e?"enable":"disable"))} <span class="shortcut-placeholder ${c.c?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${_}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.s6:o.qy`<span class="shortcut"> <span>${c.c?o.qy`<ha-svg-icon slot="start" .path="${g}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${(0,n.D)(this.sidebarKey,o.qy`<ha-automation-trigger-editor class="sidebar-editor" .hass="${this.hass}" .trigger="${this.config.config}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}" .uiSupported="${this.config.uiSupported}" .yamlMode="${this.yamlMode}" .disabled="${this.disabled}" @ui-mode-not-available="${this._handleUiModeNotAvailable}" sidebar></ha-automation-trigger-editor>`)} </ha-automation-sidebar-card> `}_handleUiModeNotAvailable(e){this._warnings=(0,d._)(this.hass,e.detail).warnings,this.yamlMode||(this.yamlMode=!0)}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value),this.config&&(0,r.r)(this,"value-changed",{value:{...this.config,config:e.detail.value}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._toggleYamlMode=()=>{(0,r.r)(this,"toggle-yaml-mode")}}}M.styles=[h.KC,h.Lt],(0,a.__decorate)([(0,s.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],M.prototype,"config",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"wide"})],M.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],M.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"yaml-mode"})],M.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],M.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"sidebar-key"})],M.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.wk)()],M.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.P)(".sidebar-editor")],M.prototype,"editor",void 0),M=(0,a.__decorate)([(0,s.EM)("ha-automation-sidebar-trigger")],M),t()}catch(e){t(e)}})},21829:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{D:()=>h});i(65315),i(37089),i(59023);var o=i(69868),s=i(84922),n=i(22019),r=i(44017),d=(i(69752),i(70490),i(96635)),l=(i(56657),i(28077),i(56608),i(50809)),c=e([d]);d=(c.then?(await c)():c)[0];class h extends s.WF{firstUpdated(e){super.firstUpdated(e),this._getBlueprints()}get _blueprint(){if(this._blueprints)return this._blueprints[this._config.use_blueprint.path]}renderCard(){const e=this._blueprint;let t=!0;return s.qy` <ha-card outlined class="blueprint" .header="${this.hass.localize("ui.panel.config.automation.editor.blueprint.header")}"> <div class="blueprint-picker-container"> ${this._blueprints?Object.keys(this._blueprints).length?s.qy` <ha-blueprint-picker .hass="${this.hass}" .label="${this.hass.localize("ui.panel.config.automation.editor.blueprint.blueprint_to_use")}" .blueprints="${this._blueprints}" .value="${this._config.use_blueprint.path}" .disabled="${this.disabled}" @value-changed="${this._blueprintChanged}"></ha-blueprint-picker> `:this.hass.localize("ui.panel.config.automation.editor.blueprint.no_blueprints"):s.qy`<ha-spinner></ha-spinner>`} </div> ${this._config.use_blueprint.path?e&&"error"in e?s.qy`<p class="warning padding"> There is an error in this Blueprint: ${e.error} </p>`:s.qy`${e?.metadata.description?s.qy`<ha-markdown class="card-content" breaks .content="${e.metadata.description}"></ha-markdown>`:""} ${e?.metadata?.input&&Object.keys(e.metadata.input).length?Object.entries(e.metadata.input).map(([e,i])=>{if(i&&"input"in i){const a=this._renderSection(e,i);return t=!1,a}const a=this._renderSettingRow(e,i,t);return t=!0,a}):s.qy`<p class="padding"> ${this.hass.localize("ui.panel.config.automation.editor.blueprint.no_inputs")} </p>`}`:""} </ha-card> `}_renderSection(e,t){const i=t?.name||e,a=t.input&&Object.values(t.input).some(e=>null===e||void 0===e.default),o=!t.collapsed||a;return s.qy`<ha-expansion-panel outlined .expanded="${o}" .noCollapse="${a}"> ${t?.icon?s.qy` <ha-icon slot="leading-icon" class="section-header" .icon="${t.icon}"></ha-icon> `:s.s6} <div slot="header" role="heading" aria-level="3" class="section-header"> <ha-markdown .content="${i}"></ha-markdown> </div> <div class="content"> ${t?.description?s.qy`<ha-markdown .content="${t.description}"></ha-markdown>`:s.s6} ${t.input?Object.entries(t.input).map(([e,t])=>this._renderSettingRow(e,t,!0)):s.s6} </div> </ha-expansion-panel>`}_renderSettingRow(e,t,i){const a=t?.selector??{text:void 0};return s.qy`<ha-settings-row .narrow="${this.narrow}" class="${i?"border":""}"> <span slot="heading">${t?.name||e}</span> <ha-markdown slot="description" class="card-content" breaks .content="${t?.description}"></ha-markdown> ${s.qy`<ha-selector narrow .hass="${this.hass}" .selector="${a}" .key="${e}" .disabled="${this.disabled}" .required="${void 0===t?.default}" .placeholder="${t?.default}" .value="${this._config.use_blueprint.input&&e in this._config.use_blueprint.input?this._config.use_blueprint.input[e]:t?.default}" @value-changed="${this._inputChanged}"></ha-selector>`} </ha-settings-row>`}_blueprintChanged(e){e.stopPropagation(),this._config.use_blueprint.path!==e.detail.value&&(0,r.r)(this,"value-changed",{value:{...this._config,use_blueprint:{path:e.detail.value}}})}_inputChanged(e){e.stopPropagation();const t=e.target,i=t.key,a=e.detail?e.detail.value:t.value;if(this._config.use_blueprint.input&&this._config.use_blueprint.input[i]===a||!this._config.use_blueprint.input&&""===a)return;const o={...this._config.use_blueprint.input,[i]:a};(0,r.r)(this,"value-changed",{value:{...this._config,use_blueprint:{...this._config.use_blueprint,input:o}}})}static get styles(){return[l.RF,s.AH`:host{display:block}ha-card.blueprint{margin:0 auto;margin-bottom:64px}.padding{padding:16px}.link-button-row{padding:14px}.blueprint-picker-container{padding:0 16px 16px}ha-blueprint-picker,ha-textfield{display:block}h3{margin:16px}.introduction{margin-top:0;margin-bottom:12px}.introduction a{color:var(--primary-color)}p{margin-bottom:0}.description{margin-bottom:16px}ha-settings-row{--settings-row-content-width:100%;--settings-row-prefix-display:contents}ha-settings-row.border{border-top:1px solid var(--divider-color)}ha-expansion-panel{margin:8px;margin-left:8px;margin-right:8px}div.section-header{display:flex;vertical-align:middle}ha-icon.section-header{padding-right:10px}ha-alert{display:block;margin-bottom:16px}`]}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.narrow=!1}}(0,o.__decorate)([(0,n.MZ)({attribute:!1})],h.prototype,"hass",void 0),(0,o.__decorate)([(0,n.MZ)({attribute:"is-wide",type:Boolean})],h.prototype,"isWide",void 0),(0,o.__decorate)([(0,n.MZ)({type:Boolean})],h.prototype,"disabled",void 0),(0,o.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],h.prototype,"narrow",void 0),(0,o.__decorate)([(0,n.wk)()],h.prototype,"_blueprints",void 0),h=(0,o.__decorate)([(0,n.EM)("blueprint-generic-editor")],h),a()}catch(e){a(e)}})},54586:function(e,t,i){i.a(e,async function(e,t){try{var a=i(69868),o=i(84922),s=i(22019),n=i(65940),r=i(44017),d=i(63870),l=(i(94124),i(60921),i(6345)),c=i(50809),h=e([l]);l=(h.then?(await h)():h)[0];class p extends o.WF{render(){const e=this._schema(),t={...this.field,key:this._errorKey??this.key},i={[this.key]:this.field};return o.qy` ${this.yamlMode?o.qy`${this._yamlError?o.qy`<ha-alert alert-type="error"> ${this.hass.localize(`ui.panel.config.script.editor.field.${this._yamlError}`)} </ha-alert>`:o.s6} <ha-yaml-editor .hass="${this.hass}" .defaultValue="${i}" @value-changed="${this._onYamlChange}"></ha-yaml-editor>`:o.qy`<ha-form .schema="${e}" .data="${t}" .error="${this._uiError}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" .computeError="${this._computeError}" @value-changed="${this._valueChanged}"></ha-form>`} `}_maybeSetKey(e){const t=e.name!==this.field.name,i=e.key!==this.key;if(!t||i)return;const a=this.field.name?(0,d.Y)(this.field.name):this.hass.localize("ui.panel.config.script.editor.field.field")||"field";if(new RegExp(`^${a}(_\\d)?$`).test(this.key)){let t=e.name?(0,d.Y)(e.name):this.hass.localize("ui.panel.config.script.editor.field.field")||"field";if(this.excludeKeys.includes(t)){let e=t,i=2;do{e=`${t}_${i}`,i++}while(this.excludeKeys.includes(e));t=e}e.key=t}}_valueChanged(e){e.stopPropagation();const t={...e.detail.value};if(this._maybeSetKey(t),!t.key||this.excludeKeys.includes(t.key))return this._uiError=t.key?{key:"key_not_unique"}:{key:"key_not_null"},void(this._errorKey=t.key??"");this._errorKey=void 0,this._uiError=void 0,Object.keys(this.field.selector)[0]!==Object.keys(t.selector)[0]&&delete t.default,(0,r.r)(this,"value-changed",{value:t})}_onYamlChange(e){e.stopPropagation();const t={...e.detail.value};if(1!==Object.keys(t).length||!t[Object.keys(t)[0]]||!t[Object.keys(t)[0]].selector)return void(this._yamlError="yaml_error");const i=Object.keys(t)[0];if(this.excludeKeys.includes(i))return void(this._yamlError="key_not_unique");this._yamlError=void 0;const a={...t[i],key:i};(0,r.r)(this,"yaml-changed",{value:a})}constructor(...e){super(...e),this.excludeKeys=[],this.disabled=!1,this.yamlMode=!1,this._schema=(0,n.A)(()=>[{name:"name",selector:{text:{}}},{name:"key",selector:{text:{}}},{name:"description",selector:{text:{}}},{name:"required",selector:{boolean:{}}}]),this._computeLabelCallback=e=>this.hass.localize(`ui.panel.config.script.editor.field.${e.name}`),this._computeError=e=>this.hass.localize(`ui.panel.config.script.editor.field.${e}`)||e}}p.styles=c.RF,(0,a.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)()],p.prototype,"key",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1,type:Array})],p.prototype,"excludeKeys",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"field",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],p.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"yaml-mode"})],p.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.wk)()],p.prototype,"_uiError",void 0),(0,a.__decorate)([(0,s.wk)()],p.prototype,"_yamlError",void 0),p=(0,a.__decorate)([(0,s.EM)("ha-script-field-editor")],p),t()}catch(e){t(e)}})},33926:function(e,t,i){i.a(e,async function(e,t){try{i(99342),i(65315),i(22416);var a=i(69868),o=i(84922),s=i(22019),n=i(65940),r=i(44017),d=(i(94124),i(60921),i(6345)),l=i(70053),c=i(50809),h=i(954),p=e([d]);d=(p.then?(await p)():p)[0];class u extends o.WF{render(){const e=this._schema(this.field.selector),t={selector:this.field.selector,default:this.field.default};return o.qy` ${this.yamlMode?o.qy`${this._yamlError?o.qy`<ha-alert alert-type="error"> ${this.hass.localize(`ui.panel.config.script.editor.field.${this._yamlError}`)} </ha-alert>`:o.s6} <ha-yaml-editor .hass="${this.hass}" .defaultValue="${t}" @value-changed="${this._onYamlChange}"></ha-yaml-editor>`:o.qy`<ha-form .schema="${e}" .data="${t}" .error="${this._uiError}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" .computeError="${this._computeError}" @value-changed="${this._valueChanged}" .narrow="${this.narrow}"></ha-form>`} `}_valueChanged(e){e.stopPropagation();const t={...e.detail.value};this._uiError=void 0,this.indent||Object.keys(this.field.selector)[0]===Object.keys(t.selector)[0]||(t.default=void 0),(0,r.r)(this,"value-changed",{value:t})}_onYamlChange(e){e.stopPropagation();const t={...e.detail.value};2===Object.keys(t).length?(0,r.r)(this,"yaml-changed",{value:t}):this._yamlError="yaml_error"}_getSelectorElements(){if(this._formElement){const e=this._formElement.shadowRoot?.querySelectorAll("ha-selector"),t=[];return e?.forEach(e=>{t.push(...Array.from(e.shadowRoot?.querySelectorAll("ha-selector-condition, ha-selector-action")||[]))}),t}return[]}expandAll(){this._getSelectorElements().forEach(e=>{e.expandAll?.()})}collapseAll(){this._getSelectorElements().forEach(e=>{e.collapseAll?.()})}static get styles(){return[c.RF,h.aM,o.AH`:host([indent]) ha-form{display:block;margin-left:12px;padding:12px 20px 16px 16px;margin-right:-4px}`]}constructor(...e){super(...e),this.narrow=!1,this.selected=!1,this.disabled=!1,this.indent=!1,this.yamlMode=!1,this._schema=(0,n.A)(e=>[...this.indent?[]:[{name:"selector",selector:{selector:{}}}],...!e||"object"!=typeof e||!this.indent&&l.W.includes(Object.keys(e)[0])?[]:[{name:"default",selector:this.indent?{[Object.keys(e)[0]]:{...e[Object.keys(e)[0]],optionsInSidebar:!0}}:e}]]),this._computeLabelCallback=e=>this.hass.localize(`ui.panel.config.script.editor.field.${e.name}`)??e.name,this._computeError=e=>this.hass.localize(`ui.panel.config.script.editor.field.${e}`)||e}}(0,a.__decorate)([(0,s.MZ)({attribute:!1})],u.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],u.prototype,"field",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],u.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],u.prototype,"selected",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],u.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],u.prototype,"indent",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"yaml-mode"})],u.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.wk)()],u.prototype,"_uiError",void 0),(0,a.__decorate)([(0,s.wk)()],u.prototype,"_yamlError",void 0),(0,a.__decorate)([(0,s.P)("ha-form")],u.prototype,"_formElement",void 0),u=(0,a.__decorate)([(0,s.EM)("ha-script-field-selector-editor")],u),t()}catch(e){t(e)}})},37132:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{P8:()=>H,PV:()=>x,rU:()=>C,x2:()=>k});var o=i(69868),s=i(84922),n=i(22019),r=i(75907),d=i(48893),l=i(65940),c=i(78412),h=i(83510),p=i(88341),u=i(12275),g=i(72652),m=i(27931),b=i(25442),_=(i(31109),i(71434),i(84553)),v=(i(86160),i(82687)),y=i(46407),f=i(44630),$=i(47426),w=i(3922),M=e([_]);_=(M.then?(await M)():M)[0];const A="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",C=["minimal","standard","complete"],x={type:"entity",show_name:!1,show_state:!0,show_icon:!0},H=e=>{const t={...e};return e.display_type&&(void 0===e.show_name&&"complete"===e.display_type&&(t.show_name=!0),void 0===e.show_state&&"minimal"===e.display_type&&(t.show_state=!1),delete t.display_type),t};class k extends s.WF{static async getConfigElement(){return await Promise.all([i.e("78525"),i.e("15116"),i.e("64300"),i.e("42984")]).then(i.bind(i,42210)),document.createElement("hui-entity-badge-editor")}static getStubConfig(e,t,i){return{type:"entity",entity:(0,f.B)(e,1,t,i,["sensor","light","switch"])[0]||""}}setConfig(e){this._config={...x,...H(e)}}get hasAction(){return!this._config?.tap_action||(0,w.h)(this._config?.tap_action)||(0,w.h)(this._config?.hold_action)||(0,w.h)(this._config?.double_tap_action)}_getImageUrl(e){const t=e.attributes.entity_picture_local||e.attributes.entity_picture;if(!t)return;let i=this.hass.hassUrl(t);return"camera"===(0,u.t)(e)&&(i=(0,v.su)(i,32,32)),i}render(){if(!this._config||!this.hass)return s.s6;const e=this._config.entity,t=e?this.hass.states[e]:void 0;if(!t)return s.qy` <ha-badge .label="${e}" class="error"> <ha-svg-icon slot="icon" .hass="${this.hass}" .path="${A}"></ha-svg-icon> ${this.hass.localize("ui.badge.entity.not_found")} </ha-badge> `;const i=(0,m.a)(t),a={"--badge-color":this._computeStateColor(t,this._config.color)},o=s.qy` <state-display .stateObj="${t}" .hass="${this.hass}" .content="${this._config.state_content}" .name="${this._config.name}"> </state-display> `,n=this._config.name||(0,g.u)(t),l=this._config.show_state,c=this._config.show_name,h=this._config.show_icon,p=this._config.show_entity_picture?this._getImageUrl(t):void 0,u=l&&c?n:void 0,b=l?o:c?n:void 0;return s.qy` <ha-badge .type="${this.hasAction?"button":"badge"}" @action="${this._handleAction}" .actionHandler="${(0,y.T)({hasHold:(0,w.h)(this._config.hold_action),hasDoubleClick:(0,w.h)(this._config.double_tap_action)})}" .label="${u}" .iconOnly="${!b}" style="${(0,d.W)(a)}" class="${(0,r.H)({active:i})}"> ${h?p?s.qy`<img slot="icon" src="${p}" aria-hidden>`:s.qy` <ha-state-icon slot="icon" .hass="${this.hass}" .stateObj="${t}" .icon="${this._config.icon}"></ha-state-icon> `:s.s6} ${b} </ha-badge> `}_handleAction(e){(0,$.$)(this,this.hass,this._config,e.detail.action)}constructor(...e){super(...e),this._computeStateColor=(0,l.A)((e,t)=>{if(t)return(0,m.a)(e)?(0,c.M)(t):void 0;if("light"===(0,p.m)(e.entity_id)&&e.attributes.rgb_color){const t=(0,h.bi)(e.attributes.rgb_color);return t[1]<.4&&(t[1]<.1?t[2]=225:t[1]=.4),(0,h.v2)((0,h.hT)(t))}return(0,b.Se)(e)})}}k.styles=s.AH`ha-badge{--badge-color:var(--state-inactive-color)}ha-badge.error{--badge-color:var(--red-color)}ha-badge.active{--badge-color:var(--primary-color)}`,(0,o.__decorate)([(0,n.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,o.__decorate)([(0,n.wk)()],k.prototype,"_config",void 0),k=(0,o.__decorate)([(0,n.EM)("hui-entity-badge")],k),a()}catch(e){a(e)}})},31716:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{YH:()=>c,hZ:()=>l,ww:()=>h});i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030);var o=i(37132),s=i(44142),n=e([o]);o=(n.then?(await n)():n)[0];const r=new Set(["error","entity"]),d={"entity-filter":()=>i.e("66204").then(i.bind(i,15607)),"state-label":()=>i.e("29610").then(i.bind(i,14865))},l=e=>(0,s.Vd)("badge",e,r,d,void 0,"entity"),c=e=>(0,s.Ue)("badge",e,r,d,void 0,"entity"),h=e=>(0,s.gh)(e,"badge",r,d);a()}catch(e){a(e)}})},3493:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{d:()=>p});i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030);var o=i(78181),s=(i(79110),i(91336)),n=i(37201),r=i(39630),d=i(25246),l=(i(79883),i(44142)),c=e([o,s,n,r,d]);[o,s,n,r,d]=c.then?(await c)():c;const h=new Set(["conditional","icon","image","service-button","state-badge","state-icon","state-label"]),p=e=>("action-button"===e.type&&(e={...e,type:"service-button"}),(0,l.Ue)("element",e,h));a()}catch(e){a(e)}})},67717:function(e,t,i){i.a(e,async function(e,a){try{i.r(t),i.d(t,{createBadgeElement:()=>r.YH,createCardElement:()=>d.te,createHeaderFooterElement:()=>l.x,createHuiElement:()=>c.d,createRowElement:()=>h.T,importMoreInfoControl:()=>n.S5,showAlertDialog:()=>s.showAlertDialog,showConfirmationDialog:()=>s.showConfirmationDialog,showEnterCodeDialog:()=>o.H,showPromptDialog:()=>s.showPromptDialog});var o=i(74977),s=i(15241),n=i(31330),r=i(31716),d=i(57723),l=i(24096),c=i(3493),h=i(6055),p=e([n,r,d,c,h]);[n,r,d,c,h]=p.then?(await p)():p,a()}catch(e){a(e)}})},33810:function(e,t,i){i.d(t,{G:()=>a});class a{get(e){return this._cache.get(e)}set(e,t){this._cache.set(e,t),this._expiration&&window.setTimeout(()=>this._cache.delete(e),this._expiration)}has(e){return this._cache.has(e)}constructor(e){this._cache=new Map,this._expiration=e}}},41073:function(e,t,i){var a={"./ha-icon-prev":["20503","7196"],"./ha-icon-button-toolbar":["14752","71977","25209"],"./ha-alert":["94124","14813"],"./ha-icon-button-toggle":["94435","98176"],"./ha-svg-icon.ts":["86160"],"./ha-alert.ts":["94124","14813"],"./ha-icon":["17933","606"],"./ha-icon-next.ts":["42163","72752"],"./ha-qr-code.ts":["69273","43033","706"],"./ha-icon-overflow-menu.ts":["6418","48439","71977","56216","37037"],"./ha-icon-button-toggle.ts":["94435","98176"],"./ha-icon-button-group":["94908","74541"],"./ha-svg-icon":["86160"],"./ha-icon-button-prev":["72590","7427"],"./ha-icon-button.ts":["9058"],"./ha-icon-overflow-menu":["6418","48439","71977","56216","37037"],"./ha-icon-button-arrow-next":["23906","12127"],"./ha-icon-button-prev.ts":["72590","7427"],"./ha-icon-picker":["8808","42153","15265","48439","87110","70885"],"./ha-icon-button-toolbar.ts":["14752","71977","25209"],"./ha-icon-button-arrow-prev.ts":["65442","56127"],"./ha-icon-button-next":["75542","65928"],"./ha-icon-next":["42163","72752"],"./ha-icon-picker.ts":["8808","42153","15265","48439","87110","70885"],"./ha-icon-prev.ts":["20503","7196"],"./ha-icon-button-arrow-prev":["65442","56127"],"./ha-icon-button-next.ts":["75542","65928"],"./ha-icon.ts":["17933","606"],"./ha-qr-code":["69273","43033","706"],"./ha-icon-button":["9058"],"./ha-icon-button-group.ts":["94908","74541"],"./ha-icon-button-arrow-next.ts":["23906","12127"]};function o(e){if(!i.o(a,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],o=t[0];return Promise.all(t.slice(1).map(i.e)).then(function(){return i(o)})}o.keys=()=>Object.keys(a),o.id=41073,e.exports=o}};
//# sourceMappingURL=57465.cffdba7d87971cdd.js.map