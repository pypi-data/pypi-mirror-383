export const __webpack_id__="42418";export const __webpack_ids__=["42418"];export const __webpack_modules__={77208:function(a,e,t){var i=t(69868),s=t(39508),o=t(22019);class n extends s.A{constructor(...a){super(...a),this.name="fadeIn",this.fill="both",this.play=!0,this.iterations=1}}(0,i.__decorate)([(0,o.MZ)()],n.prototype,"name",void 0),(0,i.__decorate)([(0,o.MZ)()],n.prototype,"fill",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean})],n.prototype,"play",void 0),(0,i.__decorate)([(0,o.MZ)({type:Number})],n.prototype,"iterations",void 0),n=(0,i.__decorate)([(0,o.EM)("ha-fade-in")],n)},62177:function(a,e,t){t.d(e,{xG:()=>l,b3:()=>o,eK:()=>n});t(65315),t(84136);var i=t(99106),s=t(63625);const o=async a=>(0,i.v)(a.config.version,2021,2,4)?a.callWS({type:"supervisor/api",endpoint:"/addons",method:"get"}):(0,s.PS)(await a.callApi("GET","hassio/addons")),n=async(a,e)=>(0,i.v)(a.config.version,2021,2,4)?a.callWS({type:"supervisor/api",endpoint:`/addons/${e}/start`,method:"post",timeout:null}):a.callApi("POST",`hassio/addons/${e}/start`),l=async(a,e)=>{(0,i.v)(a.config.version,2021,2,4)?await a.callWS({type:"supervisor/api",endpoint:`/addons/${e}/install`,method:"post",timeout:null}):await a.callApi("POST",`hassio/addons/${e}/install`)}},56997:function(a,e,t){t(99342),t(65315),t(837),t(84136),t(37089);var i=t(69868),s=t(84922),o=t(22019),n=t(65940),l=t(44017),d=t(24730);t(63893),t(17244),t(36892);class r extends s.WF{render(){return s.qy` <div class="items"> ${this._addons(this.addons).map(a=>s.qy` <ha-formfield> <ha-backup-formfield-label slot="label" .label="${a.name}" .version="${this.hideVersion?void 0:a.version}" .iconPath="${a.iconPath||"M20.5,11H19V7C19,5.89 18.1,5 17,5H13V3.5A2.5,2.5 0 0,0 10.5,1A2.5,2.5 0 0,0 8,3.5V5H4A2,2 0 0,0 2,7V10.8H3.5C5,10.8 6.2,12 6.2,13.5C6.2,15 5,16.2 3.5,16.2H2V20A2,2 0 0,0 4,22H7.8V20.5C7.8,19 9,17.8 10.5,17.8C12,17.8 13.2,19 13.2,20.5V22H17A2,2 0 0,0 19,20V16H20.5A2.5,2.5 0 0,0 23,13.5A2.5,2.5 0 0,0 20.5,11Z"}" .imageUrl="${this.addons?.find(e=>e.slug===a.slug)?.icon?`/api/hassio/addons/${a.slug}/icon`:void 0}"> </ha-backup-formfield-label> <ha-checkbox .id="${a.slug}" .checked="${this.value?.includes(a.slug)||!1}" @change="${this._checkboxChanged}" .disabled="${this.disabled}"></ha-checkbox> </ha-formfield> `)} </div> `}_checkboxChanged(a){a.stopPropagation();let e=this.value??[];const t=a.currentTarget;t.checked?e.push(t.id):e=e.filter(a=>a!==t.id),(0,l.r)(this,"value-changed",{value:e})}constructor(...a){super(...a),this.hideVersion=!1,this.disabled=!1,this._addons=(0,n.A)(a=>a.sort((a,e)=>(0,d.xL)(a.name,e.name,this.hass?.locale?.language)))}}r.styles=s.AH`.items{display:flex;flex-direction:column}`,(0,i.__decorate)([(0,o.MZ)({attribute:!1})],r.prototype,"hass",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],r.prototype,"addons",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],r.prototype,"value",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:"hide-version",type:Boolean})],r.prototype,"hideVersion",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean})],r.prototype,"disabled",void 0),r=(0,i.__decorate)([(0,o.EM)("ha-backup-addons-picker")],r)},85404:function(a,e,t){t(99342),t(65315),t(837),t(37089),t(48169);var i=t(69868),s=t(84922),o=t(22019),n=t(65940),l=t(26946),d=t(44017),r=t(35297),c=(t(63893),t(17244),t(62177)),h=t(60702);t(56997),t(36892);const p="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",u={config:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",database:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M9 17H7V10H9V17M13 17H11V7H13V17M17 17H15V13H17V17Z",media:"M4,6H2V20A2,2 0 0,0 4,22H18V20H4V6M20,2H8A2,2 0 0,0 6,4V16A2,2 0 0,0 8,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M12,14.5V5.5L18,10L12,14.5Z",share:p,ssl:"M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"};class m extends s.WF{firstUpdated(a){super.firstUpdated(a),this.hass&&(0,l.x)(this.hass,"hassio")&&this._fetchAddonInfo()}async _fetchAddonInfo(){const{addons:a}=await(0,c.b3)(this.hass);this._addonIcons=a.reduce((a,e)=>({...a,[e.slug]:e.icon}),{})}_localizeFolder(a){const e=this.localize||this.hass.localize;switch(a){case"media":return e(`ui.panel.${this.translationKeyPanel}.data_picker.media`);case"share":return e(`ui.panel.${this.translationKeyPanel}.data_picker.share_folder`);case"ssl":return e(`ui.panel.${this.translationKeyPanel}.data_picker.ssl`);case"addons/local":return e(`ui.panel.${this.translationKeyPanel}.data_picker.local_addons`)}return(0,r.Z)(a)}_homeassistantChanged(a){const e=this._parseValue(this.value),t=a.currentTarget;t.checked?e.homeassistant.push(t.id):e.homeassistant=e.homeassistant.filter(a=>a!==t.id);const i=this._formatValue(e,this.data);(0,d.r)(this,"value-changed",{value:i})}_addonsChanged(a){a.stopPropagation();const e=this._parseValue(this.value),t=a.detail.value;e.addons=t;const i=this._formatValue(e,this.data);(0,d.r)(this,"value-changed",{value:i})}_sectionChanged(a){const e=this._parseValue(this.value),t=this._parseValue(this.data),i=a.currentTarget,s=i.id;i.checked?e[s]=t[s]:e[s]=[];const o=this._formatValue(e,this.data);(0,d.r)(this,"value-changed",{value:o})}render(){const a=this.localize||this.hass.localize,e=this._homeAssistantItems(this.data,a),t=this._addonsItems(this.data,a,this._addonIcons),i=this._parseValue(this.value);return s.qy` ${e.length?s.qy` <div class="section"> <ha-formfield> <ha-backup-formfield-label slot="label" label="Home Assistant" .iconPath="${h.mdiHomeAssistant}"> </ha-backup-formfield-label> <ha-checkbox .id="${"homeassistant"}" .checked="${i.homeassistant.length===e.length}" .indeterminate="${i.homeassistant.length>0&&i.homeassistant.length<e.length}" @change="${this._sectionChanged}" ?disabled="${this.requiredItems.length>0}"></ha-checkbox> </ha-formfield> <div class="items"> ${e.map(a=>s.qy` <ha-formfield> <ha-backup-formfield-label slot="label" .label="${a.label}" .version="${a.version}" .iconPath="${u[a.id]||p}"> </ha-backup-formfield-label> <ha-checkbox .id="${a.id}" .checked="${i.homeassistant.includes(a.id)}" @change="${this._homeassistantChanged}" .disabled="${this.requiredItems.includes(a.id)}"></ha-checkbox> </ha-formfield> `)} </div> </div> `:s.s6} ${t.length?s.qy` <div class="section"> <ha-formfield> <ha-backup-formfield-label slot="label" .label="${a(`ui.panel.${this.translationKeyPanel}.data_picker.addons`)}" .iconPath="${"M20.5,11H19V7C19,5.89 18.1,5 17,5H13V3.5A2.5,2.5 0 0,0 10.5,1A2.5,2.5 0 0,0 8,3.5V5H4A2,2 0 0,0 2,7V10.8H3.5C5,10.8 6.2,12 6.2,13.5C6.2,15 5,16.2 3.5,16.2H2V20A2,2 0 0,0 4,22H7.8V20.5C7.8,19 9,17.8 10.5,17.8C12,17.8 13.2,19 13.2,20.5V22H17A2,2 0 0,0 19,20V16H20.5A2.5,2.5 0 0,0 23,13.5A2.5,2.5 0 0,0 20.5,11Z"}"> </ha-backup-formfield-label> <ha-checkbox .id="${"addons"}" .checked="${i.addons.length===t.length}" .indeterminate="${i.addons.length>0&&i.addons.length<t.length}" @change="${this._sectionChanged}" .disabled="${this.addonsDisabled}"></ha-checkbox> </ha-formfield> <ha-backup-addons-picker .hass="${this.hass}" .value="${i.addons}" @value-changed="${this._addonsChanged}" .addons="${t}" .disabled="${this.addonsDisabled}"> </ha-backup-addons-picker> </div> `:s.s6} `}constructor(...a){super(...a),this.requiredItems=[],this.translationKeyPanel="config.backup",this.addonsDisabled=!1,this._addonIcons={},this._homeAssistantItems=(0,n.A)((a,e)=>{const t=[];return a.homeassistant_included&&t.push({label:e(`ui.panel.${this.translationKeyPanel}.data_picker.${a.database_included?"settings_and_history":"settings"}`),id:"config",version:a.homeassistant_version}),t.push(...a.folders.map(a=>({label:this._localizeFolder(a),id:a}))),t}),this._addonsItems=(0,n.A)((a,e,t)=>a.addons.map(a=>({name:a.name,slug:a.slug,version:a.version,icon:t[a.slug]}))),this._parseValue=(0,n.A)(a=>{if(!a)return{homeassistant:[],addons:[]};const e=[],t=[];a.homeassistant_included&&e.push("config");const i=a.folders;e.push(...i);const s=a.addons.map(a=>a.slug);return t.push(...s),{homeassistant:e,addons:t}}),this._formatValue=(0,n.A)((a,e)=>({homeassistant_version:e.homeassistant_version,homeassistant_included:a.homeassistant.includes("config"),database_included:e.database_included&&a.homeassistant.includes("config"),addons:e.addons.filter(e=>a.addons.includes(e.slug)),folders:e.folders.filter(e=>a.homeassistant.includes(e))}))}}m.styles=s.AH`.section{margin-left:-16px;margin-inline-start:-16px;margin-inline-end:initial}.items{padding-left:40px;padding-inline-start:40px;padding-inline-end:initial;display:flex;flex-direction:column}ha-backup-addons-picker{display:block;padding-left:40px;padding-inline-start:40px;padding-inline-end:initial}`,(0,i.__decorate)([(0,o.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],m.prototype,"data",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],m.prototype,"value",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],m.prototype,"localize",void 0),(0,i.__decorate)([(0,o.MZ)({type:Array,attribute:"required-items"})],m.prototype,"requiredItems",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:"translation-key-panel"})],m.prototype,"translationKeyPanel",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean,attribute:!1})],m.prototype,"addonsDisabled",void 0),(0,i.__decorate)([(0,o.wk)()],m.prototype,"_addonIcons",void 0),m=(0,i.__decorate)([(0,o.EM)("ha-backup-data-picker")],m)},34540:function(a,e,t){t.a(a,async function(a,e){try{var i=t(69868),s=t(65940),o=t(84922),n=t(22019),l=(t(70490),t(97750),t(99260),t(17372)),d=(t(85404),t(44017)),r=a([l]);l=(r.then?(await r)():r)[0];class c extends o.WF{willUpdate(){!this.hasUpdated&&this.haRequired&&(this._selectedData={homeassistant_included:!0,folders:[],addons:[],homeassistant_version:this.backup.homeassistant_version,database_included:this.backup.database_included})}render(){return o.qy` <ha-card> <div class="card-header"> ${this.localize(`ui.panel.${this.translationKeyPanel}.details.restore.title`)} </div> <div class="card-content"> <ha-backup-data-picker .translationKeyPanel="${this.translationKeyPanel}" .localize="${this.localize}" .hass="${this.hass}" .data="${this.backup}" .value="${this._selectedData}" @value-changed="${this._selectedBackupChanged}" .requiredItems="${this._isHomeAssistantRequired(this.haRequired)}"> </ha-backup-data-picker> </div> <div class="card-actions"> <ha-button @click="${this._restore}" .disabled="${this._isRestoreDisabled}" variant="danger" appearance="plain"> ${this.localize(`ui.panel.${this.translationKeyPanel}.details.restore.action`)} </ha-button> </div> </ha-card> `}_restore(){(0,d.r)(this,"backup-restore",{selectedData:this._selectedData})}_selectedBackupChanged(a){a.stopPropagation(),this._selectedData=a.detail.value}get _isRestoreDisabled(){return!this._selectedData||this.haRequired&&!this._selectedData.homeassistant_included||!(this._selectedData?.database_included||this._selectedData?.homeassistant_included||this._selectedData.addons.length||this._selectedData.folders.length)}constructor(...a){super(...a),this.haRequired=!1,this.translationKeyPanel="config.backup",this._isHomeAssistantRequired=(0,s.A)(a=>a?["config"]:[])}}c.styles=o.AH`:host{max-width:690px;width:100%;margin:0 auto;gap:24px;display:grid}.card-content{padding:0 20px}.card-actions{display:flex;justify-content:flex-end}ha-md-list{background:0 0;padding:0}ha-md-list-item{--md-list-item-leading-space:0;--md-list-item-trailing-space:0;--md-list-item-two-line-container-height:64px}ha-md-list-item [slot=supporting-text]{display:flex;align-items:center;flex-direction:row;gap:8px;line-height:var(--ha-line-height-condensed)}`,(0,i.__decorate)([(0,n.MZ)({attribute:!1})],c.prototype,"hass",void 0),(0,i.__decorate)([(0,n.MZ)({attribute:!1})],c.prototype,"localize",void 0),(0,i.__decorate)([(0,n.MZ)({type:Object})],c.prototype,"backup",void 0),(0,i.__decorate)([(0,n.MZ)({type:Boolean,attribute:"ha-required"})],c.prototype,"haRequired",void 0),(0,i.__decorate)([(0,n.MZ)({attribute:"translation-key-panel"})],c.prototype,"translationKeyPanel",void 0),(0,i.__decorate)([(0,n.wk)()],c.prototype,"_selectedData",void 0),c=(0,i.__decorate)([(0,n.EM)("ha-backup-details-restore")],c),e()}catch(a){e(a)}})},65062:function(a,e,t){t.a(a,async function(a,e){try{t(99342),t(65315),t(37089);var i=t(69868),s=t(84922),o=t(22019),n=t(6149),l=t(35297),d=(t(94124),t(70490),t(97750),t(99260),t(71598)),r=t(75705),c=a([n,d]);[n,d]=c.then?(await c)():c;class h extends s.WF{render(){const a=new Date(this.backup.date),e=(0,n.r6)(a,this.hass.locale,this.hass.config),t=[];return this.backup.failed_addons?.length&&t.push({title:this.hass.localize("ui.panel.config.backup.details.summary.error.failed_addons"),items:this.backup.failed_addons.map(a=>`${a.name||a.slug} (${a.version})`)}),this.backup.failed_folders?.length&&t.push({title:this.hass.localize("ui.panel.config.backup.details.summary.error.failed_folders"),items:this.backup.failed_folders.map(a=>this._localizeFolder(a))}),s.qy` <ha-card> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.details.summary.title")} </div> <div class="card-content"> ${t.length?this._renderErrorSummary(t):s.s6} <ha-md-list class="summary"> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.backup_type")} </span> <span slot="supporting-text"> ${this.hass.localize(`ui.panel.config.backup.type.${(0,d.sp)(this.backup,this.isHassio)}`)} </span> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.details.summary.size")} </span> <span slot="supporting-text"> ${(0,r.A)((0,d.v3)(this.backup))} </span> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.details.summary.created")} </span> <span slot="supporting-text">${e}</span> </ha-md-list-item> </ha-md-list> </div> </ha-card> `}_renderErrorSummary(a){return s.qy` <ha-alert alert-type="error" .title="${this.hass.localize("ui.panel.config.backup.details.summary.error.title")}"> ${a.map(({title:a,items:e})=>s.qy` <br> <b>${a}:</b> <ul> ${e.map(a=>s.qy`<li>${a}</li>`)} </ul> `)} </ha-alert> `}_localizeFolder(a){switch(a){case"media":return this.hass.localize("ui.panel.config.backup.data_picker.media");case"share":return this.hass.localize("ui.panel.config.backup.data_picker.share_folder");case"ssl":return this.hass.localize("ui.panel.config.backup.data_picker.ssl");case"addons/local":return this.hass.localize("ui.panel.config.backup.data_picker.local_addons")}return(0,l.Z)(a)}constructor(...a){super(...a),this.isHassio=!1}}h.styles=s.AH`:host{max-width:690px;width:100%;margin:0 auto;gap:24px;display:grid}.card-content{padding:0 20px}.card-actions{display:flex;justify-content:flex-end}ha-md-list{background:0 0;padding:0}ha-md-list-item{--md-list-item-leading-space:0;--md-list-item-trailing-space:0;--md-list-item-two-line-container-height:64px}ha-md-list.summary ha-md-list-item{--md-list-item-supporting-text-size:1rem;--md-list-item-label-text-size:0.875rem;--md-list-item-label-text-color:var(--secondary-text-color);--md-list-item-supporting-text-color:var(--primary-text-color)}ha-md-list-item [slot=supporting-text]{display:flex;align-items:center;flex-direction:row;gap:8px;line-height:var(--ha-line-height-condensed)}`,(0,i.__decorate)([(0,o.MZ)({attribute:!1})],h.prototype,"hass",void 0),(0,i.__decorate)([(0,o.MZ)({type:Object})],h.prototype,"backup",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean,attribute:"hassio"})],h.prototype,"isHassio",void 0),h=(0,i.__decorate)([(0,o.EM)("ha-backup-details-summary")],h),e()}catch(a){e(a)}})},36892:function(a,e,t){var i=t(69868),s=t(84922),o=t(22019);t(86160);class n extends s.WF{render(){return s.qy` ${this.imageUrl?s.qy`<img loading="lazy" alt="" src="${this.imageUrl}" class="icon">`:this.iconPath?s.qy` <ha-svg-icon .path="${this.iconPath}" class="icon"></ha-svg-icon> `:s.s6} <span class="label"> ${this.label} ${this.version?s.qy`<span class="version">(${this.version})</span>`:s.s6} </span> `}}n.styles=s.AH`:host{display:flex;flex-direction:row;gap:16px;align-items:center}.label{margin-right:4px;margin-inline-end:4px;margin-inline-start:initial;font-size:var(--ha-font-size-m);font-weight:var(--ha-font-weight-normal);line-height:var(--ha-line-height-normal);letter-spacing:.5px}.version{color:var(--secondary-text-color)}.icon{--mdi-icon-size:24px;width:24px;height:24px}`,(0,i.__decorate)([(0,o.MZ)({type:String})],n.prototype,"label",void 0),(0,i.__decorate)([(0,o.MZ)({type:String,attribute:"image-url"})],n.prototype,"imageUrl",void 0),(0,i.__decorate)([(0,o.MZ)({type:String,attribute:"icon-path"})],n.prototype,"iconPath",void 0),(0,i.__decorate)([(0,o.MZ)({type:String})],n.prototype,"version",void 0),n=(0,i.__decorate)([(0,o.EM)("ha-backup-formfield-label")],n)},84601:function(a,e,t){t.d(e,{Y:()=>o});var i=t(44017);const s=()=>Promise.all([t.e("79543"),t.e("95518")]).then(t.bind(t,44973)),o=(a,e)=>{(0,i.r)(a,"show-dialog",{dialogTag:"ha-dialog-restore-backup",dialogImport:s,dialogParams:e})}},24105:function(a,e,t){t.a(a,async function(a,i){try{t.r(e);t(65315),t(837),t(37089);var s=t(69868),o=t(84922),n=t(22019),l=t(88341),d=t(77240),r=(t(94124),t(17372)),c=(t(78918),t(70490),t(77208),t(96635)),h=(t(9058),t(77510),t(97750),t(99260),t(65062)),p=t(34540),u=t(71598),m=(t(41564),t(71522)),g=t(84601),_=t(44017),b=t(15241),y=t(90863),f=t(26946),k=a([r,c,h,p,y,u]);[r,c,h,p,y,u]=k.then?(await k)():k;const v="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",$="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",x="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",A="M6,2H18A2,2 0 0,1 20,4V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2M12,4A6,6 0 0,0 6,10C6,13.31 8.69,16 12.1,16L11.22,13.77C10.95,13.29 11.11,12.68 11.59,12.4L12.45,11.9C12.93,11.63 13.54,11.79 13.82,12.27L15.74,14.69C17.12,13.59 18,11.9 18,10A6,6 0 0,0 12,4M12,9A1,1 0 0,1 13,10A1,1 0 0,1 12,11A1,1 0 0,1 11,10A1,1 0 0,1 12,9M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M12.09,13.27L14.58,19.58L17.17,18.08L12.95,12.77L12.09,13.27Z",H="M4,5C2.89,5 2,5.89 2,7V17C2,18.11 2.89,19 4,19H20C21.11,19 22,18.11 22,17V7C22,5.89 21.11,5 20,5H4M4.5,7A1,1 0 0,1 5.5,8A1,1 0 0,1 4.5,9A1,1 0 0,1 3.5,8A1,1 0 0,1 4.5,7M7,7H20V17H7V7M8,8V16H11V8H8M12,8V16H15V8H12M16,8V16H19V8H16M9,9H10V10H9V9M13,9H14V10H13V9M17,9H18V10H17V9Z",M=a=>{const e=Object.keys(a.agents),t=a.failed_agent_ids??[];return[...e.filter(a=>!t.includes(a)),...t].map(e=>({...a.agents[e]??{protected:!1,size:0},id:e,success:!t.includes(e)})).sort((a,e)=>(0,u.yj)(a.id,e.id))};class V extends o.WF{firstUpdated(a){super.firstUpdated(a),this.backupId?this._fetchBackup():this._error="Backup id not defined"}render(){if(!this.hass)return o.s6;const a=(0,f.x)(this.hass,"hassio");return o.qy` <hass-subpage back-path="/config/backup/backups" .hass="${this.hass}" .narrow="${this.narrow}" .header="${this._backup?.name||this.hass.localize("ui.panel.config.backup.details.header")}"> <ha-button-menu slot="toolbar-icon" @action="${this._handleAction}"> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${$}"></ha-icon-button> <ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="${x}"></ha-svg-icon> ${this.hass.localize("ui.common.download")} </ha-list-item> <ha-list-item graphic="icon" class="warning"> <ha-svg-icon slot="graphic" .path="${v}"></ha-svg-icon> ${this.hass.localize("ui.common.delete")} </ha-list-item> </ha-button-menu> <div class="content"> ${this._error&&o.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`} ${null===this._backup?o.qy` <ha-alert alert-type="warning" .title="${this.hass.localize("ui.panel.config.backup.details.not_found")}"> ${this.hass.localize("ui.panel.config.backup.details.not_found_description",{backupId:this.backupId})} </ha-alert> `:this._backup?o.qy` <ha-backup-details-summary .backup="${this._backup}" .hass="${this.hass}" .localize="${this.hass.localize}" .isHassio="${a}"></ha-backup-details-summary> <ha-backup-details-restore .backup="${this._backup}" @backup-restore="${this._restore}" .hass="${this.hass}" .localize="${this.hass.localize}"></ha-backup-details-restore> <ha-card> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.details.locations.title")} </div> <div class="card-content"> <ha-md-list> ${this._agents.map(a=>{const e=a.id,t=(0,l.m)(e),i=(0,u.q7)(this.hass.localize,e,this.agents),s=a.success,n=!a.success,d=!a.protected;return o.qy` <ha-md-list-item> ${(0,u.Bi)(e)?o.qy` <ha-svg-icon .path="${A}" slot="start"> </ha-svg-icon> `:(0,u.jU)(e)?o.qy` <ha-svg-icon .path="${H}" slot="start"></ha-svg-icon> `:o.qy` <img .src="${(0,m.MR)({domain:t,type:"icon",useFallback:!0,darkOptimized:this.hass.themes?.darkMode})}" crossorigin="anonymous" referrerpolicy="no-referrer" alt="${`${t} logo`}" slot="start"> `} <div slot="headline">${i}</div> <div slot="supporting-text"> ${n?o.qy` <span class="dot error"></span> <span> ${this.hass.localize("ui.panel.config.backup.details.locations.backup_failed")} </span> `:d?o.qy` <span class="dot warning"></span> <span> ${this.hass.localize("ui.panel.config.backup.details.locations.unencrypted")}</span> `:o.qy` <span class="dot success"></span> <span>${this.hass.localize("ui.panel.config.backup.details.locations.encrypted")}</span> `} </div>  ${s?o.qy` <ha-button-menu slot="end" @action="${this._handleAgentAction}" .agent="${e}" fixed> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${$}"></ha-icon-button> <ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="${x}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.backup.details.locations.download")} </ha-list-item> </ha-button-menu> `:o.s6} </ha-md-list-item> `})} </ha-md-list> </div> </ha-card> `:o.qy`<ha-fade-in .delay="${1e3}"><ha-spinner></ha-spinner></ha-fade-in>`} </div> </hass-subpage> `}_restore(a){this._backup&&a.detail.selectedData&&(0,g.Y)(this,{backup:this._backup,selectedData:a.detail.selectedData})}async _fetchBackup(){try{const a=await(0,u.zZ)(this.hass,this.backupId);this._backup=a.backup,this._agents=M(a.backup)}catch(a){this._error=a?.message||this.hass.localize("ui.panel.config.backup.details.error")}}_handleAction(a){switch(a.detail.index){case 0:this._downloadBackup();break;case 1:this._deleteBackup()}}_handleAgentAction(a){const e=a.currentTarget.agent;this._downloadBackup(e)}async _downloadBackup(a){await(0,y.$)(this.hass,this,this._backup,this.config,a)}async _deleteBackup(){await(0,b.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.backup.dialogs.delete.title"),text:this.hass.localize("ui.panel.config.backup.dialogs.delete.text"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0})&&(await(0,u.mu)(this.hass,this._backup.backup_id),(0,_.r)(this,"ha-refresh-backup-info"),(0,d.o)("/config/backup"))}constructor(...a){super(...a),this.narrow=!1,this.agents=[],this._agents=[]}}V.styles=o.AH`.content{padding:28px 20px 0;max-width:690px;margin:0 auto;gap:24px;display:grid;margin-bottom:24px}ha-spinner{margin:24px auto}.card-content{padding:0 20px}.card-actions{display:flex;justify-content:flex-end}ha-md-list{background:0 0;padding:0}ha-md-list-item{--md-list-item-leading-space:0;--md-list-item-trailing-space:0;--md-list-item-two-line-container-height:64px}ha-md-list-item img{width:48px}ha-md-list-item ha-svg-icon[slot=start]{--mdc-icon-size:48px;color:var(--primary-text-color)}.warning{color:var(--error-color)}.warning ha-svg-icon{color:var(--error-color)}ha-button.danger{--mdc-theme-primary:var(--error-color)}ha-md-list-item [slot=supporting-text]{display:flex;align-items:center;flex-direction:row;gap:8px;line-height:var(--ha-line-height-condensed)}.dot{display:block;position:relative;width:8px;height:8px;background-color:var(--disabled-color);border-radius:50%;flex:none}.dot.success{background-color:var(--success-color)}.dot.warning{background-color:var(--warning-color)}.dot.error{background-color:var(--error-color)}.card-header{padding-bottom:8px}`,(0,s.__decorate)([(0,n.MZ)({attribute:!1})],V.prototype,"hass",void 0),(0,s.__decorate)([(0,n.MZ)({type:Boolean})],V.prototype,"narrow",void 0),(0,s.__decorate)([(0,n.MZ)({attribute:"backup-id"})],V.prototype,"backupId",void 0),(0,s.__decorate)([(0,n.MZ)({attribute:!1})],V.prototype,"config",void 0),(0,s.__decorate)([(0,n.MZ)({attribute:!1})],V.prototype,"agents",void 0),(0,s.__decorate)([(0,n.wk)()],V.prototype,"_backup",void 0),(0,s.__decorate)([(0,n.wk)()],V.prototype,"_agents",void 0),(0,s.__decorate)([(0,n.wk)()],V.prototype,"_error",void 0),V=(0,s.__decorate)([(0,n.EM)("ha-config-backup-details")],V),i()}catch(a){i(a)}})}};
//# sourceMappingURL=42418.94cf13138c4014cb.js.map