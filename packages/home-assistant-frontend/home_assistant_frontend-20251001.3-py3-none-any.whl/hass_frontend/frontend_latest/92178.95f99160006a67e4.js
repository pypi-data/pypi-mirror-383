export const __webpack_id__="92178";export const __webpack_ids__=["92178"];export const __webpack_modules__={4681:function(t,e,n){n.d(e,{L:()=>i});var a=n(49418),o=n(27554);function i(t,e,n){return(0,a.A)(t,e*o.s0,n)}},49418:function(t,e,n){n.d(e,{A:()=>i});var a=n(67874),o=n(19490);function i(t,e,n){return(0,a.w)(n?.in||t,+(0,o.a)(t)+e)}},38227:function(t,e,n){n.d(e,{z:()=>o});var a=n(19490);function o(t,e){const n=+(0,a.a)(t)-+(0,a.a)(e);return n<0?-1:n>0?1:n}},99904:function(t,e,n){n.d(e,{W:()=>l});var a=n(90298),o=n(38227);function i(t,e,n){const[o,i]=(0,a.x)(n?.in,t,e);return 12*(o.getFullYear()-i.getFullYear())+(o.getMonth()-i.getMonth())}var r=n(78320);function l(t,e,n){const[l,u,s]=(0,a.x)(n?.in,t,t,e),c=(0,o.z)(u,s),d=Math.abs(i(u,s));if(d<1)return 0;1===u.getMonth()&&u.getDate()>27&&u.setDate(30),u.setMonth(u.getMonth()-c*d);let g=(0,o.z)(u,s)===-c;(0,r.c)(l)&&1===d&&1===(0,o.z)(l,s)&&(g=!1);const y=c*(d-+g);return 0===y?0:y}},44943:function(t,e,n){n.d(e,{j:()=>o});var a=n(19490);function o(t,e){const n=(0,a.a)(t,e?.in),o=n.getMonth(),i=o-o%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}},25223:function(t,e,n){n.d(e,{$:()=>i});var a=n(6223),o=n(19490);function i(t,e){const n=(0,a.q)(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=(0,o.a)(t,e?.in),l=r.getDay(),u=6+(l<i?-7:0)-(l-i);return r.setDate(r.getDate()+u),r.setHours(23,59,59,999),r}},93910:function(t,e,n){n.d(e,{Q:()=>o});var a=n(19490);function o(t,e){const n=(0,a.a)(t,e?.in),o=n.getFullYear();return n.setFullYear(o+1,0,0),n.setHours(23,59,59,999),n}},80850:function(t,e,n){n.d(e,{e:()=>o});var a=n(19490);function o(t,e){return 1===(0,a.a)(t,e?.in).getDate()}},83466:function(t,e,n){n.d(e,{w:()=>o});var a=n(19490);function o(t,e){const n=(0,a.a)(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}},47432:function(t,e,n){n.d(e,{a:()=>o});var a=n(19490);function o(t,e){const n=(0,a.a)(t,e?.in),o=n.getMonth(),i=o-o%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}},13486:function(t,e,n){n.d(e,{e:()=>o});var a=n(91927);function o(t,e,n){return(0,a.f)(t,-e,n)}},4494:function(t,e,n){n.d(e,{O:()=>o});var a=n(4681);function o(t,e,n){return(0,a.L)(t,-e,n)}},11042:function(t,e,n){n.d(e,{a:()=>o});var a=n(9151);function o(t,e,n){return(0,a.P)(t,-e,n)}},56425:function(t,e,n){n.d(e,{a:()=>X});n(75846);var a=n(69868),o=n(24868),i=n(38151),r=n(63190),l=n(71395),u=n(29803),s=n(92712),c=n(85337),d=n(65611),g=n(14267),y=n(83107),f=n(22503),h=n(52255),p=n(93864),v=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},x=function(t){function e(e){return t.call(this,e)||this}return(0,a.__extends)(e,t),e.prototype.getDefaultShape=function(){return new v},e.prototype.buildPath=function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},e.prototype.highlight=function(){(0,s.HY)(this)},e.prototype.downplay=function(){(0,s.SD)(this)},e}(o.Ay),m=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new i.A,n._focusAdjacencyDisabled=!1,n}return(0,a.__extends)(e,t),e.prototype.init=function(t,e){this._controller=new f.A(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,e,n){var a=this,o=t.getGraph(),i=this._mainGroup,l=t.layoutInfo,c=l.width,f=l.height,p=t.getData(),v=t.getData("edge"),m=t.get("orient");this._model=t,i.removeAll(),i.x=l.x,i.y=l.y,this._updateViewCoordSys(t,n),h.c$(t,n,i,this._controller,this._controllerHost,null),o.eachEdge(function(e){var n=new x,a=(0,g.z)(n);a.dataIndex=e.dataIndex,a.seriesIndex=t.seriesIndex,a.dataType="edge";var o,r,l,u,h,p,V,b,M=e.getModel(),_=M.getModel("lineStyle"),w=_.get("curveness"),S=e.node1.getLayout(),I=e.node1.getModel(),D=I.get("localX"),T=I.get("localY"),z=e.node2.getLayout(),A=e.node2.getModel(),E=A.get("localX"),k=A.get("localY"),C=e.getLayout();n.shape.extent=Math.max(1,C.dy),n.shape.orient=m,"vertical"===m?(o=(null!=D?D*c:S.x)+C.sy,r=(null!=T?T*f:S.y)+S.dy,l=(null!=E?E*c:z.x)+C.ty,h=o,p=r*(1-w)+(u=null!=k?k*f:z.y)*w,V=l,b=r*w+u*(1-w)):(o=(null!=D?D*c:S.x)+S.dx,r=(null!=T?T*f:S.y)+C.sy,h=o*(1-w)+(l=null!=E?E*c:z.x)*w,p=r,V=o*w+l*(1-w),b=u=(null!=k?k*f:z.y)+C.ty),n.setShape({x1:o,y1:r,x2:l,y2:u,cpx1:h,cpy1:p,cpx2:V,cpy2:b}),n.useStyle(_.getItemStyle()),L(n.style,m,e);var O=""+M.get("value"),H=(0,d.lx)(M,"edgeLabel");(0,d.qM)(n,H,{labelFetcher:{getFormattedLabel:function(e,n,a,o,i,r){return t.getFormattedLabel(e,n,"edge",o,(0,y.retrieve3)(i,H.normal&&H.normal.get("formatter"),O),r)}},labelDataIndex:e.dataIndex,defaultText:O}),n.setTextConfig({position:"inside"});var j=M.getModel("emphasis");(0,s.Mx)(n,M,"lineStyle",function(t){var n=t.getItemStyle();return L(n,m,e),n}),i.add(n),v.setItemGraphicEl(e.dataIndex,n);var G=j.get("focus");(0,s.Lm)(n,"adjacency"===G?e.getAdjacentDataIndices():"trajectory"===G?e.getTrajectoryDataIndices():G,j.get("blurScope"),j.get("disabled"))}),o.eachNode(function(e){var n=e.getLayout(),a=e.getModel(),o=a.get("localX"),l=a.get("localY"),u=a.getModel("emphasis"),y=a.get(["itemStyle","borderRadius"])||0,h=new r.A({shape:{x:null!=o?o*c:n.x,y:null!=l?l*f:n.y,width:n.dx,height:n.dy,r:y},style:a.getModel("itemStyle").getItemStyle(),z2:10});(0,d.qM)(h,(0,d.lx)(a),{labelFetcher:{getFormattedLabel:function(e,n){return t.getFormattedLabel(e,n,"node")}},labelDataIndex:e.dataIndex,defaultText:e.id}),h.disableLabelAnimation=!0,h.setStyle("fill",e.getVisual("color")),h.setStyle("decal",e.getVisual("style").decal),(0,s.Mx)(h,a),i.add(h),p.setItemGraphicEl(e.dataIndex,h),(0,g.z)(h).dataType="node";var v=u.get("focus");(0,s.Lm)(h,"adjacency"===v?e.getAdjacentDataIndices():"trajectory"===v?e.getTrajectoryDataIndices():v,u.get("blurScope"),u.get("disabled"))}),p.eachItemGraphicEl(function(e,o){p.getItemModel(o).get("draggable")&&(e.drift=function(e,i){a._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=i,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:p.getRawIndex(o),localX:this.shape.x/c,localY:this.shape.y/f})},e.ondragend=function(){a._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move")}),!this._data&&t.isAnimationEnabled()&&i.setClipPath(function(t,e,n){var a=new r.A({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return u.LW(a,{shape:{width:t.width+20}},e,n),a}(i.getBoundingRect(),t,function(){i.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._updateViewCoordSys=function(t,e){var n=t.layoutInfo,a=n.width,o=n.height,i=t.coordinateSystem=new p.A(null,{api:e,ecModel:t.ecModel});i.zoomLimit=t.get("scaleLimit"),i.setBoundingRect(0,0,a,o),i.setCenter(t.get("center")),i.setZoom(t.get("zoom")),this._controllerHost.target.attr({x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY})},e.type="sankey",e}(c.A);function L(t,e,n){switch(t.fill){case"source":t.fill=n.node1.getVisual("color"),t.decal=n.node1.getVisual("style").decal;break;case"target":t.fill=n.node2.getVisual("color"),t.decal=n.node2.getVisual("style").decal;break;case"gradient":var a=n.node1.getVisual("color"),o=n.node2.getVisual("color");(0,y.isString)(a)&&(0,y.isString)(o)&&(t.fill=new l.A(0,0,+("horizontal"===e),+("vertical"===e),[{color:a,offset:0},{color:o,offset:1}]))}}const V=m;var b=n(3140),M=n(29366),_=n(64365),w=n(92548),S=n(41076),I=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return(0,a.__extends)(e,t),e.prototype.getInitialData=function(t,e){var n=t.edges||t.links||[],a=t.data||t.nodes||[],o=t.levels||[];this.levelModels=[];for(var i=this.levelModels,r=0;r<o.length;r++)null!=o[r].depth&&o[r].depth>=0&&(i[o[r].depth]=new _.A(o[r],this,e));return(0,M.A)(a,n,this,!0,function(t,e){t.wrapMethod("getItemModel",function(t,e){var n=t.parentModel,a=n.getData().getItemLayout(e);if(a){var o=a.depth,i=n.levelModels[o];i&&(t.parentModel=i)}return t}),e.wrapMethod("getItemModel",function(t,e){var n=t.parentModel,a=n.getGraph().getEdgeByIndex(e).node1.getLayout();if(a){var o=a.depth,i=n.levelModels[o];i&&(t.parentModel=i)}return t})}).data},e.prototype.setNodePosition=function(t,e){var n=(this.option.data||this.option.nodes)[t];n.localX=e[0],n.localY=e[1]},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,e,n){function a(t){return isNaN(t)||null==t}if("edge"===n){var o=this.getDataParams(t,n),i=o.data,r=o.value,l=i.source+" -- "+i.target;return(0,w.Qx)("nameValue",{name:l,value:r,noValue:a(r)})}var u=this.getGraph().getNodeByIndex(t).getLayout().value,s=this.getDataParams(t,n).data.name;return(0,w.Qx)("nameValue",{name:null!=s?s+"":null,value:u,noValue:a(u)})},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(e,n){var a=t.prototype.getDataParams.call(this,e,n);if(null==a.value&&"node"===n){var o=this.getGraph().getNodeByIndex(e).getLayout().value;a.value=o}return a},e.type="series.sankey",e.layoutMode="box",e.defaultOption={z:2,coordinateSystemUsage:"box",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,roam:!1,roamTrigger:"global",center:null,zoom:1,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:S.A.color.neutral50,opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:S.A.color.primary}},animationEasing:"linear",animationDuration:1e3},e}(b.A);const D=I;n(99342);var T=n(88425),z=n(41160);function A(t,e){t.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),a=t.get("nodeGap"),o=(0,z.Lj)(t,e).refContainer,i=(0,z.dV)(t.getBoxLayoutParams(),o);t.layoutInfo=i;var r=i.width,l=i.height,u=t.getGraph(),s=u.nodes,c=u.edges;!function(t){y.each(t,function(t){var e=Y(t.outEdges,P),n=Y(t.inEdges,P),a=t.getValue()||0,o=Math.max(e,n,a);t.setLayout({value:o},!0)})}(s),function(t,e,n,a,o,i,r,l,u){(function(t,e,n,a,o,i,r){for(var l=[],u=[],s=[],c=[],d=0,g=0;g<e.length;g++)l[g]=1;for(g=0;g<t.length;g++)u[g]=t[g].inEdges.length,0===u[g]&&s.push(t[g]);var f=-1;for(;s.length;){for(var h=0;h<s.length;h++){var p=s[h],v=p.hostGraph.data.getRawDataItem(p.dataIndex),x=null!=v.depth&&v.depth>=0;x&&v.depth>f&&(f=v.depth),p.setLayout({depth:x?v.depth:d},!0),"vertical"===i?p.setLayout({dy:n},!0):p.setLayout({dx:n},!0);for(var m=0;m<p.outEdges.length;m++){var L=p.outEdges[m];l[e.indexOf(L)]=0;var V=L.node2;0===--u[t.indexOf(V)]&&c.indexOf(V)<0&&c.push(V)}}++d,s=c,c=[]}for(g=0;g<l.length;g++)if(1===l[g])throw new Error("Sankey is a DAG, the original data has cycle!");var b=f>d-1?f:d-1;r&&"left"!==r&&function(t,e,n,a){if("right"===e){for(var o=[],i=t,r=0;i.length;){for(var l=0;l<i.length;l++){var u=i[l];u.setLayout({skNodeHeight:r},!0);for(var s=0;s<u.inEdges.length;s++){var c=u.inEdges[s];o.indexOf(c.node1)<0&&o.push(c.node1)}}i=o,o=[],++r}y.each(t,function(t){E(t)||t.setLayout({depth:Math.max(0,a-t.getLayout().skNodeHeight)},!0)})}else"justify"===e&&function(t,e){y.each(t,function(t){E(t)||t.outEdges.length||t.setLayout({depth:e},!0)})}(t,a)}(t,r,0,b);var M="vertical"===i?(o-n)/b:(a-n)/b;!function(t,e,n){y.each(t,function(t){var a=t.getLayout().depth*e;"vertical"===n?t.setLayout({y:a},!0):t.setLayout({x:a},!0)})}(t,M,i)})(t,e,n,o,i,l,u),function(t,e,n,a,o,i,r){var l=function(t,e){var n=[],a="vertical"===e?"y":"x",o=(0,T.Sq)(t,function(t){return t.getLayout()[a]});return o.keys.sort(function(t,e){return t-e}),y.each(o.keys,function(t){n.push(o.buckets.get(t))}),n}(t,r);(function(t,e,n,a,o,i){var r=1/0;y.each(t,function(t){var e=t.length,l=0;y.each(t,function(t){l+=t.getLayout().value});var u="vertical"===i?(a-(e-1)*o)/l:(n-(e-1)*o)/l;u<r&&(r=u)}),y.each(t,function(t){y.each(t,function(t,e){var n=t.getLayout().value*r;"vertical"===i?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))})}),y.each(e,function(t){var e=+t.getValue()*r;t.setLayout({dy:e},!0)})})(l,e,n,a,o,r),k(l,o,n,a,r);for(var u=1;i>0;i--)C(l,u*=.99,r),k(l,o,n,a,r),F(l,u,r),k(l,o,n,a,r)}(t,e,i,o,a,r,l),function(t,e){var n="vertical"===e?"x":"y";y.each(t,function(t){t.outEdges.sort(function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]}),t.inEdges.sort(function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]})}),y.each(t,function(t){var e=0,n=0;y.each(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),y.each(t.inEdges,function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy})})}(t,l)}(s,c,n,a,r,l,0!==y.filter(s,function(t){return 0===t.getLayout().value}).length?0:t.get("layoutIterations"),t.get("orient"),t.get("nodeAlign"))})}function E(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function k(t,e,n,a,o){var i="vertical"===o?"x":"y";y.each(t,function(t){var r,l,u;t.sort(function(t,e){return t.getLayout()[i]-e.getLayout()[i]});for(var s=0,c=t.length,d="vertical"===o?"dx":"dy",g=0;g<c;g++)(u=s-(l=t[g]).getLayout()[i])>0&&(r=l.getLayout()[i]+u,"vertical"===o?l.setLayout({x:r},!0):l.setLayout({y:r},!0)),s=l.getLayout()[i]+l.getLayout()[d]+e;if((u=s-e-("vertical"===o?a:n))>0){r=l.getLayout()[i]-u,"vertical"===o?l.setLayout({x:r},!0):l.setLayout({y:r},!0),s=r;for(g=c-2;g>=0;--g)(u=(l=t[g]).getLayout()[i]+l.getLayout()[d]+e-s)>0&&(r=l.getLayout()[i]-u,"vertical"===o?l.setLayout({x:r},!0):l.setLayout({y:r},!0)),s=l.getLayout()[i]}})}function C(t,e,n){y.each(t.slice().reverse(),function(t){y.each(t,function(t){if(t.outEdges.length){var a=Y(t.outEdges,O,n)/Y(t.outEdges,P);if(isNaN(a)){var o=t.outEdges.length;a=o?Y(t.outEdges,H,n)/o:0}if("vertical"===n){var i=t.getLayout().x+(a-N(t,n))*e;t.setLayout({x:i},!0)}else{var r=t.getLayout().y+(a-N(t,n))*e;t.setLayout({y:r},!0)}}})})}function O(t,e){return N(t.node2,e)*t.getValue()}function H(t,e){return N(t.node2,e)}function j(t,e){return N(t.node1,e)*t.getValue()}function G(t,e){return N(t.node1,e)}function N(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function P(t){return t.getValue()}function Y(t,e,n){for(var a=0,o=t.length,i=-1;++i<o;){var r=+e(t[i],n);isNaN(r)||(a+=r)}return a}function F(t,e,n){y.each(t,function(t){y.each(t,function(t){if(t.inEdges.length){var a=Y(t.inEdges,j,n)/Y(t.inEdges,P);if(isNaN(a)){var o=t.inEdges.length;a=o?Y(t.inEdges,G,n)/o:0}if("vertical"===n){var i=t.getLayout().x+(a-N(t,n))*e;t.setLayout({x:i},!0)}else{var r=t.getLayout().y+(a-N(t,n))*e;t.setLayout({y:r},!0)}}})})}var B=n(6014);function R(t){t.eachSeriesByType("sankey",function(t){var e=t.getGraph(),n=e.nodes,a=e.edges;if(n.length){var o=1/0,i=-1/0;y.each(n,function(t){var e=t.getLayout().value;e<o&&(o=e),e>i&&(i=e)}),y.each(n,function(e){var n=new B.A({type:"color",mappingMethod:"linear",dataExtent:[o,i],visual:t.get("color")}).mapValueToVisual(e.getLayout().value),a=e.getModel().get(["itemStyle","color"]);null!=a?(e.setVisual("color",a),e.setVisual("style",{fill:a})):(e.setVisual("color",n),e.setVisual("style",{fill:n}))})}a.length&&y.each(a,function(t){var e=t.getModel().get("lineStyle");t.setVisual("style",e)})})}function X(t){t.registerChartView(V),t.registerSeriesModel(D),t.registerLayout(A),t.registerVisual(R),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})}),t.registerAction({type:"sankeyRoam",event:"sankeyRoam",update:"none"},function(t,e,n){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){var n=e.coordinateSystem,a=(0,h.Ok)(n,t,e.get("scaleLimit"));e.setCenter(a.center),e.setZoom(a.zoom)})})}},6014:function(t,e,n){n.d(e,{A:()=>V});n(99342);var a=n(83107),o=n(73345),i=n(4955),r=a.each,l=a.isObject,u=-1,s=function(){function t(e){var n=e.mappingMethod,o=e.type,i=this.option=a.clone(e);this.type=o,this.mappingMethod=n,this._normalizeData=m[n];var l=t.visualHandlers[o];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._normalizedToVisual=l._normalizedToVisual[n],"piecewise"===n?(c(i),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,a.each(e,function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)})}(i)):"category"===n?i.categories?function(t){var e=t.categories,n=t.categoryMap={},o=t.visual;if(r(e,function(t,e){n[t]=e}),!a.isArray(o)){var i=[];a.isObject(o)?r(o,function(t,e){var a=n[e];i[null!=a?a:u]=t}):i[-1]=o,o=x(t,i)}for(var l=e.length-1;l>=0;l--)null==o[l]&&(delete n[e[l]],e.pop())}(i):c(i,!0):(a.assert("linear"!==n||i.dataExtent),c(i))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return a.bind(this._normalizeData,this)},t.listVisualTypes=function(){return a.keys(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,n){a.isObject(t)?a.each(t,e,n):e.call(n,t)},t.mapVisual=function(e,n,o){var i,r=a.isArray(e)?[]:a.isObject(e)?{}:(i=!0,null);return t.eachVisual(e,function(t,e){var a=n.call(o,t,e);i?r=a:r[e]=a}),r},t.retrieveVisuals=function(e){var n,a={};return e&&r(t.visualHandlers,function(t,o){e.hasOwnProperty(o)&&(a[o]=e[o],n=!0)}),n?a:null},t.prepareVisualTypes=function(t){if(a.isArray(t))t=t.slice();else{if(!l(t))return[];var e=[];r(t,function(t,n){e.push(n)}),t=e}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},t.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,n){for(var o,i=1/0,r=0,l=e.length;r<l;r++){var u=e[r].value;if(null!=u){if(u===t||a.isString(u)&&u===t+"")return r;n&&g(u,r)}}for(r=0,l=e.length;r<l;r++){var s=e[r],c=s.interval,d=s.close;if(c){if(c[0]===-1/0){if(L(d[1],t,c[1]))return r}else if(c[1]===1/0){if(L(d[0],c[0],t))return r}else if(L(d[0],c[0],t)&&L(d[1],t,c[1]))return r;n&&g(c[0],r),n&&g(c[1],r)}}if(n)return t===1/0?e.length-1:t===-1/0?0:o;function g(e,n){var a=Math.abs(e-t);a<i&&(i=a,o=n)}},t.visualHandlers={color:{applyVisual:y("color"),getColorMapper:function(){var t=this.option;return a.bind("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),f.call(this,t)}:function(e,n,a){var i=!!a;return!n&&(e=this._normalizeData(e)),a=o.fastLerp(e,t.parsedVisual,a),i?a:o.stringify(a,"rgba")},this)},_normalizedToVisual:{linear:function(t){return o.stringify(o.fastLerp(t,this.option.parsedVisual),"rgba")},category:f,piecewise:function(t,e){var n=v.call(this,e);return null==n&&(n=o.stringify(o.fastLerp(t,this.option.parsedVisual),"rgba")),n},fixed:h}},colorHue:d(function(t,e){return o.modifyHSL(t,e)}),colorSaturation:d(function(t,e){return o.modifyHSL(t,null,e)}),colorLightness:d(function(t,e){return o.modifyHSL(t,null,null,e)}),colorAlpha:d(function(t,e){return o.modifyAlpha(t,e)}),decal:{applyVisual:y("decal"),_normalizedToVisual:{linear:null,category:f,piecewise:null,fixed:null}},opacity:{applyVisual:y("opacity"),_normalizedToVisual:p([0,1])},liftZ:{applyVisual:y("liftZ"),_normalizedToVisual:{linear:h,category:h,piecewise:h,fixed:h}},symbol:{applyVisual:function(t,e,n){n("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:g,category:f,piecewise:function(t,e){var n=v.call(this,e);return null==n&&(n=g.call(this,t)),n},fixed:h}},symbolSize:{applyVisual:y("symbolSize"),_normalizedToVisual:p([0,1])}},t}();function c(t,e){var n=t.visual,o=[];a.isObject(n)?r(n,function(t){o.push(t)}):null!=n&&o.push(n);e||1!==o.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(o[1]=o[0]),x(t,o)}function d(t){return{applyVisual:function(e,n,a){var o=this.mapValueToVisual(e);a("color",t(n("color"),o))},_normalizedToVisual:p([0,1])}}function g(t){var e=this.option.visual;return e[Math.round((0,i.Cb)(t,[0,1],[0,e.length-1],!0))]||{}}function y(t){return function(e,n,a){a(t,this.mapValueToVisual(e))}}function f(t){var e=this.option.visual;return e[this.option.loop&&t!==u?t%e.length:t]}function h(){return this.option.visual[0]}function p(t){return{linear:function(e){return(0,i.Cb)(e,t,this.option.visual,!0)},category:f,piecewise:function(e,n){var a=v.call(this,n);return null==a&&(a=(0,i.Cb)(e,t,this.option.visual,!0)),a},fixed:h}}function v(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var a=n[s.findPieceIndex(t,n)];if(a&&a.visual)return a.visual[this.type]}}function x(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=a.map(e,function(t){var e=o.parse(t);return e||[0,0,0,1]})),e}var m={linear:function(t){return(0,i.Cb)(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=s.findPieceIndex(t,e,!0);if(null!=n)return(0,i.Cb)(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?u:e},fixed:a.noop};function L(t,e,n){return t?e<=n:e<n}const V=s}};
//# sourceMappingURL=92178.95f99160006a67e4.js.map