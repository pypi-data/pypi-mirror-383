export const __webpack_id__="72493";export const __webpack_ids__=["72493"];export const __webpack_modules__={94327:function(t,e,a){a.d(e,{Vy:()=>s,fI:()=>o,ux:()=>c});var i=a(65940),n=a(83510);const r=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function s(t){return r[t%r.length]}function o(t,e){const a=e.getPropertyValue(`--graph-color-${t+1}`)||s(t);return(0,n.RQ)(a)}const c=(0,i.A)(t=>r.map((e,a)=>o(a,t)),(t,e)=>t[0].getPropertyValue("--graph-color-1")===e[0].getPropertyValue("--graph-color-1"))},37382:function(t,e,a){a.d(e,{D:()=>r});var i=a(10416),n=a.n(i);const r=t=>n()(t,{whiteList:{},stripIgnoreTag:!0,stripIgnoreTagBody:!0})},71770:function(t,e,a){var i=a(69868),n=a(30103),r=a(86811),s=a(49377),o=a(34800),c=a(84922),d=a(22019);class l extends n.k{renderOutline(){return this.filled?c.qy`<span class="filled"></span>`:super.renderOutline()}getContainerClasses(){return{...super.getContainerClasses(),active:this.active}}renderPrimaryContent(){return c.qy` <span class="leading icon" aria-hidden="true"> ${this.renderLeadingIcon()} </span> <span class="label">${this.label}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${this.renderTrailingIcon()} </span> `}renderTrailingIcon(){return c.qy`<slot name="trailing-icon"></slot>`}constructor(...t){super(...t),this.filled=!1,this.active=!1}}l.styles=[s.R,o.R,r.R,c.AH`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`],(0,i.__decorate)([(0,d.MZ)({type:Boolean,reflect:!0})],l.prototype,"filled",void 0),(0,i.__decorate)([(0,d.MZ)({type:Boolean})],l.prototype,"active",void 0),l=(0,i.__decorate)([(0,d.EM)("ha-assist-chip")],l)},63002:function(t,e,a){a.d(e,{$3:()=>_,$O:()=>w,$j:()=>g,ED:()=>r,JE:()=>C,OQ:()=>D,PU:()=>$,Ph:()=>p,Uf:()=>S,W1:()=>f,Wr:()=>l,Z:()=>c,gF:()=>m,iY:()=>v,jU:()=>s,nN:()=>x,p3:()=>d,pJ:()=>h,r_:()=>o,sz:()=>u});a(65315),a(59023);var i=a(72652),n=a(50654),r=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const s=59509==a.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,o=["L","gal","ft³","m³","CCF","MCF"],c=t=>t.sendMessagePromise({type:"recorder/info"}),d=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),l=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),u=(t,e,a,i,n="hour",r,s)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:a?.toISOString(),statistic_ids:i,period:n,units:r,types:s}),h=(t,e,a,i)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:a.fixed_period?{start_time:a.fixed_period.start instanceof Date?a.fixed_period.start.toISOString():a.fixed_period.start,end_time:a.fixed_period.end instanceof Date?a.fixed_period.end.toISOString():a.fixed_period.end}:void 0,calendar:a.calendar?{..."week"===a.calendar.period?{first_weekday:(0,n.DD)(t.locale).substring(0,3)}:{},...a.calendar}:void 0,rolling_window:a.rolling_window}),p=t=>t.callWS({type:"recorder/validate_statistics"}),f=(t,e,a)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:a}),_=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),g=t=>{let e=null;if(!t)return null;for(const a of t)null!==a.change&&void 0!==a.change&&(null===e?e=a.change:e+=a.change);return e},m=(t,e)=>{let a=null;for(const i of e){if(!(i in t))continue;const e=g(t[i]);null!==e&&(null===a?a=e:a+=e)}return a},v=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),y=["mean","min","max"],b=["sum","state","change"],x=(t,e)=>!(!y.includes(e)||0===t.mean_type)||!(!b.includes(e)||!t.has_sum),S=(t,e,a,i,n)=>{const r=new Date(a).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:r,adjustment:i,adjustment_unit_of_measurement:n})},w=(t,e,a)=>{const n=t.states[e];return n?(0,i.u)(n):a?.name||e},C=(t,e,a)=>{let i;return e&&(i=t.states[e]?.attributes.unit_of_measurement),void 0===i?a?.statistics_unit_of_measurement:i},D=t=>t.includes(":"),$=t=>t.callWS({type:"recorder/update_statistics_issues"})},51337:function(t,e,a){a.a(t,async function(t,i){try{a.r(e),a.d(e,{HuiEnergyDevicesGraphCard:()=>b});a(99342),a(65315),a(84136),a(22416),a(37089);var n=a(69868),r=a(84922),s=a(22019),o=a(75907),c=a(65940),d=a(37382),l=a(94327),u=a(8868),h=a(68717),p=a(43716),f=a(63002),_=a(40328),g=a(8510),m=(a(70490),a(44017)),v=a(35083),y=t([h,p,u]);[h,p,u]=y.then?(await y)():y;class b extends((0,_.E)(r.WF)){hassSubscribe(){return[(0,p.tb)(this.hass,{key:this._config?.collection_key}).subscribe(t=>{this._data=t,this._getStatistics(t)})]}getCardSize(){return 3}setConfig(t){this._config=t}shouldUpdate(t){return(0,g.xP)(this,t)||t.size>1||!t.has("hass")}render(){return this.hass&&this._config?r.qy` <ha-card> ${this._config.title?r.qy`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="content ${(0,o.H)({"has-header":!!this._config.title})}"> <ha-chart-base .hass="${this.hass}" .data="${this._chartData}" .options="${this._createOptions(this._chartData)}" .height="${28*(this._chartData[0]?.data?.length||0)+50+"px"}" @chart-click="${this._handleChartClick}"></ha-chart-base> </div> </ha-card> `:r.s6}_renderTooltip(t){const e=`<h4 style="text-align: center; margin: 0;">${(0,d.D)(this._getDeviceName(t.value[1]))}</h4>`,a=`${(0,u.ZV)(t.value[0],this.hass.locale,t.value[0]<.1?{maximumFractionDigits:3}:void 0)} kWh`;return`${e}${t.marker} ${t.seriesName}: ${a}`}_getDeviceName(t){return this._data?.prefs.device_consumption.find(e=>e.stat_consumption===t)?.name||(0,f.$O)(this.hass,t,this._data?.statsMetadata[t])}async _getStatistics(t){const e=t.stats,a=t.statsCompare,i=[],n=[],r=[{type:"bar",name:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.energy_usage"),itemStyle:{borderRadius:[0,4,4,0]},data:i,barWidth:a?10:20,cursor:"default"}];a&&r.push({type:"bar",name:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.previous_energy_usage"),itemStyle:{borderRadius:[0,4,4,0]},data:n,barWidth:10,cursor:"default"});const s=getComputedStyle(this);t.prefs.device_consumption.forEach((t,r)=>{const o=t.stat_consumption in e&&(0,f.$j)(e[t.stat_consumption])||0,c=(0,l.fI)(r,s);if(i.push({id:r,value:[o,t.stat_consumption],itemStyle:{color:c+"7F",borderColor:c}}),a){const e=t.stat_consumption in a&&(0,f.$j)(a[t.stat_consumption])||0;n.push({id:r,value:[e,t.stat_consumption],itemStyle:{color:c+"32",borderColor:c+"7F"}})}}),i.sort((t,e)=>e.value[0]-t.value[0]),i.length=Math.min(this._config?.max_devices||1/0,i.length),this._chartData=r,await this.updateComplete}_handleChartClick(t){"axisLabel"===t.detail.targetType&&t.detail.value&&!(0,f.OQ)(t.detail.value)&&(0,m.r)(this,"hass-more-info",{entityId:t.detail.value})}constructor(...t){super(...t),this._chartData=[],this.hassSubscribeRequiredHostProps=["_config"],this._createOptions=(0,c.A)(t=>{const e=window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches;return{xAxis:{type:"value",name:"kWh"},yAxis:{type:"category",inverse:!0,triggerEvent:!0,data:t[0]?.data?.map(t=>t.value[1]),axisLabel:{formatter:this._getDeviceName.bind(this),overflow:"truncate",fontSize:12,margin:5,width:Math.min(e?100:200,Math.max(...t[0]?.data?.map(t=>(0,v.W)(this._getDeviceName(t.value[1]),12)+5)||[]))}},grid:{top:5,left:5,right:40,bottom:0,containLabel:!0},tooltip:{show:!0,formatter:this._renderTooltip.bind(this)}}})}}b.styles=r.AH`.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}ha-chart-base{--chart-max-height:none}`,(0,n.__decorate)([(0,s.MZ)({attribute:!1})],b.prototype,"hass",void 0),(0,n.__decorate)([(0,s.wk)()],b.prototype,"_config",void 0),(0,n.__decorate)([(0,s.wk)()],b.prototype,"_chartData",void 0),(0,n.__decorate)([(0,s.wk)()],b.prototype,"_data",void 0),b=(0,n.__decorate)([(0,s.EM)("hui-energy-devices-graph-card")],b),i()}catch(t){i(t)}})},35083:function(t,e,a){let i;function n(t,e,a="Roboto, Noto, sans-serif"){i||(i=document.createElement("canvas"));const n=i.getContext("2d");if(!n)return 0;n.font=`${e}px ${a}`;const r=n.measureText(t);return Math.ceil(Math.max(r.actualBoundingBoxRight+r.actualBoundingBoxLeft,r.width))}a.d(e,{W:()=>n})},4681:function(t,e,a){a.d(e,{L:()=>r});var i=a(49418),n=a(27554);function r(t,e,a){return(0,i.A)(t,e*n.s0,a)}},49418:function(t,e,a){a.d(e,{A:()=>r});var i=a(67874),n=a(19490);function r(t,e,a){return(0,i.w)(a?.in||t,+(0,n.a)(t)+e)}},38227:function(t,e,a){a.d(e,{z:()=>n});var i=a(19490);function n(t,e){const a=+(0,i.a)(t)-+(0,i.a)(e);return a<0?-1:a>0?1:a}},99904:function(t,e,a){a.d(e,{W:()=>o});var i=a(90298),n=a(38227);function r(t,e,a){const[n,r]=(0,i.x)(a?.in,t,e);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}var s=a(78320);function o(t,e,a){const[o,c,d]=(0,i.x)(a?.in,t,t,e),l=(0,n.z)(c,d),u=Math.abs(r(c,d));if(u<1)return 0;1===c.getMonth()&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-l*u);let h=(0,n.z)(c,d)===-l;(0,s.c)(o)&&1===u&&1===(0,n.z)(o,d)&&(h=!1);const p=l*(u-+h);return 0===p?0:p}},44943:function(t,e,a){a.d(e,{j:()=>n});var i=a(19490);function n(t,e){const a=(0,i.a)(t,e?.in),n=a.getMonth(),r=n-n%3+3;return a.setMonth(r,0),a.setHours(23,59,59,999),a}},25223:function(t,e,a){a.d(e,{$:()=>r});var i=a(6223),n=a(19490);function r(t,e){const a=(0,i.q)(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,s=(0,n.a)(t,e?.in),o=s.getDay(),c=6+(o<r?-7:0)-(o-r);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}},93910:function(t,e,a){a.d(e,{Q:()=>n});var i=a(19490);function n(t,e){const a=(0,i.a)(t,e?.in),n=a.getFullYear();return a.setFullYear(n+1,0,0),a.setHours(23,59,59,999),a}},80850:function(t,e,a){a.d(e,{e:()=>n});var i=a(19490);function n(t,e){return 1===(0,i.a)(t,e?.in).getDate()}},83466:function(t,e,a){a.d(e,{w:()=>n});var i=a(19490);function n(t,e){const a=(0,i.a)(t,e?.in);return a.setDate(1),a.setHours(0,0,0,0),a}},47432:function(t,e,a){a.d(e,{a:()=>n});var i=a(19490);function n(t,e){const a=(0,i.a)(t,e?.in),n=a.getMonth(),r=n-n%3;return a.setMonth(r,1),a.setHours(0,0,0,0),a}},13486:function(t,e,a){a.d(e,{e:()=>n});var i=a(91927);function n(t,e,a){return(0,i.f)(t,-e,a)}},4494:function(t,e,a){a.d(e,{O:()=>n});var i=a(4681);function n(t,e,a){return(0,i.L)(t,-e,a)}},11042:function(t,e,a){a.d(e,{a:()=>n});var i=a(9151);function n(t,e,a){return(0,i.P)(t,-e,a)}}};
//# sourceMappingURL=72493.8b4197c2b04cf384.js.map