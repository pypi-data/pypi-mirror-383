export const __webpack_id__="55038";export const __webpack_ids__=["55038"];export const __webpack_modules__={47467:function(t,e,o){o.a(t,async function(t,i){try{o.d(e,{n:()=>n});var r=o(46089),s=o(65380),a=t([r,s]);function n(t,e,o,i){const a=i/60/24,n=new Date(t);if(a>88)return 0===n.getMonth()?`{bold|${(0,r.fr)(n,e,o)}}`:(0,r.Wq)(n,e,o);if(a>35)return 1===n.getDate()?`{bold|${(0,r.sl)(n,e,o)}}`:(0,r.sl)(n,e,o);if(a>7){const t=(0,r.sl)(n,e,o);return 1===n.getDate()?`{bold|${t}}`:t}return a>2?(0,r.gu)(n,e,o):i&&i<5?(0,s.ie)(n,e,o):0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()?`{bold|${(0,r.sl)(n,e,o)}}`:(0,s.fU)(n,e,o)}[r,s]=a.then?(await a)():a,i()}catch(l){i(l)}})},512:function(t,e,o){o.d(e,{P:()=>i});o(99342);function i(t,e,o,i){if(!t||t.length<10)return t;const s=e*window.devicePixelRatio;if(t.length<=s)return t;const a=o??r(t[0])[0],n=i??r(t[t.length-1])[0],l=Math.floor((n-a)/s),h=new Map;for(const e of t){const t=r(e);if(!Array.isArray(t))continue;const o=Number(t[0]),i=Number(t[1]);if(isNaN(o)||isNaN(i))continue;const s=Math.floor((o-a)/l),n=h.get(s);n?(n.min.y>i&&(n.min={point:e,x:o,y:i}),n.max.y<i&&(n.max={point:e,x:o,y:i})):h.set(s,{min:{point:e,x:o,y:i},max:{point:e,x:o,y:i}})}const d=[];for(const[t,e]of h)e.min.x>e.max.x&&d.push(e.max.point),d.push(e.min.point),e.min.x<e.max.x&&d.push(e.max.point);return d}function r(t){return t&&"object"==typeof t&&"value"in t?t.value:t}},68717:function(t,e,o){o.a(t,async function(t,i){try{o.d(e,{p:()=>C});o(99342),o(65315),o(837),o(84136),o(22416),o(37089),o(48169),o(88238),o(34536),o(16257),o(20152),o(44711),o(72108),o(77030);var r=o(69868),s=o(97809),a=o(88006),n=o(74758),l=o(84922),h=o(22019),d=o(75907),c=o(48893),p=o(94327),m=o(44017),u=o(32211),g=o(32293),y=o(40980),x=(o(9058),o(37382)),_=o(47467),f=o(11111),v=(o(71770),o(512)),b=t([_]);_=(b.then?(await b)():b)[0];const w="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",k="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",P="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z",C=3e5,L=10,Z=6,A=300;class S extends l.WF{disconnectedCallback(){for(super.disconnectedCallback();this._listeners.length;)this._listeners.pop()();this.chart?.dispose(),this.chart=void 0,this._originalZrFlush=void 0}connectedCallback(){if(super.connectedCallback(),this.hasUpdated&&this._setupChart(),this._listeners.push((0,u.m)("(prefers-reduced-motion)",t=>{this._reducedMotion!==t&&(this._reducedMotion=t,this._setChartOptions({animation:!this._reducedMotion}))})),!this.options?.dataZoom){const t=t=>{!this._modifierPressed&&(y.c&&"Meta"===t.key||!y.c&&"Control"===t.key)&&(this._modifierPressed=!0,this.options?.dataZoom||this._setChartOptions({dataZoom:this._getDataZoomConfig()}),this.chart?.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}))},e=t=>{this._modifierPressed&&(y.c&&"Meta"===t.key||!y.c&&"Control"===t.key)&&(this._modifierPressed=!1,this.options?.dataZoom||this._setChartOptions({dataZoom:this._getDataZoomConfig()}),this.chart?.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!1}))};window.addEventListener("keydown",t),window.addEventListener("keyup",e),this._listeners.push(()=>window.removeEventListener("keydown",t),()=>window.removeEventListener("keyup",e))}}firstUpdated(){this.isConnected&&this._setupChart()}willUpdate(t){if(!this.chart)return;if(t.has("_themes")&&this.hasUpdated)return void this._setupChart();let e={};t.has("options")&&this._updateHiddenStatsFromOptions(this.options),(t.has("data")||t.has("_hiddenDatasets"))&&(e.series=this._getSeries()),t.has("options")?e={...e,...this._createOptions()}:this._isTouchDevice&&t.has("_isZoomed")&&(e.dataZoom=this._getDataZoomConfig()),Object.keys(e).length>0&&this._setChartOptions(e)}render(){return l.qy` <div class="container ${(0,d.H)({"has-height":!!this.height})}" style="${(0,c.W)({height:this.height})}"> <div class="chart-container" style="${(0,c.W)({height:this.height?void 0:`${this._getDefaultHeight()}px`})}"> <div class="chart"></div> </div> ${this._renderLegend()} <div class="chart-controls ${(0,d.H)({small:this.smallControls})}"> ${this._isZoomed&&!this.hideResetButton?l.qy`<ha-icon-button class="zoom-reset" .path="${P}" @click="${this._handleZoomReset}" title="${this.hass.localize("ui.components.history_charts.zoom_reset")}"></ha-icon-button>`:l.s6} <slot name="button"></slot> </div> </div> `}_renderLegend(){if(!this.options?.legend||!this.data)return l.s6;const t=(0,f.e)(this.options.legend).find(t=>t.show&&"custom"===t.type);if(!t)return l.s6;const e=(0,f.e)(this.data),o=t.data||e.filter(t=>t.data?.length&&(t.id||t.name)).map(t=>({id:t.id,name:t.name})),i=window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?Z:L;return l.qy`<div class="${(0,d.H)({"chart-legend":!0,"multiple-items":o.length>1})}"> <ul> ${o.map((t,o)=>{if(!this.expandLegend&&o>=i)return l.s6;let r={},s="",a="";"string"==typeof t?(s=t,a=t):(s=t.name??"",a=t.id??s,r=t.itemStyle??{});const n=e.find(t=>t.id===a)??e.find(t=>t.name===a);r={color:n?.color,...n?.itemStyle,itemStyle:r};const h=r?.color,p=r?.borderColor;return l.qy`<li .id="${a}" @click="${this._legendClick}" class="${(0,d.H)({hidden:this._hiddenDatasets.has(a)})}" .title="${s}"> <div class="bullet" style="${(0,c.W)({backgroundColor:h,borderColor:p||h})}"></div> <div class="label">${s}</div> </li>`})} ${o.length>i?l.qy`<li> <ha-assist-chip @click="${this._toggleExpandedLegend}" filled label="${this.expandLegend?this.hass.localize("ui.components.history_charts.collapse_legend"):`${this.hass.localize("ui.components.history_charts.expand_legend")} (${o.length-i})`}"> <ha-svg-icon slot="trailing-icon" .path="${this.expandLegend?k:w}"></ha-svg-icon> </ha-assist-chip> </li>`:l.s6} </ul> </div>`}async _setupChart(){if(this._loading)return;const t=this.renderRoot.querySelector(".chart");this._loading=!0;try{this.chart&&this.chart.dispose();const e=(await Promise.all([o.e("93033"),o.e("59401"),o.e("33972"),o.e("83855"),o.e("72835")]).then(o.bind(o,51733))).default;this.extraComponents?.length&&e.use(this.extraComponents);const i=getComputedStyle(this);if(e.registerTheme("custom",this._createTheme(i)),this.chart=e.init(t,"custom"),this.chart.on("datazoom",t=>{this._handleDataZoomEvent(t)}),this.chart.on("click",t=>{(0,m.r)(this,"chart-click",t)}),this.options?.dataZoom||this.chart.getZr().on("dblclick",this._handleClickZoom),this._isTouchDevice){this.chart.getZr().on("click",t=>{t.zrByTouch&&(this._lastTapTime&&Date.now()-this._lastTapTime<A?this._handleClickZoom(t):this._lastTapTime=Date.now())});let t,e,o=!1;this.chart.on("showTip",o=>{t=o.x,e=o.y,this.chart?.setOption({xAxis:(0,f.e)(this.chart?.getOption().xAxis??[]).map(t=>t.show?{...t,axisPointer:{...t.axisPointer,status:"show",handle:{color:i.getPropertyValue("--primary-color"),margin:0,size:20,...t.axisPointer?.handle,show:!0}}}:t)})}),this.chart.on("hideTip",i=>{if(i.from){if(o)return void(o=!1);this.chart?.setOption({xAxis:(0,f.e)(this.chart?.getOption().xAxis??[]).map(t=>t.show?{...t,axisPointer:{...t.axisPointer,handle:{...t.axisPointer?.handle,show:!1},status:"hide"}}:t)}),this.chart?.dispatchAction({type:"downplay"})}else null!=t&&null!=e&&(o=!0,this.chart?.dispatchAction({type:"showTip",x:t,y:e}))})}this._updateHiddenStatsFromOptions(this.options),this.chart.setOption({...this._createOptions(),series:this._getSeries()})}finally{this._loading=!1}}_getAllIdsFromLegend(t,e){if(!t)return[e];const o=(0,f.e)(this.options?.legend||[])[0];let i;return"custom"===o?.type&&(i=o.data?.find(t=>"object"==typeof t&&t.id===e)),[e,...i?.secondaryIds||[]]}_updateHiddenStatsFromOptions(t){if(!t)return;const e=(0,f.e)(this.options?.legend||[])[0];Object.entries(e?.selected||{}).forEach(([e,o])=>{!1===o&&this._getAllIdsFromLegend(t,e).forEach(t=>this._hiddenDatasets.add(t))})}_getDataZoomConfig(){const t=this.options?.xAxis?.[0]??this.options?.xAxis,e=this.options?.yAxis?.[0]??this.options?.yAxis;if("value"!==t?.type||"category"!==e?.type)return{id:"dataZoom",type:"inside",orient:"horizontal",filterMode:"none",xAxisIndex:0,moveOnMouseMove:!this._isTouchDevice||this._isZoomed,preventDefaultMouseMove:!this._isTouchDevice||this._isZoomed,zoomLock:!this._isTouchDevice&&!this._modifierPressed}}_createOptions(){let t=this.options?.xAxis;t&&(t=Array.isArray(t)?t:[t],t=t.map(t=>{if("time"!==t.type||!1===t.show)return t;t.min&&(this._minutesDifference=(0,n.o)(t.max||new Date,t.min));const e=this._minutesDifference/60/24;let o;return e&&(o=e>=89?24192e5:e>2?864e5:void 0),{axisLine:{show:!1},splitLine:{show:!0},...t,axisLabel:{formatter:this._formatTimeLabel,rich:{bold:{fontWeight:"bold"}},hideOverlap:!0,...t.axisLabel},minInterval:o}}));let e=this.options?.legend;e&&(e=(0,f.e)(e).map(t=>"custom"===t.type?{show:!1}:t));const o={animation:!this._reducedMotion,darkMode:this._themes.darkMode??!1,aria:{show:!0},dataZoom:this._getDataZoomConfig(),toolbox:{top:1/0,left:1/0,feature:{dataZoom:{show:!0,yAxisIndex:!1,filterMode:"none"}},iconStyle:{opacity:0}},...this.options,legend:e,xAxis:t};if(window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches&&o.tooltip){const t=Array.isArray(o.tooltip)?o.tooltip:[o.tooltip];t.forEach(t=>{t.confine=!0,t.appendTo=void 0,t.triggerOn="click"}),o.tooltip=t}return o}_createTheme(t){return{color:(0,p.ux)(t),backgroundColor:"transparent",textStyle:{color:t.getPropertyValue("--primary-text-color"),fontFamily:"Roboto, Noto, sans-serif"},title:{textStyle:{color:t.getPropertyValue("--primary-text-color")},subtextStyle:{color:t.getPropertyValue("--secondary-text-color")}},line:{lineStyle:{width:1.5},symbolSize:1,symbol:"circle",smooth:!1},bar:{itemStyle:{barBorderWidth:1.5}},graph:{label:{color:t.getPropertyValue("--primary-text-color"),textBorderColor:t.getPropertyValue("--primary-background-color"),textBorderWidth:2}},sankey:{label:{color:t.getPropertyValue("--primary-text-color"),textBorderColor:t.getPropertyValue("--primary-background-color"),textBorderWidth:2}},categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!1,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},legend:{textStyle:{color:t.getPropertyValue("--primary-text-color")},inactiveColor:t.getPropertyValue("--disabled-text-color"),pageIconColor:t.getPropertyValue("--primary-text-color"),pageIconInactiveColor:t.getPropertyValue("--disabled-text-color"),pageTextStyle:{color:t.getPropertyValue("--secondary-text-color")}},tooltip:{backgroundColor:t.getPropertyValue("--card-background-color"),borderColor:t.getPropertyValue("--divider-color"),textStyle:{color:t.getPropertyValue("--primary-text-color"),fontSize:12},axisPointer:{lineStyle:{color:t.getPropertyValue("--info-color")},crossStyle:{color:t.getPropertyValue("--info-color")}},extraCssText:"direction:"+t.getPropertyValue("--direction")+";margin-inline-start:3px;margin-inline-end:8px;"},timeline:{}}}_getSeries(){const t=this.options?.xAxis?.[0]??this.options?.xAxis,e=this.options?.yAxis?.[0]??this.options?.yAxis;return(0,f.e)(this.data).map(o=>{const i=this._hiddenDatasets.has(String(o.id??o.name))?void 0:o.data;if(i&&"line"===o.type){if("log"===e?.type)return{...o,data:i.map(t=>Array.isArray(t)?[t[0],"number"!=typeof t[1]||t[1]>0?t[1]:null,...t.slice(2)]:t)};if("minmax"===o.sampling){const e=t?.min&&"number"==typeof t.min?t.min:void 0,r=t?.max&&"number"==typeof t.max?t.max:void 0;return{...o,sampling:void 0,data:(0,v.P)(i,this.clientWidth,e,r)}}}const r=(0,x.D)(String(o.name??o.id??""));return{...o,name:r,data:i}})}_getDefaultHeight(){return Math.max(this.clientWidth/2,200)}_setChartOptions(t){if(!this.chart)return;if(!this._originalZrFlush){if((0,f.e)(this.data).reduce((t,e)=>t+(e.data||[]).length,0)>1e4){const t=this.chart.getZr();this._originalZrFlush=t.flush,t.flush=()=>{setTimeout(()=>{this._originalZrFlush?.call(t)},5)}}}const e=t.series?["series"]:[];this.chart.setOption(t,{replaceMerge:e})}zoom(t,e,o=!1){this.chart?.dispatchAction({type:"dataZoom",start:t,end:e,silent:o})}_handleZoomReset(){this.chart?.dispatchAction({type:"dataZoom",start:0,end:100})}_handleDataZoomEvent(t){const e=t.batch?.[0]??t;let o="number"==typeof e.start?e.start:0,i="number"==typeof e.end?e.end:100;if(0===o&&100===i&&void 0!==e.startValue&&void 0!==e.endValue){const t=this.chart.getOption(),r=t.xAxis?.[0]??t.xAxis;if(r?.min&&r?.max){const t=new Date(r.min).getTime(),s=new Date(r.max).getTime()-t;o=Math.max(0,Math.min(100,(e.startValue-t)/s*100)),i=Math.max(0,Math.min(100,(e.endValue-t)/s*100))}}this._isZoomed=0!==o||100!==i,this._zoomRatio=(i-o)/100,this._isTouchDevice&&this.chart?.dispatchAction({type:"hideTip",from:"datazoom"}),(0,m.r)(this,"chart-zoom",{start:o,end:i})}_legendClick(t){if(!this.chart)return;const e=t.currentTarget?.id;this._hiddenDatasets.has(e)?(this._getAllIdsFromLegend(this.options,e).forEach(t=>this._hiddenDatasets.delete(t)),(0,m.r)(this,"dataset-unhidden",{id:e})):(this._getAllIdsFromLegend(this.options,e).forEach(t=>this._hiddenDatasets.add(t)),(0,m.r)(this,"dataset-hidden",{id:e})),this.requestUpdate("_hiddenDatasets")}_toggleExpandedLegend(){this.expandLegend=!this.expandLegend,setTimeout(()=>{this.chart?.resize()})}constructor(...t){super(...t),this.data=[],this._isZoomed=!1,this._zoomRatio=1,this._minutesDifference=1440,this._hiddenDatasets=new Set,this._modifierPressed=!1,this._isTouchDevice="ontouchstart"in window,this._resizeController=new a.P(this,{callback:()=>this.chart?.resize()}),this._loading=!1,this._reducedMotion=!1,this._listeners=[],this._formatTimeLabel=t=>(0,_.n)(t,this.hass.locale,this.hass.config,this._minutesDifference*this._zoomRatio),this._handleClickZoom=t=>{if(!this.chart)return;const e=this._isZoomed?[0,100]:[t.offsetX/this.chart.getWidth()*100-15,t.offsetX/this.chart.getWidth()*100+15];this.chart.dispatchAction({type:"dataZoom",start:e[0],end:e[1]})}}}S.styles=l.AH`:host{display:block;position:relative;letter-spacing:normal}.container{display:flex;flex-direction:column;position:relative}.container.has-height{max-height:var(--chart-max-height,350px)}.chart-container{width:100%;max-height:var(--chart-max-height,350px)}.has-height .chart-container{flex:1}.chart{height:100%;width:100%}.chart-controls{position:absolute;top:16px;right:4px;display:flex;flex-direction:column;gap:4px}.chart-controls.small{top:0;flex-direction:row}.chart-controls ::slotted(ha-icon-button),.chart-controls ha-icon-button{background:var(--card-background-color);border-radius:4px;--mdc-icon-button-size:32px;color:var(--primary-color);border:1px solid var(--divider-color)}.chart-controls.small ::slotted(ha-icon-button),.chart-controls.small ha-icon-button{--mdc-icon-button-size:22px;--mdc-icon-size:16px}.chart-controls ::slotted(ha-icon-button.inactive),.chart-controls ha-icon-button.inactive{color:var(--state-inactive-color)}.chart-legend{max-height:60%;overflow-y:auto;padding:12px 0 0;font-size:var(--ha-font-size-s);color:var(--primary-text-color)}.chart-legend ul{margin:0;padding:0;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:8px}.chart-legend li{height:24px;cursor:pointer;display:inline-flex;align-items:center;padding:0 2px;box-sizing:border-box;overflow:hidden}.chart-legend.multiple-items li{max-width:220px}.chart-legend .hidden{color:var(--secondary-text-color)}.chart-legend .label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .bullet{border-width:1px;border-style:solid;border-radius:50%;display:block;height:16px;width:16px;margin-right:4px;flex-shrink:0;box-sizing:border-box;margin-inline-end:4px;margin-inline-start:initial;direction:var(--direction)}.chart-legend .hidden .bullet{border-color:var(--secondary-text-color)!important;background-color:transparent!important}ha-assist-chip{height:100%;--_label-text-weight:500;--_leading-space:8px;--_trailing-space:8px;--_icon-label-space:4px}`,(0,r.__decorate)([(0,h.MZ)({attribute:!1})],S.prototype,"hass",void 0),(0,r.__decorate)([(0,h.MZ)({attribute:!1})],S.prototype,"data",void 0),(0,r.__decorate)([(0,h.MZ)({attribute:!1})],S.prototype,"options",void 0),(0,r.__decorate)([(0,h.MZ)({type:String})],S.prototype,"height",void 0),(0,r.__decorate)([(0,h.MZ)({attribute:"expand-legend",type:Boolean})],S.prototype,"expandLegend",void 0),(0,r.__decorate)([(0,h.MZ)({attribute:"small-controls",type:Boolean})],S.prototype,"smallControls",void 0),(0,r.__decorate)([(0,h.MZ)({attribute:"hide-reset-button",type:Boolean})],S.prototype,"hideResetButton",void 0),(0,r.__decorate)([(0,h.wk)(),(0,s.Fg)({context:g.qL,subscribe:!0})],S.prototype,"_themes",void 0),(0,r.__decorate)([(0,h.wk)()],S.prototype,"_isZoomed",void 0),(0,r.__decorate)([(0,h.wk)()],S.prototype,"_zoomRatio",void 0),(0,r.__decorate)([(0,h.wk)()],S.prototype,"_minutesDifference",void 0),(0,r.__decorate)([(0,h.wk)()],S.prototype,"_hiddenDatasets",void 0),S=(0,r.__decorate)([(0,h.EM)("ha-chart-base")],S),i()}catch(t){i(t)}})},40980:function(t,e,o){o.d(e,{c:()=>i});const i=/Mac/i.test(navigator.userAgent)}};
//# sourceMappingURL=55038.d2e4b51ae86f64fc.js.map