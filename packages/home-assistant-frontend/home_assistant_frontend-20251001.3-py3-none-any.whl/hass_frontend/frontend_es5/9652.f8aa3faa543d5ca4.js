"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["9652"],{73275:function(t,i,e){e.d(i,{e:function(){return n}});const n=t=>`/api/image_proxy/${t.entity_id}?token=${t.attributes.access_token}&state=${t.state}`},84432:function(t,i,e){e.d(i,{A1:function(){return n},CY:function(){return o},Fn:function(){return s},Jz:function(){return c},St:function(){return r},VA:function(){return _},WI:function(){return d},iY:function(){return h},xw:function(){return a}});e(46852),e(5934),e(56660);const n=(t,i)=>t.callWS({type:"media_source/resolve_media",media_content_id:i}),s=(t,i)=>t.callWS({type:"media_source/browse_media",media_content_id:i}),a="__MANUAL_ENTRY__",o=t=>t.startsWith(a),r=t=>t.startsWith("media-source://"),c=t=>t.startsWith("media-source://media_source"),h=t=>t.startsWith("media-source://image_upload"),_=async(t,i,e)=>{const n=new FormData;n.append("media_content_id",i),n.append("file",e);const s=await t.fetchWithAuth("/api/media_source/local_source/upload",{method:"POST",body:n});if(413===s.status)throw new Error(`Uploaded file is too large (${e.name})`);if(200!==s.status)throw new Error("Unknown error");return s.json()},d=async(t,i)=>t.callWS({type:"media_source/local_source/remove",media_content_id:i})},89823:function(t,i,e){e.r(i),e.d(i,{HuiPictureCard:function(){return b}});e(46852),e(35748),e(12977),e(5934),e(95013);var n=e(69868),s=e(84922),a=e(11991),o=e(75907),r=e(13802),c=e(91634),h=e(88341),_=(e(70490),e(73275)),d=e(46407),u=e(47426),g=e(3922),f=e(8510),l=e(78709),m=e(84432);let p,v,y,w=t=>t;class b extends s.WF{static async getConfigElement(){return await Promise.all([e.e("42153"),e.e("3654"),e.e("89088"),e.e("30199"),e.e("27636"),e.e("62975"),e.e("30578"),e.e("44861"),e.e("21793")]).then(e.bind(e,41464)),document.createElement("hui-picture-card-editor")}static getStubConfig(){return{type:"picture",image:"https://demo.home-assistant.io/stub_config/t-shirt-promo.png"}}getCardSize(){return 5}setConfig(t){if(!t||!t.image&&!t.image_entity)throw new Error("Image required");this._config=Object.assign({tap_action:{action:"more-info"}},t)}shouldUpdate(t){if(!this._config||(0,f.xP)(this,t)||t.has("_resolvedImage"))return!0;if(this._config.image_entity&&t.has("hass")){const i=t.get("hass");if(!i||i.states[this._config.image_entity]!==this.hass.states[this._config.image_entity])return!0}return!1}willUpdate(t){var i,e,n;if(super.willUpdate(t),!this._config||!this.hass)return;const s=t.has("hass")&&void 0===t.get("hass"),a=t.has("_config")&&(null===(i=t.get("_config"))||void 0===i?void 0:i.image)!==(null===(e=this._config)||void 0===e?void 0:e.image);var o;if((s||a)&&"string"==typeof(null===(n=this._config)||void 0===n?void 0:n.image)&&(0,m.St)(this._config.image))this._resolvedImage=void 0,(0,m.A1)(this.hass,null===(o=this._config)||void 0===o?void 0:o.image).then(t=>{this._resolvedImage=t.url});else if(a){var r;this._resolvedImage=null===(r=this._config)||void 0===r?void 0:r.image}}updated(t){if(super.updated(t),!this._config||!this.hass)return;const i=t.get("hass"),e=t.get("_config");i&&e&&i.themes===this.hass.themes&&e.theme===this._config.theme||(0,c.Q)(this,this.hass.themes,this._config.theme)}render(){var t;if(!this._config||!this.hass)return s.s6;let i;if(this._config.image_entity&&(i=this.hass.states[this._config.image_entity],!i))return(0,s.qy)(p||(p=w`<hui-warning .hass="${0}"> ${0} </hui-warning>`),this.hass,(0,l.j)(this.hass,this._config.image_entity));let e=this._resolvedImage;if(this._config.image_entity){switch((0,h.m)(this._config.image_entity)){case"image":e=(0,_.e)(i);break;case"person":i.attributes.entity_picture&&(e=i.attributes.entity_picture)}}return void 0===e?s.s6:(0,s.qy)(v||(v=w` <ha-card @action="${0}" .actionHandler="${0}" tabindex="${0}" class="${0}"> <img alt="${0}" src="${0}"> </ha-card> `),this._handleAction,(0,d.T)({hasHold:(0,g.h)(this._config.hold_action),hasDoubleClick:(0,g.h)(this._config.double_tap_action)}),(0,r.J)((0,g.h)(this._config.tap_action)||this._config.image_entity?"0":void 0),(0,o.H)({clickable:Boolean(this._config.image_entity&&!this._config.tap_action||this._config.tap_action&&"none"!==this._config.tap_action.action||this._config.hold_action&&"none"!==this._config.hold_action.action||this._config.double_tap_action&&"none"!==this._config.double_tap_action.action)}),(0,r.J)(this._config.alt_text||(null===(t=i)||void 0===t?void 0:t.attributes.friendly_name)),this.hass.hassUrl(e))}_handleAction(t){(0,u.$)(this,this.hass,this._config,t.detail.action)}}b.styles=(0,s.AH)(y||(y=w`ha-card{overflow:hidden;height:100%}ha-card.clickable{cursor:pointer}img{display:block;width:100%}`)),(0,n.__decorate)([(0,a.MZ)({attribute:!1})],b.prototype,"hass",void 0),(0,n.__decorate)([(0,a.wk)()],b.prototype,"_config",void 0),(0,n.__decorate)([(0,a.wk)()],b.prototype,"_resolvedImage",void 0),b=(0,n.__decorate)([(0,a.EM)("hui-picture-card")],b)}}]);
//# sourceMappingURL=9652.f8aa3faa543d5ca4.js.map