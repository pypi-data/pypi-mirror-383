"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["70447"],{53657:function(e,t,a){var i=a(69868),o=a(73142),s=a(65082),l=a(8998),r=a(49377),n=a(68336),c=a(84922),d=a(11991);let h;class p extends o.R{}p.styles=[r.R,n.R,l.R,s.R,(0,c.AH)(h||(h=(e=>e)`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-input-chip-container-shape:16px;--md-input-chip-outline-color:var(--outline-color);--md-input-chip-selected-container-color:rgba(
          var(--rgb-primary-text-color),
          0.15
        );--ha-input-chip-selected-container-opacity:1;--md-input-chip-label-text-font:Roboto,sans-serif}::slotted([slot=icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px)}.selected::before{opacity:var(--ha-input-chip-selected-container-opacity)}`))],p=(0,i.__decorate)([(0,d.EM)("ha-input-chip")],p)},83519:function(e,t,a){a.a(e,async function(e,t){try{a(32203),a(79827),a(35748),a(65315),a(12840),a(837),a(22416),a(37089),a(59023),a(5934),a(88238),a(34536),a(16257),a(20152),a(44711),a(72108),a(77030),a(18223),a(56660),a(95013);var i=a(69868),o=a(84922),s=a(11991),l=a(65940),r=a(44017),n=a(88341),c=a(95968),d=a(40804),h=a(15241),p=a(40328),u=a(61627),_=a(64578),v=(a(86160),e([_]));_=(v.then?(await v)():v)[0];let y,b,m,g,f,M=e=>e;const $="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",Z="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",k="___ADD_NEW___",x="___NO_LABELS___";class A extends((0,p.E)(o.WF)){async open(){var e;await this.updateComplete,await(null===(e=this._picker)||void 0===e?void 0:e.open())}hassSubscribe(){return[(0,d.o5)(this.hass.connection,e=>{this._labels=e})]}render(){var e;const t=null!==(e=this.placeholder)&&void 0!==e?e:this.hass.localize("ui.components.label-picker.label"),a=this._computeValueRenderer(this._labels);return(0,o.qy)(y||(y=M` <ha-generic-picker .hass="${0}" .autofocus="${0}" .label="${0}" .notFoundLabel="${0}" .placeholder="${0}" .value="${0}" .getItems="${0}" .getAdditionalItems="${0}" .valueRenderer="${0}" @value-changed="${0}"> </ha-generic-picker> `),this.hass,this.autofocus,this.label,this.hass.localize("ui.components.label-picker.no_match"),t,this.value,this._getItems,this._getAdditionalItems,a,this._valueChanged)}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t!==x)if(t){if(t.startsWith(k)){this.hass.loadFragmentTranslation("config");const e=t.substring(k.length);return void(0,u.f)(this,{suggestedName:e,createEntry:async e=>{try{const t=await(0,d._9)(this.hass,e);this._setValue(t.label_id)}catch(t){(0,h.showAlertDialog)(this,{title:this.hass.localize("ui.components.label-picker.failed_create_label"),text:t.message})}}})}this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,setTimeout(()=>{(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")},0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._labelMap=(0,l.A)(e=>e?new Map(e.map(e=>[e.label_id,e])):new Map),this._computeValueRenderer=(0,l.A)(e=>t=>{const a=this._labelMap(e).get(t);return a?(0,o.qy)(m||(m=M` ${0} <span slot="headline">${0}</span> `),a.icon?(0,o.qy)(g||(g=M`<ha-icon slot="start" .icon="${0}"></ha-icon>`),a.icon):(0,o.qy)(f||(f=M`<ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>`),$),a.name):(0,o.qy)(b||(b=M` <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon> <span slot="headline">${0}</span> `),$,t)}),this._getLabels=(0,l.A)((e,t,a,i,o,s,l,r,d,h)=>{if(!e||0===e.length)return[{id:x,primary:this.hass.localize("ui.components.label-picker.no_labels"),icon_path:$}];const p=Object.values(a),u=Object.values(i);let _,v,y={};(o||s||l||r||d)&&(y=(0,c.g2)(u),_=p,v=u.filter(e=>e.labels.length>0),o&&(_=_.filter(e=>{const t=y[e.id];return!(!t||!t.length)&&y[e.id].some(e=>o.includes((0,n.m)(e.entity_id)))}),v=v.filter(e=>o.includes((0,n.m)(e.entity_id)))),s&&(_=_.filter(e=>{const t=y[e.id];return!t||!t.length||u.every(e=>!s.includes((0,n.m)(e.entity_id)))}),v=v.filter(e=>!s.includes((0,n.m)(e.entity_id)))),l&&(_=_.filter(e=>{const t=y[e.id];return!(!t||!t.length)&&y[e.id].some(e=>{const t=this.hass.states[e.entity_id];return!!t&&(t.attributes.device_class&&l.includes(t.attributes.device_class))})}),v=v.filter(e=>{const t=this.hass.states[e.entity_id];return t.attributes.device_class&&l.includes(t.attributes.device_class)})),r&&(_=_.filter(e=>r(e))),d&&(_=_.filter(e=>{const t=y[e.id];return!(!t||!t.length)&&y[e.id].some(e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)})}),v=v.filter(e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)})));let b=e;const m=new Set;let g;_&&(g=_.filter(e=>e.area_id).map(e=>e.area_id),_.forEach(e=>{e.labels.forEach(e=>m.add(e))})),v&&(g=(null!=g?g:[]).concat(v.filter(e=>e.area_id).map(e=>e.area_id)),v.forEach(e=>{e.labels.forEach(e=>m.add(e))})),g&&g.forEach(e=>{t[e].labels.forEach(e=>m.add(e))}),h&&(b=b.filter(e=>!h.includes(e.label_id))),(_||v)&&(b=b.filter(e=>m.has(e.label_id)));return b.map(e=>({id:e.label_id,primary:e.name,icon:e.icon||void 0,icon_path:e.icon?void 0:$,sorting_label:e.name,search_labels:[e.name,e.label_id,e.description].filter(e=>Boolean(e))}))}),this._getItems=()=>this._getLabels(this._labels,this.hass.areas,this.hass.devices,this.hass.entities,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeLabels),this._allLabelNames=(0,l.A)(e=>e?[...new Set(e.map(e=>e.name.toLowerCase()).filter(Boolean))]:[]),this._getAdditionalItems=e=>{if(this.noAdd)return[];const t=this._allLabelNames(this._labels);return e&&!t.includes(e.toLowerCase())?[{id:k+e,primary:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:e}),icon_path:Z}]:[{id:k,primary:this.hass.localize("ui.components.label-picker.add_new"),icon_path:Z}]}}}(0,i.__decorate)([(0,s.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)()],A.prototype,"label",void 0),(0,i.__decorate)([(0,s.MZ)()],A.prototype,"value",void 0),(0,i.__decorate)([(0,s.MZ)()],A.prototype,"helper",void 0),(0,i.__decorate)([(0,s.MZ)()],A.prototype,"placeholder",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,attribute:"no-add"})],A.prototype,"noAdd",void 0),(0,i.__decorate)([(0,s.MZ)({type:Array,attribute:"include-domains"})],A.prototype,"includeDomains",void 0),(0,i.__decorate)([(0,s.MZ)({type:Array,attribute:"exclude-domains"})],A.prototype,"excludeDomains",void 0),(0,i.__decorate)([(0,s.MZ)({type:Array,attribute:"include-device-classes"})],A.prototype,"includeDeviceClasses",void 0),(0,i.__decorate)([(0,s.MZ)({type:Array,attribute:"exclude-label"})],A.prototype,"excludeLabels",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],A.prototype,"deviceFilter",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],A.prototype,"entityFilter",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],A.prototype,"disabled",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],A.prototype,"required",void 0),(0,i.__decorate)([(0,s.wk)()],A.prototype,"_labels",void 0),(0,i.__decorate)([(0,s.P)("ha-generic-picker")],A.prototype,"_picker",void 0),A=(0,i.__decorate)([(0,s.EM)("ha-label-picker")],A),t()}catch(y){t(y)}})},57330:function(e,t,a){a.a(e,async function(e,t){try{a(79827),a(35748),a(35058),a(65315),a(837),a(22416),a(37089),a(5934),a(18223),a(95013);var i=a(69868),o=a(84922),s=a(11991),l=a(33055),r=a(65940),n=a(78412),c=a(44017),d=a(24730),h=a(40804),p=a(40328),u=a(61627),_=(a(75831),a(53657),a(83519)),v=e([_]);_=(v.then?(await v)():v)[0];let y,b,m,g,f,M,$=e=>e;class Z extends((0,p.E)(o.WF)){async open(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.open())}async focus(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.focus())}hassSubscribe(){return[(0,h.o5)(this.hass.connection,e=>{const t={};e.forEach(e=>{t[e.label_id]=e}),this._labels=t})]}render(){const e=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return(0,o.qy)(y||(y=$` ${0} ${0} <ha-label-picker .hass="${0}" .helper="${0}" .disabled="${0}" .required="${0}" .placeholder="${0}" .excludeLabels="${0}" @value-changed="${0}"> </ha-label-picker> `),this.label?(0,o.qy)(b||(b=$`<label>${0}</label>`),this.label):o.s6,null!=e&&e.length?(0,o.qy)(m||(m=$`<ha-chip-set> ${0} </ha-chip-set>`),(0,l.u)(e,e=>null==e?void 0:e.label_id,e=>{const t=null!=e&&e.color?(0,n.M)(e.color):void 0;return(0,o.qy)(g||(g=$` <ha-input-chip .item="${0}" @remove="${0}" @click="${0}" .label="${0}" selected="selected" style="${0}"> ${0} </ha-input-chip> `),e,this._removeItem,this._openDetail,null==e?void 0:e.name,t?`--color: ${t}`:"",null!=e&&e.icon?(0,o.qy)(f||(f=$`<ha-icon slot="icon" .icon="${0}"></ha-icon>`),e.icon):o.s6)})):o.s6,this.hass,this.helper,this.disabled,this.required,this.placeholder,this.value,this._labelChanged)}get _value(){return this.value||[]}_removeItem(e){const t=e.currentTarget.item;this._setValue(this._value.filter(e=>e!==t.label_id))}_openDetail(e){const t=e.currentTarget.item;(0,u.f)(this,{entry:t,updateEntry:async e=>{await(0,h.Rp)(this.hass,t.label_id,e)}})}_labelChanged(e){e.stopPropagation();const t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([...this._value,t]),this.labelPicker.value="")}_setValue(e){this.value=e,setTimeout(()=>{(0,c.r)(this,"value-changed",{value:e}),(0,c.r)(this,"change")},0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._sortedLabels=(0,r.A)((e,t,a)=>null==e?void 0:e.map(e=>null==t?void 0:t[e]).sort((e,t)=>(0,d.xL)((null==e?void 0:e.name)||"",(null==t?void 0:t.name)||"",a)))}}Z.styles=(0,o.AH)(M||(M=$`ha-chip-set{margin-bottom:8px}ha-input-chip{--md-input-chip-selected-container-color:var(--color, var(--grey-color));--ha-input-chip-selected-container-opacity:0.5;--md-input-chip-selected-outline-width:1px}label{display:block;margin:0 0 8px}`)),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],Z.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)()],Z.prototype,"label",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],Z.prototype,"value",void 0),(0,i.__decorate)([(0,s.MZ)()],Z.prototype,"helper",void 0),(0,i.__decorate)([(0,s.MZ)()],Z.prototype,"placeholder",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,attribute:"no-add"})],Z.prototype,"noAdd",void 0),(0,i.__decorate)([(0,s.MZ)({type:Array,attribute:"include-domains"})],Z.prototype,"includeDomains",void 0),(0,i.__decorate)([(0,s.MZ)({type:Array,attribute:"exclude-domains"})],Z.prototype,"excludeDomains",void 0),(0,i.__decorate)([(0,s.MZ)({type:Array,attribute:"include-device-classes"})],Z.prototype,"includeDeviceClasses",void 0),(0,i.__decorate)([(0,s.MZ)({type:Array,attribute:"exclude-label"})],Z.prototype,"excludeLabels",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],Z.prototype,"deviceFilter",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],Z.prototype,"entityFilter",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],Z.prototype,"disabled",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],Z.prototype,"required",void 0),(0,i.__decorate)([(0,s.wk)()],Z.prototype,"_labels",void 0),(0,i.__decorate)([(0,s.P)("ha-label-picker",!0)],Z.prototype,"labelPicker",void 0),Z=(0,i.__decorate)([(0,s.EM)("ha-labels-picker")],Z),t()}catch(y){t(y)}})}}]);
//# sourceMappingURL=70447.da2bcc4b914e2ef4.js.map