"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["39756"],{63002:function(t,e,s){s.a(t,async function(t,i){try{s.d(e,{$3:function(){return m},$O:function(){return O},$j:function(){return y},ED:function(){return o},JE:function(){return C},OQ:function(){return S},PU:function(){return $},Ph:function(){return p},Uf:function(){return x},W1:function(){return g},Wr:function(){return u},Z:function(){return h},gF:function(){return v},iY:function(){return D},jU:function(){return c},nN:function(){return k},p3:function(){return d},pJ:function(){return f},r_:function(){return l},sz:function(){return _}});s(79827),s(35748),s(65315),s(59023),s(12977),s(18223),s(95013);var a=s(72652),n=s(50654),r=t([n]);n=(r.then?(await r)():r)[0];var o=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const c=59509==s.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,l=["L","gal","ft³","m³","CCF","MCF"],h=t=>t.sendMessagePromise({type:"recorder/info"}),d=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),u=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),_=(t,e,s,i,a="hour",n,r)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==s?void 0:s.toISOString(),statistic_ids:i,period:a,units:n,types:r}),f=(t,e,s,i)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:s.fixed_period?{start_time:s.fixed_period.start instanceof Date?s.fixed_period.start.toISOString():s.fixed_period.start,end_time:s.fixed_period.end instanceof Date?s.fixed_period.end.toISOString():s.fixed_period.end}:void 0,calendar:s.calendar?Object.assign(Object.assign({},"week"===s.calendar.period?{first_weekday:(0,n.DD)(t.locale).substring(0,3)}:{}),s.calendar):void 0,rolling_window:s.rolling_window}),p=t=>t.callWS({type:"recorder/validate_statistics"}),g=(t,e,s)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:s}),m=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),y=t=>{let e=null;if(!t)return null;for(const s of t)null!==s.change&&void 0!==s.change&&(null===e?e=s.change:e+=s.change);return e},v=(t,e)=>{let s=null;for(const i of e){if(!(i in t))continue;const e=y(t[i]);null!==e&&(null===s?s=e:s+=e)}return s},D=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),b=["mean","min","max"],w=["sum","state","change"],k=(t,e)=>!(!b.includes(e)||0===t.mean_type)||!(!w.includes(e)||!t.has_sum),x=(t,e,s,i,a)=>{const n=new Date(s).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:n,adjustment:i,adjustment_unit_of_measurement:a})},O=(t,e,s)=>{const i=t.states[e];return i?(0,a.u)(i):(null==s?void 0:s.name)||e},C=(t,e,s)=>{let i;var a;e&&(i=null===(a=t.states[e])||void 0===a?void 0:a.attributes.unit_of_measurement);return void 0===i?null==s?void 0:s.statistics_unit_of_measurement:i},S=t=>t.includes(":"),$=t=>t.callWS({type:"recorder/update_statistics_issues"});i()}catch(c){i(c)}})},17478:function(t,e,s){s.a(t,async function(t,i){try{s.r(e),s.d(e,{HuiEnergyDateSelectionCard:function(){return _}});var a=s(69868),n=s(84922),r=s(11991),o=(s(70490),s(8510)),c=s(62269),l=t([c]);c=(l.then?(await l)():l)[0];let h,d,u=t=>t;class _ extends n.WF{getCardSize(){return 1}getGridOptions(){return{rows:1,columns:12}}setConfig(t){this._config=t}shouldUpdate(t){return(0,o.xP)(this,t)||t.size>1||!t.has("hass")}render(){return this.hass&&this._config?(0,n.qy)(h||(h=u` <ha-card> <div class="card-content"> <hui-energy-period-selector .hass="${0}" .collectionKey="${0}"></hui-energy-period-selector> </div> </ha-card> `),this.hass,this._config.collection_key):n.s6}}_.styles=(0,n.AH)(d||(d=u`ha-card{height:100%;display:flex;flex-direction:column;justify-content:center}`)),(0,a.__decorate)([(0,r.MZ)({attribute:!1})],_.prototype,"hass",void 0),(0,a.__decorate)([(0,r.wk)()],_.prototype,"_config",void 0),_=(0,a.__decorate)([(0,r.EM)("hui-energy-date-selection-card")],_),i()}catch(h){i(h)}})},62269:function(t,e,s){s.a(t,async function(t,e){try{var i=s(10629),a=(s(35748),s(5934),s(95013),s(69868)),n=s(70162),r=s(3313),o=s(88258),c=s(25223),l=s(41484),h=s(13486),d=s(76174),u=s(80850),_=s(78320),f=s(99904),p=s(84922),g=s(11991),m=s(65940),y=s(30883),v=s(50654),D=s(46089),b=s(51849),w=(s(78918),s(17372)),k=(s(7475),s(39155)),x=(s(75542),s(72590),s(43716)),O=s(40328),C=s(76037),S=t([i,w,k,D,v,C,x,y]);[i,w,k,D,v,C,x,y]=S.then?(await S)():S;let $,z,A,E=t=>t;const W="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",P=["today","yesterday","this_week","this_month","this_quarter","this_year","now-7d","now-30d","now-12m"];class M extends((0,O.E)(p.WF)){hassSubscribe(){return[(0,x.tb)(this.hass,{key:this.collectionKey}).subscribe(t=>this._updateDates(t))]}_measure(){this.narrow=this.offsetWidth<450}async _attachObserver(){this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,b.s)(()=>this._measure(),250,!1))),this._resizeObserver.observe(this)}firstUpdated(){this._attachObserver()}connectedCallback(){super.connectedCallback(),this.updateComplete.then(()=>this._attachObserver())}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver&&this._resizeObserver.disconnect()}willUpdate(t){var e,s;super.willUpdate(t),this.hasUpdated||this._measure(),(!this.hasUpdated||t.has("hass")&&(null===(e=this.hass)||void 0===e?void 0:e.localize)!==(null===(s=t.get("hass"))||void 0===s?void 0:s.localize))&&(this._ranges={},P.forEach(t=>{this._ranges[this.hass.localize(`ui.components.date-range-picker.ranges.${t}`)]=(0,C.b)(this.hass,t)}))}render(){if(!this.hass||!this._startDate)return p.s6;const t=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config);return(0,p.qy)($||($=E` <div class="row"> <div class="label"> ${0} </div> <div class="time-handle"> <ha-icon-button-prev .label="${0}" @click="${0}"></ha-icon-button-prev> <ha-icon-button-next .label="${0}" @click="${0}"></ha-icon-button-next> <ha-date-range-picker .hass="${0}" .startDate="${0}" .endDate="${0}" .ranges="${0}" @value-changed="${0}" @preset-selected="${0}" minimal header-position></ha-date-range-picker> </div> ${0} <ha-button-menu> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-check-list-item left @request-selected="${0}" .selected="${0}"> ${0} </ha-check-list-item> <slot name="overflow-menu"></slot> </ha-button-menu> </div> `),"day"===t?this.narrow?(0,D.kz)(this._startDate,this.hass.locale,this.hass.config):(0,D.Yq)(this._startDate,this.hass.locale,this.hass.config):"month"===t?(0,D.fr)(this._startDate,this.hass.locale,this.hass.config):"year"===t?(0,D.Pm)(this._startDate,this.hass.locale,this.hass.config):`${(0,D.sl)(this._startDate,this.hass.locale,this.hass.config)} – ${(0,D.sl)(this._endDate||new Date,this.hass.locale,this.hass.config)}`,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.previous"),this._pickPrevious,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.next"),this._pickNext,this.hass,this._startDate,this._endDate||new Date,this._ranges,this._dateRangeChanged,this._presetSelected,this.narrow?p.s6:(0,p.qy)(z||(z=E`<ha-button appearance="filled" size="small" @click="${0}"> ${0} </ha-button>`),this._pickNow,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.now")),this.hass.localize("ui.common.menu"),W,this._toggleCompare,this._compare,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare"))}_updateCollectionPeriod(){const t=(0,x.tb)(this.hass,{key:this.collectionKey});t.setPeriod(this._startDate,this._endDate),t.refresh()}_dateRangeChanged(t){this._startDate=(0,y.ol)(t.detail.value.startDate,n.o,this.hass.locale,this.hass.config),this._endDate=(0,y.ol)(t.detail.value.endDate,r.D,this.hass.locale,this.hass.config),this._updateCollectionPeriod()}_presetSelected(t){localStorage.setItem(`energy-default-period-_${this.collectionKey||"energy"}`,P[t.detail.index])}_pickNow(){if(!this._startDate)return;const t=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config),e=new Date;if("month"===t)[this._startDate,this._endDate]=(0,C.b)(this.hass,"this_month");else if("quarter"===t)[this._startDate,this._endDate]=(0,C.b)(this.hass,"this_quarter");else if("year"===t)[this._startDate,this._endDate]=(0,C.b)(this.hass,"this_year");else{const t=(0,v.PE)(this.hass.locale),s=(0,y.ol)(this._endDate,o.k,this.hass.locale,this.hass.config,{weekStartsOn:t}),i=(0,y.ol)(this._endDate,c.$,this.hass.locale,this.hass.config,{weekStartsOn:t});if(this._startDate.getTime()===s.getTime()&&this._endDate.getTime()===i.getTime())[this._startDate,this._endDate]=(0,C.b)(this.hass,"this_week");else{const s=(0,y.EO)(this._endDate,this._startDate,l.c,this.hass.locale,this.hass.config);this._startDate=(0,y.ol)((0,y.ol)(e,h.e,this.hass.locale,this.hass.config,s),n.o,this.hass.locale,this.hass.config,{weekStartsOn:t}),this._endDate=(0,y.ol)(e,r.D,this.hass.locale,this.hass.config,{weekStartsOn:t})}}this._updateCollectionPeriod()}_pickPrevious(){this._shift(!1)}_pickNext(){this._shift(!0)}_shift(t){if(!this._startDate)return;const{start:e,end:s}=(0,y.eE)(this._startDate,this._endDate,t,this.hass.locale,this.hass.config);this._startDate=e,this._endDate=s,this._updateCollectionPeriod()}_updateDates(t){this._compare=void 0!==t.startCompare,this._startDate=t.start,this._endDate=t.end||(0,d.o)()}_toggleCompare(t){if("interaction"!==t.detail.source)return;this._compare=t.detail.selected;const e=(0,x.tb)(this.hass,{key:this.collectionKey});e.setCompare(this._compare),e.refresh()}constructor(...t){super(...t),this._ranges={},this._compare=!1,this._simpleRange=(0,m.A)((t,e,s,i)=>{if(0===(0,l.c)(e,t))return"day";if((0,y.xo)(t,u.e,s,i)&&(0,y.xo)(e,_.c,s,i)){if(0===(0,y.EO)(e,t,f.W,s,i))return"month";if(2===(0,y.EO)(e,t,f.W,s,i)&&t.getMonth()%3==0)return"quarter"}return(0,y.xo)(t,u.e,s,i)&&(0,y.xo)(e,_.c,s,i)&&11===(0,y.EO)(e,t,f.W,s,i)?"year":"other"})}}M.styles=(0,p.AH)(A||(A=E`.row{display:flex;align-items:center}:host .time-handle{display:flex;justify-content:flex-end;align-items:center}:host([narrow]) .time-handle{margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}.label{display:flex;align-items:center;justify-content:flex-end;font-size:var(--ha-font-size-xl);margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}:host([narrow]) .label{margin-left:unset;margin-inline-start:unset;margin-inline-end:initial}ha-button{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;flex-shrink:0;--ha-button-theme-color:currentColor}`)),(0,a.__decorate)([(0,g.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,a.__decorate)([(0,g.MZ)({attribute:"collection-key"})],M.prototype,"collectionKey",void 0),(0,a.__decorate)([(0,g.MZ)({type:Boolean,reflect:!0})],M.prototype,"narrow",void 0),(0,a.__decorate)([(0,g.wk)()],M.prototype,"_startDate",void 0),(0,a.__decorate)([(0,g.wk)()],M.prototype,"_endDate",void 0),(0,a.__decorate)([(0,g.wk)()],M.prototype,"_ranges",void 0),(0,a.__decorate)([(0,g.wk)()],M.prototype,"_compare",void 0),M=(0,a.__decorate)([(0,g.EM)("hui-energy-period-selector")],M),e()}catch($){e($)}})},74879:function(t,e,s){var i=s(87642),a=s(36196),n=s(48630),r=s(85456),o=TypeError,c=Object.defineProperty,l=a.self!==a;try{if(r){var h=Object.getOwnPropertyDescriptor(a,"self");!l&&h&&h.get&&h.enumerable||n(a,"self",{get:function(){return a},set:function(t){if(this!==a)throw new o("Illegal invocation");c(a,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else i({global:!0,simple:!0,forced:l},{self:a})}catch(d){}},76174:function(t,e,s){s.d(e,{o:function(){return a}});var i=s(3313);function a(t){return(0,i.D)(Date.now(),t)}}}]);
//# sourceMappingURL=39756.7cc4fbdf19daaac3.js.map