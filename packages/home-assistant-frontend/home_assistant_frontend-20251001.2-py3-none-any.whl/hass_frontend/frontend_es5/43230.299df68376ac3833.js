"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["43230"],{38637:function(e,i,s){s.a(e,async function(e,a){try{s.r(i),s.d(i,{CloudRegister:function(){return f}});s(35748),s(5934),s(95013);var o=s(69868),t=s(84922),r=s(11991),l=s(44017),n=s(41042),c=(s(94124),s(70490),s(80287),s(50991)),d=(s(41564),s(50809)),h=(s(99494),s(35988),e([n]));n=(h.then?(await h)():h)[0];let u,p,g,_=e=>e;class f extends t.WF{render(){var e;return(0,t.qy)(u||(u=_` <hass-subpage .hass="${0}" .narrow="${0}" .header="${0}"> <div class="content"> <ha-config-section .isWide="${0}"> <span slot="header">${0}</span> <div slot="introduction"> <p> ${0} </p> <p> ${0} </p> <ul> <li> ${0} </li> <li> ${0} </li> <li> ${0} </li> <li> ${0} </li> </ul> <p> ${0} <a href="https://www.nabucasa.com" target="_blank">Nabu Casa, Inc</a> ${0} </p> <p> ${0} </p> <ul> <li> <a href="https://www.nabucasa.com/tos/" target="_blank" rel="noreferrer"> ${0} </a> </li> <li> <a href="https://www.nabucasa.com/privacy_policy/" target="_blank" rel="noreferrer"> ${0} </a> </li> </ul> </div> <ha-card outlined .header="${0}"><div class="card-content register-form"> ${0} <ha-textfield autofocus id="email" name="email" .label="${0}" type="email" autocomplete="email" required .value="${0}" @keydown="${0}" validationMessage="${0}"></ha-textfield> <ha-password-field id="password" name="password" .label="${0}" .value="${0}" autocomplete="new-password" minlength="8" required @keydown="${0}" validationMessage="${0}"></ha-password-field> </div> <div class="card-actions"> <button class="link" .disabled="${0}" @click="${0}"> ${0} </button> <ha-progress-button @click="${0}" .progress="${0}">${0}</ha-progress-button> </div> </ha-card> </ha-config-section> </div> </hass-subpage> `),this.hass,this.narrow,this.hass.localize("ui.panel.config.cloud.register.title"),this.isWide,this.hass.localize("ui.panel.config.cloud.register.headline"),this.hass.localize("ui.panel.config.cloud.register.information"),this.hass.localize("ui.panel.config.cloud.register.information2"),this.hass.localize("ui.panel.config.cloud.register.feature_remote_control"),this.hass.localize("ui.panel.config.cloud.register.feature_google_home"),this.hass.localize("ui.panel.config.cloud.register.feature_amazon_alexa"),this.hass.localize("ui.panel.config.cloud.register.feature_webhook_apps"),this.hass.localize("ui.panel.config.cloud.register.information3"),this.hass.localize("ui.panel.config.cloud.register.information3a"),this.hass.localize("ui.panel.config.cloud.register.information4"),this.hass.localize("ui.panel.config.cloud.register.link_terms_conditions"),this.hass.localize("ui.panel.config.cloud.register.link_privacy_policy"),this.hass.localize("ui.panel.config.cloud.register.create_account"),this._error?(0,t.qy)(p||(p=_`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):"",this.hass.localize("ui.panel.config.cloud.register.email_address"),null!==(e=this.email)&&void 0!==e?e:"",this._keyDown,this.hass.localize("ui.panel.config.cloud.register.email_error_msg"),this.hass.localize("ui.panel.config.cloud.register.password"),this._password,this._keyDown,this.hass.localize("ui.panel.config.cloud.register.password_error_msg"),this._requestInProgress,this._handleResendVerifyEmail,this.hass.localize("ui.panel.config.cloud.register.resend_confirm_email"),this._handleRegister,this._requestInProgress,this.hass.localize("ui.panel.config.cloud.register.start_trial"))}_keyDown(e){"Enter"===e.key&&this._handleRegister()}async _handleRegister(){const e=this._emailField,i=this._passwordField;if(!e.reportValidity())return i.reportValidity(),void e.focus();if(!i.reportValidity())return void i.focus();const s=e.value.toLowerCase(),a=i.value;this._requestInProgress=!0;try{await(0,c.vO)(this.hass,s,a),this._verificationEmailSent(s)}catch(o){this._password="",this._requestInProgress=!1,this._error=o&&o.body&&o.body.message?o.body.message:"Unknown error"}}async _handleResendVerifyEmail(){const e=this._emailField;if(!e.reportValidity())return void e.focus();const i=e.value,s=async e=>{try{await(0,c.q3)(this.hass,e),this._verificationEmailSent(e)}catch(i){"usernotfound"===(i&&i.body&&i.body.code)&&e!==e.toLowerCase()?await s(e.toLowerCase()):this._error=i&&i.body&&i.body.message?i.body.message:"Unknown error"}};await s(i)}_verificationEmailSent(e){this._requestInProgress=!1,this._password="",(0,l.r)(this,"cloud-email-changed",{value:e}),(0,l.r)(this,"cloud-done",{flashMessage:this.hass.localize("ui.panel.config.cloud.register.account_created")})}static get styles(){return[d.RF,(0,t.AH)(g||(g=_`[slot=introduction]{margin:-1em 0}[slot=introduction] a{color:var(--primary-color)}a{color:var(--primary-color)}h1{margin:0}.register-form{display:flex;flex-direction:column}.card-actions{display:flex;justify-content:space-between;align-items:center}`))]}constructor(...e){super(...e),this.isWide=!1,this.narrow=!1,this._requestInProgress=!1,this._password=""}}(0,o.__decorate)([(0,r.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:"is-wide",type:Boolean})],f.prototype,"isWide",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],f.prototype,"narrow",void 0),(0,o.__decorate)([(0,r.MZ)()],f.prototype,"email",void 0),(0,o.__decorate)([(0,r.wk)()],f.prototype,"_requestInProgress",void 0),(0,o.__decorate)([(0,r.wk)()],f.prototype,"_password",void 0),(0,o.__decorate)([(0,r.wk)()],f.prototype,"_error",void 0),(0,o.__decorate)([(0,r.P)("#email",!0)],f.prototype,"_emailField",void 0),(0,o.__decorate)([(0,r.P)("#password",!0)],f.prototype,"_passwordField",void 0),f=(0,o.__decorate)([(0,r.EM)("cloud-register")],f),a()}catch(u){a(u)}})}}]);
//# sourceMappingURL=43230.299df68376ac3833.js.map