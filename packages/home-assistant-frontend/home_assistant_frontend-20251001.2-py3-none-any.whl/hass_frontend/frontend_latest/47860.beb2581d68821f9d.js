export const __webpack_id__="47860";export const __webpack_ids__=["47860"];export const __webpack_modules__={96735:function(t,e,a){a.a(t,async function(t,o){try{a.r(e);a(81071),a(92714),a(55885);var s=a(69868),n=a(84922),i=a(22019),c=a(63870),r=a(41042),d=(a(65954),a(14523)),l=a(51140),h=a(91197),_=t([r]);r=(_.then?(await _)():_)[0];class p extends n.WF{connectedCallback(){super.connectedCallback(),this._attached=!0}disconnectedCallback(){super.disconnectedCallback(),this._attached=!1}render(){return this._attached&&this.stateObj?n.qy` <ha-camera-stream .hass="${this.hass}" .stateObj="${this.stateObj}" allow-exoplayer controls></ha-camera-stream> <div class="actions"> <ha-progress-button @click="${this._downloadSnapshot}" .progress="${this._waiting}" .disabled="${this.stateObj.state===d.Hh}" appearance="filled"> ${this.hass.localize("ui.dialogs.more_info_control.camera.download_snapshot")} </ha-progress-button> </div> `:n.s6}async _downloadSnapshot(t){const e=t.currentTarget;this._waiting=!0;try{const t=await this.hass.callApiRaw("GET",`camera_proxy/${this.stateObj.entity_id}`);if(!t)throw new Error("No response from API");const e="image/png"===t.headers.get("content-type")?"png":"jpg",a=(new Date).toLocaleString(),o=`snapshot_${(0,c.Y)(this.stateObj.entity_id)}_${a}.${e}`,s=await t.blob(),n=window.URL.createObjectURL(s);(0,l.R)(n,o)}catch(t){return this._waiting=!1,e.actionError(),void(0,h.P)(this,{message:this.hass.localize("ui.dialogs.more_info_control.camera.failed_to_download")})}this._waiting=!1,e.actionSuccess()}constructor(...t){super(...t),this._attached=!1,this._waiting=!1}}p.styles=n.AH`:host{display:block}.actions{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;box-sizing:border-box;padding:16px;z-index:1;gap:8px}`,(0,s.__decorate)([(0,i.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,s.__decorate)([(0,i.MZ)({attribute:!1})],p.prototype,"stateObj",void 0),(0,s.__decorate)([(0,i.wk)()],p.prototype,"_attached",void 0),(0,s.__decorate)([(0,i.wk)()],p.prototype,"_waiting",void 0),customElements.define("more-info-camera",p),o()}catch(t){o(t)}})},51140:function(t,e,a){a.d(e,{h:()=>n,R:()=>s});var o=a(49487);const s=(t,e="")=>{const a=document.createElement("a");a.target="_blank",a.href=t,a.download=e,a.style.display="none",document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),document.body.removeChild(a)},n=t=>!(t=>!!t.auth.external&&o.n)(t)||!!t.auth.external?.config.downloadFileSupported},49487:function(t,e,a){a.d(e,{n:()=>o});const o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}};
//# sourceMappingURL=47860.beb2581d68821f9d.js.map