export const __webpack_id__="4715";export const __webpack_ids__=["4715"];export const __webpack_modules__={37749:function(t,e,a){a.a(t,async function(t,e){try{a(65315),a(37089);var i=a(69868),s=a(84922),n=a(22019),r=a(48893),o=a(8868),l=a(16064),c=a(54337),d=a(73538),u=t([o]);o=(u.then?(await u)():u)[0];const _=(t,e,a)=>180*(0,d.NN)((0,d.S8)(t,e,a),e,a)/100;class h extends s.WF{firstUpdated(t){super.firstUpdated(t),(0,c.m)(()=>{this._updated=!0,this._angle=_(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg()})}updated(t){super.updated(t),this._updated&&(t.has("value")||t.has("valueText")||t.has("label")||t.has("_segment_label"))&&(this._angle=_(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg())}render(){return s.JW` <svg viewBox="-50 -50 100 50" class="gauge"> ${this.needle&&this.levels?"":s.JW`<path class="dial" d="M -40 0 A 40 40 0 0 1 40 0"></path>`} ${this.levels?this.levels.sort((t,e)=>t.level-e.level).map((t,e)=>{let a;if(0===e&&t.level!==this.min){const t=_(this.min,this.min,this.max);a=s.JW`<path stroke="var(--info-color)" class="level" d="M
                          ${0-40*Math.cos(t*Math.PI/180)}
                          ${0-40*Math.sin(t*Math.PI/180)}
                         A 40 40 0 0 1 40 0
                        "></path>`}const i=_(t.level,this.min,this.max);return s.JW`${a}<path stroke="${t.stroke}" class="level" d="M
                        ${0-40*Math.cos(i*Math.PI/180)}
                        ${0-40*Math.sin(i*Math.PI/180)}
                       A 40 40 0 0 1 40 0
                      "></path>`}):""} ${this.needle?s.JW`<path class="needle" d="M -25 -2.5 L -47.5 0 L -25 2.5 z" style="${(0,r.W)({transform:`rotate(${this._angle}deg)`})}"> </path>`:s.JW`<path class="value" d="M -40 0 A 40 40 0 1 0 40 0" style="${(0,r.W)({transform:`rotate(${this._angle}deg)`})}"></path>`}  </svg> <svg class="text"> <text class="value-text"> ${this._segment_label?this._segment_label:this.valueText||(0,o.ZV)(this.value,this.locale,this.formatOptions)}${this._segment_label?"":"%"===this.label?(0,l.d)(this.locale)+"%":` ${this.label}`} </text> </svg>`}_rescaleSvg(){const t=this.shadowRoot.querySelector(".text"),e=t.querySelector("text").getBBox();t.setAttribute("viewBox",`${e.x} ${e.y} ${e.width} ${e.height}`)}_getSegmentLabel(){if(this.levels){this.levels.sort((t,e)=>t.level-e.level);for(let t=this.levels.length-1;t>=0;t--)if(this.value>=this.levels[t].level)return this.levels[t].label}return""}constructor(...t){super(...t),this.min=0,this.max=100,this.value=0,this.needle=!1,this.label="",this._angle=0,this._updated=!1,this._segment_label=""}}h.styles=s.AH`:host{position:relative}.dial{fill:none;stroke:var(--primary-background-color);stroke-width:15}.value{fill:none;stroke-width:15;stroke:var(--gauge-color);transition:all 1s ease 0s}.needle{fill:var(--primary-text-color);transition:all 1s ease 0s}.level{fill:none;stroke-width:15}.gauge{display:block}.text{position:absolute;max-height:40%;max-width:55%;left:50%;bottom:-6%;transform:translate(-50%,0%)}.value-text{font-size:50px;fill:var(--primary-text-color);text-anchor:middle;direction:ltr}`,(0,i.__decorate)([(0,n.MZ)({type:Number})],h.prototype,"min",void 0),(0,i.__decorate)([(0,n.MZ)({type:Number})],h.prototype,"max",void 0),(0,i.__decorate)([(0,n.MZ)({type:Number})],h.prototype,"value",void 0),(0,i.__decorate)([(0,n.MZ)({attribute:!1})],h.prototype,"formatOptions",void 0),(0,i.__decorate)([(0,n.MZ)({attribute:!1,type:String})],h.prototype,"valueText",void 0),(0,i.__decorate)([(0,n.MZ)({attribute:!1})],h.prototype,"locale",void 0),(0,i.__decorate)([(0,n.MZ)({type:Boolean})],h.prototype,"needle",void 0),(0,i.__decorate)([(0,n.MZ)({type:Array})],h.prototype,"levels",void 0),(0,i.__decorate)([(0,n.MZ)()],h.prototype,"label",void 0),(0,i.__decorate)([(0,n.wk)()],h.prototype,"_angle",void 0),(0,i.__decorate)([(0,n.wk)()],h.prototype,"_updated",void 0),(0,i.__decorate)([(0,n.wk)()],h.prototype,"_segment_label",void 0),h=(0,i.__decorate)([(0,n.EM)("ha-gauge")],h),e()}catch(t){e(t)}})},63002:function(t,e,a){a.d(e,{$3:()=>p,$O:()=>S,$j:()=>v,ED:()=>n,JE:()=>w,OQ:()=>$,PU:()=>k,Ph:()=>h,Uf:()=>M,W1:()=>g,Wr:()=>d,Z:()=>l,gF:()=>f,iY:()=>m,jU:()=>r,nN:()=>b,p3:()=>c,pJ:()=>_,r_:()=>o,sz:()=>u});a(65315),a(59023);var i=a(72652),s=a(50654),n=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const r=59509==a.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,o=["L","gal","ft³","m³","CCF","MCF"],l=t=>t.sendMessagePromise({type:"recorder/info"}),c=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),d=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),u=(t,e,a,i,s="hour",n,r)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:a?.toISOString(),statistic_ids:i,period:s,units:n,types:r}),_=(t,e,a,i)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:a.fixed_period?{start_time:a.fixed_period.start instanceof Date?a.fixed_period.start.toISOString():a.fixed_period.start,end_time:a.fixed_period.end instanceof Date?a.fixed_period.end.toISOString():a.fixed_period.end}:void 0,calendar:a.calendar?{..."week"===a.calendar.period?{first_weekday:(0,s.DD)(t.locale).substring(0,3)}:{},...a.calendar}:void 0,rolling_window:a.rolling_window}),h=t=>t.callWS({type:"recorder/validate_statistics"}),g=(t,e,a)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:a}),p=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),v=t=>{let e=null;if(!t)return null;for(const a of t)null!==a.change&&void 0!==a.change&&(null===e?e=a.change:e+=a.change);return e},f=(t,e)=>{let a=null;for(const i of e){if(!(i in t))continue;const e=v(t[i]);null!==e&&(null===a?a=e:a+=e)}return a},m=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),y=["mean","min","max"],x=["sum","state","change"],b=(t,e)=>!(!y.includes(e)||0===t.mean_type)||!(!x.includes(e)||!t.has_sum),M=(t,e,a,i,s)=>{const n=new Date(a).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:n,adjustment:i,adjustment_unit_of_measurement:s})},S=(t,e,a)=>{const s=t.states[e];return s?(0,i.u)(s):a?.name||e},w=(t,e,a)=>{let i;return e&&(i=t.states[e]?.attributes.unit_of_measurement),void 0===i?a?.statistics_unit_of_measurement:i},$=t=>t.includes(":"),k=t=>t.callWS({type:"recorder/update_statistics_issues"})},91575:function(t,e,a){a.a(t,async function(t,i){try{a.r(e);var s=a(69868),n=a(84922),r=a(22019),o=a(8868),l=(a(70490),a(37749)),c=(a(86160),a(7245)),d=a(43716),u=a(40328),_=a(8510),h=t([l,c,d,o]);[l,c,d,o]=h.then?(await h)():h;const g="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",p=[{level:-1,stroke:"var(--energy-grid-consumption-color)"},{level:0,stroke:"var(--energy-grid-return-color)"}];class v extends((0,u.E)(n.WF)){hassSubscribe(){return[(0,d.tb)(this.hass,{key:this._config?.collection_key}).subscribe(t=>{this._data=t})]}getCardSize(){return 4}setConfig(t){this._config=t}shouldUpdate(t){return(0,_.xP)(this,t)||t.size>1||!t.has("hass")}render(){if(!this._config||!this.hass)return n.s6;if(!this._data)return n.qy`${this.hass.localize("ui.panel.lovelace.cards.energy.loading")}`;const{summedData:t,compareSummedData:e}=(0,d.gv)(this._data);let a;if(!("from_grid"in t.total))return n.s6;const i=t.total.from_grid??0,s=t.total.to_grid??0;return null!==i&&null!==s&&(a=s>i?1-i/s:s<i?-1*(1-s/i):0),n.qy` <ha-card> ${void 0!==a?n.qy` <ha-gauge min="-1" max="1" .value="${a}" .valueText="${(0,o.ZV)(Math.abs(s-i),this.hass.locale,{maximumFractionDigits:2})}" .locale="${this.hass.locale}" .levels="${p}" label="kWh" needle></ha-gauge> <ha-svg-icon id="info" .path="${g}"></ha-svg-icon> <ha-tooltip for="info" placement="left"> ${this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.energy_dependency")} <br><br> ${this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.color_explain")} </ha-tooltip> <div class="name"> ${s>=i?this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_returned_grid"):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_consumed_grid")} </div> `:this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.grid_neutrality_not_calculated")} </ha-card> `}constructor(...t){super(...t),this.hassSubscribeRequiredHostProps=["_config"]}}v.styles=n.AH`ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}`,(0,s.__decorate)([(0,r.MZ)({attribute:!1})],v.prototype,"hass",void 0),(0,s.__decorate)([(0,r.wk)()],v.prototype,"_config",void 0),(0,s.__decorate)([(0,r.wk)()],v.prototype,"_data",void 0),v=(0,s.__decorate)([(0,r.EM)("hui-energy-grid-neutrality-gauge-card")],v),i()}catch(t){i(t)}})},73538:function(t,e,a){a.d(e,{NN:()=>s,S8:()=>i,gN:()=>n});const i=(t,e,a)=>isNaN(t)||isNaN(e)||isNaN(a)?0:t>a?a:t<e?e:t,s=(t,e,a)=>100*(t-e)/(a-e),n=t=>Math.round(10*t)/10},4681:function(t,e,a){a.d(e,{L:()=>n});var i=a(49418),s=a(27554);function n(t,e,a){return(0,i.A)(t,e*s.s0,a)}},49418:function(t,e,a){a.d(e,{A:()=>n});var i=a(67874),s=a(19490);function n(t,e,a){return(0,i.w)(a?.in||t,+(0,s.a)(t)+e)}},38227:function(t,e,a){a.d(e,{z:()=>s});var i=a(19490);function s(t,e){const a=+(0,i.a)(t)-+(0,i.a)(e);return a<0?-1:a>0?1:a}},28829:function(t,e,a){a.d(e,{b:()=>s});var i=a(19490);function s(t,e){return+(0,i.a)(t)-+(0,i.a)(e)}},99904:function(t,e,a){a.d(e,{W:()=>o});var i=a(90298),s=a(38227);function n(t,e,a){const[s,n]=(0,i.x)(a?.in,t,e);return 12*(s.getFullYear()-n.getFullYear())+(s.getMonth()-n.getMonth())}var r=a(78320);function o(t,e,a){const[o,l,c]=(0,i.x)(a?.in,t,t,e),d=(0,s.z)(l,c),u=Math.abs(n(l,c));if(u<1)return 0;1===l.getMonth()&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-d*u);let _=(0,s.z)(l,c)===-d;(0,r.c)(o)&&1===u&&1===(0,s.z)(o,c)&&(_=!1);const h=d*(u-+_);return 0===h?0:h}},44943:function(t,e,a){a.d(e,{j:()=>s});var i=a(19490);function s(t,e){const a=(0,i.a)(t,e?.in),s=a.getMonth(),n=s-s%3+3;return a.setMonth(n,0),a.setHours(23,59,59,999),a}},25223:function(t,e,a){a.d(e,{$:()=>n});var i=a(6223),s=a(19490);function n(t,e){const a=(0,i.q)(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,r=(0,s.a)(t,e?.in),o=r.getDay(),l=6+(o<n?-7:0)-(o-n);return r.setDate(r.getDate()+l),r.setHours(23,59,59,999),r}},93910:function(t,e,a){a.d(e,{Q:()=>s});var i=a(19490);function s(t,e){const a=(0,i.a)(t,e?.in),s=a.getFullYear();return a.setFullYear(s+1,0,0),a.setHours(23,59,59,999),a}},80850:function(t,e,a){a.d(e,{e:()=>s});var i=a(19490);function s(t,e){return 1===(0,i.a)(t,e?.in).getDate()}},83466:function(t,e,a){a.d(e,{w:()=>s});var i=a(19490);function s(t,e){const a=(0,i.a)(t,e?.in);return a.setDate(1),a.setHours(0,0,0,0),a}},47432:function(t,e,a){a.d(e,{a:()=>s});var i=a(19490);function s(t,e){const a=(0,i.a)(t,e?.in),s=a.getMonth(),n=s-s%3;return a.setMonth(n,1),a.setHours(0,0,0,0),a}},13486:function(t,e,a){a.d(e,{e:()=>s});var i=a(91927);function s(t,e,a){return(0,i.f)(t,-e,a)}},4494:function(t,e,a){a.d(e,{O:()=>s});var i=a(4681);function s(t,e,a){return(0,i.L)(t,-e,a)}},11042:function(t,e,a){a.d(e,{a:()=>s});var i=a(9151);function s(t,e,a){return(0,i.P)(t,-e,a)}}};
//# sourceMappingURL=4715.fcb24a4fe83a267a.js.map