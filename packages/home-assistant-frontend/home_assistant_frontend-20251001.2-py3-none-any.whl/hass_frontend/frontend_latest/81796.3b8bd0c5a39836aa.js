export const __webpack_id__="81796";export const __webpack_ids__=["81796"];export const __webpack_modules__={94327:function(e,t,a){a.d(t,{Vy:()=>r,fI:()=>n,ux:()=>c});var o=a(65940),i=a(83510);const s=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function r(e){return s[e%s.length]}function n(e,t){const a=t.getPropertyValue(`--graph-color-${e+1}`)||r(e);return(0,i.RQ)(a)}const c=(0,o.A)(e=>s.map((t,a)=>n(a,e)),(e,t)=>e[0].getPropertyValue("--graph-color-1")===t[0].getPropertyValue("--graph-color-1"))},46089:function(e,t,a){a.a(e,async function(e,o){try{a.d(t,{CA:()=>k,Pm:()=>w,Wq:()=>v,Yq:()=>l,fr:()=>g,gu:()=>M,kz:()=>h,sl:()=>b,zB:()=>m});a(65315),a(84136);var i=a(77489),s=a(65940),r=a(92149),n=a(43286),c=e([i,n]);[i,n]=c.then?(await c)():c;(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",month:"long",day:"numeric",timeZone:(0,n.w)(e.time_zone,t)}));const l=(e,t,a)=>d(t,a.time_zone).format(e),d=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",timeZone:(0,n.w)(e.time_zone,t)})),h=(e,t,a)=>u(t,a.time_zone).format(e),u=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"short",day:"numeric",timeZone:(0,n.w)(e.time_zone,t)})),m=(e,t,a)=>{const o=p(t,a.time_zone);if(t.date_format===r.ow.language||t.date_format===r.ow.system)return o.format(e);const i=o.formatToParts(e),s=i.find(e=>"literal"===e.type)?.value,n=i.find(e=>"day"===e.type)?.value,c=i.find(e=>"month"===e.type)?.value,l=i.find(e=>"year"===e.type)?.value,d=i[i.length-1];let h="literal"===d?.type?d?.value:"";"bg"===t.language&&t.date_format===r.ow.YMD&&(h="");return{[r.ow.DMY]:`${n}${s}${c}${s}${l}${h}`,[r.ow.MDY]:`${c}${s}${n}${s}${l}${h}`,[r.ow.YMD]:`${l}${s}${c}${s}${n}${h}`}[t.date_format]},p=(0,s.A)((e,t)=>{const a=e.date_format===r.ow.system?void 0:e.language;return e.date_format===r.ow.language||(e.date_format,r.ow.system),new Intl.DateTimeFormat(a,{year:"numeric",month:"numeric",day:"numeric",timeZone:(0,n.w)(e.time_zone,t)})}),b=(e,t,a)=>_(t,a.time_zone).format(e),_=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{day:"numeric",month:"short",timeZone:(0,n.w)(e.time_zone,t)})),g=(e,t,a)=>f(t,a.time_zone).format(e),f=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{month:"long",year:"numeric",timeZone:(0,n.w)(e.time_zone,t)})),v=(e,t,a)=>y(t,a.time_zone).format(e),y=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{month:"long",timeZone:(0,n.w)(e.time_zone,t)})),w=(e,t,a)=>x(t,a.time_zone).format(e),x=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",timeZone:(0,n.w)(e.time_zone,t)})),k=(e,t,a)=>$(t,a.time_zone).format(e),$=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",timeZone:(0,n.w)(e.time_zone,t)})),M=(e,t,a)=>z(t,a.time_zone).format(e),z=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"short",timeZone:(0,n.w)(e.time_zone,t)}));o()}catch(e){o(e)}})},65380:function(e,t,a){a.a(e,async function(e,o){try{a.d(t,{LW:()=>b,Xs:()=>m,fU:()=>l,ie:()=>h});var i=a(77489),s=a(65940),r=a(43286),n=a(52285),c=e([i,r]);[i,r]=c.then?(await c)():c;const l=(e,t,a)=>d(t,a.time_zone).format(e),d=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,n.J)(e)?"h12":"h23",timeZone:(0,r.w)(e.time_zone,t)})),h=(e,t,a)=>u(t,a.time_zone).format(e),u=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{hour:(0,n.J)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,n.J)(e)?"h12":"h23",timeZone:(0,r.w)(e.time_zone,t)})),m=(e,t,a)=>p(t,a.time_zone).format(e),p=(0,s.A)((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",hour:(0,n.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,n.J)(e)?"h12":"h23",timeZone:(0,r.w)(e.time_zone,t)})),b=(e,t,a)=>_(t,a.time_zone).format(e),_=(0,s.A)((e,t)=>new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,r.w)(e.time_zone,t)}));o()}catch(e){o(e)}})},94029:function(e,t,a){a.a(e,async function(e,o){try{a.d(t,{K:()=>l});var i=a(77489),s=a(65940),r=a(22989),n=e([i,r]);[i,r]=n.then?(await n)():n;const c=(0,s.A)(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})),l=(e,t,a,o=!0)=>{const i=(0,r.x)(e,a,t);return o?c(t).format(i.value,i.unit):Intl.NumberFormat(t.language,{style:"unit",unit:i.unit,unitDisplay:"long"}).format(Math.abs(i.value))};o()}catch(e){o(e)}})},43286:function(e,t,a){a.a(e,async function(e,o){try{a.d(t,{w:()=>l});var i=a(77489),s=a(92149),r=e([i]);i=(r.then?(await r)():r)[0];const n=Intl.DateTimeFormat?.().resolvedOptions?.().timeZone,c=n??"UTC",l=(e,t)=>e===s.Wj.local&&n?c:t;o()}catch(e){o(e)}})},52285:function(e,t,a){a.d(t,{J:()=>s});var o=a(65940),i=a(92149);const s=(0,o.A)(e=>{if(e.time_format===i.Hg.language||e.time_format===i.Hg.system){const t=e.time_format===i.Hg.language?e.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(t).includes("10")}return e.time_format===i.Hg.am_pm})},35297:function(e,t,a){a.d(t,{Z:()=>o});const o=e=>e.charAt(0).toUpperCase()+e.slice(1)},22989:function(e,t,a){a.a(e,async function(e,o){try{a.d(t,{x:()=>h});var i=a(41484),s=a(88258),r=a(42794),n=a(50654);const c=1e3,l=60,d=60*l;function h(e,t=Date.now(),a,o={}){const h={...u,...o||{}},m=(+e-+t)/c;if(Math.abs(m)<h.second)return{value:Math.round(m),unit:"second"};const p=m/l;if(Math.abs(p)<h.minute)return{value:Math.round(p),unit:"minute"};const b=m/d;if(Math.abs(b)<h.hour)return{value:Math.round(b),unit:"hour"};const _=new Date(e),g=new Date(t);_.setHours(0,0,0,0),g.setHours(0,0,0,0);const f=(0,i.c)(_,g);if(0===f)return{value:Math.round(b),unit:"hour"};if(Math.abs(f)<h.day)return{value:f,unit:"day"};const v=(0,n.PE)(a),y=(0,s.k)(_,{weekStartsOn:v}),w=(0,s.k)(g,{weekStartsOn:v}),x=(0,r.I)(y,w);if(0===x)return{value:f,unit:"day"};if(Math.abs(x)<h.week)return{value:x,unit:"week"};const k=_.getFullYear()-g.getFullYear(),$=12*k+_.getMonth()-g.getMonth();return 0===$?{value:x,unit:"week"}:Math.abs($)<h.month||0===k?{value:$,unit:"month"}:{value:Math.round(k),unit:"year"}}const u={second:45,minute:45,hour:22,day:5,week:4,month:11};o()}catch(m){o(m)}})},37382:function(e,t,a){a.d(t,{D:()=>s});var o=a(10416),i=a.n(o);const s=e=>i()(e,{whiteList:{},stripIgnoreTag:!0,stripIgnoreTagBody:!0})},52188:function(e,t,a){a.a(e,async function(e,t){try{a(99342),a(65315),a(837),a(84136),a(22416),a(37089);var o=a(69868),i=a(84922),s=a(22019),r=a(65940),n=a(32211),c=a(68717),l=a(40328),d=a(29561),h=e([c]);c=(h.then?(await h)():h)[0];const u="M9.6,14L12,7.7L14.4,14M11,5L5.5,19H7.7L8.8,16H15L16.1,19H18.3L13,5H11Z",m="M5,10A2,2 0 0,0 3,12C3,13.11 3.9,14 5,14C6.11,14 7,13.11 7,12A2,2 0 0,0 5,10M5,16A4,4 0 0,1 1,12A4,4 0 0,1 5,8A4,4 0 0,1 9,12A4,4 0 0,1 5,16M10.5,11H14V8L18,12L14,16V13H10.5V11M5,6C4.55,6 4.11,6.05 3.69,6.14C5.63,3.05 9.08,1 13,1C19.08,1 24,5.92 24,12C24,18.08 19.08,23 13,23C9.08,23 5.63,20.95 3.69,17.86C4.11,17.95 4.55,18 5,18C5.8,18 6.56,17.84 7.25,17.56C8.71,19.07 10.74,20 13,20A8,8 0 0,0 21,12A8,8 0 0,0 13,4C10.74,4 8.71,4.93 7.25,6.44C6.56,6.16 5.8,6 5,6Z";let p;class b extends((0,l.E)(i.WF)){hassSubscribe(){return[(0,n.m)("(prefers-reduced-motion)",e=>{this._reducedMotion!==e&&(this._reducedMotion=e)})]}render(){if(!p||!this.data.nodes?.length)return i.s6;const e=window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches;return i.qy`<ha-chart-base .hass="${this.hass}" .data="${this._getSeries(this.data,this._physicsEnabled,this._reducedMotion,this._showLabels,e)}" .options="${this._createOptions(this.data?.categories)}" height="100%" .extraComponents="${[p]}"> <slot name="button" slot="button"></slot> <ha-icon-button slot="button" class="${this._physicsEnabled?"active":"inactive"}" .path="${m}" @click="${this._togglePhysics}" label="${this.hass.localize("ui.panel.config.common.graph.toggle_physics")}"></ha-icon-button> <ha-icon-button slot="button" class="${this._showLabels?"active":"inactive"}" .path="${u}" @click="${this._toggleLabels}" label="${this.hass.localize("ui.panel.config.common.graph.toggle_labels")}"></ha-icon-button> </ha-chart-base>`}_getPositionedNodes(e,t,a){const o=this.clientWidth,i=this.clientHeight,s=e.map(e=>({...e}));return s.forEach(e=>{a[e.id]&&(e.x=a[e.id].x,e.y=a[e.id].y),0===e.polarDistance&&(null==e.x&&null==e.y&&(e.x=o/2,e.y=i/2),this._positionNodeNeighbors(e,s,t,a))}),s.forEach(e=>{if(e.polarDistance&&null==e.x&&null==e.y){const t=2*Math.random()*Math.PI;e.x=Math.cos(t)*o/2*e.polarDistance+o/2,e.y=Math.sin(t)*i/2*e.polarDistance+i/2,this._nodePositions[e.id]={x:e.x,y:e.y}}}),s}_positionNodeNeighbors(e,t,a,o,i,s=0,r=2*Math.PI){const n=a.map(a=>a.source!==e.id||a.target===i||a.ignoreForceLayout?a.target!==e.id||a.source===i||a.ignoreForceLayout?null:t.find(e=>e.id===a.source):t.find(e=>e.id===a.target)).filter(Boolean);if(!n.length)return;const c=Math.abs(r-s)/n.length,l=[];n.forEach((t,a)=>{if(null==t.x&&null==t.y){const i=s+c*a+c/2;l.push({neighbor:t,angle:i}),o[t.id]?(t.x=o[t.id].x,t.y=o[t.id].y):(t.x=e.x+Math.cos(i)*this.clientWidth/4,t.y=e.y+Math.sin(i)*this.clientHeight/4)}}),l.forEach(({neighbor:i,angle:s})=>{this._positionNodeNeighbors(i,t,a,o,e.id,s-Math.PI/2,s+Math.PI/2)})}_togglePhysics(){this._saveNodePositions(),this._physicsEnabled=!this._physicsEnabled}_toggleLabels(){this._showLabels=!this._showLabels}_saveNodePositions(){const e={};this._baseChart?.chart&&this._baseChart.chart.getModel().getSeriesByIndex(0).getGraph().eachNode(t=>{const a=t.getLayout();a&&(e[t.id]={x:a[0],y:a[1]})}),this._nodePositions=e}constructor(){super(),this._reducedMotion=!1,this._physicsEnabled=!0,this._showLabels=!0,this._nodePositions={},this._createOptions=(0,r.A)(e=>({tooltip:{trigger:"item",confine:!0,formatter:this.tooltipFormatter},legend:{show:!!e?.length,data:e?.map(e=>({...e,icon:e.symbol})),top:8},dataZoom:{type:"inside",filterMode:"none"}}),d.b),this._getSeries=(0,r.A)((e,t,a,o,i)=>({id:"network",type:"graph",layout:t?"force":"none",draggable:!0,roam:!0,selectedMode:"single",label:{show:o,position:"right"},emphasis:{focus:i?"none":"adjacency"},force:{repulsion:[400,600],edgeLength:[200,350],gravity:.05,layoutAnimation:!a&&e.nodes.length<100},edgeSymbol:["none","arrow"],edgeSymbolSize:10,data:this._getSeriesData(e.nodes,e.links,this._nodePositions),links:e.links.map(e=>({...e,value:e.reverseValue?Math.max(e.value??0,e.reverseValue):e.value,symbolSize:e.reverseValue?1:e.symbolSize})),categories:e.categories||[]}),d.b),this._getSeriesData=(0,r.A)((e,t,a)=>this._getPositionedNodes(e,t,a).map(e=>({id:e.id,name:e.name,category:e.category,value:e.value,symbolSize:e.symbolSize||30,symbol:e.symbol||"circle",itemStyle:e.itemStyle||{},fixed:e.fixed,x:e.x,y:e.y})),d.b),p||Promise.all([a.e("93033"),a.e("59401"),a.e("33972"),a.e("75702"),a.e("2667")]).then(a.bind(a,19526)).then(e=>{p=e,this.requestUpdate()})}}b.styles=i.AH`:host{display:block;position:relative}ha-chart-base{height:100%;--chart-max-height:100%}::slotted(ha-icon-button),ha-icon-button{margin-right:12px}`,(0,o.__decorate)([(0,s.MZ)({attribute:!1})],b.prototype,"data",void 0),(0,o.__decorate)([(0,s.MZ)({attribute:!1})],b.prototype,"tooltipFormatter",void 0),(0,o.__decorate)([(0,s.wk)()],b.prototype,"_reducedMotion",void 0),(0,o.__decorate)([(0,s.wk)()],b.prototype,"_physicsEnabled",void 0),(0,o.__decorate)([(0,s.wk)()],b.prototype,"_showLabels",void 0),(0,o.__decorate)([(0,s.P)("ha-chart-base")],b.prototype,"_baseChart",void 0),b=(0,o.__decorate)([(0,s.EM)("ha-network-graph")],b),t()}catch(e){t(e)}})},10547:function(e,t,a){var o=a(69868),i=a(54500),s=a(2909),r=a(22019),n=a(84922),c=a(91541);class l extends i.n{firstUpdated(e){super.firstUpdated(e),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}l.styles=[s.R,n.AH`:host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}`,"rtl"===c.G.document.dir?n.AH`:host .mdc-fab--extended .mdc-fab__icon{direction:rtl}`:n.AH``],l=(0,o.__decorate)([(0,r.EM)("ha-fab")],l)},28652:function(e,t,a){a.a(e,async function(e,t){try{var o=a(69868),i=a(22103),s=a(84922),r=a(22019),n=a(94029),c=a(35297),l=e([n]);n=(l.then?(await l)():l)[0];class d extends s.mN{disconnectedCallback(){super.disconnectedCallback(),this._clearInterval()}connectedCallback(){super.connectedCallback(),this.datetime&&this._startInterval()}createRenderRoot(){return this}firstUpdated(e){super.firstUpdated(e),this._updateRelative()}update(e){super.update(e),this._updateRelative()}_clearInterval(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}_startInterval(){this._clearInterval(),this._interval=window.setInterval(()=>this._updateRelative(),6e4)}_updateRelative(){if(this.datetime){const e="string"==typeof this.datetime?(0,i.H)(this.datetime):this.datetime,t=(0,n.K)(e,this.hass.locale);this.innerHTML=this.capitalize?(0,c.Z)(t):t}else this.innerHTML=this.hass.localize("ui.components.relative_time.never")}constructor(...e){super(...e),this.capitalize=!1}}(0,o.__decorate)([(0,r.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:!1})],d.prototype,"datetime",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],d.prototype,"capitalize",void 0),d=(0,o.__decorate)([(0,r.EM)("ha-relative-time")],d),t()}catch(e){t(e)}})},3980:function(e,t,a){a.d(t,{Ht:()=>n,gO:()=>c,mj:()=>s,wj:()=>l});a(99342);var o=a(58120);const i=(e,t)=>e.subscribeMessage(e=>{const a={...t.state||{}};if(e.add)for(const t of e.add)a[t.source]=t;if(e.remove)for(const t of e.remove)delete a[t.source];t.setState(a,!0)},{type:"bluetooth/subscribe_scanner_details"}),s=(e,t)=>(0,o.N)("_bluetoothScannerDetails",()=>Promise.resolve({}),i,e,t),r=(e,t)=>e.subscribeMessage(e=>{const a=[...t.state||[]];if(e.add)for(const t of e.add){const e=a.findIndex(e=>e.address===t.address);-1===e?a.push(t):a[e]=t}if(e.change)for(const t of e.change){const e=a.findIndex(e=>e.address===t.address);-1!==e&&(a[e]=t)}if(e.remove)for(const t of e.remove){const e=a.findIndex(e=>e.address===t.address);-1!==e&&a.splice(e,1)}t.setState(a,!0)},{type:"bluetooth/subscribe_advertisements"}),n=(e,t)=>(0,o.N)("_bluetoothDeviceRows",()=>Promise.resolve([]),r,e,t),c=(e,t,a)=>{const o={type:"bluetooth/subscribe_connection_allocations"};return a&&(o.config_entry_id=a),e.subscribeMessage(e=>t(e),o)},l=(e,t,a)=>{const o={type:"bluetooth/subscribe_scanner_state"};return a&&(o.config_entry_id=a),e.subscribeMessage(e=>t(e),o)}},41564:function(e,t,a){var o=a(69868),i=a(84922),s=a(22019),r=a(33136),n=a(77240),c=(a(65442),a(45148),a(50809));class l extends i.WF{render(){return i.qy` <div class="toolbar"> <div class="toolbar-content"> ${this.mainPage||history.state?.root?i.qy` <ha-menu-button .hassio="${this.supervisor}" .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:this.backPath?i.qy` <a href="${this.backPath}"> <ha-icon-button-arrow-prev .hass="${this.hass}"></ha-icon-button-arrow-prev> </a> `:i.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._backTapped}"></ha-icon-button-arrow-prev> `} <div class="main-title"> <slot name="header">${this.header}</slot> </div> <slot name="toolbar-icon"></slot> </div> </div> <div class="content ha-scrollbar" @scroll="${this._saveScrollPos}"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> `}_saveScrollPos(e){this._savedScrollPos=e.target.scrollTop}_backTapped(){this.backCallback?this.backCallback():(0,n.O)()}static get styles(){return[c.dp,i.AH`:host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{background-color:var(--app-header-background-color);padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .toolbar{padding-left:var(--safe-area-inset-left)}.toolbar-content{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box;padding:8px 12px}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin:var(--margin-title);line-height:var(--ha-line-height-normal);min-width:0;flex-grow:1;overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding-bottom:1px}.content{position:relative;width:calc(100% - var(--safe-area-inset-right,0px));height:calc(100% - 1px - var(--header-height,0px) - var(--safe-area-inset-top,0px) - var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom,0px)));margin-bottom:var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom));margin-right:var(--safe-area-inset-right);overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content{width:calc(100% - var(--safe-area-inset-left,0px) - var(--safe-area-inset-right,0px));margin-left:var(--safe-area-inset-left)}#fab{position:absolute;right:calc(16px + var(--safe-area-inset-right,0px));inset-inline-end:calc(16px + var(--safe-area-inset-right,0px));inset-inline-start:initial;bottom:calc(16px + var(--safe-area-inset-bottom,0px));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:8px}:host([narrow]) #fab.tabs{bottom:calc(84px + var(--safe-area-inset-bottom,0px))}#fab[is-wide]{bottom:calc(24px + var(--safe-area-inset-bottom,0px));right:calc(24px + var(--safe-area-inset-right,0px));inset-inline-end:calc(24px + var(--safe-area-inset-right,0px));inset-inline-start:initial}`]}constructor(...e){super(...e),this.mainPage=!1,this.narrow=!1,this.supervisor=!1}}(0,o.__decorate)([(0,s.MZ)({attribute:!1})],l.prototype,"hass",void 0),(0,o.__decorate)([(0,s.MZ)()],l.prototype,"header",void 0),(0,o.__decorate)([(0,s.MZ)({type:Boolean,attribute:"main-page"})],l.prototype,"mainPage",void 0),(0,o.__decorate)([(0,s.MZ)({type:String,attribute:"back-path"})],l.prototype,"backPath",void 0),(0,o.__decorate)([(0,s.MZ)({attribute:!1})],l.prototype,"backCallback",void 0),(0,o.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],l.prototype,"narrow",void 0),(0,o.__decorate)([(0,s.MZ)({type:Boolean})],l.prototype,"supervisor",void 0),(0,o.__decorate)([(0,r.a)(".content")],l.prototype,"_savedScrollPos",void 0),(0,o.__decorate)([(0,s.Ls)({passive:!0})],l.prototype,"_saveScrollPos",null),l=(0,o.__decorate)([(0,s.EM)("hass-subpage")],l)},43997:function(e,t,a){a.a(e,async function(e,o){try{a.r(t),a.d(t,{BluetoothAdvertisementMonitorPanel:()=>_,bluetoothAdvertisementMonitorTabs:()=>b});a(65315),a(837),a(84136),a(37089);var i=a(69868),s=a(84922),r=a(22019),n=a(65940),c=a(20051),l=a(94372),d=(a(10547),a(9058),a(28652)),h=a(3980),u=(a(68891),a(50809)),m=a(87511),p=e([d]);d=(p.then?(await p)():p)[0];const b=[{translationKey:"ui.panel.config.bluetooth.advertisement_monitor",path:"advertisement-monitor"},{translationKey:"ui.panel.config.bluetooth.visualization",path:"visualization"}];class _ extends s.WF{connectedCallback(){if(super.connectedCallback(),this.hass){this._unsub_advertisements=(0,h.Ht)(this.hass.connection,e=>{this._data=e}),this._unsub_scanners=(0,h.mj)(this.hass.connection,e=>{this._scanners=e});const e=Object.values(this.hass.devices).filter(e=>e.connections.find(e=>"bluetooth"===e[0]));this._sourceDevices=Object.fromEntries(e.map(e=>[e.connections.find(e=>"bluetooth"===e[0])[1],e]))}}disconnectedCallback(){super.disconnectedCallback(),this._unsub_advertisements&&(this._unsub_advertisements(),this._unsub_advertisements=void 0),this._unsub_scanners&&(this._unsub_scanners(),this._unsub_scanners=void 0)}willUpdate(e){if(super.willUpdate(e),this.hasUpdated)return;const t=(0,l.px)().address;t&&(this.address=t)}render(){return s.qy` <hass-tabs-subpage-data-table .hass="${this.hass}" .narrow="${this.narrow}" .route="${this.route}" .columns="${this._columns(this.hass.localize)}" .data="${this._dataWithNamedSourceAndIds(this._data)}" .noDataText="${this.hass.localize("ui.panel.config.bluetooth.no_advertisements_found")}" @row-click="${this._handleRowClicked}" .initialGroupColumn="${this._activeGrouping}" .initialCollapsedGroups="${this._activeCollapsed}" @grouping-changed="${this._handleGroupingChanged}" @collapsed-changed="${this._handleCollapseChanged}" filter="${this.address||""}" clickable .tabs="${b}"></hass-tabs-subpage-data-table> `}_handleGroupingChanged(e){this._activeGrouping=e.detail.value}_handleCollapseChanged(e){this._activeCollapsed=e.detail.value}_handleRowClicked(e){const t=this._data.find(t=>t.address===e.detail.id);(0,m.a)(this,{entry:t})}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this._data=[],this._scanners={},this._sourceDevices={},this._activeGrouping="source",this._activeCollapsed=[],this._columns=(0,n.A)(e=>({address:{title:e("ui.panel.config.bluetooth.address"),sortable:!0,filterable:!0,showNarrow:!0,main:!0,hideable:!1,moveable:!1,direction:"asc",flex:1},name:{title:e("ui.panel.config.bluetooth.name"),filterable:!0,sortable:!0},device:{title:e("ui.panel.config.bluetooth.device"),filterable:!0,sortable:!0,template:e=>s.qy`${e.device||"-"}`},source:{title:e("ui.panel.config.bluetooth.source"),filterable:!0,sortable:!0,groupable:!0},source_address:{title:e("ui.panel.config.bluetooth.source_address"),filterable:!0,sortable:!0,defaultHidden:!0},time:{title:e("ui.panel.config.bluetooth.updated"),filterable:!1,sortable:!0,defaultHidden:!1,template:e=>s.qy`<ha-relative-time .hass="${this.hass}" .datetime="${e.datetime}" capitalize></ha-relative-time>`},rssi:{title:e("ui.panel.config.bluetooth.rssi"),type:"numeric",maxWidth:"60px",sortable:!0}})),this._dataWithNamedSourceAndIds=(0,n.A)(e=>e.map(e=>{const t=this._sourceDevices[e.address],a=this._sourceDevices[e.source],o=this._scanners[e.source];return{...e,id:e.address,source_address:e.source,source:a?.name_by_user||a?.name||o?.name||e.source,device:t?.name_by_user||t?.name||void 0,datetime:new Date(1e3*e.time)}}))}}_.styles=u.RF,(0,i.__decorate)([(0,r.MZ)({attribute:!1})],_.prototype,"hass",void 0),(0,i.__decorate)([(0,r.MZ)({attribute:!1})],_.prototype,"route",void 0),(0,i.__decorate)([(0,r.MZ)({attribute:!1})],_.prototype,"address",void 0),(0,i.__decorate)([(0,r.MZ)({type:Boolean})],_.prototype,"narrow",void 0),(0,i.__decorate)([(0,r.MZ)({attribute:"is-wide",type:Boolean})],_.prototype,"isWide",void 0),(0,i.__decorate)([(0,r.wk)()],_.prototype,"_data",void 0),(0,i.__decorate)([(0,r.wk)()],_.prototype,"_scanners",void 0),(0,i.__decorate)([(0,r.wk)()],_.prototype,"_sourceDevices",void 0),(0,i.__decorate)([(0,c.I)({key:"bluetooth-advertisement-table-grouping",state:!1,subscribe:!1})],_.prototype,"_activeGrouping",void 0),(0,i.__decorate)([(0,c.I)({key:"bluetooth-advertisement-table-collapsed",state:!1,subscribe:!1})],_.prototype,"_activeCollapsed",void 0),_=(0,i.__decorate)([(0,r.EM)("bluetooth-advertisement-monitor")],_),o()}catch(e){o(e)}})},45180:function(e,t,a){a.a(e,async function(e,o){try{a.r(t),a.d(t,{BluetoothNetworkVisualization:()=>v});a(99342),a(65315),a(837),a(84136),a(22416),a(37089);var i=a(69868),s=a(84922),r=a(22019),n=a(65940),c=a(94029),l=a(77240),d=a(65298),h=a(52188),u=a(3980),m=(a(41564),a(43997)),p=e([h,m,c]);[h,m,c]=p.then?(await p)():p;const b=1e4,_="ha",g="Home Assistant",f=[[-70,"--green-color"],[-75,"--lime-color"],[-80,"--yellow-color"],[-85,"--amber-color"],[-90,"--orange-color"],[-95,"--deep-orange-color"],[-1/0,"--red-color"]];class v extends s.WF{connectedCallback(){if(super.connectedCallback(),this.hass){this._unsub_advertisements=(0,u.Ht)(this.hass.connection,e=>{this._data.length?this._throttledUpdateData(e):this._data=e}),this._unsub_scanners=(0,u.mj)(this.hass.connection,e=>{this._scanners=e});const e=Object.values(this.hass.devices).filter(e=>e.connections.find(e=>"bluetooth"===e[0]));this._sourceDevices=Object.fromEntries(e.map(e=>[e.connections.find(e=>"bluetooth"===e[0])[1],e]))}}disconnectedCallback(){super.disconnectedCallback(),this._unsub_advertisements&&(this._unsub_advertisements(),this._unsub_advertisements=void 0),this._throttledUpdateData.cancel(),this._unsub_scanners&&(this._unsub_scanners(),this._unsub_scanners=void 0)}render(){return s.qy` <hass-tabs-subpage .hass="${this.hass}" .narrow="${this.narrow}" .route="${this.route}" header="${this.hass.localize("ui.panel.config.bluetooth.visualization")}" .tabs="${m.bluetoothAdvertisementMonitorTabs}"> <ha-network-graph .hass="${this.hass}" .data="${this._formatNetworkData(this._data,this._scanners)}" .tooltipFormatter="${this._tooltipFormatter}" @chart-click="${this._handleChartClick}"></ha-network-graph> </hass-tabs-subpage> `}_getBluetoothDeviceName(e){return e===_?g:this._sourceDevices[e]?this._sourceDevices[e]?.name_by_user||this._sourceDevices[e]?.name||e:this._scanners[e]?this._scanners[e]?.name||e:this._data.find(t=>t.address===e)?.name||e}_getLineWidth(e){return e>-33?3:e>-66?2:1}_handleChartClick(e){if("node"===e.detail.dataType&&"pointer"===e.detail.event.target.cursor){const{id:t}=e.detail.data,a=this._sourceDevices[t];a&&(0,l.o)(`/config/devices/device/${a.id}`)}}static get styles(){return[s.AH`ha-network-graph{height:100%}`]}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this._data=[],this._scanners={},this._sourceDevices={},this._throttledUpdateData=(0,d.n)(e=>{this._data=e},b),this._getRssiColorVar=(0,n.A)(e=>{for(const[t,a]of f)if(e>t)return a;return"--red-color"}),this._formatNetworkData=(0,n.A)((e,t)=>{const a=getComputedStyle(this),o=[{name:g,symbol:"roundRect",itemStyle:{color:a.getPropertyValue("--primary-color")}},{name:this.hass.localize("ui.panel.config.bluetooth.scanners"),symbol:"circle",itemStyle:{color:a.getPropertyValue("--cyan-color")}},{name:this.hass.localize("ui.panel.config.bluetooth.known_devices"),symbol:"circle",itemStyle:{color:a.getPropertyValue("--teal-color")}},{name:this.hass.localize("ui.panel.config.bluetooth.unknown_devices"),symbol:"circle",itemStyle:{color:a.getPropertyValue("--disabled-color")}}],i=[{id:_,name:g,category:0,value:4,symbol:"roundRect",symbolSize:40,polarDistance:0}],s=[];return Object.values(t).forEach(e=>{const t=this._sourceDevices[e.source];i.push({id:e.source,name:t?.name_by_user||t?.name||e.name,category:1,value:5,symbol:"circle",symbolSize:30,polarDistance:.25}),s.push({source:_,target:e.source,value:0,symbol:"none",lineStyle:{width:3,color:a.getPropertyValue("--primary-color")}})}),e.forEach(e=>{if(t[e.address])return void s.push({source:e.source,target:e.address,value:e.rssi,symbol:"none",lineStyle:{width:this._getLineWidth(e.rssi),color:a.getPropertyValue(this._getRssiColorVar(e.rssi))}});const o=this._sourceDevices[e.address];i.push({id:e.address,name:this._getBluetoothDeviceName(e.address),value:o?1:0,category:o?2:3,symbolSize:20}),s.push({source:e.source,target:e.address,value:e.rssi,symbol:"none",lineStyle:{width:this._getLineWidth(e.rssi),color:o?a.getPropertyValue(this._getRssiColorVar(e.rssi)):a.getPropertyValue("--disabled-color")}})}),{nodes:i,links:s,categories:o}}),this._tooltipFormatter=e=>{const{dataType:t,data:a}=e;let o="";if("edge"===t){const{source:e,target:t,value:i}=a;o=`${this._getBluetoothDeviceName(e)} → ${this._getBluetoothDeviceName(t)}`,e!==_&&(o+=` <b>${this.hass.localize("ui.panel.config.bluetooth.rssi")}:</b> ${i}`)}else{const{id:e}=a,t=this._getBluetoothDeviceName(e),i=this._data.find(t=>t.address===e);if(i)o=`<b>${t}</b><br><b>${this.hass.localize("ui.panel.config.bluetooth.address")}:</b> ${e}<br><b>${this.hass.localize("ui.panel.config.bluetooth.rssi")}:</b> ${i.rssi}<br><b>${this.hass.localize("ui.panel.config.bluetooth.source")}:</b> ${i.source}<br><b>${this.hass.localize("ui.panel.config.bluetooth.updated")}:</b> ${(0,c.K)(new Date(1e3*i.time),this.hass.locale)}`;else{const a=this._sourceDevices[e];if(a&&(o=`<b>${t}</b><br><b>${this.hass.localize("ui.panel.config.bluetooth.address")}:</b> ${e}`,a.area_id)){const e=this.hass.areas[a.area_id];e&&(o+=`<br><b>${this.hass.localize("ui.panel.config.bluetooth.area")}: </b>${e.name}`)}}}return o}}}(0,i.__decorate)([(0,r.MZ)({attribute:!1})],v.prototype,"hass",void 0),(0,i.__decorate)([(0,r.MZ)({type:Boolean,reflect:!0})],v.prototype,"narrow",void 0),(0,i.__decorate)([(0,r.MZ)({attribute:"is-wide",type:Boolean})],v.prototype,"isWide",void 0),(0,i.__decorate)([(0,r.MZ)({attribute:!1})],v.prototype,"route",void 0),(0,i.__decorate)([(0,r.wk)()],v.prototype,"_data",void 0),(0,i.__decorate)([(0,r.wk)()],v.prototype,"_scanners",void 0),(0,i.__decorate)([(0,r.wk)()],v.prototype,"_sourceDevices",void 0),v=(0,i.__decorate)([(0,r.EM)("bluetooth-network-visualization")],v),o()}catch(e){o(e)}})},87511:function(e,t,a){a.d(t,{a:()=>s});var o=a(44017);const i=()=>a.e("12266").then(a.bind(a,56977)),s=(e,t)=>{(0,o.r)(e,"show-dialog",{dialogTag:"dialog-bluetooth-device-info",dialogImport:i,dialogParams:t})}},74758:function(e,t,a){a.d(t,{o:()=>r});var o=a(48869),i=a(27554),s=a(28829);function r(e,t,a){const r=(0,s.b)(e,t)/i.Cg;return(0,o.u)(a?.roundingMethod)(r)}}};
//# sourceMappingURL=81796.3b8bd0c5a39836aa.js.map