[tool:pytest]
# Pytest configuration for NocoDB Simple Client

# Test discovery
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test* *Tests
python_functions = test_*
asyncio_mode = auto

# Markers
markers =
    integration: Integration tests requiring a real NocoDB instance
    slow: Slow tests that may take longer to execute
    performance: Performance tests (optional, not run by default)
    unit: Unit tests with mocked dependencies
    asyncio: Asynchronous tests

# Filtering
addopts =
    -v
    --strict-markers
    --tb=short
    --durations=10

# Default test selection (exclude integration and performance tests)
# To run integration tests: pytest -m integration
# To run performance tests: pytest -m performance
# To run all tests: pytest -m "not performance" (performance tests are opt-in)
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Coverage settings (when using --cov)
[coverage:run]
source = src/nocodb_simple_client
omit =
    */tests/*
    */test_*
    */__pycache__/*
    */venv/*
    */env/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:

[coverage:html]
directory = htmlcov
