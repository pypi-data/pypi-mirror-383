Metadata-Version: 2.3
Name: china-stock-mcp
Version: 0.1.11
Summary: MCP server that provides access to Chinese stock market data using akshare
Keywords: akshare,stock,mcp,mcp-server
Author: postback
Author-email: postback <ssf@foxmail.com>
License: MIT
Requires-Dist: akshare-one>=0.3.12
Requires-Dist: fastmcp>=2.11.3
Requires-Dist: uvicorn>=0.35.0
Requires-Python: >=3.12
Project-URL: Homepage, https://github.com/xinkuang/china-stock-mcp
Project-URL: Repository, https://github.com/xinkuang/china-stock-mcp.git
Description-Content-Type: text/markdown

# china-stock-mcp
ä¸€æ¬¾åŸºäº [akshare-one](https://github.com/zwldarren/akshare-one) æ„å»ºçš„ MCP (Model Context Protocol) æœåŠ¡å™¨ï¼Œä¸ºä¸­å›½è‚¡å¸‚æ•°æ®æä¾›æ¥å£ã€‚æä¾›äº†ä¸€ç³»åˆ—å·¥å…·ï¼Œç”¨äºè·å–è´¢åŠ¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬å†å²è‚¡ç¥¨æ•°æ®ã€å®æ—¶æ•°æ®ã€æ–°é—»æ•°æ®ã€è´¢åŠ¡æŠ¥è¡¨ç­‰ã€‚



## ğŸš€ æ ¸å¿ƒç‰¹æ€§

- **åŒæ¨¡å¼è¿è¡Œ**: æ”¯æŒ stdio æœ¬åœ°æ¨¡å¼å’Œ HTTP ç½‘ç»œæ¨¡å¼
- **ä¸°å¯Œçš„è´¢åŠ¡æ•°æ®**: æ¶µç›– A/B/H è‚¡æ•°æ®çš„å…¨æ–¹ä½è·å–
- **å®æ—¶æ•°æ®**: æ”¯æŒå®æ—¶è‚¡ä»·ã€äº¤æ˜“ä¿¡æ¯ç­‰
- **è´¢åŠ¡æŠ¥è¡¨**: èµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€ç°é‡‘æµé‡è¡¨ç­‰
- **æŠ€æœ¯æŒ‡æ ‡**: 30+ ç§æŠ€æœ¯æŒ‡æ ‡è‡ªåŠ¨è®¡ç®—å’Œæ·»åŠ 
- **æ–°é—»æ•°æ®**: è‚¡ç¥¨ç›¸å…³æ–°é—»å’Œå…¬å‘Šä¿¡æ¯
- **æ˜“ç”¨æ€§**: ç®€å•é…ç½®å³å¯é›†æˆåˆ° AI åŠ©æ‰‹ (Claudeã€Cursor ç­‰)
- **å®¹å™¨åŒ–**: æ”¯æŒ Docker éƒ¨ç½²

## ğŸ› ï¸ æ¶æ„æ¦‚è§ˆ

### ä¸»è¦ç»„ä»¶

- `server.py`: MCP æœåŠ¡å™¨æ ¸å¿ƒï¼Œå®šä¹‰æ‰€æœ‰å·¥å…·å’Œæ•°æ®æ¥å£
- `__main__.py`: å‘½ä»¤è¡Œå…¥å£ï¼Œæ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼
- FastMCP æ¡†æ¶: å¤„ç† MCP åè®®é€šä¿¡
- akshare-one åº“: æä¾›åº•å±‚çš„ä¸­å›½è‚¡å¸‚æ•°æ®è·å–èƒ½åŠ›

### æ”¯æŒçš„æ•°æ®æº

- **æ•°æ®æºæ•…éšœåˆ‡æ¢**: å†…ç½® `_fetch_data_with_fallback` æœºåˆ¶ï¼Œæ”¯æŒæŒ‰ä¼˜å…ˆçº§è‡ªåŠ¨åˆ‡æ¢æ•°æ®æºï¼Œæé«˜æ•°æ®è·å–çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚

- ä¸œæ–¹è´¢å¯Œ (eastmoney, eastmoney_direct)
- æ–°æµªè´¢ç» (sina)
- é›ªçƒ (xueqiu)
## ğŸ“‹ å¯ç”¨å·¥å…·

### 1. `è·å–å†å²è¡Œæƒ…æ•°æ®` (get_hist_data)

è·å–è‚¡ç¥¨çš„å†å²è¡Œæƒ…æ•°æ®ï¼Œæ”¯æŒå¤šç§æ•°æ®æºå’ŒæŠ€æœ¯æŒ‡æ ‡ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç ï¼Œå¦‚ '000001'
- `interval` (string): æ—¶é—´å‘¨æœŸ ('minute','hour','day','week','month','year')ï¼Œé»˜è®¤ä¸º 'day'
- `interval_multiplier` (number): æ—¶é—´å‘¨æœŸä¹˜æ•°ï¼Œé»˜è®¤ä¸º 1
- `start_date` (string): å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ä¸º 'YYYY-MM-DD'ï¼Œé»˜è®¤ä¸º '1970-01-01'
- `end_date` (string): ç»“æŸæ—¥æœŸï¼Œæ ¼å¼ä¸º 'YYYY-MM-DD'ï¼Œé»˜è®¤ä¸º '2030-12-31'
- `adjust` (string): å¤æƒç±»å‹ ('none', 'qfq', 'hfq')ï¼Œé»˜è®¤ä¸º 'none'
- `indicators_list` (string|list): è¦æ·»åŠ çš„æŠ€æœ¯æŒ‡æ ‡ï¼Œå¯ä»¥æ˜¯é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚: 'SMA,EMA'ï¼‰æˆ–å­—ç¬¦ä¸²åˆ—è¡¨ï¼ˆä¾‹å¦‚: ['SMA', 'EMA']ï¼‰ã€‚æ”¯æŒçš„æŒ‡æ ‡åŒ…æ‹¬: SMA, EMA, RSI, MACD, BOLL, STOCH, ATR, CCI, ADX, WILLR, AD, ADOSC, OBV, MOM, SAR, TSF, APO, AROON, AROONOSC, BOP, CMO, DX, MFI, MINUS_DI, MINUS_DM, PLUS_DI, PLUS_DM, PPO, ROC, ROCP, ROCR, ROCR100, TRIX, ULTOSC


### 2. `è·å–å®æ—¶è¡Œæƒ…æ•°æ®` (get_realtime_data)

è·å–è‚¡ç¥¨çš„å®æ—¶è¡Œæƒ…æ•°æ®ï¼Œæ”¯æŒå¤šç§æ•°æ®æºã€‚

**å‚æ•°:**
- `symbol` (string, å¯é€‰): è‚¡ç¥¨ä»£ç 

### 3. `è·å–æ–°é—»æ•°æ®` (get_news_data)

è·å–è‚¡ç¥¨ç›¸å…³çš„æ–°é—»æ•°æ®ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç 

### 4. `è·å–èµ„äº§è´Ÿå€ºè¡¨` (get_balance_sheet)

è·å–å…¬å¸çš„èµ„äº§è´Ÿå€ºè¡¨æ•°æ®ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç 

### 5. `è·å–åˆ©æ¶¦è¡¨` (get_income_statement)

è·å–å…¬å¸çš„åˆ©æ¶¦è¡¨æ•°æ®ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç 

### 6. `è·å–ç°é‡‘æµé‡è¡¨` (get_cash_flow)

è·å–å…¬å¸çš„ç°é‡‘æµé‡è¡¨æ•°æ®ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç 

### 7. `è·å–å†…éƒ¨äº¤æ˜“æ•°æ®` (get_inner_trade_data)

è·å–å…¬å¸çš„å†…éƒ¨äº¤æ˜“æ•°æ®ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç 

### 8. `è·å–è´¢åŠ¡æŒ‡æ ‡` (get_financial_metrics)

è·å–ä¸‰å¤§è´¢åŠ¡æŠ¥è¡¨çš„å…³é”®è´¢åŠ¡æŒ‡æ ‡ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç 

### 9. `è·å–æ—¶é—´ä¿¡æ¯` (get_time_info)

è·å–å½“å‰æ—¶é—´çš„ISOæ ¼å¼ã€æ—¶é—´æˆ³å’Œæœ€è¿‘çš„äº¤æ˜“æ—¥ã€‚
### 10. `è·å–è‚¡ç¥¨åŸºæœ¬æ¦‚è¦ä¿¡æ¯` (get_stock_basic_info)

è·å–æŒ‡å®šè‚¡ç¥¨çš„åŸºæœ¬æ¦‚è¦ä¿¡æ¯ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç ï¼Œå¦‚ '000001' ä»£è¡¨Aè‚¡, '00700' ä»£è¡¨æ¸¯è‚¡

### 11. `è·å–å®è§‚ç»æµæ•°æ®` (get_macro_data)

è·å–å®è§‚ç»æµæ•°æ®ï¼ŒåŒ…æ‹¬è´§å¸ä¾›åº”é‡ã€GDPã€CPIã€PMIã€è‚¡å¸‚æ€»å¸‚å€¼ç­‰æŒ‡æ ‡ã€‚

### 12. `åˆ†ææ•£æˆ·å’Œæœºæ„æŠ•èµ„è€…æŠ•èµ„æƒ…ç»ª` (get_investor_sentiment)

åˆ†ææ•£æˆ·å’Œæœºæ„æŠ•èµ„è€…çš„æŠ•èµ„æƒ…ç»ªï¼ŒåŒ…æ‹¬æ•£æˆ·å…³æ³¨åº¦ã€çœ‹æ¶¨æƒ…ç»ªã€æœºæ„è°ƒç ”ã€æœºæ„å‚ä¸åº¦ç­‰ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç ï¼Œå¦‚ '000001'


### 13. `è·å–è‚¡ä¸œæƒ…å†µ` (get_shareholder_info)

è·å–æŒ‡å®šè‚¡ç¥¨çš„è‚¡ä¸œæƒ…å†µï¼ŒåŒ…æ‹¬åå¤§æµé€šè‚¡ä¸œã€åå¤§è‚¡ä¸œã€è‚¡ä¸œæˆ·æ•°ã€è‚¡æƒè´¨æŠ¼ç­‰ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç ï¼Œå¦‚ '000001'


### 14. `è·å–äº§å“æƒ…å†µ` (get_product_info)

è·å–æŒ‡å®šè‚¡ç¥¨å…¬å¸çš„ä¸»è¦äº§å“æˆ–ä¸šåŠ¡æ„æˆï¼ŒåŒ…æ‹¬ä¸»è¥æ„æˆã€äº§å“ç±»å‹ã€è¡Œä¸šåˆ†ç±»ç­‰ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç ï¼Œå¦‚ '000001'

### 15. `è·å–èµ„é‡‘æµæ•°æ®` (get_fund_flow)

è·å–è‚¡ç¥¨çš„èµ„é‡‘æµæ•°æ®ï¼ŒåŒ…æ‹¬ä¸»åŠ›èµ„é‡‘ã€æ•£æˆ·èµ„é‡‘ç­‰ã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç ï¼Œå¦‚ '000001'

### 16. `è·å–ä¸šç»©é¢„æµ‹æ•°æ®` (get_profit_forecast)

è·å–è‚¡ç¥¨çš„ä¸šç»©é¢„æµ‹æ•°æ®ï¼ŒåŒ…æ‹¬é¢„æµ‹å¹´æŠ¥å‡€åˆ©æ¶¦å’Œæ¯è‚¡æ”¶ç›Šã€‚

**å‚æ•°:**
- `symbol` (string): è‚¡ç¥¨ä»£ç ï¼Œå¦‚ '600519'


## ğŸš€ å®‰è£…å’Œè¿è¡Œ

### æ–¹æ³•ä¸€: ä½¿ç”¨ Smithery

é€šè¿‡ [Smithery](https://smithery.ai/server/@xinkuang/china-stock-mcp) è‡ªåŠ¨å®‰è£…åˆ° Claude Desktopï¼š

```bash
npx -y @smithery/cli install @xinkuang/china-stock-mcp --client claude
```

### æ–¹æ³•äºŒ: ä½¿ç”¨ Docker

#### 1. æ‹‰å–é•œåƒ
```bash
docker pull ghcr.io/xinkuang/china-stock-mcp:latest
```

#### 2. è¿è¡Œå®¹å™¨
```bash
docker run -p 8081:8081 ghcr.io/xinkuang/china-stock-mcp:latest
```

### æ–¹æ³•ä¸‰: æœ¬åœ°æºä»£ç å®‰è£…

#### 1. ç¯å¢ƒè¦æ±‚
- Python 3.12+
- Git
- uv (æ¨èçš„ Python åŒ…ç®¡ç†å™¨)

#### 2. å…‹éš†ä»“åº“
```bash
git clone https://github.com/xinkuang/china-stock-mcp
cd china-stock-mcp
```

#### 3. å®‰è£…ä¾èµ–
```bash
# æ¨èä½¿ç”¨ uv åŒ…ç®¡ç†å™¨
uv sync

# æˆ–è€…ä½¿ç”¨ pip
pip install -r requirements.txt
```

#### 4. è¿è¡ŒæœåŠ¡å™¨

**stdio æ¨¡å¼ (é»˜è®¤ï¼Œé€‚ç”¨äºæœ¬åœ° MCP å®¢æˆ·ç«¯):**
```bash
uv run -m china_stock_mcp
```

**HTTP æ¨¡å¼ (é€‚ç”¨äºè¿œç¨‹è®¿é—®):**
```bash
uv run -m china_stock_mcp --streamable-http --host 0.0.0.0 --port 8081
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:8081/mcp` æä¾›æœåŠ¡ã€‚

## âš™ï¸ MCP é…ç½®ç¤ºä¾‹

### Claude Desktop é…ç½®

ç¼–è¾‘ `claude_desktop_config.json`ï¼š

**æ–¹å¼ä¸€: æœ¬åœ°æºä»£ç **
```json
{
  "mcpServers": {
    "china-stock-mcp": {
      "command": "uv",
      "args": [
        "--directory",
        "/path/to/china_stock_mcp",
        "run",
        "china-stock-mcp"
      ]
    }
  }
}
```

**æ–¹å¼äºŒ: é€šè¿‡ uvx**
```json
{
    "mcpServers": {
        "china-stock-mcp": {
            "command": "uvx",
            "args": [
              "china-stock-mcp"
            ]
        }
    }
}
```

**æ–¹å¼ä¸‰: HTTP æ¨¡å¼**
```json
{
  "mcpServers": {
    "china-stock-mcp": {
      "command": "uvx",
      "args": ["china-stock-mcp", "--streamable-http", "--host", "0.0.0.0", "--port", "8081"],
      "env": {
        "MCP_BASE_URL": "http://localhost:8081/mcp"
      }
    }
  }
}
```

### å…¶ä»– AI å®¢æˆ·ç«¯é…ç½®

**Cursor:**
```json
{
  "mcpServers": {
    "china-stock-mcp": {
      "command": "uvx",
      "args": [ "china-stock-mcp"]
    }
  }
}
```

**Clion with MCP:**
```json
{
  "mcpServers": {
    "china-stock-mcp": {
      "command": "uvx",
    "args": [ "china-stock-mcp"]
    }
  }
}
```

## ğŸƒâ€â™‚ï¸ å‘½ä»¤è¡Œå‚æ•°

- `--streamable-http`: å¯ç”¨ HTTP å¯æµå¼æ¨¡å¼ (é»˜è®¤: stdio æ¨¡å¼)
- `--host`: HTTP æ¨¡å¼ä¸‹çš„ç»‘å®šä¸»æœº (é»˜è®¤: 0.0.0.0)
- `--port`: HTTP æ¨¡å¼ä¸‹çš„ç›‘å¬ç«¯å£ (é»˜è®¤: 8081)

## ğŸ“Š æ•°æ®æ”¯æŒèŒƒå›´

### è‚¡ç¥¨å¸‚åœº
- Aè‚¡ (ä¸Šè¯ã€æ·±è¯)
- Bè‚¡
- Hè‚¡ (æ¸¯è‚¡)
- ä¸­å°æ¿ã€åˆ›ä¸šæ¿ã€æ–°ä¸‰æ¿

### æ•°æ®ç±»å‹
- å†å²è¡Œæƒ…æ•°æ® (åˆ†é’Ÿçº§ã€å°æ—¶çº§ã€æ—¥çº§ã€å‘¨çº§ã€æœˆçº§ã€å¹´çº§)
- å®æ—¶è¡Œæƒ…æ•°æ®
- æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- æ–°é—»èµ„è®¯
- è´¢åŠ¡æŠ¥è¡¨ (èµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€ç°é‡‘æµé‡è¡¨)
- è´¢åŠ¡æŒ‡æ ‡
- å†…éƒ¨äº¤æ˜“æ•°æ®

## ğŸ”§ å¼€å‘å’Œè´¡çŒ®

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/xinkuang/china-stock-mcp
cd china-stock-mcp
```

2. å®‰è£…å¼€å‘ä¾èµ–
```bash
uv sync --dev
```

3. è¿›å…¥å¼€å‘æ¨¡å¼
```bash
uv run -m china_stock_mcp
```

### ä»£ç ç»“æ„

```
src/china_stock_mcp/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ __main__.py    # å‘½ä»¤è¡Œå…¥å£ï¼Œå¤„ç†å¯åŠ¨å‚æ•°
â”œâ”€â”€ server.py      # MCP æœåŠ¡å™¨æ ¸å¿ƒï¼Œå®šä¹‰æ‰€æœ‰å·¥å…·
â”œâ”€â”€ mcp.json       # MCP é…ç½®è§„èŒƒ (å¯é€‰)
â””â”€â”€ py.typed       # ç±»å‹æ ‡æ³¨æ–‡ä»¶
```

### æ·»åŠ æ–°å·¥å…·

åœ¨ `server.py` ä¸­ä½¿ç”¨ `@mcp.tool` è£…é¥°å™¨æ·»åŠ æ–°å·¥å…·ï¼š

```python
@mcp.tool(name="å·¥å…·ä¸­æ–‡åç§°", description="å·¥å…·çš„ä¸­æ–‡æè¿°")
def your_tool_name(param1: Annotated[str, Field(description="å‚æ•°æè¿°")]) -> str:
    """å·¥å…·è¯¦æƒ…æè¿°"""
    # å®ç°é€»è¾‘
    pass
```

## ğŸ“ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ™‹â€â™‚ï¸ å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆæ— æ³•è·å–æ•°æ®ï¼Ÿ**
A: è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæ•°æ®æºå¯ç”¨æ€§ã€‚æŸäº›æ•°æ®æºå¯èƒ½æœ‰è®¿é—®é™åˆ¶ã€‚

**Q: HTTP æ¨¡å¼ä¸‹æ— æ³•è¿æ¥ï¼Ÿ**
A: ç¡®è®¤ç«¯å£ 8081 æœªè¢«å…¶ä»–æœåŠ¡å ç”¨ï¼Œä¸”é˜²ç«å¢™å…è®¸ç›¸åº”ç«¯å£çš„è®¿é—®ã€‚

**Q: å¦‚ä½•æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Ÿ**
A: ä½¿ç”¨ Smithery å®‰è£…çš„å¯ä»¥è‡ªåŠ¨æ›´æ–°ï¼Œæ‰‹åŠ¨å®‰è£…çš„è¯·é‡æ–°æ‹‰å–ä»“åº“ä»£ç ã€‚
## ğŸ è°ƒè¯•

æœ‰å…³å¦‚ä½•ä½¿ç”¨ @modelcontextprotocol/inspector è°ƒè¯•æ­¤æœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [DEBUG.md](DEBUG.md)ã€‚
