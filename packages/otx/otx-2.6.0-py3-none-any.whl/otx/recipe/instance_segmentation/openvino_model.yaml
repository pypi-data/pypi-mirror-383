callback_monitor: val/map_50

data: ../_base_/data/instance_segmentation.yaml

callbacks:
  - class_path: lightning.pytorch.callbacks.ModelCheckpoint
    init_args:
      dirpath: "" # use engine.work_dir
      monitor: val/map_50
      mode: max
      save_top_k: 1
      save_last: true
      auto_insert_metric_name: false
      filename: "checkpoints/epoch_{epoch:03d}"

overrides:
  reset:
    - data.train_subset.transforms
    - data.val_subset.transforms
    - data.test_subset.transforms
  data:
    train_subset:
      transforms:
        - class_path: torchvision.transforms.v2.ToImage
    val_subset:
      transforms:
        - class_path: torchvision.transforms.v2.ToImage
    test_subset:
      batch_size: 64
      transforms:
        - class_path: torchvision.transforms.v2.ToImage
