{"version":3,"file":"LoginView-CcgBMe2X.js","sources":["../../src/assets/icons/qrcode.png","../../src/views/login/LoginView.vue"],"sourcesContent":["export default \"__VITE_ASSET__Bfit$310__\"","<template>\n  <div class=\"login-container\" :class=\"{ 'loading': loading }\">\n    <div class=\"login-card\">\n      <div class=\"logo\">\n        <img src=\"@/assets/icons/logo@2x.png\" alt=\"Logo\" />\n      </div>\n      \n      <el-form @submit.prevent=\"handleLogin\">\n        <el-form-item>\n          <el-input\n            v-model=\"loginForm.username\"\n            placeholder=\"用户名\"\n            :prefix-icon=\"User\"\n            size=\"large\"\n            @keyup.enter=\"focusPassword\"\n            ref=\"usernameInputRef\"\n            :disabled=\"loading\"\n          />\n        </el-form-item>\n        \n        <el-form-item>\n          <el-input\n            v-model=\"loginForm.password\"\n            :type=\"togglePasswordVisible ? 'text' : 'password'\"\n            placeholder=\"密码\"\n            :prefix-icon=\"Lock\"\n            size=\"large\"\n            @keyup.enter=\"handleLogin\"\n            ref=\"passwordInputRef\"\n            :disabled=\"loading\"\n          >\n            <template #suffix>\n              <el-icon \n                class=\"password-toggle\" \n                @click=\"togglePasswordVisible = !togglePasswordVisible\"\n                :class=\"{ 'disabled': loading }\"\n              >\n                <component :is=\"togglePasswordVisible ? 'View' : 'Hide'\" />\n              </el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n\n        <el-button\n          type=\"primary\"\n          :loading=\"loading\"\n          class=\"login-button\"\n          size=\"large\"\n          @click=\"handleLogin\"\n        >\n          {{ loading ? '登录中...' : '立即登录' }}\n        </el-button>\n      </el-form>\n    </div>\n\n    <!-- <div class=\"contact-trigger\" @mouseenter=\"showQrCode = true\" @mouseleave=\"showQrCode = false\">\n      <div class=\"contact-text\"  >扫码联系我们</div>\n      \n    </div> -->\n    <div class=\"qr-code \" :class=\"{ 'show': showQrCode }\" >\n        <img src=\"@/assets/icons/qrcode.png\" alt=\"QR Code\" />\n      </div>\n    <div class=\"version\">版本号：{{ version }}</div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useUserStore } from '@/stores/user'\nimport type { LoginForm } from '@/types/user'\nimport { ElMessage } from 'element-plus'\nimport { User, Lock, View, Hide } from '@element-plus/icons-vue'\n\n// 获取版本号\nconst version = ref(window.RUNTIME_CONFIG?.VERSION || 'v1.0.0');\n\nconst router = useRouter()\nconst userStore = useUserStore()\n\nconst loginForm = reactive<LoginForm>({\n  username: '',\n  password: ''\n})\n\nconst loading = ref(false)\n\nconst handleLogin = async () => {\n  if (!loginForm.username || !loginForm.password) {\n    ElMessage.warning('请输入用户名和密码')\n    return\n  }\n\n  try {\n    loading.value = true\n    await userStore.login(loginForm.username, loginForm.password)\n    ElMessage.success({\n      message: '登录成功，欢迎回来！',\n      duration: 3000\n    })\n    // 登录成功后延迟跳转，根据用户角色决定跳转页面\n    setTimeout(() => {\n      // 如果是管理员账号，跳转到用户管理页面\n      if (userStore.userInfo?.username === 'admin') {\n        router.push('/user/list')\n      } else {\n        // 其他账号跳转到项目页面\n        router.push('/project')\n      }\n    }, 500)\n  } catch (error: any) {\n    ElMessage.error({\n      message: error?.message || '登录失败，请检查用户名和密码',\n      duration: 3000\n    })\n  } finally {\n    loading.value = false\n  }\n}\n\nconst togglePasswordVisible = ref(false)\nconst showQrCode = ref(false)\n\n// 添加输入框的引用\nconst usernameInputRef = ref<HTMLInputElement | null>(null)\nconst passwordInputRef = ref<HTMLInputElement | null>(null)\n\n// 聚焦到密码输入框\nconst focusPassword = () => {\n  passwordInputRef.value?.focus()\n}\n</script>\n\n<style>\n/* 移除输入框自动填充时的背景色 */\ninput:-webkit-autofill,\ninput:-webkit-autofill:hover,\ninput:-webkit-autofill:focus,\ninput:-webkit-autofill:active {\n  -webkit-box-shadow: 0 0 0 30px white inset !important;\n  -webkit-text-fill-color: inherit !important;\n  transition: background-color 5000s ease-in-out 0s;\n}\n</style>\n\n<style scoped lang=\"scss\">\n.login-container {\n  min-height: 100vh;\n  width: 100%;\n  background: linear-gradient(135deg, #F2B2FF 0%, #99BEFF 100%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  overflow: hidden;\n  --input-background-color: white;\n  \n  &.loading {\n    --input-background-color: rgba(0, 0, 0, 0.02);\n  }\n}\n\n.login-card {\n  background: rgba(255, 255, 255, 0.95);\n  padding: 2rem;\n  border-radius: 15px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 400px;\n  backdrop-filter: blur(10px);\n  \n  .logo {\n    text-align: center;\n    font-size: 2.5rem;\n    font-weight: bold;\n    margin-bottom: 2rem;\n    \n    img {\n      width: auto;\n      height: auto;\n      max-width: 80%;\n      max-height: 60px;\n      object-fit: contain;\n    }\n    \n    .infinity {\n      color: #333;\n    }\n    \n    .vis {\n      background: linear-gradient(to right, #e9c1f9, #b4d4ff);\n      -webkit-background-clip: text;\n      color: transparent;\n    }\n    \n    .alon {\n      background: linear-gradient(to right, #b4d4ff, #7c8fff);\n      -webkit-background-clip: text;\n      color: transparent;\n    }\n  }\n}\n\n.login-button {\n  width: 100%;\n  background: linear-gradient( 90deg, #FF80FF 0%, #555FFF 60%, #555FFF 100%);\n  border: none;\n  margin-top: 1rem;\n  \n  &:hover {\n    background: linear-gradient(to right, #d9b1e9, #6c7fff);\n  }\n}\n\n.el-input {\n  --el-input-hover-border-color: #b4d4ff;\n  --el-input-focus-border-color: #7c8fff;\n  \n  :deep(.el-input__wrapper) {\n    transition: all 0.3s ease;\n    \n    &.is-disabled {\n      background-color: rgba(0, 0, 0, 0.02);\n      border-color: #e4e7ed;\n      \n      .el-input__inner {\n        color: #999;\n        -webkit-text-fill-color: #999 !important;\n      }\n      \n      .el-input__prefix {\n        color: #999;\n      }\n    }\n  }\n}\n\n.password-toggle {\n  cursor: pointer;\n  color: var(--el-text-color-secondary);\n  \n  &:hover {\n    color: var(--el-text-color-primary);\n  }\n  \n  &.disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n    pointer-events: none;\n  }\n}\n\n.contact-trigger {\n  position: fixed;\n  right: 0;\n  top: 80%;\n  transform: translateY(-50%);\n  display: flex;\n  align-items: center;\n  z-index: 10;\n}\n\n.contact-text {\n  writing-mode: vertical-lr;\n  padding: 20px 12px;\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 25px 0 0 25px;\n  color: #7c8fff;\n  font-size: 1rem;\n  cursor: pointer;\n  box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  backdrop-filter: blur(10px);\n\n  &:hover {\n    background: white;\n    padding-right: 15px;\n  }\n}\n\n.qr-code {\n  /* position: absolute;\n  right: -200px; */\n  position: fixed;\n  right: -200px;\n  top: 80%;\n  transform: translateY(-50%);\n  // display: flex;\n  // align-items: center;\n  // z-index: 10;\n  background: white;\n  padding: 20px;\n  border-radius: 15px;\n  box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  \n  &.show {\n    right: 70px;\n  }\n  \n  img {\n    width: 160px;\n    height: 160px;\n    border-radius: 8px;\n  }\n}\n\n.version {\n  position: fixed;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 0.9rem;\n  padding: 8px 20px;\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 20px;\n  backdrop-filter: blur(5px);\n}\n</style>\n"],"names":["_imports_1","version","ref","_a","router","useRouter","userStore","useUserStore","loginForm","reactive","loading","handleLogin","ElMessage","error","togglePasswordVisible","showQrCode","usernameInputRef","passwordInputRef","focusPassword"],"mappings":"iSAAA,MAAeA,EAAA,gHC2Ef,MAAMC,EAAUC,IAAIC,EAAA,OAAO,iBAAP,YAAAA,EAAuB,UAAW,QAAQ,EAExDC,EAASC,EAAU,EACnBC,EAAYC,EAAa,EAEzBC,EAAYC,EAAoB,CACpC,SAAU,GACV,SAAU,EAAA,CACX,EAEKC,EAAUR,EAAI,EAAK,EAEnBS,EAAc,SAAY,CAC9B,GAAI,CAACH,EAAU,UAAY,CAACA,EAAU,SAAU,CAC9CI,EAAU,QAAQ,WAAW,EAC7B,MAAA,CAGE,GAAA,CACFF,EAAQ,MAAQ,GAChB,MAAMJ,EAAU,MAAME,EAAU,SAAUA,EAAU,QAAQ,EAC5DI,EAAU,QAAQ,CAChB,QAAS,aACT,SAAU,GAAA,CACX,EAED,WAAW,IAAM,SAEXT,EAAAG,EAAU,WAAV,YAAAH,EAAoB,YAAa,QACnCC,EAAO,KAAK,YAAY,EAGxBA,EAAO,KAAK,UAAU,GAEvB,GAAG,QACCS,EAAY,CACnBD,EAAU,MAAM,CACd,SAASC,GAAA,YAAAA,EAAO,UAAW,iBAC3B,SAAU,GAAA,CACX,CAAA,QACD,CACAH,EAAQ,MAAQ,EAAA,CAEpB,EAEMI,EAAwBZ,EAAI,EAAK,EACjCa,EAAab,EAAI,EAAK,EAGtBc,EAAmBd,EAA6B,IAAI,EACpDe,EAAmBf,EAA6B,IAAI,EAGpDgB,EAAgB,IAAM,QAC1Bf,EAAAc,EAAiB,QAAjB,MAAAd,EAAwB,OAC1B"}