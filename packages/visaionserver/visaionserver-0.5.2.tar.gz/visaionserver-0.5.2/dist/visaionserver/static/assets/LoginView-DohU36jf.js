import{d as z,r as l,u as B,a as L,c as T,b as t,e as n,w as r,f as U,g as i,n as p,t as V,h as q,o as b,i as x,j as C,k as K,l as M,m as P,p as j,q as D,E as m}from"./index-DKhC6MDA.js";import{_ as F}from"./logo@2x-bo-eMEnk.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q="/assets/qrcode-fRPWT-cC.png",G={class:"login-card"},H={class:"version"},W=z({__name:"LoginView",setup($){var v;const k=l(((v=window.RUNTIME_CONFIG)==null?void 0:v.VERSION)||"v1.0.0"),f=q(),_=B(),o=L({username:"",password:""}),a=l(!1),c=async()=>{if(!o.username||!o.password){m.warning("请输入用户名和密码");return}try{a.value=!0,await _.login(o.username,o.password),m.success({message:"登录成功，欢迎回来！",duration:3e3}),setTimeout(()=>{var e;((e=_.userInfo)==null?void 0:e.username)==="admin"?f.push("/user/list"):f.push("/project")},500)}catch(e){m.error({message:(e==null?void 0:e.message)||"登录失败，请检查用户名和密码",duration:3e3})}finally{a.value=!1}},u=l(!1),I=l(!1),R=l(null),g=l(null),N=()=>{var e;(e=g.value)==null||e.focus()};return(e,s)=>{const w=i("el-input"),y=i("el-form-item"),h=i("el-icon"),E=i("el-button"),S=i("el-form");return b(),T("div",{class:p(["login-container",{loading:a.value}])},[t("div",G,[s[3]||(s[3]=t("div",{class:"logo"},[t("img",{src:F,alt:"Logo"})],-1)),n(S,{onSubmit:U(c,["prevent"])},{default:r(()=>[n(y,null,{default:r(()=>[n(w,{modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=d=>o.username=d),placeholder:"用户名","prefix-icon":C(K),size:"large",onKeyup:x(N,["enter"]),ref_key:"usernameInputRef",ref:R,disabled:a.value},null,8,["modelValue","prefix-icon","disabled"])]),_:1}),n(y,null,{default:r(()=>[n(w,{modelValue:o.password,"onUpdate:modelValue":s[2]||(s[2]=d=>o.password=d),type:u.value?"text":"password",placeholder:"密码","prefix-icon":C(M),size:"large",onKeyup:x(c,["enter"]),ref_key:"passwordInputRef",ref:g,disabled:a.value},{suffix:r(()=>[n(h,{class:p(["password-toggle",{disabled:a.value}]),onClick:s[1]||(s[1]=d=>u.value=!u.value)},{default:r(()=>[(b(),P(j(u.value?"View":"Hide")))]),_:1},8,["class"])]),_:1},8,["modelValue","type","prefix-icon","disabled"])]),_:1}),n(E,{type:"primary",loading:a.value,class:"login-button",size:"large",onClick:c},{default:r(()=>[D(V(a.value?"登录中...":"立即登录"),1)]),_:1},8,["loading"])]),_:1})]),t("div",{class:p(["qr-code",{show:I.value}])},s[4]||(s[4]=[t("img",{src:Q,alt:"QR Code"},null,-1)]),2),t("div",H,"版本号："+V(k.value),1)],2)}}}),Y=O(W,[["__scopeId","data-v-2b883db4"]]);export{Y as default};
//# sourceMappingURL=LoginView-DohU36jf.js.map
