import{_ as e,u as t,i as a,c as n,a as o,o as i,b as s,t as r,N as l,O as c,q as d,e as m,w as u,g as p,d as v,x as f,P as g,m as h,A as y,v as x,Q as b,F as _,J as $,I as w,r as j,T as S}from"./index-BYpUSHcb.js";import{u as k}from"./experiment-DrOVOkyq.js";import{_ as C}from"./SLLoading-Bl5PCBHz.js";const I={class:"text-xl font-semibold"},L={class:"relative pt-4"},V={class:"font-semibold pb-3"},E=["placeholder"],q={class:"tip text-negative-default"},U={class:"relative"},B={class:"font-semibold pt-5 pb-3"},D=["placeholder"],N={class:"tip text-negative-default"},z={class:"flex justify-end pt-10"},A=100,F=255,J=e({__name:"EditorWrap",props:{type:String},emits:["confirm"],setup(e,{emit:x}){const b=t(),_=k(),$=e,w=x,j=a({name:"project"===$.type?b.name:_.name,description:"project"===$.type?b.description:_.description}),S=a({name:"",description:""}),J=n(()=>!(j.value.name.length>A)),O=n(()=>{var e;return!j.value.description||!((null==(e=j.value.description)?void 0:e.length)>F)}),P=a(!1),Q=async()=>{if(S.value={name:"",description:""},"project"===$.type&&!J.value)return h.warning(y("common.config-editor.error.project_name")),S.value.name=y("common.config-editor.error.name");if(!J.value)return h.warning(y("common.config-editor.error.experiment_name")),S.value.name=y("common.config-editor.error.name");if(!O.value)return h.warning(y("common.config-editor.error.description")),S.value.description=y("common.config-editor.error.description");if(j.value.name.trim()===b.name&&j.value.description===b.description)return S.value.name=y("common.config-editor.error.project_change");if(j.value.name.trim()===_.name&&j.value.description===_.description)return S.value.name=y("common.config-editor.error.experiment_change");let e=!1;"experiment"===$.type&&b.experiments.forEach(t=>{j.value.name===t.name&&j.value.name!==_.name&&(e=!0,S.value.name=y("common.config-editor.error.experiment_duplicated"))}),e||(P.value=!0,w("confirm",j.value,()=>{P.value=!1,h.success(y("common.config-editor.save.success"))}))};return(t,a)=>{var n;const h=f;return i(),o("form",{class:"w-full",onSubmit:g(Q,["prevent"])},[s("h1",I,r(t.$t(`common.config-editor.title.${e.type}`)),1),s("div",L,[s("h2",V,r(t.$t(`common.config-editor.sub-title.${e.type}.name`)),1),l(s("input",{type:"text",class:"input","onUpdate:modelValue":a[0]||(a[0]=e=>j.value.name=e),placeholder:`edit your ${e.type} name here`,maxlength:A,pattern:"^(?!\\s+$).*$",required:""},null,8,E),[[c,j.value.name]]),s("p",{class:d(["absolute bottom-[-20px] text-xs right-0",0===j.value.name.length||j.value.name.length===A?"text-negative-default":""])},r(`${j.value.name.length} / 100`),3),s("span",q,r(S.value.name),1)]),s("div",U,[s("h2",B,r(t.$t(`common.config-editor.sub-title.${e.type}.desc`)),1),l(s("textarea",{class:"input",rows:"10","onUpdate:modelValue":a[1]||(a[1]=e=>j.value.description=e),placeholder:`edit your ${e.type} description here`,maxlength:F},null,8,D),[[c,j.value.description]]),s("p",{class:d(["absolute bottom-[-20px] text-xs right-0",(null==(n=j.value.description)?void 0:n.length)===F?"text-negative-default":""])},r(`${j.value.description?j.value.description.length:0} / 255`),3),s("span",N,r(S.value.description),1)]),s("div",z,[m(h,{type:"submit",theme:"primary",class:"p-2 rounded flex items-center",disabled:P.value},{default:u(()=>[P.value?(i(),p(C,{key:0,size:"4"})):v("",!0),s("span",null,r(t.$t("common.config-editor.save."+(P.value?"savimg":"default"))),1)]),_:1},8,["disabled"])])],32)}}},[["__scopeId","data-v-052f7e40"]]),O={__name:"ConfigEditor",props:{type:{type:String,validator:e=>["project","experiment"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["modify"],setup(e,{emit:t}){const n=a(!1),s=t,r=async(e,t)=>{s("modify",e,()=>{n.value=!1,t()})};return(t,a)=>{const s=f;return i(),o(_,null,[m(s,{class:"px-3 py-1.5 border-none !text-dimmest rounded",theme:"primary",hollow:"",disabled:e.disabled,"disabled-tip":t.$t("common.config-editor.not-allowed"),onClick:a[0]||(a[0]=e=>n.value=!0)},{default:u(()=>[m(x,{icon:"modify",class:"w-4 h-4"})]),_:1},8,["disabled","disabled-tip"]),m(b,{class:"px-10 py-6","max-w":"550",modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value=e)},{default:u(()=>[m(J,{type:e.type,onConfirm:r},null,8,["type"])]),_:1},8,["modelValue"])],64)}}},P={class:"text-sm flex items-center gap-2"},Q={class:"md:block hidden"},T=e({__name:"DeleteButton",props:{type:String,validator:e=>["project","experiment"].includes(e)},emits:["confirm","cancel"],setup(e,{emit:t}){const a=e,n=t,o=()=>{$(y(`common.delete.title.${a.type}`),y(`common.delete.content.${a.type}`),{}).then(()=>{n("confirm")})};return(e,t)=>(i(),p(f,{onClick:o,theme:"negative",hollow:"","disabled-tip":e.$t("common.delete.not-allowed")},{default:u(()=>[s("div",P,[m(x,{icon:"trash",class:"w-4 h-4"}),s("span",Q,r(e.$t("common.delete.button")),1)])]),_:1},8,["disabled-tip"]))}},[["__scopeId","data-v-41907065"]]),W=e({__name:"SLStatusLabel",props:{status:{type:Number,required:!0},url:{type:String,default:""}},setup(e){const t=w(),a=e,o=n(()=>{let e,t;switch(a.status){case 0:e="running",t="circle-fill";break;case 1:e="finished",t="success";break;case-1:e="crashed",t="error"}if(!e)throw new Error("Invalid status:"+a.status+"in StatusLabel.vue");return{class:e,icon:t}}),s=n(()=>a.url?"a":"div"),r=()=>{a.url&&t.push(a.url)};return(t,a)=>{const n=x;return i(),p(S(s.value),{class:d(["sl-status-label",o.value.class]),href:e.url,onClick:g(r,["prevent"])},{default:u(()=>[m(n,{icon:o.value.icon},null,8,["icon"]),j(t.$slots,"default",{},void 0,!0)]),_:3},8,["class","href"])}}},[["__scopeId","data-v-b6e5701f"]]);export{T as D,O as _,W as a};
