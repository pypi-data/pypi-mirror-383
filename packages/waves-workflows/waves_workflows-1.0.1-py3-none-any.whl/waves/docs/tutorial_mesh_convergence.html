
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutorial: Mesh Convergence &#8212; WAVES 1.0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=cb027bf8" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=cb027bf8" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=423d4ce3"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=e639491b"></script>
    <script src="_static/custom.js?v=070b234d"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorial_mesh_convergence';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial: Part Image" href="tutorial_part_image.html" />
    <link rel="prev" title="Tutorial 07: One-at-a-Time" href="tutorial_07_one_at_a_time.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Oct 10, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/waves_logo_brandmark_smaller.png" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="_static/waves_logo_brandmark_smaller.png" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">1.0.1</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Computational Practices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="computational_practices_introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_version_control.html">Version Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_build_system.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_compute_environment.html">Compute Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_regression_testing.html">Regression Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_archival.html">Data Archival</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="abstract.html">Why WAVES?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorial_quickstart.html">Quickstart</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="waves_quickstart.html">Quickstart: Abaqus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_gmsh_calculix.html">Quickstart: Gmsh+CalculiX</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_introduction.html">Tutorial Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorial_core.html">Core Lessons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial_00_scons.html">Tutorial 00: SConstruct</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_01_geometry.html">Tutorial 01: Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_02_partition_mesh.html">Tutorial 02: Partition and Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_03_solverprep.html">Tutorial 03: SolverPrep</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_04_simulation.html">Tutorial 04: Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_05_parameter_substitution.html">Tutorial 05: Parameter Substitution</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_06_include_files.html">Tutorial 06: Include Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_cartesian_product.html">Tutorial 07: Cartesian Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_08_data_extraction.html">Tutorial 08: Data Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_09_post_processing.html">Tutorial 09: Post-Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_10_unit_testing.html">Tutorial 10: Unit Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_11_regression_testing.html">Tutorial 11: Regression Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_12_archival.html">Tutorial 12: Data Archival</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="tutorial_supplemental.html">Supplemental Lessons</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scons_quickstart.html">SCons Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="scons_multiactiontask.html">SCons Multi-Action Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_argparse_types.html">Tutorial: Input Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cubit_abaqus.html">Tutorial: Cubit+Abaqus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cubit_sierra.html">Tutorial: Cubit+Sierra</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cubit_fierro.html">Tutorial: Cubit+Fierro</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_escape_sequences.html">Tutorial: Escape Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_latin_hypercube.html">Tutorial 07: Latin Hypercube</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_sobol_sequence.html">Tutorial 07: Sobol Sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_one_at_a_time.html">Tutorial 07: One-at-a-Time</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Tutorial: Mesh Convergence</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_part_image.html">Tutorial: Part Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_sensitivity_study.html">Tutorial: Sensitivity Study</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_abaqus_cae.html">Tutorial: Abaqus CAE</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorial_wip.html">Work-in-progress Lessons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial_writing_builders.html">Tutorial: Writing Builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_remote_execution.html">Tutorial: Simulation via SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_sbatch.html">Tutorial: Simulation via SLURM</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_extend_study.html">Automatically Extending a Parameter Study</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_task_reuse.html">Tutorial: Task Definition Reuse</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_setuptools_scm.html">Tutorial: setuptools_scm</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_quinoa.html">Tutorial: Quinoa</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">ModSim Templates</a></li>

<li class="toctree-l1"><a class="reference internal" href="api.html">External API</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-Line Utilities</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Help and Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="license.html">LICENSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal_api.html">Internal API</a></li>
<li class="toctree-l1"><a class="reference internal" href="devops.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_philosophy.html">Release Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="zreferences.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tutorial_api.html">WAVES-TUTORIAL API</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_cli.html">WAVES-TUTORIAL CLI</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="tutorial_supplemental.html" class="nav-link">Supplemental Lessons</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Tutorial:...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/lanl-aea/waves" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/lanl-aea/waves/blob/main/docs/tutorial_mesh_convergence.rst?plain=1" target="_blank"
   class="btn btn-sm btn-source-file-button dropdown-item"
   title="Show source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">Show source</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/tutorial_mesh_convergence.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial: Mesh Convergence</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment">Environment</a><ul class="simple visible nav section-nav flex-column">
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-structure">Directory Structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-study-file">Parameter Study File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mesh-convergence-selection-dictionary">Mesh Convergence Selection Dictionary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconscript">SConscript</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconstruct">SConstruct</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-targets">Build Targets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-files">Output Files</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="tutorial-mesh-convergence">
<span id="id1"></span><h1>Tutorial: Mesh Convergence<a class="headerlink" href="#tutorial-mesh-convergence" title="Link to this heading">#</a></h1>
<p>This tutorial is intended to demonstrate several advanced usage features that were glossed over in previous
tutorials. Specifically, this tutorial will discuss</p>
<ul class="simple">
<li><p>Building a parameter study from somewhere in the middle of the SCons workflow using a common source</p></li>
<li><p>Utilizing <code class="docutils literal notranslate"><span class="pre">--input-file</span></code> and <code class="docutils literal notranslate"><span class="pre">--output-file</span></code> command-line arguments</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">post_processing.py</span></code> script to create multiple plots</p></li>
</ul>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://help.3ds.com/2023/english/dssimulia_established/simacaegsarefmap/simagsa-c-ctmmeshconverg.htm">Mesh Convergence</a> Studies <span id="id2">[<a class="reference internal" href="zreferences.html#id2" title="Dassault Systemés Simulia Corporation. Abaqus 2023. 2023. Providence, RI, USA.">42</a>]</span></p></li>
<li><p>SCons file objects: <a class="reference external" href="https://scons.org/doc/production/HTML/scons-api/SCons.Node/">SCons Node Package</a></p></li>
</ul>
</section>
<section id="environment">
<h2>Environment<a class="headerlink" href="#environment" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="https://scons.org/">SCons</a> and <a class="reference external" href="https://lanl-aea.github.io/waves/index.html">WAVES</a> can be installed in a <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> environment with the <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> package manager. See the <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html">Conda
installation</a> and <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">Conda environment management</a> documentation for more details about using <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SALib and numpy versions may not need to be this strict for most tutorials. However,
<a class="reference internal" href="tutorial_sensitivity_study.html#tutorial-sensitivity-study"><span class="std std-ref">Tutorial: Sensitivity Study</span></a> uncovered some undocumented SALib version sensitivity to numpy surrounding the
numpy v2 rollout.</p>
</div>
<ol class="arabic">
<li><p>Create the tutorials environment if it doesn’t exist</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-0">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda create --name waves-tutorial-env --channel conda-forge waves &#39;scons&gt;=4.6&#39; matplotlib pandas pyyaml xarray seaborn &#39;numpy&gt;=2&#39; &#39;salib&gt;=1.5.1&#39; pytest
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-1">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">waves</span><span class="o">-</span><span class="n">tutorial</span><span class="o">-</span><span class="n">env</span> <span class="o">--</span><span class="n">channel</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">waves</span> <span class="n">scons</span> <span class="n">matplotlib</span> <span class="n">pandas</span> <span class="n">pyyaml</span> <span class="n">xarray</span> <span class="n">seaborn</span> <span class="n">numpy</span> <span class="n">salib</span> <span class="n">pytest</span>
</pre></div>
</div>
</div>
</div>
</li>
<li><p>Activate the environment</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-2">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda activate waves-tutorial-env
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-3">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">conda</span> <span class="n">activate</span> <span class="n">waves</span><span class="o">-</span><span class="n">tutorial</span><span class="o">-</span><span class="n">env</span>
</pre></div>
</div>
</div>
</div>
</li>
</ol>
<p>Some tutorials require additional third-party software that is not available for the <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> package manager. This
software must be installed separately and either made available to SConstruct by modifying your system’s <code class="docutils literal notranslate"><span class="pre">PATH</span></code> or by
modifying the SConstruct search paths provided to the <a class="reference internal" href="api.html#waves.scons_extensions.add_program" title="waves.scons_extensions.add_program"><code class="xref py py-meth docutils literal notranslate"><span class="pre">waves.scons_extensions.add_program()</span></code></a> method.</p>
</section>
<section id="directory-structure">
<h2>Directory Structure<a class="headerlink" href="#directory-structure" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="3">
<li><p>Create and change to a new project root directory to house the tutorial files if you have not already done so. For example</p></li>
</ol>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-4">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/waves-tutorials
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/waves-tutorials
$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-5">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">New-Item</span> <span class="nv">$HOME</span><span class="p">\</span><span class="n">waves-tutorials</span> <span class="n">-ItemType</span> <span class="s2">&quot;Directory&quot;</span>
<span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">Set-Location</span> <span class="nv">$HOME</span><span class="p">\</span><span class="n">waves-tutorials</span>
<span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">Get-Location</span>

<span class="n">Path</span>
<span class="p">----</span>
<span class="n">C</span><span class="p">:\</span><span class="n">Users</span><span class="p">\</span><span class="n">roppenheimer</span><span class="p">\</span><span class="n">waves-tutorials</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you skipped any of the previous tutorials, run the following commands to create a copy of the necessary tutorial
files.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials
$<span class="w"> </span>waves<span class="w"> </span>fetch<span class="w"> </span>--overwrite<span class="w"> </span>--tutorial<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mv<span class="w"> </span>tutorial_11_regression_testing_SConstruct<span class="w"> </span>SConstruct
WAVES<span class="w"> </span>fetch
Destination<span class="w"> </span>directory:<span class="w"> </span><span class="s1">&#39;/home/roppenheimer/waves-tutorials&#39;</span>
</pre></div>
</div>
</div>
<ol class="arabic simple" start="4">
<li><p>Download and copy the <code class="docutils literal notranslate"><span class="pre">tutorial_11_regression_testing.scons</span></code> file to a new file named <code class="docutils literal notranslate"><span class="pre">tutorial_mesh_convergence.scons</span></code>
with the <a class="reference internal" href="cli.html#waves-cli"><span class="std std-ref">WAVES Command-Line Utility</span></a> <a class="reference internal" href="cli.html#waves-fetch-cli"><span class="std std-ref">fetch</span></a> subcommand.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials
$<span class="w"> </span>waves<span class="w"> </span>fetch<span class="w"> </span>--overwrite<span class="w"> </span>tutorials/tutorial_11_regression_testing.scons<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>cp<span class="w"> </span>tutorial_11_regression_testing.scons<span class="w"> </span>tutorial_mesh_convergence.scons
WAVES<span class="w"> </span>fetch
Destination<span class="w"> </span>directory:<span class="w"> </span><span class="s1">&#39;/home/roppenheimer/waves-tutorials&#39;</span>
</pre></div>
</div>
</section>
<section id="parameter-study-file">
<h2>Parameter Study File<a class="headerlink" href="#parameter-study-file" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="5">
<li><p>Create a new file <code class="docutils literal notranslate"><span class="pre">modsim_package/python/rectangle_compression_mesh_convergence.py</span></code> from the content below.</p></li>
</ol>
<div class="admonition-waves-tutorials-modsim-package-python-rectangle-compression-mesh-convergence-py admonition">
<p class="admonition-title">waves-tutorials/modsim_package/python/rectangle_compression_mesh_convergence.py</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Parameter sets and schemas for the rectangle compression simulation.&quot;&quot;&quot;</span>


<span class="k">def</span><span class="w"> </span><span class="nf">parameter_schema</span><span class="p">(</span>
    <span class="n">global_seed</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.125</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return mesh convergence WAVES CartesianProduct parameter schema.</span>

<span class="sd">    :param global_seed: The global mesh seed size</span>

<span class="sd">    :returns: WAVES CartesianProduct parameter schema</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;global_seed&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">global_seed</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">schema</span>
</pre></div>
</div>
</div>
<p>This parameter study will define a mesh convergence study where the global size of the finite elements in the model is
decreased several times by a factor of two.</p>
</section>
<section id="mesh-convergence-selection-dictionary">
<h2>Mesh Convergence Selection Dictionary<a class="headerlink" href="#mesh-convergence-selection-dictionary" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="6">
<li><p>Create a new file <code class="docutils literal notranslate"><span class="pre">modsim_package/python/mesh_convergence_stress.yaml</span></code> from the content below.</p></li>
</ol>
<div class="admonition-waves-tutorials-modsim-package-python-mesh-convergence-stress-yaml admonition">
<p class="admonition-title">waves-tutorials/modsim_package/python/mesh_convergence_stress.yaml</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;E values&#39;</span><span class="p">:</span> <span class="s1">&#39;E22&#39;</span>
<span class="s1">&#39;S values&#39;</span><span class="p">:</span> <span class="s1">&#39;S22&#39;</span>
<span class="s1">&#39;elements&#39;</span><span class="p">:</span> <span class="mi">1</span>
<span class="s1">&#39;step&#39;</span><span class="p">:</span> <span class="s1">&#39;Step-1&#39;</span>
<span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="s1">&#39;integration point&#39;</span><span class="p">:</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<p>This file defines a YAML formatted dictionary that will be used to change the default data selection of the
<code class="docutils literal notranslate"><span class="pre">post_processing.py</span></code> script.</p>
</section>
<section id="sconscript">
<h2>SConscript<a class="headerlink" href="#sconscript" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="7">
<li><p>A <code class="docutils literal notranslate"><span class="pre">diff</span></code> against the <code class="docutils literal notranslate"><span class="pre">tutorial_11_regression_testing.scons</span></code> file from <a class="reference internal" href="tutorial_11_regression_testing.html#tutorial-regression-testing"><span class="std std-ref">Tutorial 11: Regression Testing</span></a> is
included below to help identify the changes made in this tutorial. Use the diff to update your
<code class="docutils literal notranslate"><span class="pre">tutorial_mesh_convergence.scons</span></code> file, and then review the paragraphs that follow to understand the meaning of these
changes.</p></li>
</ol>
<div class="admonition-waves-tutorials-tutorial-mesh-convergence-scons admonition">
<p class="admonition-title">waves-tutorials/tutorial_mesh_convergence.scons</p>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/waves/waves/build/docs/tutorials_tutorial_11_regression_testing.scons</span>
<span class="gi">+++ /home/runner/work/waves/waves/build/docs/tutorials_tutorial_mesh_convergence.scons</span>
<span class="gu">@@ -1,5 +1,5 @@</span>
<span class="w"> </span>#! /usr/bin/env python
<span class="gd">-&quot;&quot;&quot;Rectangle compression workflow.</span>
<span class="gi">+&quot;&quot;&quot;Rectangle mesh convergence workflow.</span>
<span class="w"> </span>
<span class="w"> </span>Requires the following ``SConscript(..., exports={})``
<span class="w"> </span>
<span class="gu">@@ -15,7 +15,7 @@</span>
<span class="w"> </span>
<span class="w"> </span>import waves
<span class="w"> </span>
<span class="gd">-from modsim_package.python.rectangle_compression_cartesian_product import parameter_schema</span>
<span class="gi">+from modsim_package.python.rectangle_compression_mesh_convergence import parameter_schema</span>
<span class="w"> </span>
<span class="w"> </span># Inherit the parent construction environment
<span class="w"> </span>Import(&quot;env&quot;)
<span class="gu">@@ -26,6 +26,11 @@</span>
<span class="w"> </span>build_directory = pathlib.Path(Dir(&quot;.&quot;).abspath)
<span class="w"> </span>workflow_name = build_directory.name
<span class="w"> </span>parameter_study_file = build_directory / &quot;parameter_study.h5&quot;
<span class="gi">+simulation_constants = {</span>
<span class="gi">+    &quot;width&quot;: 1.0,</span>
<span class="gi">+    &quot;height&quot;: 1.0,</span>
<span class="gi">+    &quot;displacement&quot;: -0.01,</span>
<span class="gi">+}</span>
<span class="w"> </span>
<span class="w"> </span># Collect the target nodes to build a concise alias for all targets
<span class="w"> </span>workflow = []
<span class="gu">@@ -43,34 +48,37 @@</span>
<span class="w"> </span>
<span class="w"> </span># Comment used in tutorial code snippets: marker-3
<span class="w"> </span>
<span class="gi">+# Geometry</span>
<span class="gi">+workflow.extend(</span>
<span class="gi">+    env.AbaqusJournal(</span>
<span class="gi">+        target=[&quot;rectangle_geometry.cae&quot;, &quot;rectangle_geometry.jnl&quot;],</span>
<span class="gi">+        source=[&quot;#/modsim_package/abaqus/rectangle_geometry.py&quot;],</span>
<span class="gi">+        subcommand_options=&quot;--width ${width} --height ${height}&quot;,</span>
<span class="gi">+        **simulation_constants,</span>
<span class="gi">+    )</span>
<span class="gi">+)</span>
<span class="gi">+</span>
<span class="gi">+# Partition</span>
<span class="gi">+partition_targets = env.AbaqusJournal(</span>
<span class="gi">+    target=[&quot;rectangle_partition.cae&quot;, &quot;rectangle_partition.jnl&quot;],</span>
<span class="gi">+    source=[&quot;#/modsim_package/abaqus/rectangle_partition.py&quot;, &quot;rectangle_geometry.cae&quot;],</span>
<span class="gi">+    subcommand_options=&quot;--width ${width} --height ${height}&quot;,</span>
<span class="gi">+    **simulation_constants,</span>
<span class="gi">+)</span>
<span class="gi">+workflow.extend(partition_targets)</span>
<span class="gi">+partition_cae_node = partition_targets[0]</span>
<span class="gi">+</span>
<span class="w"> </span># Parameterized targets must live inside current simulation_variables for loop
<span class="w"> </span>for set_name, parameters in parameter_generator.parameter_study_to_dict().items():
<span class="w"> </span>    set_path = pathlib.Path(set_name)
<span class="gd">-    simulation_variables = parameters</span>
<span class="gi">+    simulation_variables = {**parameters, **simulation_constants}</span>
<span class="w"> </span>
<span class="w"> </span>    # Comment used in tutorial code snippets: marker-4
<span class="w"> </span>
<span class="gd">-    # Geometry</span>
<span class="gd">-    workflow.extend(</span>
<span class="gd">-        env.AbaqusJournal(</span>
<span class="gd">-            target=[set_path / &quot;rectangle_geometry.cae&quot;, set_path / &quot;rectangle_geometry.jnl&quot;],</span>
<span class="gd">-            source=[&quot;#/modsim_package/abaqus/rectangle_geometry.py&quot;],</span>
<span class="gd">-            subcommand_options=&quot;--width ${width} --height ${height}&quot;,</span>
<span class="gd">-            **simulation_variables,</span>
<span class="gd">-        )</span>
<span class="gd">-    )</span>
<span class="gd">-</span>
<span class="gd">-    # Partition</span>
<span class="gd">-    workflow.extend(</span>
<span class="gd">-        env.AbaqusJournal(</span>
<span class="gd">-            target=[set_path / &quot;rectangle_partition.cae&quot;, set_path / &quot;rectangle_partition.jnl&quot;],</span>
<span class="gd">-            source=[&quot;#/modsim_package/abaqus/rectangle_partition.py&quot;, set_path / &quot;rectangle_geometry.cae&quot;],</span>
<span class="gd">-            subcommand_options=&quot;--width ${width} --height ${height}&quot;,</span>
<span class="gd">-            **simulation_variables,</span>
<span class="gd">-        )</span>
<span class="gd">-    )</span>
<span class="gd">-</span>
<span class="w"> </span>    # Mesh
<span class="gi">+    journal_options = (</span>
<span class="gi">+        &quot;--global-seed ${global_seed} --input-file ${SOURCES[1].abspath} --output-file ${TARGETS[0].abspath}&quot;</span>
<span class="gi">+    )</span>
<span class="w"> </span>    workflow.extend(
<span class="w"> </span>        env.AbaqusJournal(
<span class="w"> </span>            target=[
<span class="gu">@@ -78,8 +86,11 @@</span>
<span class="w"> </span>                set_path / &quot;rectangle_mesh.cae&quot;,
<span class="w"> </span>                set_path / &quot;rectangle_mesh.jnl&quot;,
<span class="w"> </span>            ],
<span class="gd">-            source=[&quot;#/modsim_package/abaqus/rectangle_mesh.py&quot;, set_path / &quot;rectangle_partition.cae&quot;],</span>
<span class="gd">-            subcommand_options=&quot;--global-seed ${global_seed}&quot;,</span>
<span class="gi">+            source=[</span>
<span class="gi">+                &quot;#/modsim_package/abaqus/rectangle_mesh.py&quot;,</span>
<span class="gi">+                partition_cae_node,</span>
<span class="gi">+            ],</span>
<span class="gi">+            subcommand_options=journal_options,</span>
<span class="w"> </span>            **simulation_variables,
<span class="w"> </span>        )
<span class="w"> </span>    )
<span class="gu">@@ -178,16 +189,23 @@</span>
<span class="w"> </span>    )
<span class="w"> </span>)
<span class="w"> </span>
<span class="gd">-# Regression test</span>
<span class="gi">+script_options = (</span>
<span class="gi">+    &quot;--input-file ${post_processing_source}&quot;</span>
<span class="gi">+    &quot; --output-file ${TARGET.file} --x-units mm --y-units MPa --x-var global_seed --y-var S&quot;</span>
<span class="gi">+    &quot; --parameter-study-file ${SOURCES[1].file}&quot;</span>
<span class="gi">+    &quot; --selection-dict ${SOURCES[2].abspath}&quot;</span>
<span class="gi">+)</span>
<span class="w"> </span>workflow.extend(
<span class="w"> </span>    env.PythonScript(
<span class="gd">-        target=[&quot;regression.yaml&quot;],</span>
<span class="gi">+        target=[&quot;mesh_convergence_stress.pdf&quot;, &quot;mesh_convergence_stress.csv&quot;],</span>
<span class="w"> </span>        source=[
<span class="gd">-            &quot;#/modsim_package/python/regression.py&quot;,</span>
<span class="gd">-            &quot;stress_strain_comparison.csv&quot;,</span>
<span class="gd">-            &quot;#/modsim_package/python/rectangle_compression_cartesian_product.csv&quot;,</span>
<span class="gi">+            &quot;#/modsim_package/python/post_processing.py&quot;,</span>
<span class="gi">+            parameter_study_file.name,</span>
<span class="gi">+            &quot;#/modsim_package/python/mesh_convergence_stress.yaml&quot;,</span>
<span class="gi">+            *post_processing_source,</span>
<span class="w"> </span>        ],
<span class="gd">-        subcommand_options=&quot;${SOURCES[1:].abspath} --output-file ${TARGET.abspath}&quot;,</span>
<span class="gi">+        subcommand_options=script_options,</span>
<span class="gi">+        post_processing_source=post_processing_source,</span>
<span class="w"> </span>    )
<span class="w"> </span>)
<span class="w"> </span>
</pre></div>
</div>
</div>
<div class="admonition-waves-tutorials-tutorial-mesh-convergence-scons admonition">
<p class="admonition-title">waves-tutorials/tutorial_mesh_convergence.scons</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#! /usr/bin/env python</span>
<span class="linenos"> 2</span><span class="sd">&quot;&quot;&quot;Rectangle mesh convergence workflow.</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="sd">Requires the following ``SConscript(..., exports={})``</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="sd">* ``env`` - The SCons construction environment with the following required keys</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="sd">  * ``datacheck_alias`` - String for the alias collecting the datacheck workflow targets</span>
<span class="linenos"> 9</span><span class="sd">  * ``regression_alias`` - String for the alias collecting the regression test suite targets</span>
<span class="linenos">10</span><span class="sd">  * ``unconditional_build`` - Boolean flag to force building of conditionally ignored targets</span>
<span class="linenos">11</span><span class="sd">  * ``abaqus`` - String path for the Abaqus executable</span>
<span class="linenos">12</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="kn">import</span><span class="w"> </span><span class="nn">waves</span>
<span class="linenos">17</span>
<span class="hll"><span class="linenos">18</span><span class="kn">from</span><span class="w"> </span><span class="nn">modsim_package.python.rectangle_compression_mesh_convergence</span><span class="w"> </span><span class="kn">import</span> <span class="n">parameter_schema</span>
</span><span class="linenos">19</span>
<span class="linenos">20</span><span class="c1"># Inherit the parent construction environment</span>
<span class="linenos">21</span><span class="n">Import</span><span class="p">(</span><span class="s2">&quot;env&quot;</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="c1"># Comment used in tutorial code snippets: marker-1</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="c1"># Simulation variables</span>
<span class="linenos">26</span><span class="n">build_directory</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">Dir</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">abspath</span><span class="p">)</span>
<span class="linenos">27</span><span class="n">workflow_name</span> <span class="o">=</span> <span class="n">build_directory</span><span class="o">.</span><span class="n">name</span>
<span class="linenos">28</span><span class="n">parameter_study_file</span> <span class="o">=</span> <span class="n">build_directory</span> <span class="o">/</span> <span class="s2">&quot;parameter_study.h5&quot;</span>
<span class="hll"><span class="linenos">29</span><span class="n">simulation_constants</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="hll"><span class="linenos">30</span>    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">31</span>    <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">32</span>    <span class="s2">&quot;displacement&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">33</span><span class="p">}</span>
</span><span class="linenos">34</span>
<span class="linenos">35</span><span class="c1"># Collect the target nodes to build a concise alias for all targets</span>
<span class="linenos">36</span><span class="n">workflow</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">37</span><span class="n">datacheck</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
<p>The highlighted code above points out two key changes from <code class="docutils literal notranslate"><span class="pre">diff</span></code> at the beginning of the file. First, we import the
<code class="docutils literal notranslate"><span class="pre">parameter_schema</span></code> from the <code class="docutils literal notranslate"><span class="pre">rectangle_compression_mesh_convergence.py</span></code> file you created in the beginning of
this tutorial. The second change is the addition of a <code class="docutils literal notranslate"><span class="pre">simulation_constants</span></code> dictionary. This parameter study only
changes the meshing <code class="docutils literal notranslate"><span class="pre">global_seed</span></code> parameter, and all other model parameters stay constant. One way to achieve this
would be to set the remaining parameters as single-value parameter sets in the <code class="docutils literal notranslate"><span class="pre">parameter_schema</span></code>. This was done with
the <code class="docutils literal notranslate"><span class="pre">global_seed</span></code> and <code class="docutils literal notranslate"><span class="pre">displacement</span></code> parameters in <a class="reference internal" href="tutorial_07_cartesian_product.html#tutorial-cartesian-product"><span class="std std-ref">Tutorial 07: Cartesian Product</span></a>. Rather, we will set the
<code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code>, and <code class="docutils literal notranslate"><span class="pre">displacement</span></code> variables as constants in the <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file, and they will not appear
in the parameter study definition. The individual parameters from the <code class="docutils literal notranslate"><span class="pre">parameter_schema</span></code> and <code class="docutils literal notranslate"><span class="pre">simulation_constants</span></code>
dictionaries will be combined later in the <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file.</p>
<div class="admonition-waves-tutorials-tutorial-mesh-convergence-scons admonition">
<p class="admonition-title">waves-tutorials/tutorial_mesh_convergence.scons</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos">50</span><span class="c1"># Geometry</span>
<span class="linenos">51</span><span class="n">workflow</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
<span class="linenos">52</span>    <span class="n">env</span><span class="o">.</span><span class="n">AbaqusJournal</span><span class="p">(</span>
<span class="hll"><span class="linenos">53</span>        <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rectangle_geometry.cae&quot;</span><span class="p">,</span> <span class="s2">&quot;rectangle_geometry.jnl&quot;</span><span class="p">],</span>
</span><span class="linenos">54</span>        <span class="n">source</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#/modsim_package/abaqus/rectangle_geometry.py&quot;</span><span class="p">],</span>
<span class="linenos">55</span>        <span class="n">subcommand_options</span><span class="o">=</span><span class="s2">&quot;--width $</span><span class="si">{width}</span><span class="s2"> --height $</span><span class="si">{height}</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="linenos">56</span>        <span class="o">**</span><span class="n">simulation_constants</span><span class="p">,</span>
<span class="linenos">57</span>    <span class="p">)</span>
<span class="linenos">58</span><span class="p">)</span>
<span class="linenos">59</span>
<span class="linenos">60</span><span class="c1"># Partition</span>
<span class="linenos">61</span><span class="n">partition_targets</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">AbaqusJournal</span><span class="p">(</span>
<span class="hll"><span class="linenos">62</span>    <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rectangle_partition.cae&quot;</span><span class="p">,</span> <span class="s2">&quot;rectangle_partition.jnl&quot;</span><span class="p">],</span>
</span><span class="linenos">63</span>    <span class="n">source</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#/modsim_package/abaqus/rectangle_partition.py&quot;</span><span class="p">,</span> <span class="s2">&quot;rectangle_geometry.cae&quot;</span><span class="p">],</span>
<span class="linenos">64</span>    <span class="n">subcommand_options</span><span class="o">=</span><span class="s2">&quot;--width $</span><span class="si">{width}</span><span class="s2"> --height $</span><span class="si">{height}</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="linenos">65</span>    <span class="o">**</span><span class="n">simulation_constants</span><span class="p">,</span>
<span class="linenos">66</span><span class="p">)</span>
<span class="linenos">67</span><span class="n">workflow</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">partition_targets</span><span class="p">)</span>
<span class="hll"><span class="linenos">68</span><span class="n">partition_cae_node</span> <span class="o">=</span> <span class="n">partition_targets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class="linenos">69</span>
<span class="linenos">70</span><span class="c1"># Parameterized targets must live inside current simulation_variables for loop</span>
<span class="linenos">71</span><span class="k">for</span> <span class="n">set_name</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="n">parameter_generator</span><span class="o">.</span><span class="n">parameter_study_to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="linenos">72</span>    <span class="n">set_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">set_name</span><span class="p">)</span>
<span class="hll"><span class="linenos">73</span>    <span class="n">simulation_variables</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">parameters</span><span class="p">,</span> <span class="o">**</span><span class="n">simulation_constants</span><span class="p">}</span>
</span></pre></div>
</div>
</div>
<p>The code above is largely copy and paste from <a class="reference internal" href="tutorial_11_regression_testing.html#tutorial-regression-testing"><span class="std std-ref">Tutorial 11: Regression Testing</span></a>, with a few significant
differences:</p>
<ul class="simple">
<li><p>The code pertainting to <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Geometry</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Partition</span></code> has been moved out of the parameter study’s <code class="docutils literal notranslate"><span class="pre">for</span></code> loop.
As this parameter study only involves a meshing parameter, the Geometry and Partition workflow steps need only happen
once. Then, the mesh convergence parameter study can reuse <code class="docutils literal notranslate"><span class="pre">rectangle_partition.cae</span></code> as a common source.</p></li>
<li><p>Note the highlighted lines for the <code class="docutils literal notranslate"><span class="pre">target</span></code> definitions in the <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Geometry</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Partition</span></code> code. Since this
code is no longer inside of the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, the <code class="docutils literal notranslate"><span class="pre">set_name</span></code> directory has been dropped from the <code class="docutils literal notranslate"><span class="pre">target</span></code>
definitions. As the first bullet alluded to, the targets for <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Geometry</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Partition</span></code> will be built in the
overall build directory, <code class="docutils literal notranslate"><span class="pre">build/tutorial_mesh_convergence</span></code>.</p></li>
<li><p>The following highlighted line is necessary for the parameterized <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Mesh</span></code> workflow steps to reuse a common
target. The SCons file object for the <code class="docutils literal notranslate"><span class="pre">rectangle_partition.cae</span></code> file is extracted from the target list,
<code class="docutils literal notranslate"><span class="pre">partition_target</span></code>, as a source.</p></li>
<li><p>The final highlighted line shows how the <code class="docutils literal notranslate"><span class="pre">simulation_variables</span></code> dictionary is constructed by combining the
<code class="docutils literal notranslate"><span class="pre">simulation_constants</span></code> and the <code class="docutils literal notranslate"><span class="pre">global_seed</span></code> parameters for every simulation.</p></li>
</ul>
<div class="admonition-waves-tutorials-tutorial-mesh-convergence-scons admonition">
<p class="admonition-title">waves-tutorials/tutorial_mesh_convergence.scons</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 77</span>    <span class="c1"># Mesh</span>
<span class="linenos"> 78</span>    <span class="n">journal_options</span> <span class="o">=</span> <span class="p">(</span>
<span class="hll"><span class="linenos"> 79</span>        <span class="s2">&quot;--global-seed $</span><span class="si">{global_seed}</span><span class="s2"> --input-file $</span><span class="si">{SOURCES[1].abspath}</span><span class="s2"> --output-file $</span><span class="si">{TARGETS[0].abspath}</span><span class="s2">&quot;</span>
</span><span class="linenos"> 80</span>    <span class="p">)</span>
<span class="linenos"> 81</span>    <span class="n">workflow</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
<span class="linenos"> 82</span>        <span class="n">env</span><span class="o">.</span><span class="n">AbaqusJournal</span><span class="p">(</span>
<span class="linenos"> 83</span>            <span class="n">target</span><span class="o">=</span><span class="p">[</span>
<span class="linenos"> 84</span>                <span class="n">set_path</span> <span class="o">/</span> <span class="s2">&quot;rectangle_mesh.inp&quot;</span><span class="p">,</span>
<span class="linenos"> 85</span>                <span class="n">set_path</span> <span class="o">/</span> <span class="s2">&quot;rectangle_mesh.cae&quot;</span><span class="p">,</span>
<span class="linenos"> 86</span>                <span class="n">set_path</span> <span class="o">/</span> <span class="s2">&quot;rectangle_mesh.jnl&quot;</span><span class="p">,</span>
<span class="linenos"> 87</span>            <span class="p">],</span>
<span class="linenos"> 88</span>            <span class="n">source</span><span class="o">=</span><span class="p">[</span>
<span class="linenos"> 89</span>                <span class="s2">&quot;#/modsim_package/abaqus/rectangle_mesh.py&quot;</span><span class="p">,</span>
<span class="hll"><span class="linenos"> 90</span>                <span class="n">partition_cae_node</span><span class="p">,</span>
</span><span class="linenos"> 91</span>            <span class="p">],</span>
<span class="linenos"> 92</span>            <span class="n">subcommand_options</span><span class="o">=</span><span class="n">journal_options</span><span class="p">,</span>
<span class="linenos"> 93</span>            <span class="o">**</span><span class="n">simulation_variables</span><span class="p">,</span>
<span class="linenos"> 94</span>        <span class="p">)</span>
<span class="linenos"> 95</span>    <span class="p">)</span>
<span class="linenos"> 96</span>
<span class="linenos"> 97</span>    <span class="c1"># SolverPrep</span>
<span class="linenos"> 98</span>    <span class="n">copy_source_list</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos"> 99</span>        <span class="s2">&quot;#/modsim_package/abaqus/rectangle_compression.inp.in&quot;</span><span class="p">,</span>
<span class="linenos">100</span>        <span class="s2">&quot;#/modsim_package/abaqus/assembly.inp&quot;</span><span class="p">,</span>
<span class="linenos">101</span>        <span class="s2">&quot;#/modsim_package/abaqus/boundary.inp&quot;</span><span class="p">,</span>
<span class="linenos">102</span>        <span class="s2">&quot;#/modsim_package/abaqus/field_output.inp&quot;</span><span class="p">,</span>
<span class="linenos">103</span>        <span class="s2">&quot;#/modsim_package/abaqus/materials.inp&quot;</span><span class="p">,</span>
<span class="linenos">104</span>        <span class="s2">&quot;#/modsim_package/abaqus/parts.inp&quot;</span><span class="p">,</span>
<span class="linenos">105</span>        <span class="s2">&quot;#/modsim_package/abaqus/history_output.inp&quot;</span><span class="p">,</span>
<span class="linenos">106</span>    <span class="p">]</span>
<span class="linenos">107</span>    <span class="n">workflow</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
<span class="linenos">108</span>        <span class="n">env</span><span class="o">.</span><span class="n">CopySubstfile</span><span class="p">(</span>
<span class="linenos">109</span>            <span class="n">copy_source_list</span><span class="p">,</span>
<span class="linenos">110</span>            <span class="n">substitution_dictionary</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">SubstitutionSyntax</span><span class="p">(</span><span class="n">simulation_variables</span><span class="p">),</span>
<span class="linenos">111</span>            <span class="n">build_subdirectory</span><span class="o">=</span><span class="n">set_path</span><span class="p">,</span>
<span class="linenos">112</span>        <span class="p">)</span>
<span class="linenos">113</span>    <span class="p">)</span>
</pre></div>
</div>
</div>
<p>The highlighted lines above demonstrate the usage of <code class="docutils literal notranslate"><span class="pre">--input-file</span></code> and <code class="docutils literal notranslate"><span class="pre">--output--file</span></code> command-line arguments for
the <code class="docutils literal notranslate"><span class="pre">rectangle_mesh.py</span></code> file. In previous tutorials, we have accepted the default values for input and output
files. In this case, however, we must specify that a common input file is used, as we want to reuse the target from the
<code class="docutils literal notranslate"><span class="pre">Partition</span></code> task as a source. If we would have accepted the default input file name, the <code class="docutils literal notranslate"><span class="pre">rectangle_mesh.py</span></code>
script would try to open a <code class="docutils literal notranslate"><span class="pre">rectangle_partition.cae</span></code> file in every parameter set build directory. The script
would fail to do so, because <code class="docutils literal notranslate"><span class="pre">rectangle_partition.cae</span></code> resides a directory above in the main build directory. We
avoid this issue by providing the absolute path to <code class="docutils literal notranslate"><span class="pre">rectangle_partition.cae</span></code> as the <code class="docutils literal notranslate"><span class="pre">--input-file</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--output-file</span></code> command-line argument is specified in this case only for demonstration (the default value would
actually work just fine).</p>
<p>The highlighted line containing <code class="docutils literal notranslate"><span class="pre">partition_cae_object</span></code> demonstrates the usage of an <code class="docutils literal notranslate"><span class="pre">SCons</span></code> file object as a source.
Rather than pointing to the <code class="docutils literal notranslate"><span class="pre">rectangle_partition.cae</span></code> file via absolute path, we can let <code class="docutils literal notranslate"><span class="pre">SCons</span></code> find the file
for us in the build directory. This is achieved by simply pointing to the <code class="docutils literal notranslate"><span class="pre">SCons</span></code> file object that was created when we
specified <code class="docutils literal notranslate"><span class="pre">rectangle_partition.cae</span></code> as a target in the <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Partition</span></code> workflow.</p>
<div class="admonition-waves-tutorials-tutorial-mesh-convergence-scons admonition">
<p class="admonition-title">waves-tutorials/tutorial_mesh_convergence.scons</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos">175</span><span class="c1"># Post-processing</span>
<span class="linenos">176</span><span class="n">post_processing_source</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">177</span>    <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">set_name</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;rectangle_compression_datasets.h5&quot;</span>
<span class="linenos">178</span>    <span class="k">for</span> <span class="n">set_name</span> <span class="ow">in</span> <span class="n">parameter_generator</span><span class="o">.</span><span class="n">parameter_study_to_dict</span><span class="p">()</span>
<span class="linenos">179</span><span class="p">]</span>
<span class="linenos">180</span><span class="n">script_options</span> <span class="o">=</span> <span class="s2">&quot;--input-file $</span><span class="si">{SOURCES[2:].abspath}</span><span class="s2">&quot;</span>
<span class="linenos">181</span><span class="n">script_options</span> <span class="o">+=</span> <span class="s2">&quot; --output-file $</span><span class="si">{TARGET.file}</span><span class="s2"> --x-units mm/mm --y-units MPa&quot;</span>
<span class="linenos">182</span><span class="n">script_options</span> <span class="o">+=</span> <span class="s2">&quot; --parameter-study-file $</span><span class="si">{SOURCES[1].abspath}</span><span class="s2">&quot;</span>
<span class="linenos">183</span><span class="n">workflow</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
<span class="linenos">184</span>    <span class="n">env</span><span class="o">.</span><span class="n">PythonScript</span><span class="p">(</span>
<span class="linenos">185</span>        <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;stress_strain_comparison.pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;stress_strain_comparison.csv&quot;</span><span class="p">],</span>
<span class="linenos">186</span>        <span class="n">source</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#/modsim_package/python/post_processing.py&quot;</span><span class="p">,</span> <span class="n">parameter_study_file</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">post_processing_source</span><span class="p">],</span>
<span class="linenos">187</span>        <span class="n">subcommand_options</span><span class="o">=</span><span class="n">script_options</span><span class="p">,</span>
<span class="linenos">188</span>    <span class="p">)</span>
<span class="linenos">189</span><span class="p">)</span>
<span class="linenos">190</span>
<span class="hll"><span class="linenos">191</span><span class="n">script_options</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="hll"><span class="linenos">192</span>    <span class="s2">&quot;--input-file $</span><span class="si">{post_processing_source}</span><span class="s2">&quot;</span>
</span><span class="hll"><span class="linenos">193</span>    <span class="s2">&quot; --output-file $</span><span class="si">{TARGET.file}</span><span class="s2"> --x-units mm --y-units MPa --x-var global_seed --y-var S&quot;</span>
</span><span class="hll"><span class="linenos">194</span>    <span class="s2">&quot; --parameter-study-file $</span><span class="si">{SOURCES[1].file}</span><span class="s2">&quot;</span>
</span><span class="hll"><span class="linenos">195</span>    <span class="s2">&quot; --selection-dict $</span><span class="si">{SOURCES[2].abspath}</span><span class="s2">&quot;</span>
</span><span class="hll"><span class="linenos">196</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">197</span><span class="n">workflow</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span class="hll"><span class="linenos">198</span>    <span class="n">env</span><span class="o">.</span><span class="n">PythonScript</span><span class="p">(</span>
</span><span class="hll"><span class="linenos">199</span>        <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mesh_convergence_stress.pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;mesh_convergence_stress.csv&quot;</span><span class="p">],</span>
</span><span class="hll"><span class="linenos">200</span>        <span class="n">source</span><span class="o">=</span><span class="p">[</span>
</span><span class="hll"><span class="linenos">201</span>            <span class="s2">&quot;#/modsim_package/python/post_processing.py&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">202</span>            <span class="n">parameter_study_file</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">203</span>            <span class="s2">&quot;#/modsim_package/python/mesh_convergence_stress.yaml&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">204</span>            <span class="o">*</span><span class="n">post_processing_source</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">205</span>        <span class="p">],</span>
</span><span class="hll"><span class="linenos">206</span>        <span class="n">subcommand_options</span><span class="o">=</span><span class="n">script_options</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">207</span>        <span class="n">post_processing_source</span><span class="o">=</span><span class="n">post_processing_source</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">208</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos">209</span><span class="p">)</span>
</span><span class="linenos">210</span>
<span class="linenos">211</span><span class="c1"># Collector alias based on parent directory name</span>
<span class="linenos">212</span><span class="n">env</span><span class="o">.</span><span class="n">Alias</span><span class="p">(</span><span class="n">workflow_name</span><span class="p">,</span> <span class="n">workflow</span><span class="p">)</span>
<span class="linenos">213</span><span class="n">env</span><span class="o">.</span><span class="n">Alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">workflow_name</span><span class="si">}</span><span class="s2">_datacheck&quot;</span><span class="p">,</span> <span class="n">datacheck</span><span class="p">)</span>
<span class="linenos">214</span><span class="n">env</span><span class="o">.</span><span class="n">Alias</span><span class="p">(</span><span class="n">env</span><span class="p">[</span><span class="s2">&quot;datacheck_alias&quot;</span><span class="p">],</span> <span class="n">datacheck</span><span class="p">)</span>
<span class="linenos">215</span><span class="n">env</span><span class="o">.</span><span class="n">Alias</span><span class="p">(</span><span class="n">env</span><span class="p">[</span><span class="s2">&quot;regression_alias&quot;</span><span class="p">],</span> <span class="n">datacheck</span><span class="p">)</span>
<span class="linenos">216</span>
<span class="linenos">217</span><span class="k">if</span> <span class="ow">not</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;unconditional_build&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;ABAQUS_PROGRAM&quot;</span><span class="p">]:</span>
<span class="linenos">218</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Program &#39;abaqus&#39; was not found in construction environment. Ignoring &#39;</span><span class="si">{</span><span class="n">workflow_name</span><span class="si">}</span><span class="s2">&#39; target(s)&quot;</span><span class="p">)</span>
<span class="linenos">219</span>    <span class="n">Ignore</span><span class="p">([</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">workflow_name</span><span class="p">],</span> <span class="n">workflow</span><span class="p">)</span>
<span class="linenos">220</span>    <span class="n">Ignore</span><span class="p">([</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">workflow_name</span><span class="si">}</span><span class="s2">_datacheck&quot;</span><span class="p">],</span> <span class="n">datacheck</span><span class="p">)</span>
<span class="linenos">221</span>    <span class="n">Ignore</span><span class="p">([</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;datacheck_alias&quot;</span><span class="p">],</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;regression_alias&quot;</span><span class="p">]],</span> <span class="n">datacheck</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The highlighted code above demonstrated the usage of the <code class="docutils literal notranslate"><span class="pre">post_processing.py</span></code> script to generate a second plot. The first
plot, as demonstrated in <a class="reference internal" href="tutorial_09_post_processing.html#tutorial-post-processing"><span class="std std-ref">Tutorial 09: Post-Processing</span></a>, is a simple stress-strain comparison for each parameter
set. The highlighted code is used to generate a plot of global mesh size versus the stress in the model at the end of
the simulation. As the global mesh size decreases, the final stress should start to converge to a common value.</p>
<p>The specification of a <code class="docutils literal notranslate"><span class="pre">selection_dict</span></code> demonstrates another feature of the <code class="docutils literal notranslate"><span class="pre">post_processing.py</span></code> command-line
interface. In this case, the only <code class="docutils literal notranslate"><span class="pre">key:</span> <span class="pre">value</span></code> pair added to the <code class="docutils literal notranslate"><span class="pre">selection_dict</span></code> that does not already exist in the
<a class="reference internal" href="tutorial_cli.html#post-processing-cli"><span class="std std-ref">post_processing.py</span></a> CLI defaults is the specification of the time point <code class="docutils literal notranslate"><span class="pre">'time':</span> <span class="pre">1.0</span></code>. This down selects
our data to the largest compressive stress produced by the simulation, which will be our quantity of interest (QoI) for
this simulation workflow.</p>
<p>The remaining changes are rather simple. The <code class="docutils literal notranslate"><span class="pre">--x-units</span></code> and <code class="docutils literal notranslate"><span class="pre">--x-var</span></code> command-line arguments are updated to reflect
the usage of the <code class="docutils literal notranslate"><span class="pre">global_seed</span></code> parameter as the independent variable.</p>
</section>
<section id="sconstruct">
<h2>SConstruct<a class="headerlink" href="#sconstruct" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="8">
<li><p>A <code class="docutils literal notranslate"><span class="pre">diff</span></code> against the <code class="docutils literal notranslate"><span class="pre">SConstruct</span></code> file from <a class="reference internal" href="tutorial_11_regression_testing.html#tutorial-regression-testing"><span class="std std-ref">Tutorial 11: Regression Testing</span></a> is included below to help
identify the changes made in this tutorial. Make these changes to your <code class="docutils literal notranslate"><span class="pre">SConstruct</span></code> file.</p></li>
</ol>
<div class="admonition-waves-tutorials-sconstruct admonition">
<p class="admonition-title">waves-tutorials/SConstruct</p>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/waves/waves/build/docs/tutorials_tutorial_11_regression_testing_SConstruct</span>
<span class="gi">+++ /home/runner/work/waves/waves/build/docs/tutorials_tutorial_mesh_convergence_SConstruct</span>
<span class="gu">@@ -1,5 +1,5 @@</span>
<span class="w"> </span>#! /usr/bin/env python
<span class="gd">-&quot;&quot;&quot;Configure the WAVES regression testing tutorial.&quot;&quot;&quot;</span>
<span class="gi">+&quot;&quot;&quot;Configure the WAVES mesh convergence tutorial.&quot;&quot;&quot;</span>
<span class="w"> </span>
<span class="w"> </span>import os
<span class="w"> </span>import pathlib
<span class="gu">@@ -115,6 +115,7 @@</span>
<span class="w"> </span>    &quot;tutorial_08_data_extraction.scons&quot;,
<span class="w"> </span>    &quot;tutorial_09_post_processing.scons&quot;,
<span class="w"> </span>    &quot;tutorial_11_regression_testing.scons&quot;,
<span class="gi">+    &quot;tutorial_mesh_convergence.scons&quot;,</span>
<span class="w"> </span>]
<span class="w"> </span>for workflow in workflow_configurations:
<span class="w"> </span>    build_dir = env[&quot;variant_dir_base&quot;] / pathlib.Path(workflow).stem
</pre></div>
</div>
</div>
</section>
<section id="build-targets">
<h2>Build Targets<a class="headerlink" href="#build-targets" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="9">
<li><p>Build the new targets</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials
$<span class="w"> </span>scons<span class="w"> </span>tutorial_mesh_convergence<span class="w"> </span>--jobs<span class="o">=</span><span class="m">4</span>
</pre></div>
</div>
<p>The output from building the targets is not shown explicitly here, but look for one particular thing in your terminal
output. You should notice the execution of the <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.py</span></code> and <code class="docutils literal notranslate"><span class="pre">rectangle_partition.py</span></code>
scripts first, and then the parameter study is kicked off with multiple executions of the <code class="docutils literal notranslate"><span class="pre">rectangle_mesh.py</span></code>
script.</p>
</section>
<section id="output-files">
<h2>Output Files<a class="headerlink" href="#output-files" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="10">
<li><p>Observe the catenated parameter results and parameter study dataset in the post-processing task’s STDOUT file.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cat build/tutorial_mesh_convergence/mesh_convergence_stress.stdout

&lt;xarray.Dataset&gt;
Dimensions:              (E values: 4, S values: 4, elements: 64, step: 1,
                         time: 5, set_name: 4)
Coordinates:
  * E values            (E values) object &#39;E11&#39; &#39;E22&#39; &#39;E33&#39; &#39;E12&#39;
  * S values            (S values) object &#39;S11&#39; &#39;S22&#39; &#39;S33&#39; &#39;S12&#39;
  * elements            (elements) int64 1 2 3 4 5 6 7 ... 58 59 60 61 62 63 64
  * step                (step) object &#39;Step-1&#39;
  * time                (time) float64 0.0175 0.07094 0.2513 0.86 1.0
    integrationPoint    (set_name, elements) float64 1.0 nan ... 1.0 1.0
  * set_name            (set_name) &lt;U14 &#39;parameter_set0&#39; ... &#39;parameter...
    set_hash            (set_name) object ...
Data variables:
    E                   (set_name, step, time, elements, E values) float32 ...
    S                   (set_name, step, time, elements, S values) float32 ...
    global_seed         (set_name) float64 ...
</pre></div>
</div>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="tutorial_07_one_at_a_time.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tutorial 07: One-at-a-Time</p>
      </div>
    </a>
    <a class="right-next"
       href="tutorial_part_image.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Tutorial: Part Image</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment">Environment</a><ul class="simple visible nav section-nav flex-column">
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-structure">Directory Structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-study-file">Parameter Study File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mesh-convergence-selection-dictionary">Mesh Convergence Selection Dictionary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconscript">SConscript</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconstruct">SConstruct</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-targets">Build Targets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-files">Output Files</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Kyle Brindley, Prabhu S. Khalsa, Thomas Roberts, Sergio Cordova, Matthew Fister, Chris Johnson, and Scott Ouellette
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2025 Triad National Security, LLC. All Rights Reserved.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Oct 10, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>