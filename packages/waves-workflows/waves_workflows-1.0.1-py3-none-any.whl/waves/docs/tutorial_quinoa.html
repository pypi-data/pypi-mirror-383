
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutorial: Quinoa &#8212; WAVES 1.0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=cb027bf8" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=cb027bf8" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=423d4ce3"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=e639491b"></script>
    <script src="_static/custom.js?v=070b234d"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorial_quinoa';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ModSim Templates" href="templates.html" />
    <link rel="prev" title="Tutorial: setuptools_scm" href="tutorial_setuptools_scm.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Oct 10, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/waves_logo_brandmark_smaller.png" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="_static/waves_logo_brandmark_smaller.png" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">1.0.1</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Computational Practices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="computational_practices_introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_version_control.html">Version Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_build_system.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_compute_environment.html">Compute Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_regression_testing.html">Regression Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_archival.html">Data Archival</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="abstract.html">Why WAVES?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorial_quickstart.html">Quickstart</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="waves_quickstart.html">Quickstart: Abaqus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_gmsh_calculix.html">Quickstart: Gmsh+CalculiX</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_introduction.html">Tutorial Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorial_core.html">Core Lessons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial_00_scons.html">Tutorial 00: SConstruct</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_01_geometry.html">Tutorial 01: Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_02_partition_mesh.html">Tutorial 02: Partition and Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_03_solverprep.html">Tutorial 03: SolverPrep</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_04_simulation.html">Tutorial 04: Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_05_parameter_substitution.html">Tutorial 05: Parameter Substitution</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_06_include_files.html">Tutorial 06: Include Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_cartesian_product.html">Tutorial 07: Cartesian Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_08_data_extraction.html">Tutorial 08: Data Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_09_post_processing.html">Tutorial 09: Post-Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_10_unit_testing.html">Tutorial 10: Unit Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_11_regression_testing.html">Tutorial 11: Regression Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_12_archival.html">Tutorial 12: Data Archival</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorial_supplemental.html">Supplemental Lessons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="scons_quickstart.html">SCons Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="scons_multiactiontask.html">SCons Multi-Action Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_argparse_types.html">Tutorial: Input Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cubit_abaqus.html">Tutorial: Cubit+Abaqus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cubit_sierra.html">Tutorial: Cubit+Sierra</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cubit_fierro.html">Tutorial: Cubit+Fierro</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_escape_sequences.html">Tutorial: Escape Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_latin_hypercube.html">Tutorial 07: Latin Hypercube</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_sobol_sequence.html">Tutorial 07: Sobol Sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_one_at_a_time.html">Tutorial 07: One-at-a-Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_mesh_convergence.html">Tutorial: Mesh Convergence</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_part_image.html">Tutorial: Part Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_sensitivity_study.html">Tutorial: Sensitivity Study</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_abaqus_cae.html">Tutorial: Abaqus CAE</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="tutorial_wip.html">Work-in-progress Lessons</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial_writing_builders.html">Tutorial: Writing Builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_remote_execution.html">Tutorial: Simulation via SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_sbatch.html">Tutorial: Simulation via SLURM</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_extend_study.html">Automatically Extending a Parameter Study</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_task_reuse.html">Tutorial: Task Definition Reuse</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_setuptools_scm.html">Tutorial: setuptools_scm</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Tutorial: Quinoa</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">ModSim Templates</a></li>

<li class="toctree-l1"><a class="reference internal" href="api.html">External API</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-Line Utilities</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Help and Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="license.html">LICENSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal_api.html">Internal API</a></li>
<li class="toctree-l1"><a class="reference internal" href="devops.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_philosophy.html">Release Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="zreferences.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tutorial_api.html">WAVES-TUTORIAL API</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_cli.html">WAVES-TUTORIAL CLI</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="tutorial_wip.html" class="nav-link">Work-in-progress Lessons</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Tutorial: Quinoa</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/lanl-aea/waves" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/lanl-aea/waves/blob/main/docs/tutorial_quinoa.rst?plain=1" target="_blank"
   class="btn btn-sm btn-source-file-button dropdown-item"
   title="Show source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">Show source</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/tutorial_quinoa.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial: Quinoa</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment">Environment</a><ul class="simple visible nav section-nav flex-column">
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-structure">Directory Structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconscript">SConscript</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cubit-journal-files">Cubit Journal Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quinoa-input-file-s">Quinoa Input File(s)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconstruct">SConstruct</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-targets">Build Targets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-files">Output Files</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="tutorial-quinoa">
<span id="id1"></span><h1>Tutorial: Quinoa<a class="headerlink" href="#tutorial-quinoa" title="Link to this heading">#</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This tutorial is in a draft outline state. It is provided as reference and will be fleshed out in future releases.
Be sure to check back in on this tutorial or watch the <a class="reference internal" href="changelog.html#changelog"><span class="std std-ref">Changelog</span></a> for updates!</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Most WAVES tutorials are used as system tests in the regression test suite to ensure that the tutorial files are
up-to-date and functional. While the Quinoa team refactors around a breaking change in the input file parser, the
Quiona tutorial is not part of the regression suite, but the Quinoa builder unit tests are part of the verification
suite. If you run into problems running this tutorial, please contact the Quiona development team for the current
status of the input file parser.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Most WAVES tutorials are used as system tests in the regression test suite to ensure that the tutorial files are
up-to-date and functional. The <code class="docutils literal notranslate"><span class="pre">quinoa-local</span></code> alias <em>without</em> sbatch submission is part of the regression suite,
but neither the sbatch submission nor the <code class="docutils literal notranslate"><span class="pre">quinoa-remote</span></code> alias is regression tested. The SSH remote excution and
sbatch behavior was tested when the tutorial was written and is expected to run correctly. If you run into problems
running this tutorial, please contact the WAVES development team.</p>
</div>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://cubit.sandia.gov/public/documentation.html">Cubit</a>: Python Interface <span id="id2">[<a class="reference internal" href="zreferences.html#id21" title="National Technology and Engineering Solutions of Sandia, LLC. Cubit. 2022. Albuquerque, New Mexico, USA. URL: https://cubit.sandia.gov/ (visited on 2022-08-05).">62</a>]</span></p></li>
<li><p><a class="reference external" href="https://cubit.sandia.gov/public/documentation.html">Cubit</a>: Importing Cubit into Python <span id="id3">[<a class="reference internal" href="zreferences.html#id21" title="National Technology and Engineering Solutions of Sandia, LLC. Cubit. 2022. Albuquerque, New Mexico, USA. URL: https://cubit.sandia.gov/ (visited on 2022-08-05).">62</a>]</span></p></li>
<li><p><a class="reference external" href="https://quinoacomputing.github.io/index.html">Quinoa</a>: Quinoa documentation <span id="id4">[<a class="reference internal" href="zreferences.html#id26" title="Los Alamos National Laboratory. Quinoa. 2023. URL: https://github.com/quinoacomputing/quinoa (visited on 2023-10-27).">74</a>, <a class="reference internal" href="zreferences.html#id25" title="Los Alamos National Laboratory. Quinoa docs. 2023. URL: https://quinoacomputing.github.io/index.html (visited on 2023-10-27).">75</a>]</span></p></li>
<li><p><a class="reference external" href="https://charmplusplus.org/">Charm++</a> <span id="id5">[<a class="reference internal" href="zreferences.html#id83" title="University of Illinois Parallel Programming Lab, Department of Computer Science. Charm++: parallel programming framework. 2024. URL: https://charmplusplus.org/ (visited on 2024-12-05).">76</a>]</span></p></li>
</ul>
</section>
<section id="environment">
<h2>Environment<a class="headerlink" href="#environment" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="https://scons.org/">SCons</a> and <a class="reference external" href="https://lanl-aea.github.io/waves/index.html">WAVES</a> can be installed in a <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> environment with the <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> package manager. See the <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html">Conda
installation</a> and <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">Conda environment management</a> documentation for more details about using <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SALib and numpy versions may not need to be this strict for most tutorials. However,
<a class="reference internal" href="tutorial_sensitivity_study.html#tutorial-sensitivity-study"><span class="std std-ref">Tutorial: Sensitivity Study</span></a> uncovered some undocumented SALib version sensitivity to numpy surrounding the
numpy v2 rollout.</p>
</div>
<ol class="arabic">
<li><p>Create the tutorials environment if it doesn’t exist</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-0">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda create --name waves-tutorial-env --channel conda-forge waves &#39;scons&gt;=4.6&#39; matplotlib pandas pyyaml xarray seaborn &#39;numpy&gt;=2&#39; &#39;salib&gt;=1.5.1&#39; pytest
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-1">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">waves</span><span class="o">-</span><span class="n">tutorial</span><span class="o">-</span><span class="n">env</span> <span class="o">--</span><span class="n">channel</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">waves</span> <span class="n">scons</span> <span class="n">matplotlib</span> <span class="n">pandas</span> <span class="n">pyyaml</span> <span class="n">xarray</span> <span class="n">seaborn</span> <span class="n">numpy</span> <span class="n">salib</span> <span class="n">pytest</span>
</pre></div>
</div>
</div>
</div>
</li>
<li><p>Activate the environment</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-2">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda activate waves-tutorial-env
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-3">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">conda</span> <span class="n">activate</span> <span class="n">waves</span><span class="o">-</span><span class="n">tutorial</span><span class="o">-</span><span class="n">env</span>
</pre></div>
</div>
</div>
</div>
</li>
</ol>
<p>Some tutorials require additional third-party software that is not available for the <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> package manager. This
software must be installed separately and either made available to SConstruct by modifying your system’s <code class="docutils literal notranslate"><span class="pre">PATH</span></code> or by
modifying the SConstruct search paths provided to the <a class="reference internal" href="api.html#waves.scons_extensions.add_program" title="waves.scons_extensions.add_program"><code class="xref py py-meth docutils literal notranslate"><span class="pre">waves.scons_extensions.add_program()</span></code></a> method.</p>
</section>
<section id="directory-structure">
<h2>Directory Structure<a class="headerlink" href="#directory-structure" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="3">
<li><p>Create and change to a new project root directory to house the tutorial files if you have not already done so. For example</p></li>
</ol>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-4">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/waves-tutorials
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/waves-tutorials
$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-5">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">New-Item</span> <span class="nv">$HOME</span><span class="p">\</span><span class="n">waves-tutorials</span> <span class="n">-ItemType</span> <span class="s2">&quot;Directory&quot;</span>
<span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">Set-Location</span> <span class="nv">$HOME</span><span class="p">\</span><span class="n">waves-tutorials</span>
<span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">Get-Location</span>

<span class="n">Path</span>
<span class="p">----</span>
<span class="n">C</span><span class="p">:\</span><span class="n">Users</span><span class="p">\</span><span class="n">roppenheimer</span><span class="p">\</span><span class="n">waves-tutorials</span>
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="4">
<li><p>Create a new <code class="docutils literal notranslate"><span class="pre">tutorial_quinoa</span></code> directory with the <code class="docutils literal notranslate"><span class="pre">waves</span> <span class="pre">fetch</span></code> command below</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials
$<span class="w"> </span>waves<span class="w"> </span>fetch<span class="w"> </span>--destination<span class="w"> </span>tutorial_quinoa<span class="w"> </span>tutorials/tutorial_quinoa
$<span class="w"> </span>ls<span class="w"> </span>tutorial_quinoa
box.py<span class="w"> </span>flow.lua<span class="w"> </span>SConstruct<span class="w"> </span>SConscript
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Make the new <code class="docutils literal notranslate"><span class="pre">tutorial_quinoa</span></code> directory the current working directory</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>tutorial_quinoa
$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials/tutorial_quinoa
$<span class="w"> </span>ls
box.py<span class="w"> </span>flow.lua<span class="w"> </span>SConstruct<span class="w"> </span>SConscript
</pre></div>
</div>
</section>
<section id="sconscript">
<h2>SConscript<a class="headerlink" href="#sconscript" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="6">
<li><p>Review the <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file.</p></li>
</ol>
<p>The structure has changed enough from the core tutorials that a diff view is not as useful. Instead the contents of the
new SConscript files are duplicated below.</p>
<div class="admonition-waves-tutorials-tutorial-quinoa-sconscript admonition">
<p class="admonition-title">waves-tutorials/tutorial_quinoa/SConscript</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#! /usr/bin/env python</span>
<span class="linenos"> 2</span><span class="sd">&quot;&quot;&quot;Configure the WAVES Quinoa tutorial simulation workflow.&quot;&quot;&quot;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="n">Import</span><span class="p">(</span><span class="s2">&quot;env&quot;</span><span class="p">,</span> <span class="s2">&quot;env_quinoa&quot;</span><span class="p">)</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="c1"># TODO: move parameters to a dedicated dictionary file read</span>
<span class="linenos"> 7</span><span class="n">simulation_variables</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 8</span>    <span class="s2">&quot;xlength&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
<span class="linenos"> 9</span>    <span class="s2">&quot;ylength&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
<span class="linenos">10</span>    <span class="s2">&quot;zlength&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
<span class="linenos">11</span><span class="p">}</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">workflow</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">14</span><span class="n">remote_directory_prefix</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;remote_directory&quot;</span><span class="p">]</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="c1"># Geometry/partition/mesh</span>
<span class="linenos">17</span><span class="c1"># TODO: separate the local and remote workflows into dedicated SConscript files that re-use the cubit workflow as in the</span>
<span class="linenos">18</span><span class="c1"># Cubit+Abaqus and Cubit+Sierra tutorials</span>
<span class="linenos">19</span><span class="n">mesh</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">PythonScript</span><span class="p">(</span>
<span class="linenos">20</span>    <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;box.cub&quot;</span><span class="p">,</span> <span class="s2">&quot;box.exo&quot;</span><span class="p">],</span>
<span class="linenos">21</span>    <span class="n">source</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;box.py&quot;</span><span class="p">],</span>
<span class="linenos">22</span>    <span class="n">subcommand_options</span><span class="o">=</span><span class="s2">&quot;--output-file $</span><span class="si">{TARGET.abspath}</span><span class="s2"> --xlength $</span><span class="si">{xlength}</span><span class="s2"> --ylength $</span><span class="si">{ylength}</span><span class="s2"> --zlength $</span><span class="si">{zlength}</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="linenos">23</span>    <span class="o">**</span><span class="n">simulation_variables</span><span class="p">,</span>
<span class="linenos">24</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">workflow</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">mesh</span><span class="p">)</span>
<span class="linenos">26</span><span class="n">env</span><span class="o">.</span><span class="n">Alias</span><span class="p">(</span><span class="s2">&quot;mesh&quot;</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="c1"># SSH remote build on HPC</span>
<span class="linenos">29</span><span class="n">remote_directory</span> <span class="o">=</span> <span class="n">remote_directory_prefix</span> <span class="o">/</span> <span class="s2">&quot;remote&quot;</span>
<span class="linenos">30</span><span class="n">remote_target</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">SSHQuinoaSolver</span><span class="p">(</span>
<span class="linenos">31</span>    <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;remote.stdout&quot;</span><span class="p">],</span>
<span class="linenos">32</span>    <span class="n">source</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;flow.lua&quot;</span><span class="p">,</span> <span class="s2">&quot;box.exo&quot;</span><span class="p">],</span>
<span class="linenos">33</span>    <span class="n">charmrun</span><span class="o">=</span><span class="s2">&quot;charmrun&quot;</span><span class="p">,</span>
<span class="linenos">34</span>    <span class="n">inciter</span><span class="o">=</span><span class="s2">&quot;inciter&quot;</span><span class="p">,</span>
<span class="linenos">35</span>    <span class="n">remote_directory</span><span class="o">=</span><span class="n">remote_directory</span><span class="p">,</span>
<span class="linenos">36</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">env</span><span class="o">.</span><span class="n">Alias</span><span class="p">(</span><span class="s2">&quot;quinoa-remote&quot;</span><span class="p">,</span> <span class="n">remote_target</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="c1"># Local build on local server</span>
<span class="linenos">40</span><span class="n">local_target</span> <span class="o">=</span> <span class="n">env_quinoa</span><span class="o">.</span><span class="n">QuinoaSolver</span><span class="p">(</span>
<span class="linenos">41</span>    <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;local.stdout&quot;</span><span class="p">],</span>
<span class="linenos">42</span>    <span class="n">source</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;flow.lua&quot;</span><span class="p">,</span> <span class="s2">&quot;box.exo&quot;</span><span class="p">],</span>
<span class="linenos">43</span>    <span class="n">charmrun</span><span class="o">=</span><span class="n">env_quinoa</span><span class="p">[</span><span class="s2">&quot;charmrun&quot;</span><span class="p">],</span>
<span class="linenos">44</span>    <span class="n">inciter</span><span class="o">=</span><span class="n">env_quinoa</span><span class="p">[</span><span class="s2">&quot;inciter&quot;</span><span class="p">],</span>
<span class="linenos">45</span><span class="p">)</span>
<span class="linenos">46</span><span class="n">env_quinoa</span><span class="o">.</span><span class="n">Alias</span><span class="p">(</span><span class="s2">&quot;quinoa-local&quot;</span><span class="p">,</span> <span class="n">local_target</span><span class="p">)</span>
<span class="linenos">47</span>
<span class="linenos">48</span><span class="k">if</span> <span class="ow">not</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;unconditional_build&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">env_quinoa</span><span class="p">[</span><span class="s2">&quot;inciter&quot;</span><span class="p">]:</span>
<span class="linenos">49</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Program &#39;inciter&#39; was not found in construction environment. Ignoring &#39;quinoa-local&#39; target(s)&quot;</span><span class="p">)</span>
<span class="linenos">50</span>    <span class="n">Ignore</span><span class="p">([</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;quinoa-local&quot;</span><span class="p">],</span> <span class="n">local_target</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="cubit-journal-files">
<h2>Cubit Journal Files<a class="headerlink" href="#cubit-journal-files" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="7">
<li><p>Review the <code class="docutils literal notranslate"><span class="pre">box.py</span></code> Cubit journal file</p></li>
</ol>
<p>The Cubit journal file includes a similar CLI introduced in <a class="reference internal" href="tutorial_02_partition_mesh.html#tutorial-partition-mesh"><span class="std std-ref">Tutorial 02: Partition and Mesh</span></a> for the Abaqus journal
files. Besides the differences in Abaqus and Cubit commands, the major difference between the Abaqus and Cubit journal
files is the opportunity to use Python 3 with Cubit, where Abaqus journal files must use the Abaqus controlled
installation of Python 2. Unlike the core tutorials, this journal file only parameterizes the geometry, so intermediate
partition and mesh journal files are not as useful and the journal file performs all operations at once.</p>
<div class="admonition-waves-tutorials-tutorial-quinoa-box-py admonition">
<p class="admonition-title">waves-tutorials/tutorial_quinoa/box.py</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="sd">&quot;&quot;&quot;Write brick geometry with specified dimensions.&quot;&quot;&quot;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>
<span class="linenos"> 4</span><span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kn">import</span><span class="w"> </span><span class="nn">cubit</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">output_file</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">xlength</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ylength</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">zlength</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">10</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Write brick geometry with specified dimensions.</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="sd">    :param str output_file: The output file for the Cubit model. Will be stripped of the extension and ``.cub`` and</span>
<span class="linenos">13</span><span class="sd">        ``.exo`` will be used for the model and mesh files, respectively.</span>
<span class="linenos">14</span><span class="sd">    :param xlength: box edge length on global x axis</span>
<span class="linenos">15</span><span class="sd">    :param ylength: box edge length on global y axis</span>
<span class="linenos">16</span><span class="sd">    :param zlength: box edge length on global z axis</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="sd">    :returns: writes ``output_file``.cub and ``output_file``.exo</span>
<span class="linenos">19</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">20</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">init</span><span class="p">([</span><span class="s2">&quot;cubit&quot;</span><span class="p">,</span> <span class="s2">&quot;-noecho&quot;</span><span class="p">,</span> <span class="s2">&quot;-nojournal&quot;</span><span class="p">,</span> <span class="s2">&quot;-nographics&quot;</span><span class="p">,</span> <span class="s2">&quot;-batch&quot;</span><span class="p">])</span>
<span class="linenos">21</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;new&quot;</span><span class="p">)</span>
<span class="linenos">22</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;reset&quot;</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="n">cubit_file</span> <span class="o">=</span> <span class="n">output_file</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s2">&quot;.cub&quot;</span><span class="p">)</span>
<span class="linenos">25</span>    <span class="n">exodus_file</span> <span class="o">=</span> <span class="n">cubit_file</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s2">&quot;.exo&quot;</span><span class="p">)</span>
<span class="linenos">26</span>
<span class="linenos">27</span>    <span class="c1"># Geometry</span>
<span class="linenos">28</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;brick x </span><span class="si">{</span><span class="n">xlength</span><span class="si">}</span><span class="s2"> y </span><span class="si">{</span><span class="n">ylength</span><span class="si">}</span><span class="s2"> z </span><span class="si">{</span><span class="n">zlength</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">29</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;move volume 1 x </span><span class="si">{</span><span class="n">xlength</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5</span><span class="si">}</span><span class="s2"> y </span><span class="si">{</span><span class="n">ylength</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5</span><span class="si">}</span><span class="s2"> z </span><span class="si">{</span><span class="n">zlength</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">30</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;webcut volume 1 with plane xplane offset </span><span class="si">{</span><span class="n">xlength</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5</span><span class="si">}</span><span class="s2"> noimprint nomerge&quot;</span><span class="p">)</span>
<span class="linenos">31</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;merge volume 1 2&quot;</span><span class="p">)</span>
<span class="linenos">32</span>
<span class="linenos">33</span>    <span class="c1"># Create sets (partition)</span>
<span class="linenos">34</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;sideset 1 add surface 8 15&quot;</span><span class="p">)</span>
<span class="linenos">35</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;sideset 2 add surface 9 16&quot;</span><span class="p">)</span>
<span class="linenos">36</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;sideset 3 add surface 10 14&quot;</span><span class="p">)</span>
<span class="linenos">37</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;sideset 4 add surface 4&quot;</span><span class="p">)</span>
<span class="linenos">38</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;sideset 5 add surface 11 13&quot;</span><span class="p">)</span>
<span class="linenos">39</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;sideset 6 add surface 6&quot;</span><span class="p">)</span>
<span class="linenos">40</span>
<span class="linenos">41</span>    <span class="c1"># Mesh</span>
<span class="linenos">42</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;Trimesher surface gradation 1.05&quot;</span><span class="p">)</span>
<span class="linenos">43</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;Trimesher volume gradation 1.05&quot;</span><span class="p">)</span>
<span class="linenos">44</span>
<span class="linenos">45</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;surface 6 7 8 9 10 11 13 14 15 16 Scheme TriMesh geometry approximation angle 10&quot;</span><span class="p">)</span>
<span class="linenos">46</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;surface 13 14 15 16  size 0.065&quot;</span><span class="p">)</span>
<span class="linenos">47</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;surface 4 size 0.09&quot;</span><span class="p">)</span>
<span class="linenos">48</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;surface 7 size .09&quot;</span><span class="p">)</span>
<span class="linenos">49</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;surface 8 9 10 11 size 0.45&quot;</span><span class="p">)</span>
<span class="linenos">50</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;surface 6 size 0.09&quot;</span><span class="p">)</span>
<span class="linenos">51</span>
<span class="linenos">52</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;mesh surface 6 7 8 9 10 11 13 14 15 16&quot;</span><span class="p">)</span>
<span class="linenos">53</span>
<span class="linenos">54</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;volume 1 2 Scheme Tetmesh proximity layers off geometry approximation angle 10&quot;</span><span class="p">)</span>
<span class="linenos">55</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;volume 1 2 Tetmesh growth_factor 1.001&quot;</span><span class="p">)</span>
<span class="linenos">56</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;volume 1 size 0.065&quot;</span><span class="p">)</span>
<span class="linenos">57</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;volume 2 size 0.065&quot;</span><span class="p">)</span>
<span class="linenos">58</span>
<span class="linenos">59</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;mesh volume 1 2&quot;</span><span class="p">)</span>
<span class="linenos">60</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;block 1 add volume 1 2&quot;</span><span class="p">)</span>
<span class="linenos">61</span>
<span class="linenos">62</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;set exodus netcdf4 off&quot;</span><span class="p">)</span>
<span class="linenos">63</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;set large exodus file on&quot;</span><span class="p">)</span>
<span class="linenos">64</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;export Genesis &#39;</span><span class="si">{</span><span class="n">exodus_file</span><span class="si">}</span><span class="s2">&#39; dimension 3 block 1  overwrite&quot;</span><span class="p">)</span>
<span class="linenos">65</span>    <span class="n">cubit</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;save as &#39;</span><span class="si">{</span><span class="n">cubit_file</span><span class="si">}</span><span class="s2">&#39; overwrite&quot;</span><span class="p">)</span>
<span class="linenos">66</span>
<span class="linenos">67</span>
<span class="linenos">68</span><span class="k">def</span><span class="w"> </span><span class="nf">get_parser</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">:</span>
<span class="linenos">69</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the command line parser.&quot;&quot;&quot;</span>
<span class="linenos">70</span>    <span class="n">script_name</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="linenos">71</span>    <span class="n">prog</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;python </span><span class="si">{</span><span class="n">script_name</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
<span class="linenos">72</span>    <span class="n">cli_description</span> <span class="o">=</span> <span class="s2">&quot;Write brick geometry ``output_file``.cub and ``output_file``.exo with specified dimensions&quot;</span>
<span class="linenos">73</span>    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">cli_description</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="n">prog</span><span class="p">)</span>
<span class="linenos">74</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">75</span>        <span class="s2">&quot;--output-file&quot;</span><span class="p">,</span>
<span class="linenos">76</span>        <span class="nb">type</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
<span class="linenos">77</span>        <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">78</span>        <span class="n">help</span><span class="o">=</span><span class="p">(</span>
<span class="linenos">79</span>            <span class="s2">&quot;The output file for the Cubit model. Will be stripped of the extension and ``.cub`` and ``.exo`` will &quot;</span>
<span class="linenos">80</span>            <span class="s2">&quot;be used for the model and mesh files, respectively.&quot;</span>
<span class="linenos">81</span>        <span class="p">),</span>
<span class="linenos">82</span>    <span class="p">)</span>
<span class="linenos">83</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--xlength&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;box edge length on global x axis&quot;</span><span class="p">)</span>
<span class="linenos">84</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--ylength&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;box edge length on global y axis&quot;</span><span class="p">)</span>
<span class="linenos">85</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--zlength&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;box edge length on global z axis&quot;</span><span class="p">)</span>
<span class="linenos">86</span>    <span class="k">return</span> <span class="n">parser</span>
<span class="linenos">87</span>
<span class="linenos">88</span>
<span class="linenos">89</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">90</span>    <span class="n">parser</span> <span class="o">=</span> <span class="n">get_parser</span><span class="p">()</span>
<span class="linenos">91</span>    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="linenos">92</span>    <span class="n">main</span><span class="p">(</span>
<span class="linenos">93</span>        <span class="n">output_file</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">output_file</span><span class="p">,</span>
<span class="linenos">94</span>        <span class="n">xlength</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">xlength</span><span class="p">,</span>
<span class="linenos">95</span>        <span class="n">ylength</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">ylength</span><span class="p">,</span>
<span class="linenos">96</span>        <span class="n">zlength</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">zlength</span><span class="p">,</span>
<span class="linenos">97</span>    <span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="quinoa-input-file-s">
<h2>Quinoa Input File(s)<a class="headerlink" href="#quinoa-input-file-s" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="8">
<li><p>Create or review the Quinoa input file from the contents below</p></li>
</ol>
<div class="admonition-waves-tutorials-tutorial-quinoa-flow-lua admonition">
<p class="admonition-title">waves-tutorials/tutorial_quinoa/flow.lua</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">inciter</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>  <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Flow in a simple box&quot;</span> <span class="p">,</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>  <span class="n">term</span> <span class="o">=</span> <span class="mf">0.11</span><span class="p">,</span>  <span class="o">--</span> <span class="n">Max</span> <span class="n">physical</span> <span class="n">time</span><span class="p">,</span> <span class="n">s</span>
<span class="linenos"> 6</span>  <span class="n">ttyi</span><span class="o">=</span> <span class="mi">10</span><span class="p">,</span>  <span class="o">--</span> <span class="n">TTY</span> <span class="n">output</span> <span class="n">interval</span>
<span class="linenos"> 7</span>  <span class="n">cfl</span> <span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
<span class="linenos"> 8</span>  <span class="n">scheme</span> <span class="o">=</span> <span class="s2">&quot;alecg&quot;</span><span class="p">,</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>  <span class="n">partitioning</span> <span class="o">=</span> <span class="s2">&quot;rcb&quot;</span><span class="p">,</span>
<span class="linenos">11</span>
<span class="linenos">12</span>  <span class="n">compflow</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">13</span>    <span class="n">physics</span> <span class="o">=</span><span class="s2">&quot;euler&quot;</span><span class="p">,</span> 
<span class="linenos">14</span>  <span class="p">},</span>
<span class="linenos">15</span>    <span class="o">--</span> <span class="n">Units</span><span class="p">:</span> <span class="n">m</span><span class="p">,</span><span class="n">kg</span><span class="p">,</span><span class="n">s</span><span class="p">,</span>
<span class="linenos">16</span>  <span class="n">ic</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">17</span>    <span class="n">density</span> <span class="o">=</span> <span class="mf">0.912</span><span class="p">,</span>  <span class="o">--</span> <span class="n">kg</span><span class="o">/</span><span class="n">m</span><span class="o">^</span><span class="mi">3</span>
<span class="linenos">18</span>    <span class="n">velocity</span><span class="o">=</span><span class="p">{</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">},</span>  <span class="o">--</span> <span class="n">m</span><span class="o">/</span><span class="n">s</span>
<span class="linenos">19</span>    <span class="n">pressure</span> <span class="o">=</span> <span class="mf">77816.5</span><span class="p">,</span>  <span class="o">--</span> <span class="n">Initiate</span> <span class="n">linear</span>
<span class="linenos">20</span>  <span class="p">},</span>
<span class="linenos">21</span>
<span class="linenos">22</span>  <span class="n">material</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">23</span>    <span class="p">{</span>
<span class="linenos">24</span>      <span class="n">gamma</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">1.4</span> <span class="p">},</span>
<span class="linenos">25</span>      <span class="n">cv</span> <span class="o">=</span><span class="p">{</span> <span class="mf">717.5</span> <span class="p">},</span>
<span class="linenos">26</span>    <span class="p">}</span>
<span class="linenos">27</span>  <span class="p">},</span>
<span class="linenos">28</span>
<span class="linenos">29</span>  <span class="n">bc</span> <span class="o">=</span> <span class="p">{</span> 
<span class="linenos">30</span>    <span class="p">{</span>
<span class="linenos">31</span>      <span class="n">farfield</span> <span class="o">=</span> <span class="p">{</span><span class="mi">6</span><span class="p">},</span>  <span class="o">--</span> <span class="n">Outlet</span>
<span class="linenos">32</span>      <span class="n">pressure</span> <span class="o">=</span> <span class="mf">77816.5</span><span class="p">,</span>
<span class="linenos">33</span>      <span class="n">density</span> <span class="o">=</span> <span class="mf">0.912</span><span class="p">,</span>
<span class="linenos">34</span>      <span class="n">velocity</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">},</span>
<span class="linenos">35</span>      <span class="n">timedep</span> <span class="o">=</span> <span class="p">{</span> 
<span class="linenos">36</span>	<span class="p">{</span>
<span class="linenos">37</span>          <span class="n">sideset</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">},</span> <span class="o">--</span><span class="n">Inlet</span>
<span class="linenos">38</span>	  <span class="n">fn</span> <span class="o">=</span> <span class="p">{</span>  <span class="o">--</span> <span class="n">t</span>  <span class="n">p</span>  <span class="n">rho</span>  <span class="n">xvel</span> <span class="n">yvel</span> <span class="n">zvel</span>
<span class="linenos">39</span>            <span class="mf">0.0</span><span class="p">,</span> <span class="mf">77816.5</span><span class="p">,</span> <span class="mf">0.912</span><span class="p">,</span> <span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.000</span><span class="p">,</span>
<span class="linenos">40</span>            <span class="mf">0.1</span><span class="p">,</span> <span class="mf">77816.5</span><span class="p">,</span> <span class="mf">0.912</span><span class="p">,</span> <span class="mf">5.000</span><span class="p">,</span> <span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.000</span><span class="p">,</span>
<span class="linenos">41</span>           <span class="mf">10.0</span><span class="p">,</span> <span class="mf">77816.5</span><span class="p">,</span> <span class="mf">0.912</span><span class="p">,</span> <span class="mf">5.000</span><span class="p">,</span> <span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.000</span><span class="p">,</span>
<span class="linenos">42</span>	  <span class="p">}</span>
<span class="linenos">43</span>	<span class="p">}</span>
<span class="linenos">44</span>      <span class="p">},</span>
<span class="linenos">45</span>      <span class="n">symmetry</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">},</span>
<span class="linenos">46</span>    <span class="p">}</span>
<span class="linenos">47</span>  <span class="p">},</span>
<span class="linenos">48</span>
<span class="linenos">49</span>
<span class="linenos">50</span>  <span class="n">history_output</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">51</span>    <span class="n">interval</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="linenos">52</span>    <span class="n">point</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">53</span>      <span class="p">{</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;p1&quot;</span><span class="p">,</span> <span class="n">coord</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span> <span class="p">}},</span>
<span class="linenos">54</span>    <span class="p">}</span>
<span class="linenos">55</span>  <span class="p">},</span>
<span class="linenos">56</span>
<span class="linenos">57</span>
<span class="linenos">58</span>  <span class="n">field_output</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">59</span>    <span class="n">time_interval</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
<span class="linenos">60</span>    <span class="n">nodevar</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">61</span>      <span class="s2">&quot;density&quot;</span><span class="p">,</span>
<span class="linenos">62</span>      <span class="s2">&quot;x-velocity&quot;</span><span class="p">,</span>
<span class="linenos">63</span>      <span class="s2">&quot;y-velocity&quot;</span><span class="p">,</span>
<span class="linenos">64</span>      <span class="s2">&quot;z-velocity&quot;</span><span class="p">,</span>
<span class="linenos">65</span>      <span class="s2">&quot;specific_total_energy&quot;</span><span class="p">,</span>
<span class="linenos">66</span>      <span class="s2">&quot;pressure&quot;</span>
<span class="linenos">67</span>    <span class="p">}</span>
<span class="linenos">68</span>  <span class="p">},</span>
<span class="linenos">69</span> 
<span class="linenos">70</span>
<span class="linenos">71</span>  <span class="n">diagnostics</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">72</span>    <span class="n">interval</span><span class="o">=</span> <span class="mi">250</span><span class="p">,</span>
<span class="linenos">73</span>    <span class="nb">format</span>  <span class="o">=</span> <span class="s2">&quot;scientific&quot;</span><span class="p">,</span>
<span class="linenos">74</span>    <span class="n">error</span>   <span class="o">=</span>  <span class="s2">&quot;l2&quot;</span>
<span class="linenos">75</span>  <span class="p">}</span>
<span class="linenos">76</span>
<span class="linenos">77</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="sconstruct">
<h2>SConstruct<a class="headerlink" href="#sconstruct" title="Link to this heading">#</a></h2>
<p>Note that Quinoa requires a separate construction environment from the launching Conda environment. This is because the
Quinoa compiler/linker and openmpi library conflict with the launching Conda environment. You may need to update the
Quinoa activation shell command according to the instructions on your local system.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">diff</span></code> against the <code class="docutils literal notranslate"><span class="pre">SConstruct</span></code> file from <a class="reference internal" href="tutorial_04_simulation.html#tutorial-simulation"><span class="std std-ref">Tutorial 04: Simulation</span></a> is included below to help identify the
changes made in this tutorial.</p>
<div class="admonition-waves-tutorials-tutorial-quinoa-sconstruct admonition">
<p class="admonition-title">waves-tutorials/tutorial_quinoa/SConstruct</p>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/waves/waves/build/docs/tutorials_tutorial_04_simulation_SConstruct</span>
<span class="gi">+++ /home/runner/work/waves/waves/build/docs/tutorial_quinoa_SConstruct</span>
<span class="gu">@@ -1,6 +1,7 @@</span>
<span class="w"> </span>#! /usr/bin/env python
<span class="gd">-&quot;&quot;&quot;Configure the WAVES simulation tutorial.&quot;&quot;&quot;</span>
<span class="gi">+&quot;&quot;&quot;Configure the WAVES Quinoa tutorial.&quot;&quot;&quot;</span>
<span class="w"> </span>
<span class="gi">+import getpass</span>
<span class="w"> </span>import os
<span class="w"> </span>import pathlib
<span class="w"> </span>
<span class="gu">@@ -34,20 +35,19 @@</span>
<span class="w"> </span>    help=&quot;Print task *.stdout target file(s) on build failures. (default: &#39;%default&#39;)&quot;,
<span class="w"> </span>)
<span class="w"> </span># Python optparse appends to the default list instead of overriding. Must implement default/override ourselves.
<span class="gd">-default_abaqus_commands = [</span>
<span class="gd">-    &quot;/apps/abaqus/Commands/abq2024&quot;,</span>
<span class="gd">-    &quot;/usr/projects/ea/abaqus/Commands/abq2024&quot;,</span>
<span class="gd">-    &quot;abq2024&quot;,</span>
<span class="gd">-    &quot;abaqus&quot;,</span>
<span class="gi">+default_cubit_commands = [</span>
<span class="gi">+    &quot;/apps/Cubit-16.12/cubit&quot;,</span>
<span class="gi">+    &quot;/usr/projects/ea/Cubit/Cubit-16.12/cubit&quot;,</span>
<span class="gi">+    &quot;cubit&quot;,</span>
<span class="w"> </span>]
<span class="w"> </span>AddOption(
<span class="gd">-    &quot;--abaqus-command&quot;,</span>
<span class="gd">-    dest=&quot;abaqus_command&quot;,</span>
<span class="gi">+    &quot;--cubit-command&quot;,</span>
<span class="gi">+    dest=&quot;cubit_command&quot;,</span>
<span class="w"> </span>    nargs=1,
<span class="w"> </span>    type=&quot;string&quot;,
<span class="w"> </span>    action=&quot;append&quot;,
<span class="w"> </span>    metavar=&quot;COMMAND&quot;,
<span class="gd">-    help=f&quot;Override for the Abaqus command. Repeat to specify more than one (default: {default_abaqus_commands})&quot;,</span>
<span class="gi">+    help=f&quot;Override for the Cubit command. Repeat to specify more than one (default: {default_cubit_commands})&quot;,</span>
<span class="w"> </span>)
<span class="w"> </span>
<span class="w"> </span># Comments used in tutorial code snippets: marker-2
<span class="gu">@@ -58,18 +58,31 @@</span>
<span class="w"> </span>    variant_dir_base=pathlib.Path(GetOption(&quot;variant_dir_base&quot;)),
<span class="w"> </span>    unconditional_build=GetOption(&quot;unconditional_build&quot;),
<span class="w"> </span>    print_build_failures=GetOption(&quot;print_build_failures&quot;),
<span class="gd">-    abaqus_commands=GetOption(&quot;abaqus_command&quot;),</span>
<span class="gi">+    cubit_commands=GetOption(&quot;cubit_command&quot;),</span>
<span class="w"> </span>)
<span class="w"> </span>
<span class="w"> </span># Conditionally print failed task *.stdout files
<span class="w"> </span>env.PrintBuildFailures(print_stdout=env[&quot;print_build_failures&quot;])
<span class="w"> </span>
<span class="gi">+# Always copy (no sym-links) when duplicating</span>
<span class="gi">+env.SetOption(&quot;duplicate&quot;, &quot;copy&quot;)</span>
<span class="gi">+</span>
<span class="w"> </span># Comments used in tutorial code snippets: marker-3
<span class="w"> </span>
<span class="w"> </span># Find required programs for conditional target ignoring and absolute path for use in target actions
<span class="gd">-env[&quot;ABAQUS_PROGRAM&quot;] = env.AddProgram(</span>
<span class="gd">-    env[&quot;abaqus_commands&quot;] if env[&quot;abaqus_commands&quot;] is not None else default_abaqus_commands</span>
<span class="gi">+env[&quot;CUBIT_PROGRAM&quot;] = env.AddCubit(</span>
<span class="gi">+    env[&quot;cubit_commands&quot;] if env[&quot;cubit_commands&quot;] is not None else default_cubit_commands</span>
<span class="w"> </span>)
<span class="gi">+env[&quot;SBATCH_PROGRAM&quot;] = env.AddProgram([&quot;sbatch&quot;])</span>
<span class="gi">+env[&quot;user&quot;] = getpass.getuser()</span>
<span class="gi">+</span>
<span class="gi">+# Try a preference ordered list of project server-specific environment modulefiles</span>
<span class="gi">+quinoa_hpc_modulefile = pathlib.Path(&quot;/usr/projects/ea/Quinoa/modules/modulefiles/quinoa&quot;)</span>
<span class="gi">+quinoa_modulefile_options = [</span>
<span class="gi">+    pathlib.Path(&quot;/projects/aea_compute/modulefiles/aea-quinoa&quot;),</span>
<span class="gi">+    quinoa_hpc_modulefile,</span>
<span class="gi">+]</span>
<span class="gi">+quinoa_modulefile = next((path for path in quinoa_modulefile_options if path.exists()), None)</span>
<span class="w"> </span>
<span class="w"> </span># Comments used in tutorial code snippets: marker-4
<span class="w"> </span>
<span class="gu">@@ -81,30 +94,53 @@</span>
<span class="w"> </span>    &quot;project_name&quot;: project_name,
<span class="w"> </span>    &quot;project_dir&quot;: project_dir,
<span class="w"> </span>    &quot;version&quot;: version,
<span class="gi">+    &quot;remote_directory&quot;: pathlib.Path(f&quot;/users/{env[&#39;user&#39;]}/WAVES-TUTORIAL/tutorial_quinoa&quot;),</span>
<span class="w"> </span>}
<span class="w"> </span>for key, value in project_variables.items():
<span class="w"> </span>    env[key] = value
<span class="w"> </span>
<span class="gd">-# Make the project package importable for Python and Abaqus Python environments</span>
<span class="gd">-env.PrependENVPath(&quot;PYTHONPATH&quot;, project_dir)</span>
<span class="gd">-</span>
<span class="w"> </span># Comments used in tutorial code snippets: marker-5
<span class="w"> </span>
<span class="w"> </span># Add builders and pseudo-builders
<span class="gd">-env.Append(BUILDERS={})</span>
<span class="gi">+env.Append(</span>
<span class="gi">+    BUILDERS={</span>
<span class="gi">+        &quot;SSHQuinoaSolver&quot;: waves.scons_extensions.ssh_builder_actions(</span>
<span class="gi">+            waves.scons_extensions.sbatch_quinoa_builder_factory(</span>
<span class="gi">+                environment=f&quot;module use {quinoa_hpc_modulefile.parent} &amp;&amp; module load {quinoa_hpc_modulefile.name} &amp;&amp;&quot;</span>
<span class="gi">+            ),</span>
<span class="gi">+            remote_server=&quot;ro-rfe.lanl.gov&quot;,</span>
<span class="gi">+        )</span>
<span class="gi">+    }</span>
<span class="gi">+)</span>
<span class="gi">+</span>
<span class="gi">+# Source the Quinoa environment and store it separately from the Conda/Cubit environment to avoid PATH interference</span>
<span class="gi">+if quinoa_modulefile:</span>
<span class="gi">+    env_quinoa = waves.scons_extensions.shell_environment(</span>
<span class="gi">+        &quot;module unload aea-nightly aea-weekly aea-quarterly aea-release &amp;&amp; &quot;</span>
<span class="gi">+        f&quot;module use {quinoa_modulefile.parent} &amp;&amp; &quot;</span>
<span class="gi">+        f&quot;module load {quinoa_modulefile.name}&quot;</span>
<span class="gi">+    )</span>
<span class="gi">+else:</span>
<span class="gi">+    env_quinoa = Environment()</span>
<span class="gi">+env_quinoa.AddMethod(waves.scons_extensions.add_program, &quot;AddProgram&quot;)</span>
<span class="gi">+env_quinoa[&quot;inciter&quot;] = env_quinoa.AddProgram([&quot;inciter&quot;])</span>
<span class="gi">+env_quinoa[&quot;charmrun&quot;] = env_quinoa.AddProgram([&quot;charmrun&quot;])</span>
<span class="gi">+</span>
<span class="gi">+# Add WAVES builders. If sbatch is found, use it.</span>
<span class="gi">+# Should allow the same scons alias to run directly on sstbigbird, but submit as an sbatch job on HPC</span>
<span class="gi">+quinoa_builder_factory = waves.scons_extensions.quinoa_builder_factory</span>
<span class="gi">+if env[&quot;SBATCH_PROGRAM&quot;] is not None:</span>
<span class="gi">+    quinoa_builder_factory = waves.scons_extensions.sbatch_quinoa_builder_factory</span>
<span class="gi">+env_quinoa.Append(</span>
<span class="gi">+    BUILDERS={&quot;QuinoaSolver&quot;: quinoa_builder_factory(program=env_quinoa[&quot;charmrun&quot;], subcommand=env_quinoa[&quot;inciter&quot;])}</span>
<span class="gi">+)</span>
<span class="w"> </span>
<span class="w"> </span># Comments used in tutorial code snippets: marker-6
<span class="w"> </span>
<span class="w"> </span># Add simulation targets
<span class="gd">-workflow_configurations = [</span>
<span class="gd">-    &quot;tutorial_01_geometry.scons&quot;,</span>
<span class="gd">-    &quot;tutorial_02_partition_mesh.scons&quot;,</span>
<span class="gd">-    &quot;tutorial_03_solverprep.scons&quot;,</span>
<span class="gd">-    &quot;tutorial_04_simulation.scons&quot;,</span>
<span class="gd">-]</span>
<span class="gd">-for workflow in workflow_configurations:</span>
<span class="gd">-    build_dir = env[&quot;variant_dir_base&quot;] / pathlib.Path(workflow).stem</span>
<span class="gd">-    SConscript(workflow, variant_dir=build_dir, exports={&quot;env&quot;: env}, duplicate=False)</span>
<span class="gi">+SConscript(</span>
<span class="gi">+    &quot;SConscript&quot;, variant_dir=env[&quot;variant_dir_base&quot;], exports={&quot;env&quot;: env, &quot;env_quinoa&quot;: env_quinoa}, duplicate=True</span>
<span class="gi">+)</span>
<span class="w"> </span>
<span class="w"> </span># Comments used in tutorial code snippets: marker-7
<span class="w"> </span>
</pre></div>
</div>
</div>
<p>Note that the Cubit Python file doesn’t perform any imports from the current modsim project package, so the
<code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> modification is no longer required. This tutorial is created in a new, stand-alone subdirectory, so the
previous tutorial workflow configurations are no longer available. Only the <code class="docutils literal notranslate"><span class="pre">quinoa-local</span></code> and <code class="docutils literal notranslate"><span class="pre">quinoa-remote</span></code>
workflow configurations will be found by SCons at execution time.</p>
</section>
<section id="build-targets">
<h2>Build Targets<a class="headerlink" href="#build-targets" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="9">
<li><p>Build the new targets</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials/tutorial_quinoa
scons:<span class="w"> </span>Reading<span class="w"> </span>SConscript<span class="w"> </span>files<span class="w"> </span>...
Checking<span class="w"> </span>whether<span class="w"> </span><span class="s1">&#39;/apps/Cubit-16.12/cubit&#39;</span><span class="w"> </span>program<span class="w"> </span>exists.../apps/Cubit-16.12/cubit
Checking<span class="w"> </span>whether<span class="w"> </span><span class="s1">&#39;cubit&#39;</span><span class="w"> </span>program<span class="w"> </span>exists...no
Checking<span class="w"> </span>whether<span class="w"> </span><span class="s1">&#39;sbatch&#39;</span><span class="w"> </span>program<span class="w"> </span>exists...no
Sourcing<span class="w"> </span>the<span class="w"> </span>shell<span class="w"> </span>environment<span class="w"> </span>with<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="s1">&#39;module use /projects/aea_compute/modulefiles &amp;&amp; module load aea-quinoa&#39;</span><span class="w"> </span>...
Checking<span class="w"> </span>whether<span class="w"> </span><span class="s1">&#39;inciter&#39;</span><span class="w"> </span>program<span class="w"> </span>exists.../projects/aea_compute/aea-quinoa/bin/inciter
Checking<span class="w"> </span>whether<span class="w"> </span><span class="s1">&#39;/users/cclong/QUINOA/quinoa/buildOS/Main/inciter&#39;</span><span class="w"> </span>program<span class="w"> </span>exists...no
Checking<span class="w"> </span>whether<span class="w"> </span><span class="s1">&#39;charmrun&#39;</span><span class="w"> </span>program<span class="w"> </span>exists.../projects/aea_compute/aea-quinoa/bin/charmrun
Checking<span class="w"> </span>whether<span class="w"> </span><span class="s1">&#39;/users/cclong/QUINOA/quinoa/buildOS/Main/charmrun&#39;</span><span class="w"> </span>program<span class="w"> </span>exists...no
scons:<span class="w"> </span><span class="k">done</span><span class="w"> </span>reading<span class="w"> </span>SConscript<span class="w"> </span>files.
scons:<span class="w"> </span>Building<span class="w"> </span>targets<span class="w"> </span>...
<span class="nb">cd</span><span class="w"> </span>/home/roppenheimer/waves-tutorials/tutorial_quinoa/build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>/home/roppenheimer/waves-tutorials/tutorial_quinoa/build/box.py<span class="w"> </span>--output-file<span class="w"> </span>/home/roppenheimer/waves-tutorials/tutorial_quinoa/build/box.cub<span class="w"> </span>--xlength<span class="w"> </span><span class="m">1</span>.0<span class="w"> </span>--ylength<span class="w"> </span><span class="m">0</span>.5<span class="w"> </span>--zlength<span class="w"> </span><span class="m">0</span>.5<span class="w"> </span>&gt;<span class="w"> </span>/home/roppenheimer/waves-tutorials/tutorial_quinoa/build/box.cub.stdout<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="nb">cd</span><span class="w"> </span>/home/roppenheimer/waves-tutorials/tutorial_quinoa/build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>/projects/aea_compute/aea-quinoa/bin/charmrun<span class="w"> </span>+p1<span class="w"> </span>/projects/aea_compute/aea-quinoa/bin/inciter<span class="w"> </span>--control<span class="w"> </span>/home/roppenheimer/waves-tutorials/tutorial_quinoa/build/flow.lua<span class="w"> </span>--input<span class="w"> </span>/home/roppenheimer/waves-tutorials/tutorial_quinoa/build/box.exo<span class="w"> </span>&gt;<span class="w"> </span>/home/roppenheimer/waves-tutorials/tutorial_quinoa/build/local.stdout<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
scons:<span class="w"> </span><span class="k">done</span><span class="w"> </span>building<span class="w"> </span>targets.
</pre></div>
</div>
</section>
<section id="output-files">
<h2>Output Files<a class="headerlink" href="#output-files" title="Link to this heading">#</a></h2>
<p>Explore the contents of the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory using the <code class="docutils literal notranslate"><span class="pre">tree</span></code> command against the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory, as shown
below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials/tutorial_quinoa
$<span class="w"> </span>tree<span class="w"> </span>build/
build
<span class="p">|</span>--<span class="w"> </span>SConscript
<span class="p">|</span>--<span class="w"> </span>box.cub
<span class="p">|</span>--<span class="w"> </span>box.cub.stdout
<span class="p">|</span>--<span class="w"> </span>box.exo
<span class="p">|</span>--<span class="w"> </span>box.py
<span class="p">|</span>--<span class="w"> </span>diag
<span class="p">|</span>--<span class="w"> </span>flow.lua
<span class="p">|</span>--<span class="w"> </span>flow.q
<span class="p">|</span>--<span class="w"> </span>inciter_input.log
<span class="p">|</span>--<span class="w"> </span>inciter_screen.log
<span class="p">|</span>--<span class="w"> </span>local.stdout
<span class="p">|</span>--<span class="w"> </span>mesh_edge_pdf.0.txt
<span class="p">|</span>--<span class="w"> </span>mesh_ntet_pdf.0.txt
<span class="p">|</span>--<span class="w"> </span>mesh_vol_pdf.0.txt
<span class="p">|</span>--<span class="w"> </span>out.e-s.0.1.0
<span class="sb">`</span>--<span class="w"> </span>restart
<span class="w">    </span><span class="p">|</span>--<span class="w"> </span>MainChares.dat
<span class="w">    </span><span class="p">|</span>--<span class="w"> </span>RO.dat
<span class="w">    </span><span class="sb">`</span>--<span class="w"> </span>sub0
<span class="w">        </span><span class="p">|</span>--<span class="w"> </span>Chares_0.dat
<span class="w">        </span><span class="p">|</span>--<span class="w"> </span>Groups_0.dat
<span class="w">        </span><span class="p">|</span>--<span class="w"> </span>NodeGroups_0.dat
<span class="w">        </span><span class="sb">`</span>--<span class="w"> </span>arr_0.dat

<span class="m">2</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">21</span><span class="w"> </span>files
</pre></div>
</div>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="tutorial_setuptools_scm.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tutorial: setuptools_scm</p>
      </div>
    </a>
    <a class="right-next"
       href="templates.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">ModSim Templates</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment">Environment</a><ul class="simple visible nav section-nav flex-column">
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-structure">Directory Structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconscript">SConscript</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cubit-journal-files">Cubit Journal Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quinoa-input-file-s">Quinoa Input File(s)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconstruct">SConstruct</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-targets">Build Targets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-files">Output Files</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Kyle Brindley, Prabhu S. Khalsa, Thomas Roberts, Sergio Cordova, Matthew Fister, Chris Johnson, and Scott Ouellette
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2025 Triad National Security, LLC. All Rights Reserved.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Oct 10, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>