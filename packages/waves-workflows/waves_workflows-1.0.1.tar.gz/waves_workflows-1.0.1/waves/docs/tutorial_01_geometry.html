
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutorial 01: Geometry &#8212; WAVES 1.0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=cb027bf8" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=cb027bf8" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=423d4ce3"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=e639491b"></script>
    <script src="_static/custom.js?v=070b234d"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorial_01_geometry';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial 02: Partition and Mesh" href="tutorial_02_partition_mesh.html" />
    <link rel="prev" title="Tutorial 00: SConstruct" href="tutorial_00_scons.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Oct 10, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/waves_logo_brandmark_smaller.png" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="_static/waves_logo_brandmark_smaller.png" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">1.0.1</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Computational Practices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="computational_practices_introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_version_control.html">Version Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_build_system.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_compute_environment.html">Compute Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_regression_testing.html">Regression Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="computational_practices_archival.html">Data Archival</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="abstract.html">Why WAVES?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorial_quickstart.html">Quickstart</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="waves_quickstart.html">Quickstart: Abaqus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_gmsh_calculix.html">Quickstart: Gmsh+CalculiX</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_introduction.html">Tutorial Introduction</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="tutorial_core.html">Core Lessons</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial_00_scons.html">Tutorial 00: SConstruct</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Tutorial 01: Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_02_partition_mesh.html">Tutorial 02: Partition and Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_03_solverprep.html">Tutorial 03: SolverPrep</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_04_simulation.html">Tutorial 04: Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_05_parameter_substitution.html">Tutorial 05: Parameter Substitution</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_06_include_files.html">Tutorial 06: Include Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_cartesian_product.html">Tutorial 07: Cartesian Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_08_data_extraction.html">Tutorial 08: Data Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_09_post_processing.html">Tutorial 09: Post-Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_10_unit_testing.html">Tutorial 10: Unit Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_11_regression_testing.html">Tutorial 11: Regression Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_12_archival.html">Tutorial 12: Data Archival</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorial_supplemental.html">Supplemental Lessons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="scons_quickstart.html">SCons Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="scons_multiactiontask.html">SCons Multi-Action Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_argparse_types.html">Tutorial: Input Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cubit_abaqus.html">Tutorial: Cubit+Abaqus</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cubit_sierra.html">Tutorial: Cubit+Sierra</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cubit_fierro.html">Tutorial: Cubit+Fierro</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_escape_sequences.html">Tutorial: Escape Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_latin_hypercube.html">Tutorial 07: Latin Hypercube</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_sobol_sequence.html">Tutorial 07: Sobol Sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_07_one_at_a_time.html">Tutorial 07: One-at-a-Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_mesh_convergence.html">Tutorial: Mesh Convergence</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_part_image.html">Tutorial: Part Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_sensitivity_study.html">Tutorial: Sensitivity Study</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_abaqus_cae.html">Tutorial: Abaqus CAE</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorial_wip.html">Work-in-progress Lessons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial_writing_builders.html">Tutorial: Writing Builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_remote_execution.html">Tutorial: Simulation via SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_sbatch.html">Tutorial: Simulation via SLURM</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_extend_study.html">Automatically Extending a Parameter Study</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_task_reuse.html">Tutorial: Task Definition Reuse</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_setuptools_scm.html">Tutorial: setuptools_scm</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_quinoa.html">Tutorial: Quinoa</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">ModSim Templates</a></li>

<li class="toctree-l1"><a class="reference internal" href="api.html">External API</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-Line Utilities</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Help and Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="license.html">LICENSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal_api.html">Internal API</a></li>
<li class="toctree-l1"><a class="reference internal" href="devops.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_philosophy.html">Release Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="zreferences.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tutorial_api.html">WAVES-TUTORIAL API</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_cli.html">WAVES-TUTORIAL CLI</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="tutorial_core.html" class="nav-link">Core Lessons</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Tutorial...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/lanl-aea/waves" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/lanl-aea/waves/blob/main/docs/tutorial_01_geometry.rst?plain=1" target="_blank"
   class="btn btn-sm btn-source-file-button dropdown-item"
   title="Show source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">Show source</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/tutorial_01_geometry.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial 01: Geometry</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment">Environment</a><ul class="simple visible nav section-nav flex-column">
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-structure">Directory Structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconscript-file">SConscript File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#abaqus-journal-file">Abaqus Journal File</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#main-functions"><code class="docutils literal notranslate"><span class="pre">main</span></code> Functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-docstrings">Python Docstrings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#abaqus-python-code">Abaqus Python Code</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#command-line-interfaces">Command-Line Interfaces</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#top-level-code-environment">Top-Level Code Environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-exit-codes">Retrieving Exit Codes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#entire-abaqus-journal-file">Entire Abaqus Journal File</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconstruct-file">SConstruct File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-targets">Building Targets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-files">Output Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-visualization">Workflow Visualization</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="tutorial-01-geometry">
<span id="tutorial-geometry"></span><h1>Tutorial 01: Geometry<a class="headerlink" href="#tutorial-01-geometry" title="Link to this heading">#</a></h1>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p><a class="reference internal" href="index.html#computational-tools"><span class="std std-ref">Computational Practices</span></a> - <a class="reference internal" href="computational_practices_build_system.html#build-system"><span class="std std-ref">Build System</span></a></p></li>
<li><p>Software Carpentry: SCons Novice - <a class="reference external" href="https://carpentries-incubator.github.io/scons-novice/">https://carpentries-incubator.github.io/scons-novice/</a>
<span id="id1">[<a class="reference internal" href="zreferences.html#id38" title="Software Carpentry Foundation. Software carpentry: teaching basic lab skills for research computing. 2022. URL: https://software-carpentry.org/ (visited on 2022-08-05).">1</a>, <a class="reference internal" href="zreferences.html#id41" title="The Carpentries. Automation and scons. 2025. Oakland, California, USA. URL: https://carpentries-incubator.github.io/scons-novice/ (visited on 2025-04-17), doi:https://doi.org/10.5281/zenodo.15230995.">9</a>]</span></p></li>
<li><p>Software Carpentry: Python - <a class="reference external" href="https://swcarpentry.github.io/python-novice-inflammation/">https://swcarpentry.github.io/python-novice-inflammation/</a>
<span id="id2">[<a class="reference internal" href="zreferences.html#id38" title="Software Carpentry Foundation. Software carpentry: teaching basic lab skills for research computing. 2022. URL: https://software-carpentry.org/ (visited on 2022-08-05).">1</a>, <a class="reference internal" href="zreferences.html#id42" title="The Carpentries. Programming with python. 2022. Oakland, California, USA. URL: https://swcarpentry.github.io/python-novice-inflammation/ (visited on 2022-08-05).">8</a>]</span></p></li>
</ol>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<p>Below is a list of references for more information about topics that are not explicitly
covered in this tutorial.</p>
<ul class="simple">
<li><p>Python style guide: <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP-8</a> <span id="id3">[<a class="reference internal" href="zreferences.html#id14" title="Guido van Rossum, Barry Warsaw, and Alyssa Coghlan. PEP 8 - style guide for python code. July 2001. Beaverton, Oregon, USA. URL: https://peps.python.org/pep-0008/ (visited on 2024-03-04).">41</a>]</span></p></li>
<li><p>Python Docstrings: <a class="reference external" href="https://peps.python.org/pep-0257/">PEP-257</a>, <a class="reference external" href="https://peps.python.org/pep-0287/">PEP-287</a></p></li>
<li><p>Python Argparse: <a class="reference external" href="https://docs.python.org/3/library/argparse.html">Python 3 argparse</a>, <a class="reference external" href="https://docs.python.org/2.7/library/argparse.html">Python 2.7 argparse</a></p></li>
<li><p><a class="reference external" href="https://help.3ds.com/2023/english/dssimulia_established/SIMACAECMDRefMap/simacmd-c-ov.htm">Abaqus Scripting</a> <span id="id4">[<a class="reference internal" href="zreferences.html#id2" title="Dassault Systemés Simulia Corporation. Abaqus 2023. 2023. Providence, RI, USA.">42</a>]</span></p></li>
<li><p><a class="reference external" href="https://help.3ds.com/2023/english/dssimulia_established/SIMACAECMDRefMap/simacmd-m-PdeUsing-sb.htm">Abaqus Python Environment</a> <span id="id5">[<a class="reference internal" href="zreferences.html#id2" title="Dassault Systemés Simulia Corporation. Abaqus 2023. 2023. Providence, RI, USA.">42</a>]</span></p></li>
</ul>
</section>
<section id="environment">
<h2>Environment<a class="headerlink" href="#environment" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="https://scons.org/">SCons</a> and <a class="reference external" href="https://lanl-aea.github.io/waves/index.html">WAVES</a> can be installed in a <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> environment with the <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> package manager. See the <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html">Conda
installation</a> and <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">Conda environment management</a> documentation for more details about using <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SALib and numpy versions may not need to be this strict for most tutorials. However,
<a class="reference internal" href="tutorial_sensitivity_study.html#tutorial-sensitivity-study"><span class="std std-ref">Tutorial: Sensitivity Study</span></a> uncovered some undocumented SALib version sensitivity to numpy surrounding the
numpy v2 rollout.</p>
</div>
<ol class="arabic">
<li><p>Create the tutorials environment if it doesn’t exist</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-0">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda create --name waves-tutorial-env --channel conda-forge waves &#39;scons&gt;=4.6&#39; matplotlib pandas pyyaml xarray seaborn &#39;numpy&gt;=2&#39; &#39;salib&gt;=1.5.1&#39; pytest
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-1">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">waves</span><span class="o">-</span><span class="n">tutorial</span><span class="o">-</span><span class="n">env</span> <span class="o">--</span><span class="n">channel</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">waves</span> <span class="n">scons</span> <span class="n">matplotlib</span> <span class="n">pandas</span> <span class="n">pyyaml</span> <span class="n">xarray</span> <span class="n">seaborn</span> <span class="n">numpy</span> <span class="n">salib</span> <span class="n">pytest</span>
</pre></div>
</div>
</div>
</div>
</li>
<li><p>Activate the environment</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-2">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda activate waves-tutorial-env
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-3">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">conda</span> <span class="n">activate</span> <span class="n">waves</span><span class="o">-</span><span class="n">tutorial</span><span class="o">-</span><span class="n">env</span>
</pre></div>
</div>
</div>
</div>
</li>
</ol>
<p>Some tutorials require additional third-party software that is not available for the <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> package manager. This
software must be installed separately and either made available to SConstruct by modifying your system’s <code class="docutils literal notranslate"><span class="pre">PATH</span></code> or by
modifying the SConstruct search paths provided to the <a class="reference internal" href="api.html#waves.scons_extensions.add_program" title="waves.scons_extensions.add_program"><code class="xref py py-meth docutils literal notranslate"><span class="pre">waves.scons_extensions.add_program()</span></code></a> method.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>STOP! Before continuing, check that the documentation version matches your installed package version.</p>
<ol class="arabic simple">
<li><p>You can find the documentation version in the upper-left corner of the webpage.</p></li>
<li><p>You can find the installed WAVES version with <code class="docutils literal notranslate"><span class="pre">waves</span> <span class="pre">--version</span></code>.</p></li>
</ol>
<p>If they don’t match, you can launch identically matched documentation with the <a class="reference internal" href="cli.html#waves-cli"><span class="std std-ref">WAVES Command-Line Utility</span></a>
<a class="reference internal" href="cli.html#waves-docs-cli"><span class="std std-ref">docs</span></a> subcommand as <code class="docutils literal notranslate"><span class="pre">waves</span> <span class="pre">docs</span></code>.</p>
</div>
</section>
<section id="directory-structure">
<h2>Directory Structure<a class="headerlink" href="#directory-structure" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="3">
<li><p>Create and change to a new project root directory to house the tutorial files if you have not already done so. For example</p></li>
</ol>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-4">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/waves-tutorials
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/waves-tutorials
$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-5">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">New-Item</span> <span class="nv">$HOME</span><span class="p">\</span><span class="n">waves-tutorials</span> <span class="n">-ItemType</span> <span class="s2">&quot;Directory&quot;</span>
<span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">Set-Location</span> <span class="nv">$HOME</span><span class="p">\</span><span class="n">waves-tutorials</span>
<span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">Get-Location</span>

<span class="n">Path</span>
<span class="p">----</span>
<span class="n">C</span><span class="p">:\</span><span class="n">Users</span><span class="p">\</span><span class="n">roppenheimer</span><span class="p">\</span><span class="n">waves-tutorials</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you skipped any of the previous tutorials, run the following commands to create a copy of the necessary tutorial
files.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-6">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pwd
/home/roppenheimer/waves-tutorials
$ waves fetch --overwrite --tutorial 0 &amp;&amp; mv tutorial_00_SConstruct SConstruct
WAVES fetch
Destination directory: &#39;/home/roppenheimer/waves-tutorials&#39;
</pre></div>
</div>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-7">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">Get</span><span class="o">-</span><span class="n">Location</span>

<span class="n">Path</span>
<span class="o">----</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>

<span class="n">PS</span> <span class="o">&gt;</span> <span class="n">waves</span> <span class="n">fetch</span> <span class="o">--</span><span class="n">overwrite</span> <span class="o">--</span><span class="n">tutorial</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">Move</span><span class="o">-</span><span class="n">Item</span> <span class="n">tutorial_00_SConstruct</span> <span class="n">SConstruct</span> <span class="o">-</span><span class="n">Force</span>
<span class="n">WAVES</span> <span class="n">fetch</span>
<span class="n">Destination</span> <span class="n">directory</span><span class="p">:</span> <span class="s1">&#39;C:\Users</span><span class="se">\r</span><span class="s1">oppenheimer\waves-tutorials&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<ol class="arabic simple" start="4">
<li><p>Within the <code class="docutils literal notranslate"><span class="pre">waves-tutorials</span></code> directory, create a new directory called
<code class="docutils literal notranslate"><span class="pre">modsim_package/abaqus</span></code>. For example, in a bash shell:</p></li>
</ol>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-8" name="sd-tab-set-4" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-8">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pwd
/home/roppenheimer/waves-tutorials
$ mkdir -p modsim_package/abaqus
</pre></div>
</div>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-4" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-9">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">Get</span><span class="o">-</span><span class="n">Location</span>

<span class="n">Path</span>
<span class="o">----</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>

<span class="n">PS</span> <span class="o">&gt;</span> <span class="n">New</span><span class="o">-</span><span class="n">Item</span> <span class="n">modsim_package</span>\<span class="n">abaqus</span> <span class="o">-</span><span class="n">Force</span> <span class="o">-</span><span class="n">ItemType</span> <span class="s2">&quot;Directory&quot;</span>
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="5">
<li><p>Create Python module initialization files to create a project specific local Python package.</p></li>
</ol>
<div class="admonition-waves-tutorials-modsim-package-init-py-and-waves-tutorials-modsim-package-abaqus-init-py-only-not-epub admonition">
<p class="admonition-title">waves-tutorials/modsim_package/__init__.py and waves-tutorials/modsim_package/abaqus/__init__.py
.. only:: not epub</p>
<blockquote>
<div><div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-10" name="sd-tab-set-5" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-10">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pwd
/home/roppenheimer/waves-tutorials
$ waves fetch tutorials/modsim_package/__init__.py tutorials/modsim_package/abaqus/__init__.py --destination modsim_package
$ find . -name &quot;__init__.py&quot;
./modsim_package/__init__.py
./modsim_package/abaqus/__init__.py
</pre></div>
</div>
</div>
<input id="sd-tab-item-11" name="sd-tab-set-5" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-11">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">Get</span><span class="o">-</span><span class="n">Location</span>

<span class="n">Path</span>
<span class="o">----</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>

<span class="n">PS</span> <span class="o">&gt;</span> <span class="n">waves</span> <span class="n">fetch</span> <span class="n">tutorials</span>\<span class="n">modsim_package</span>\<span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="n">tutorials</span>\<span class="n">modsim_package</span>\<span class="n">abaqus</span>\<span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">destination</span> <span class="n">modsim_package</span>
<span class="n">PS</span> <span class="o">&gt;</span> <span class="n">Get</span><span class="o">-</span><span class="n">ChildItem</span> <span class="o">-</span><span class="n">Path</span> <span class="o">.</span> <span class="o">-</span><span class="n">Recurse</span> <span class="s2">&quot;__init__.py&quot;</span>

    <span class="n">Directory</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>\<span class="n">modsim_package</span>

<span class="n">Mode</span>                 <span class="n">LastWriteTime</span>         <span class="n">Length</span> <span class="n">Name</span>
<span class="o">----</span>                 <span class="o">-------------</span>         <span class="o">------</span> <span class="o">----</span>
<span class="o">-</span><span class="n">a</span><span class="o">---</span>             <span class="mi">6</span><span class="o">/</span><span class="mi">9</span><span class="o">/</span><span class="mi">2023</span> <span class="mi">4</span><span class="p">:</span><span class="mi">32</span> <span class="n">PM</span>              <span class="mi">0</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

    <span class="n">Directory</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>\<span class="n">modsim_package</span>\<span class="n">abaqus</span>

<span class="n">Mode</span>                 <span class="n">LastWriteTime</span>         <span class="n">Length</span> <span class="n">Name</span>
<span class="o">----</span>                 <span class="o">-------------</span>         <span class="o">------</span> <span class="o">----</span>
<span class="o">-</span><span class="n">a</span><span class="o">---</span>            <span class="mi">6</span><span class="o">/</span><span class="mi">9</span><span class="o">/</span><span class="mi">2023</span>  <span class="mi">4</span><span class="p">:</span><span class="mi">32</span> <span class="n">PM</span>              <span class="mi">0</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
</div>
</div></blockquote>
</div>
</section>
<section id="sconscript-file">
<h2>SConscript File<a class="headerlink" href="#sconscript-file" title="Link to this heading">#</a></h2>
<p>An <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file defines sources, actions, and targets. Sources are files that exist in the source
repository, such as Abaqus journal files. Actions define how to process source files, for example executing the Abaqus
command. Targets are the output artifacts created by the action, such as an Abaqus model file. It is also worth noting
that the <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file naming convention is case sensitive. In this tutorial, we will build the geometry for a
rectangle part using the <a class="reference internal" href="api.html#waves.scons_extensions.abaqus_journal_builder_factory" title="waves.scons_extensions.abaqus_journal_builder_factory"><code class="xref py py-meth docutils literal notranslate"><span class="pre">waves.scons_extensions.abaqus_journal_builder_factory()</span></code></a> builder from the
<a class="reference internal" href="api.html#waves.scons_extensions.WAVESEnvironment" title="waves.scons_extensions.WAVESEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">waves.scons_extensions.WAVESEnvironment</span></code></a> construction environment (click the builder’s name to link to the
WAVES <a class="reference internal" href="api.html#waves-scons-api"><span class="std std-ref">SCons Extensions</span></a> API).</p>
<ol class="arabic simple" start="6">
<li><p>Create an <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file with the non-default name <code class="docutils literal notranslate"><span class="pre">tutorial_01_geometry.scons</span></code> using the contents below.</p></li>
</ol>
<div class="admonition-waves-tutorials-tutorial-01-geometry-scons admonition">
<p class="admonition-title">waves-tutorials/tutorial_01_geometry.scons</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#! /usr/bin/env python</span>
<span class="linenos"> 2</span><span class="sd">&quot;&quot;&quot;Rectangle compression workflow.</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="sd">Requires the following ``SConscript(..., exports={})``</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="sd">* ``env`` - The SCons construction environment with the following required keys</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="sd">  * ``unconditional_build`` - Boolean flag to force building of conditionally ignored targets</span>
<span class="linenos"> 9</span><span class="sd">  * ``abaqus`` - String path for the Abaqus executable</span>
<span class="linenos">10</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="c1"># Inherit the parent construction environment</span>
<span class="hll"><span class="linenos">15</span><span class="n">Import</span><span class="p">(</span><span class="s2">&quot;env&quot;</span><span class="p">)</span>
</span><span class="linenos">16</span>
<span class="linenos">17</span><span class="c1"># Simulation variables</span>
<span class="linenos">18</span><span class="n">build_directory</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">Dir</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">abspath</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">workflow_name</span> <span class="o">=</span> <span class="n">build_directory</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file begins with imports of standard Python libraries. The first
highlighted line imports the <code class="docutils literal notranslate"><span class="pre">env</span></code> variable (<code class="docutils literal notranslate"><span class="pre">Import('env')</span></code>), which is a variable set
in <code class="docutils literal notranslate"><span class="pre">waves-tutorials/SConstruct</span></code> file. The <code class="docutils literal notranslate"><span class="pre">env</span></code> variable defines project settings,
and is imported so settings variables are not hard-coded more than once.</p>
<ol class="arabic simple" start="7">
<li><p>Continue editing the file <code class="docutils literal notranslate"><span class="pre">tutorial_01_geometry.scons</span></code> using the contents below.</p></li>
</ol>
<div class="admonition-waves-tutorials-tutorial-01-geometry-scons admonition">
<p class="admonition-title">waves-tutorials/tutorial_01_geometry.scons</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos">22</span><span class="c1"># Collect the target nodes to build a concise alias for all targets</span>
<span class="linenos">23</span><span class="n">workflow</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="c1"># Geometry</span>
<span class="linenos">26</span><span class="n">workflow</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
<span class="linenos">27</span>    <span class="n">env</span><span class="o">.</span><span class="n">AbaqusJournal</span><span class="p">(</span>
<span class="linenos">28</span>        <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rectangle_geometry.cae&quot;</span><span class="p">,</span> <span class="s2">&quot;rectangle_geometry.jnl&quot;</span><span class="p">],</span>
<span class="linenos">29</span>        <span class="n">source</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#/modsim_package/abaqus/rectangle_geometry.py&quot;</span><span class="p">],</span>
<span class="linenos">30</span>        <span class="n">subcommand_options</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos">31</span>    <span class="p">)</span>
<span class="linenos">32</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>First, the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> variable is assigned to an empty list. Eventually, <code class="docutils literal notranslate"><span class="pre">workflow</span></code>
will become a list of targets to build. Every time we instruct SCons to build a target or targets,
we will <code class="docutils literal notranslate"><span class="pre">extend</span></code> this list and finally create an alias that matches the parent
directory name. The alias thus represents the list of targets specified in the
<code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file.</p>
<p>The final block of code instructs SCons on how to build the targets, an Abaqus CAE file and an Abaqus journal file. The
source file is specified as an absolute path using the SCons feature <code class="docutils literal notranslate"><span class="pre">#</span></code> which refers to the project root directory.
Using an absolute path allows us to run the journal file without copying it to the build directory. The SCons <code class="docutils literal notranslate"><span class="pre">#</span></code>
feature allows us to construct an absolute path that is correct with respect to the current <code class="docutils literal notranslate"><span class="pre">SConstruct</span></code> file location
even if the project is moved or copied somewhere else on the filing system. <code class="docutils literal notranslate"><span class="pre">subcommand_options</span></code> allows for parameters to
be passed as command-line arguments to the journal file.  Using the journal file’s command-line interface with the
<code class="docutils literal notranslate"><span class="pre">subcommand_options</span></code> string will be discussed in <a class="reference internal" href="tutorial_05_parameter_substitution.html#tutorial-parameter-substitution"><span class="std std-ref">Tutorial 05: Parameter Substitution</span></a>.</p>
<p>Next, the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> list is extended to include the action to use the <a class="reference internal" href="api.html#waves.scons_extensions.abaqus_journal_builder_factory" title="waves.scons_extensions.abaqus_journal_builder_factory"><code class="xref py py-meth docutils literal notranslate"><span class="pre">waves.scons_extensions.abaqus_journal_builder_factory()</span></code></a> builder,
as discussed in <a class="reference internal" href="tutorial_00_scons.html#tutorialsconstruct"><span class="std std-ref">Tutorial 00: SConstruct</span></a>. For more information about the behavior of the
<a class="reference internal" href="api.html#waves.scons_extensions.abaqus_journal_builder_factory" title="waves.scons_extensions.abaqus_journal_builder_factory"><code class="xref py py-meth docutils literal notranslate"><span class="pre">waves.scons_extensions.abaqus_journal_builder_factory()</span></code></a> builder, click the builder’s link or see the WAVES <a class="reference internal" href="api.html#waves-scons-api"><span class="std std-ref">SCons Extensions</span></a>
API. The <code class="docutils literal notranslate"><span class="pre">target</span></code> list specifies the files created by the <a class="reference internal" href="api.html#waves.scons_extensions.abaqus_journal_builder_factory" title="waves.scons_extensions.abaqus_journal_builder_factory"><code class="xref py py-meth docutils literal notranslate"><span class="pre">waves.scons_extensions.abaqus_journal_builder_factory()</span></code></a> task’s action, which
is defined in the <a class="reference internal" href="api.html#waves-scons-api"><span class="std std-ref">SCons Extensions</span></a> API.</p>
<ol class="arabic simple" start="8">
<li><p>Continue editing the file <code class="docutils literal notranslate"><span class="pre">tutorial_01_geometry.scons</span></code> using the contents below.</p></li>
</ol>
<div class="admonition-waves-tutorials-tutorial-01-geometry-scons admonition">
<p class="admonition-title">waves-tutorials/tutorial_01_geometry.scons</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos">36</span><span class="c1"># Collector alias based on parent directory name</span>
<span class="linenos">37</span><span class="n">env</span><span class="o">.</span><span class="n">Alias</span><span class="p">(</span><span class="n">workflow_name</span><span class="p">,</span> <span class="n">workflow</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="k">if</span> <span class="ow">not</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;unconditional_build&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;ABAQUS_PROGRAM&quot;</span><span class="p">]:</span>
<span class="linenos">40</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Program &#39;abaqus&#39; was not found in construction environment. Ignoring &#39;</span><span class="si">{</span><span class="n">workflow_name</span><span class="si">}</span><span class="s2">&#39; target(s)&quot;</span><span class="p">)</span>
<span class="linenos">41</span>    <span class="n">Ignore</span><span class="p">([</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">workflow_name</span><span class="p">],</span> <span class="n">workflow</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>First, we create an alias for the workflow that was extended previously to match the name of the current file, which
will double as the build directory name: <code class="docutils literal notranslate"><span class="pre">tutorial_01_geometry</span></code>.</p>
<p>The final lines of code in this <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file allow SCons to skip building a target
sequence if the Abaqus executable is not found.</p>
</section>
<section id="abaqus-journal-file">
<h2>Abaqus Journal File<a class="headerlink" href="#abaqus-journal-file" title="Link to this heading">#</a></h2>
<p>Now that you have an overview of the <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> file and how SCons uses an Abaqus journal
file, let’s create the geometry part build file for the rectangle model.</p>
<p>The following sections of this tutorial will introduce four software-engineering practices
that match the build system philosophy. These concepts will be presented sequentially,
starting with familiar Abaqus Python code, and adding in the following:</p>
<ul class="simple">
<li><p>Protecting your code within a <code class="docutils literal notranslate"><span class="pre">main()</span></code> function</p></li>
<li><p>Writing docstrings for your Python code</p></li>
<li><p>Adding a command-line interface to your Python code</p></li>
<li><p>Protecting <code class="docutils literal notranslate"><span class="pre">main()</span></code> function execution and returning exit codes</p></li>
</ul>
<ol class="arabic simple" start="9">
<li><p>In the <code class="docutils literal notranslate"><span class="pre">modsim_package/abaqus</span></code> directory, create a file called <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.py</span></code>
using the contents below which contains the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function.</p></li>
</ol>
<div class="admonition-waves-tutorials-modsim-package-abaqus-rectangle-geometry-py admonition">
<p class="admonition-title">waves-tutorials/modsim_package/abaqus/rectangle_geometry.py</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="sd">&quot;&quot;&quot;Create a simple rectangle geometry.&quot;&quot;&quot;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>
<span class="linenos"> 4</span><span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>
<span class="linenos"> 5</span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="linenos"> 6</span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kn">import</span><span class="w"> </span><span class="nn">abaqus</span>
<span class="linenos"> 9</span><span class="kn">import</span><span class="w"> </span><span class="nn">abaqusConstants</span>
<span class="linenos">10</span>
<span class="hll"><span class="linenos">11</span>
</span><span class="hll"><span class="linenos">12</span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">part_name</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
</span><span class="hll"><span class="linenos">13</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a simple rectangle geometry.</span>
</span><span class="hll"><span class="linenos">14</span>
</span><span class="hll"><span class="linenos">15</span><span class="sd">    This script creates a simple Abaqus model with a single rectangle part.</span>
</span><span class="hll"><span class="linenos">16</span>
</span><span class="hll"><span class="linenos">17</span><span class="sd">    :param str output_file: The output file for the Abaqus model. Will be stripped of the extension and ``.cae`` will be</span>
</span><span class="hll"><span class="linenos">18</span><span class="sd">        used.</span>
</span><span class="hll"><span class="linenos">19</span><span class="sd">    :param str model_name: The name of the Abaqus model</span>
</span><span class="hll"><span class="linenos">20</span><span class="sd">    :param str part_name: The name of the Abaqus part</span>
</span><span class="hll"><span class="linenos">21</span><span class="sd">    :param float width: The rectangle width</span>
</span><span class="hll"><span class="linenos">22</span><span class="sd">    :param float height: The rectangle height</span>
</span><span class="hll"><span class="linenos">23</span>
</span><span class="linenos">24</span><span class="sd">    :returns: writes ``output_file``.cae and ``output_file``.jnl</span>
<span class="linenos">25</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">26</span>    <span class="n">output_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">output_file</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.cae&quot;</span>
<span class="linenos">27</span>
<span class="linenos">28</span>    <span class="n">abaqus</span><span class="o">.</span><span class="n">mdb</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span> <span class="n">modelType</span><span class="o">=</span><span class="n">abaqusConstants</span><span class="o">.</span><span class="n">STANDARD_EXPLICIT</span><span class="p">)</span>
<span class="linenos">29</span>
<span class="linenos">30</span>    <span class="n">sketch</span> <span class="o">=</span> <span class="n">abaqus</span><span class="o">.</span><span class="n">mdb</span><span class="o">.</span><span class="n">models</span><span class="p">[</span><span class="n">model_name</span><span class="p">]</span><span class="o">.</span><span class="n">ConstrainedSketch</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">part_name</span><span class="p">,</span> <span class="n">sheetSize</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="linenos">31</span>    <span class="n">sketch</span><span class="o">.</span><span class="n">setPrimaryObject</span><span class="p">(</span><span class="n">option</span><span class="o">=</span><span class="n">abaqusConstants</span><span class="o">.</span><span class="n">STANDALONE</span><span class="p">)</span>
<span class="linenos">32</span>    <span class="n">sketch</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">point1</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">point2</span><span class="o">=</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
<span class="linenos">33</span>    <span class="n">sketch</span><span class="o">.</span><span class="n">unsetPrimaryObject</span><span class="p">()</span>
<span class="linenos">34</span>
<span class="linenos">35</span>    <span class="n">part</span> <span class="o">=</span> <span class="n">abaqus</span><span class="o">.</span><span class="n">mdb</span><span class="o">.</span><span class="n">models</span><span class="p">[</span><span class="n">model_name</span><span class="p">]</span><span class="o">.</span><span class="n">Part</span><span class="p">(</span>
<span class="linenos">36</span>        <span class="n">name</span><span class="o">=</span><span class="n">part_name</span><span class="p">,</span>
<span class="linenos">37</span>        <span class="n">dimensionality</span><span class="o">=</span><span class="n">abaqusConstants</span><span class="o">.</span><span class="n">TWO_D_PLANAR</span><span class="p">,</span>
<span class="linenos">38</span>        <span class="nb">type</span><span class="o">=</span><span class="n">abaqusConstants</span><span class="o">.</span><span class="n">DEFORMABLE_BODY</span><span class="p">,</span>
<span class="linenos">39</span>    <span class="p">)</span>
<span class="linenos">40</span>    <span class="n">part</span><span class="o">.</span><span class="n">BaseShell</span><span class="p">(</span><span class="n">sketch</span><span class="o">=</span><span class="n">sketch</span><span class="p">)</span>
<span class="linenos">41</span>
<span class="linenos">42</span>    <span class="n">abaqus</span><span class="o">.</span><span class="n">mdb</span><span class="o">.</span><span class="n">saveAs</span><span class="p">(</span><span class="n">pathName</span><span class="o">=</span><span class="n">output_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>It is important to note that <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.py</span></code> is, indeed, an Abaqus journal
file - even though it does not look like a journal file produced by an Abaqus CAE GUI
session.</p>
<section id="main-functions">
<span id="tutorial-geometry-waves-main-functions"></span><h3><code class="docutils literal notranslate"><span class="pre">main</span></code> Functions<a class="headerlink" href="#main-functions" title="Link to this heading">#</a></h3>
<p>The top of the file imports standard library modules used by the script’s functions along with Abaqus modules. The
<code class="docutils literal notranslate"><span class="pre">main()</span></code> function takes in several arguments, like <code class="docutils literal notranslate"><span class="pre">model_name</span></code>, <code class="docutils literal notranslate"><span class="pre">part_name</span></code>, and some geometric parameters for
the rectangle part. Most notable of the inputs to the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function is the first input argument -
<code class="docutils literal notranslate"><span class="pre">output_file</span></code>. One can simplify the general concept of a build system into a series of inputs (known as sources) and
outputs (known as targets). In this case, the <code class="docutils literal notranslate"><span class="pre">output_file</span></code> is the target which is created from the source - the
<code class="docutils literal notranslate"><span class="pre">rectangle_geometry.py</span></code> file.</p>
</section>
<section id="python-docstrings">
<span id="tutorial-geometry-waves-python-docstrings"></span><h3>Python Docstrings<a class="headerlink" href="#python-docstrings" title="Link to this heading">#</a></h3>
<p>The highlighted lines of code at the beginning of the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function are called a docstring.  Docstrings are
specially formatted comment blocks that help automate documentation builds. In this case, the docstrings are formatted so
the <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#directive-automodule">Sphinx automodule</a> directive can interpret the comments as ReStructured Text. Docstrings discuss the function
behavior and its interface. See the <a class="reference external" href="https://peps.python.org/pep-0257/">PEP-257</a> conventions for docstring formatting along with <a class="reference external" href="https://peps.python.org/pep-0287/">PEP-287</a> for syntax
specific to reStructured Text. Using the <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#directive-automodule">Sphinx automodule</a> directive, the docstring can be used to autobuild
documentation for your functions. An example of this is in the <a class="reference internal" href="tutorial_api.html#waves-tutorial-api"><span class="std std-ref">WAVES-TUTORIAL API</span></a> for
<a class="reference internal" href="tutorial_api.html#abaqus-rectangle-geometry-api"><span class="std std-ref">rectangle_geometry.py</span></a>.</p>
</section>
<section id="abaqus-python-code">
<span id="tutorial-geometry-waves-abaqus-python-code"></span><h3>Abaqus Python Code<a class="headerlink" href="#abaqus-python-code" title="Link to this heading">#</a></h3>
<p>The latter portion of the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function is the code that generates the rectangle geometry. Here, an Abaqus model
is opened using the <code class="docutils literal notranslate"><span class="pre">model_name</span></code> variable as the model’s name, a rectangle is drawn with dimensions <code class="docutils literal notranslate"><span class="pre">width</span></code> and
<code class="docutils literal notranslate"><span class="pre">height</span></code>, and the Abaqus CAE model is saved with the name <code class="docutils literal notranslate"><span class="pre">output_file</span></code>. One notable difference between the <a class="reference external" href="https://help.3ds.com/2023/english/dssimulia_established/SIMACAECMDRefMap/simacmd-c-ov.htm">Abaqus
Scripting</a> documentation <span id="id6">[<a class="reference internal" href="zreferences.html#id2" title="Dassault Systemés Simulia Corporation. Abaqus 2023. 2023. Providence, RI, USA.">42</a>]</span> of Abaqus journal files is the use of the <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP-8</a> style guide for package
imports.  Here, we order the imports according to the <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP-8</a> style and avoid bulk imports to the file’s namespace from
Abaqus Python packages. It is also worth noting that Abaqus journal files use the Abaqus Python environment <em>not</em>
the SCons Python environment. See the <a class="reference external" href="https://help.3ds.com/2023/english/dssimulia_established/SIMACAECMDRefMap/simacmd-m-PdeUsing-sb.htm">Abaqus Python Environment</a> documentation <span id="id7">[<a class="reference internal" href="zreferences.html#id2" title="Dassault Systemés Simulia Corporation. Abaqus 2023. 2023. Providence, RI, USA.">42</a>]</span> for more information
on the Abaqus Python environment, noting that prior to Abaqus 2024, Abaqus shipped with Python 2.7 instead of Python 3.
The tutorials in this project supply journal files compatible with both Python 2.7 and Python 3.</p>
</section>
<section id="command-line-interfaces">
<span id="tutorial-geometry-waves-command-line-interfaces"></span><h3>Command-Line Interfaces<a class="headerlink" href="#command-line-interfaces" title="Link to this heading">#</a></h3>
<ol class="arabic simple" start="10">
<li><p>In the <code class="docutils literal notranslate"><span class="pre">modsim_package/abaqus</span></code> directory, continue editing the file called <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.py</span></code>
using the contents below containing the <code class="docutils literal notranslate"><span class="pre">get_parser()</span></code> function. Note that missing line numbers may be ignored.</p></li>
</ol>
<div class="admonition-waves-tutorial-modsim-package-abaqus-rectangle-geometry-py admonition">
<p class="admonition-title">waves-tutorial/modsim_package/abaqus/rectangle_geometry.py</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 46</span><span class="k">def</span><span class="w"> </span><span class="nf">get_parser</span><span class="p">():</span>
<span class="linenos"> 47</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return parser for CLI options.</span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span><span class="sd">    All options should use the double-hyphen ``--option VALUE`` syntax to avoid clashes with the Abaqus option syntax,</span>
<span class="linenos"> 50</span><span class="sd">    including flag style arguments ``--flag``. Single hyphen ``-f`` flag syntax often clashes with the Abaqus command</span>
<span class="linenos"> 51</span><span class="sd">    line options and should be avoided.</span>
<span class="linenos"> 52</span>
<span class="linenos"> 53</span><span class="sd">    :returns: parser</span>
<span class="linenos"> 54</span><span class="sd">    :rtype: argparse.ArgumentParser</span>
<span class="linenos"> 55</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 56</span>    <span class="c1"># The global &#39;__file__&#39; variable doesn&#39;t appear to be set when executing from Abaqus CAE</span>
<span class="hll"><span class="linenos"> 57</span>    <span class="n">filename</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
</span><span class="hll"><span class="linenos"> 58</span>    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class="hll"><span class="linenos"> 59</span>    <span class="n">basename_without_extension</span><span class="p">,</span> <span class="n">_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
</span><span class="linenos"> 60</span>    <span class="c1"># Construct a part name from the filename less the workflow step suffix</span>
<span class="hll"><span class="linenos"> 61</span>    <span class="n">default_part_name</span> <span class="o">=</span> <span class="n">basename_without_extension</span>
</span><span class="hll"><span class="linenos"> 62</span>    <span class="n">suffix</span> <span class="o">=</span> <span class="s2">&quot;_geometry&quot;</span>
</span><span class="hll"><span class="linenos"> 63</span>    <span class="k">if</span> <span class="n">default_part_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
</span><span class="hll"><span class="linenos"> 64</span>        <span class="n">default_part_name</span> <span class="o">=</span> <span class="n">default_part_name</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
</span><span class="hll"><span class="linenos"> 65</span>    <span class="c1"># Set default parameter values</span>
</span><span class="hll"><span class="linenos"> 66</span>    <span class="n">default_output_file</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">basename_without_extension</span><span class="p">)</span>
</span><span class="hll"><span class="linenos"> 67</span>    <span class="n">default_width</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span class="hll"><span class="linenos"> 68</span>    <span class="n">default_height</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span class="linenos"> 69</span>
<span class="hll"><span class="linenos"> 70</span>    <span class="n">prog</span> <span class="o">=</span> <span class="s2">&quot;abaqus cae -noGui </span><span class="si">{}</span><span class="s2"> --&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
</span><span class="hll"><span class="linenos"> 71</span>    <span class="n">cli_description</span> <span class="o">=</span> <span class="s2">&quot;Create a simple rectangle geometry and write an ``output_file``.cae Abaqus model file.&quot;</span>
</span><span class="hll"><span class="linenos"> 72</span>    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">cli_description</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="n">prog</span><span class="p">)</span>
</span><span class="hll"><span class="linenos"> 73</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 74</span>        <span class="s2">&quot;--output-file&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 75</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 76</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_output_file</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 77</span>        <span class="n">help</span><span class="o">=</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 78</span>            <span class="s2">&quot;The output file for the Abaqus model. &quot;</span>
</span><span class="hll"><span class="linenos"> 79</span>            <span class="s2">&quot;Will be stripped of the extension and ``.cae`` will be used, e.g. ``output_file``.cae&quot;</span>
</span><span class="hll"><span class="linenos"> 80</span>        <span class="p">),</span>
</span><span class="hll"><span class="linenos"> 81</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos"> 82</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 83</span>        <span class="s2">&quot;--model-name&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 84</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 85</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_part_name</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 86</span>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The name of the Abaqus model&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 87</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos"> 88</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 89</span>        <span class="s2">&quot;--part-name&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 90</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 91</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_part_name</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 92</span>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The name of the Abaqus part&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 93</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos"> 94</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 95</span>        <span class="s2">&quot;--width&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 96</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 97</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_width</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 98</span>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The rectangle width. Positive float.&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 99</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos">100</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos">101</span>        <span class="s2">&quot;--height&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">102</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">103</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_height</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">104</span>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The rectangle height. Positive float.&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">105</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos">106</span>    <span class="k">return</span> <span class="n">parser</span>
</span></pre></div>
</div>
</div>
<p>This portion of <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.py</span></code> defines the argument parsing function, <code class="docutils literal notranslate"><span class="pre">get_parser()</span></code>, which is the
next step in turning our simple Python script into a small software utility. Command-line interfaces allow for scripts
to be executed with optional command-line arguments. This allows us to change the values of input arguments to the
<code class="docutils literal notranslate"><span class="pre">main()</span></code> function without any source code modification.  <code class="docutils literal notranslate"><span class="pre">argparse</span></code> also helps automate command-line interface (CLI)
documentation. An example of this is the <a class="reference internal" href="tutorial_cli.html#waves-tutorial-cli"><span class="std std-ref">WAVES-TUTORIAL CLI</span></a> for <a class="reference internal" href="tutorial_cli.html#abaqus-rectangle-geometry-cli"><span class="std std-ref">rectangle_geometry.py</span></a>.
See the <a class="reference external" href="https://docs.python.org/3/howto/argparse.html">Argparse tutorial</a> for an introduction to the <code class="docutils literal notranslate"><span class="pre">argparse</span></code> module.</p>
<p>The first highlighted portion of the <code class="docutils literal notranslate"><span class="pre">get_parser()</span></code> function defines variables based on the name of the script. While
this method of determining the file name is non-standard for Python 3, the Abaqus Python 2.7 environment necessitates
this syntax. This code will become common boilerplate code included in every Abaqus journal file created in the
tutorials. It is valuable to the behavior of these example journal files, but may not be required for all journal files
depending on their designed behavior.</p>
<p>The code that follows uses the name of the script to define some variables. This code
assumes that the <code class="docutils literal notranslate"><span class="pre">part_name</span></code> variable will be equal to the name of the script and will
remove the <code class="docutils literal notranslate"><span class="pre">_geometry</span></code> suffix if it exists in the file name.</p>
<p>The default values and naming conventions in this journal file are modsim project design decisions made for the
WAVES tutorials and <a class="reference internal" href="templates.html#modsim-templates"><span class="std std-ref">ModSim Templates</span></a>. In practice, it may be beneficial to choose different default behavior
depending on the design of the modsim project.</p>
<p>The second highlighted portion defines default values for some of the command-line arguments. Default values are
assigned if no command-line argument is detected for any of the expected command-line arguments. This provides sensible
defaults even when no command-line arguments are specified. It should be noted, however, that some model developers may
prefer to require all command-line arguments every time the file is used to build a target. <code class="docutils literal notranslate"><span class="pre">output_file</span></code> is the name
of the file that is created at the end of the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function, which assumes <code class="docutils literal notranslate"><span class="pre">output_file</span></code> does not include a file
extension. <code class="docutils literal notranslate"><span class="pre">default_width</span></code> and <code class="docutils literal notranslate"><span class="pre">default_height</span></code> define the size of the <code class="docutils literal notranslate"><span class="pre">rectangle</span></code> part.</p>
<p>The final highlighted portion of the code is where the <code class="docutils literal notranslate"><span class="pre">argparse</span></code> package is used to
define the argument parser rules. First, an argument parser is defined using the
<code class="docutils literal notranslate"><span class="pre">ArgumentParser</span></code> class. This receives a brief description <code class="docutils literal notranslate"><span class="pre">cli_description</span></code> and
direction <code class="docutils literal notranslate"><span class="pre">prog</span></code> on how to execute the program. Each subsequent call of the
<code class="docutils literal notranslate"><span class="pre">add_argument</span></code> method adds a command-line argument to the parser’s rules. Command-line
arguments defined using <code class="docutils literal notranslate"><span class="pre">argparse</span></code> have options, like <code class="docutils literal notranslate"><span class="pre">-o</span></code> or <code class="docutils literal notranslate"><span class="pre">--output-file</span></code>, and
arguments. Arguments can also have default values. <code class="docutils literal notranslate"><span class="pre">argparse</span></code> also allows for command
line argument definitions to include a help message that is used to auto-generate the
command’s help message. See the <a class="reference external" href="https://docs.python.org/3/library/argparse.html">Python argparse</a> documentation for more information.</p>
<p>In this case, we are using <code class="docutils literal notranslate"><span class="pre">argparse</span></code> in an Abaqus Python script, which will use Python
2.7. See the <a class="reference external" href="https://docs.python.org/2.7/library/argparse.html">Python 2.7 argparse</a> documentation for more information about how
<code class="docutils literal notranslate"><span class="pre">argparse</span></code> will behave in an Abaqus journal file.</p>
<ol class="arabic simple" start="11">
<li><p>In the <code class="docutils literal notranslate"><span class="pre">modsim_package/abaqus</span></code> directory, continue editing the file called <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.py</span></code>
using the contents below to create the <code class="docutils literal notranslate"><span class="pre">if</span></code> statement within which we will call the
<code class="docutils literal notranslate"><span class="pre">main()</span></code> function. Note that missing line numbers may be ignored.</p></li>
</ol>
<div class="admonition-waves-tutorials-modsim-package-abaqus-rectangle-geometry-py admonition">
<p class="admonition-title">waves-tutorials/modsim_package/abaqus/rectangle_geometry.py</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos">112</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">113</span>    <span class="n">parser</span> <span class="o">=</span> <span class="n">get_parser</span><span class="p">()</span>
<span class="linenos">114</span>    <span class="c1"># Abaqus does not strip the CAE options, so we have to skip the unknown options related to the CAE CLI.</span>
<span class="linenos">115</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">116</span>        <span class="n">args</span><span class="p">,</span> <span class="n">unknown</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">()</span>
<span class="linenos">117</span>    <span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="linenos">118</span>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
<span class="linenos">119</span>    <span class="c1"># Check for typos in expected arguments. Assumes all arguments use ``--option`` syntax, which is unused by Abaqus.</span>
<span class="linenos">120</span>    <span class="n">possible_typos</span> <span class="o">=</span> <span class="p">[</span><span class="n">argument</span> <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">unknown</span> <span class="k">if</span> <span class="n">argument</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)]</span>
<span class="linenos">121</span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">possible_typos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">122</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Found possible typos in CLI option(s) </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">possible_typos</span><span class="p">))</span>
<span class="linenos">123</span>
<span class="linenos">124</span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span>
<span class="linenos">125</span>        <span class="n">main</span><span class="p">(</span>
<span class="linenos">126</span>            <span class="n">output_file</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">output_file</span><span class="p">,</span>
<span class="linenos">127</span>            <span class="n">model_name</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
<span class="linenos">128</span>            <span class="n">part_name</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">part_name</span><span class="p">,</span>
<span class="linenos">129</span>            <span class="n">width</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
<span class="linenos">130</span>            <span class="n">height</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
<span class="linenos">131</span>        <span class="p">)</span>
<span class="linenos">132</span>    <span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="top-level-code-environment">
<span id="tutorial-geometry-waves-top-level-code-environment"></span><h3>Top-Level Code Environment<a class="headerlink" href="#top-level-code-environment" title="Link to this heading">#</a></h3>
<p>When the script is executed, an internal variable <code class="docutils literal notranslate"><span class="pre">__name__</span></code> is set to the value
<code class="docutils literal notranslate"><span class="pre">__main__</span></code>. When this condition is true (i.e. the script is being executed rather than
being imported), the code inside of <code class="docutils literal notranslate"><span class="pre">main()</span></code> is executed. <code class="docutils literal notranslate"><span class="pre">__main__</span></code> is referred to as
the top-level code environment. Top-level code is also referred to as the <em>entry point</em>
of the program. See the <a class="reference external" href="https://docs.python.org/3/library/__main__.html">Python Top-Level Code Environment</a> documentation for more
information.</p>
<p>The first lines within the <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">&quot;__main__&quot;</span></code> context call the
<code class="docutils literal notranslate"><span class="pre">get_parser()</span></code> method and use <code class="docutils literal notranslate"><span class="pre">argparse</span></code> to separate known and unknown command-line
arguments. This is required for Abaqus journal files, because Abaqus will not strip the
CAE options from the <code class="docutils literal notranslate"><span class="pre">abaqus</span> <span class="pre">cae</span> <span class="pre">-nogui</span></code> command, which are irrelevant to and unused by
the journal file interface.</p>
</section>
<section id="retrieving-exit-codes">
<span id="tutorial-geometry-waves-retrieving-exit-codes"></span><h3>Retrieving Exit Codes<a class="headerlink" href="#retrieving-exit-codes" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">main()</span></code> function is called from within the <code class="docutils literal notranslate"><span class="pre">sys.exit()</span></code> method. This provides
the operating system with a non-zero exit code if the script throws an error. By
convention, non-zero exit codes indicate an error in the executing program. See the <a class="reference external" href="https://www.gnu.org/software/bash/manual/html_node/Exit-Status.html">Bash
Exit Status</a> documentation for more information about specific exit codes. This is used
by build systems to understand when a target has not been produced correctly and to exit the
downstream sequence of target actions which can no longer succeed.</p>
</section>
<section id="entire-abaqus-journal-file">
<h3>Entire Abaqus Journal File<a class="headerlink" href="#entire-abaqus-journal-file" title="Link to this heading">#</a></h3>
<p>Shown below is <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.py</span></code> in its entirety. The highlighted lines show the non-boilerplate code that will
change between journal files in the tutorials. As discussed in preceding sections, some portions of the boilerplate code
are required for modsim project best practice when using a build system such as <a class="reference external" href="https://scons.org/">SCons</a> and other sections are
boilerplate code that matches naming conventions used by the tutorials, but that may change in production modsim
projects.</p>
<div class="admonition-waves-tutorials-modsim-package-abaqus-rectangle-geometry-py admonition">
<p class="admonition-title">waves-tutorials/modsim_package/abaqus/rectangle_geometry.py</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="sd">&quot;&quot;&quot;Create a simple rectangle geometry.&quot;&quot;&quot;</span>
<span class="linenos">  2</span>
<span class="linenos">  3</span><span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>
<span class="linenos">  4</span><span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>
<span class="linenos">  5</span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="linenos">  6</span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="linenos">  7</span>
<span class="linenos">  8</span><span class="kn">import</span><span class="w"> </span><span class="nn">abaqus</span>
<span class="linenos">  9</span><span class="kn">import</span><span class="w"> </span><span class="nn">abaqusConstants</span>
<span class="linenos"> 10</span>
<span class="hll"><span class="linenos"> 11</span>
</span><span class="hll"><span class="linenos"> 12</span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">part_name</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
</span><span class="hll"><span class="linenos"> 13</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a simple rectangle geometry.</span>
</span><span class="hll"><span class="linenos"> 14</span>
</span><span class="hll"><span class="linenos"> 15</span><span class="sd">    This script creates a simple Abaqus model with a single rectangle part.</span>
</span><span class="hll"><span class="linenos"> 16</span>
</span><span class="hll"><span class="linenos"> 17</span><span class="sd">    :param str output_file: The output file for the Abaqus model. Will be stripped of the extension and ``.cae`` will be</span>
</span><span class="hll"><span class="linenos"> 18</span><span class="sd">        used.</span>
</span><span class="hll"><span class="linenos"> 19</span><span class="sd">    :param str model_name: The name of the Abaqus model</span>
</span><span class="hll"><span class="linenos"> 20</span><span class="sd">    :param str part_name: The name of the Abaqus part</span>
</span><span class="hll"><span class="linenos"> 21</span><span class="sd">    :param float width: The rectangle width</span>
</span><span class="hll"><span class="linenos"> 22</span><span class="sd">    :param float height: The rectangle height</span>
</span><span class="hll"><span class="linenos"> 23</span>
</span><span class="linenos"> 24</span><span class="sd">    :returns: writes ``output_file``.cae and ``output_file``.jnl</span>
<span class="linenos"> 25</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="hll"><span class="linenos"> 26</span>    <span class="n">output_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">output_file</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.cae&quot;</span>
</span><span class="hll"><span class="linenos"> 27</span>
</span><span class="hll"><span class="linenos"> 28</span>    <span class="n">abaqus</span><span class="o">.</span><span class="n">mdb</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span> <span class="n">modelType</span><span class="o">=</span><span class="n">abaqusConstants</span><span class="o">.</span><span class="n">STANDARD_EXPLICIT</span><span class="p">)</span>
</span><span class="hll"><span class="linenos"> 29</span>
</span><span class="hll"><span class="linenos"> 30</span>    <span class="n">sketch</span> <span class="o">=</span> <span class="n">abaqus</span><span class="o">.</span><span class="n">mdb</span><span class="o">.</span><span class="n">models</span><span class="p">[</span><span class="n">model_name</span><span class="p">]</span><span class="o">.</span><span class="n">ConstrainedSketch</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">part_name</span><span class="p">,</span> <span class="n">sheetSize</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
</span><span class="hll"><span class="linenos"> 31</span>    <span class="n">sketch</span><span class="o">.</span><span class="n">setPrimaryObject</span><span class="p">(</span><span class="n">option</span><span class="o">=</span><span class="n">abaqusConstants</span><span class="o">.</span><span class="n">STANDALONE</span><span class="p">)</span>
</span><span class="hll"><span class="linenos"> 32</span>    <span class="n">sketch</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">point1</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">point2</span><span class="o">=</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
</span><span class="hll"><span class="linenos"> 33</span>    <span class="n">sketch</span><span class="o">.</span><span class="n">unsetPrimaryObject</span><span class="p">()</span>
</span><span class="hll"><span class="linenos"> 34</span>
</span><span class="hll"><span class="linenos"> 35</span>    <span class="n">part</span> <span class="o">=</span> <span class="n">abaqus</span><span class="o">.</span><span class="n">mdb</span><span class="o">.</span><span class="n">models</span><span class="p">[</span><span class="n">model_name</span><span class="p">]</span><span class="o">.</span><span class="n">Part</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 36</span>        <span class="n">name</span><span class="o">=</span><span class="n">part_name</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 37</span>        <span class="n">dimensionality</span><span class="o">=</span><span class="n">abaqusConstants</span><span class="o">.</span><span class="n">TWO_D_PLANAR</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 38</span>        <span class="nb">type</span><span class="o">=</span><span class="n">abaqusConstants</span><span class="o">.</span><span class="n">DEFORMABLE_BODY</span><span class="p">,</span>
</span><span class="linenos"> 39</span>    <span class="p">)</span>
<span class="linenos"> 40</span>    <span class="n">part</span><span class="o">.</span><span class="n">BaseShell</span><span class="p">(</span><span class="n">sketch</span><span class="o">=</span><span class="n">sketch</span><span class="p">)</span>
<span class="linenos"> 41</span>
<span class="linenos"> 42</span>    <span class="n">abaqus</span><span class="o">.</span><span class="n">mdb</span><span class="o">.</span><span class="n">saveAs</span><span class="p">(</span><span class="n">pathName</span><span class="o">=</span><span class="n">output_file</span><span class="p">)</span>
<span class="linenos"> 43</span>
<span class="linenos"> 44</span>
<span class="linenos"> 45</span><span class="c1"># Comment used in tutorial code snippets: marker-1</span>
<span class="linenos"> 46</span>
<span class="linenos"> 47</span>
<span class="linenos"> 48</span><span class="k">def</span><span class="w"> </span><span class="nf">get_parser</span><span class="p">():</span>
<span class="linenos"> 49</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return parser for CLI options.</span>
<span class="linenos"> 50</span>
<span class="linenos"> 51</span><span class="sd">    All options should use the double-hyphen ``--option VALUE`` syntax to avoid clashes with the Abaqus option syntax,</span>
<span class="linenos"> 52</span><span class="sd">    including flag style arguments ``--flag``. Single hyphen ``-f`` flag syntax often clashes with the Abaqus command</span>
<span class="linenos"> 53</span><span class="sd">    line options and should be avoided.</span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span><span class="sd">    :returns: parser</span>
<span class="linenos"> 56</span><span class="sd">    :rtype: argparse.ArgumentParser</span>
<span class="linenos"> 57</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 58</span>    <span class="c1"># The global &#39;__file__&#39; variable doesn&#39;t appear to be set when executing from Abaqus CAE</span>
<span class="linenos"> 59</span>    <span class="n">filename</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
<span class="linenos"> 60</span>    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="linenos"> 61</span>    <span class="n">basename_without_extension</span><span class="p">,</span> <span class="n">_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
<span class="hll"><span class="linenos"> 62</span>    <span class="c1"># Construct a part name from the filename less the workflow step suffix</span>
</span><span class="linenos"> 63</span>    <span class="n">default_part_name</span> <span class="o">=</span> <span class="n">basename_without_extension</span>
<span class="linenos"> 64</span>    <span class="n">suffix</span> <span class="o">=</span> <span class="s2">&quot;_geometry&quot;</span>
<span class="linenos"> 65</span>    <span class="k">if</span> <span class="n">default_part_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
<span class="hll"><span class="linenos"> 66</span>        <span class="n">default_part_name</span> <span class="o">=</span> <span class="n">default_part_name</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
</span><span class="hll"><span class="linenos"> 67</span>    <span class="c1"># Set default parameter values</span>
</span><span class="hll"><span class="linenos"> 68</span>    <span class="n">default_output_file</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">basename_without_extension</span><span class="p">)</span>
</span><span class="linenos"> 69</span>    <span class="n">default_width</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="linenos"> 70</span>    <span class="n">default_height</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="hll"><span class="linenos"> 71</span>
</span><span class="linenos"> 72</span>    <span class="n">prog</span> <span class="o">=</span> <span class="s2">&quot;abaqus cae -noGui </span><span class="si">{}</span><span class="s2"> --&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
<span class="hll"><span class="linenos"> 73</span>    <span class="n">cli_description</span> <span class="o">=</span> <span class="s2">&quot;Create a simple rectangle geometry and write an ``output_file``.cae Abaqus model file.&quot;</span>
</span><span class="hll"><span class="linenos"> 74</span>    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">cli_description</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="n">prog</span><span class="p">)</span>
</span><span class="hll"><span class="linenos"> 75</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 76</span>        <span class="s2">&quot;--output-file&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 77</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 78</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_output_file</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 79</span>        <span class="n">help</span><span class="o">=</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 80</span>            <span class="s2">&quot;The output file for the Abaqus model. &quot;</span>
</span><span class="hll"><span class="linenos"> 81</span>            <span class="s2">&quot;Will be stripped of the extension and ``.cae`` will be used, e.g. ``output_file``.cae&quot;</span>
</span><span class="hll"><span class="linenos"> 82</span>        <span class="p">),</span>
</span><span class="hll"><span class="linenos"> 83</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos"> 84</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 85</span>        <span class="s2">&quot;--model-name&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 86</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 87</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_part_name</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 88</span>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The name of the Abaqus model&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 89</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos"> 90</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 91</span>        <span class="s2">&quot;--part-name&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 92</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 93</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_part_name</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 94</span>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The name of the Abaqus part&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 95</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos"> 96</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos"> 97</span>        <span class="s2">&quot;--width&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 98</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 99</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_width</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">100</span>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The rectangle width. Positive float.&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">101</span>    <span class="p">)</span>
</span><span class="hll"><span class="linenos">102</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
</span><span class="hll"><span class="linenos">103</span>        <span class="s2">&quot;--height&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">104</span>        <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">105</span>        <span class="n">default</span><span class="o">=</span><span class="n">default_height</span><span class="p">,</span>
</span><span class="linenos">106</span>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The rectangle height. Positive float.&quot;</span><span class="p">,</span>
<span class="linenos">107</span>    <span class="p">)</span>
<span class="linenos">108</span>    <span class="k">return</span> <span class="n">parser</span>
<span class="linenos">109</span>
<span class="linenos">110</span>
<span class="linenos">111</span><span class="c1"># Comment used in tutorial code snippets: marker-2</span>
<span class="linenos">112</span>
<span class="linenos">113</span>
<span class="linenos">114</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">115</span>    <span class="n">parser</span> <span class="o">=</span> <span class="n">get_parser</span><span class="p">()</span>
<span class="linenos">116</span>    <span class="c1"># Abaqus does not strip the CAE options, so we have to skip the unknown options related to the CAE CLI.</span>
<span class="linenos">117</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">118</span>        <span class="n">args</span><span class="p">,</span> <span class="n">unknown</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">()</span>
<span class="linenos">119</span>    <span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="linenos">120</span>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
<span class="linenos">121</span>    <span class="c1"># Check for typos in expected arguments. Assumes all arguments use ``--option`` syntax, which is unused by Abaqus.</span>
<span class="linenos">122</span>    <span class="n">possible_typos</span> <span class="o">=</span> <span class="p">[</span><span class="n">argument</span> <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">unknown</span> <span class="k">if</span> <span class="n">argument</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)]</span>
<span class="linenos">123</span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">possible_typos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">124</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Found possible typos in CLI option(s) </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">possible_typos</span><span class="p">))</span>
<span class="linenos">125</span>
<span class="hll"><span class="linenos">126</span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span>
</span><span class="hll"><span class="linenos">127</span>        <span class="n">main</span><span class="p">(</span>
</span><span class="hll"><span class="linenos">128</span>            <span class="n">output_file</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">output_file</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">129</span>            <span class="n">model_name</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">130</span>            <span class="n">part_name</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">part_name</span><span class="p">,</span>
</span><span class="linenos">131</span>            <span class="n">width</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
<span class="linenos">132</span>            <span class="n">height</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
<span class="linenos">133</span>        <span class="p">)</span>
<span class="linenos">134</span>    <span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="sconstruct-file">
<h2>SConstruct File<a class="headerlink" href="#sconstruct-file" title="Link to this heading">#</a></h2>
<p>In <a class="reference internal" href="tutorial_00_scons.html#tutorialsconstruct"><span class="std std-ref">Tutorial 00: SConstruct</span></a>, we created the <code class="docutils literal notranslate"><span class="pre">SConstruct</span></code> file. For convenience, we will add a collector alias
matching the tutorial directory name in the SContruct file. This collector alias will point to the list of targets to
build specified in the <code class="docutils literal notranslate"><span class="pre">waves-tutorials/tutorial_01_geometry.scons</span></code> file.</p>
<ol class="arabic" start="12">
<li><p>Modify the <code class="docutils literal notranslate"><span class="pre">waves-tutorials/SConstruct</span></code> file by adding the
<code class="docutils literal notranslate"><span class="pre">tutorial_01_geometry</span></code> collector alias to the <code class="docutils literal notranslate"><span class="pre">workflow_configurations</span></code> list.
The <code class="docutils literal notranslate"><span class="pre">diff</span></code> output below shows the difference between the <code class="docutils literal notranslate"><span class="pre">SConstruct</span></code> file created
in <a class="reference internal" href="tutorial_00_scons.html#tutorialsconstruct"><span class="std std-ref">Tutorial 00: SConstruct</span></a> and what the new <code class="docutils literal notranslate"><span class="pre">SConstruct</span></code> file will be.</p>
<div class="admonition-waves-tutorials-sconstruct-diff admonition">
<p class="admonition-title">waves-tutorials/SConstruct diff</p>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/waves/waves/build/docs/tutorials_tutorial_00_SConstruct</span>
<span class="gi">+++ /home/runner/work/waves/waves/build/docs/tutorials_tutorial_01_geometry_SConstruct</span>
<span class="gu">@@ -1,5 +1,5 @@</span>
<span class="w"> </span>#! /usr/bin/env python
<span class="gd">-&quot;&quot;&quot;Configure the WAVES SConstruct file introduction tutorial.&quot;&quot;&quot;</span>
<span class="gi">+&quot;&quot;&quot;Configure the WAVES geometry tutorial.&quot;&quot;&quot;</span>
<span class="w"> </span>
<span class="w"> </span>import os
<span class="w"> </span>import pathlib
<span class="gu">@@ -93,7 +93,9 @@</span>
<span class="w"> </span># Comments used in tutorial code snippets: marker-6
<span class="w"> </span>
<span class="w"> </span># Add simulation targets
<span class="gd">-workflow_configurations = []</span>
<span class="gi">+workflow_configurations = [</span>
<span class="gi">+    &quot;tutorial_01_geometry.scons&quot;,</span>
<span class="gi">+]</span>
<span class="w"> </span>for workflow in workflow_configurations:
<span class="w"> </span>    build_dir = env[&quot;variant_dir_base&quot;] / pathlib.Path(workflow).stem
<span class="w"> </span>    SConscript(workflow, variant_dir=build_dir, exports={&quot;env&quot;: env}, duplicate=False)
</pre></div>
</div>
</div>
</li>
</ol>
</section>
<section id="building-targets">
<span id="tutorial-geometry-waves-build-targets"></span><h2>Building Targets<a class="headerlink" href="#building-targets" title="Link to this heading">#</a></h2>
<p>Now that you’ve created the geometry task in <code class="docutils literal notranslate"><span class="pre">tutorial_01_geometry.scons</span></code>, this section will walk through building the
<code class="docutils literal notranslate"><span class="pre">tutorial_01_geometry</span></code> targets using Scons.</p>
<ol class="arabic simple" start="13">
<li><p>To build the targets only for the <code class="docutils literal notranslate"><span class="pre">tutorial_01_geometry</span></code> workflow, execute the following command:</p></li>
</ol>
<blockquote>
<div><div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-12" name="sd-tab-set-6" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-12">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pwd
/home/roppenheimer/waves-tutorials
$ scons tutorial_01_geometry
scons: Reading SConscript files ...
Checking whether &#39;/apps/abaqus/Commands/abq2024&#39; program exists.../apps/abaqus/Commands/abq2024
Checking whether &#39;/usr/projects/ea/abaqus/Commands/abq2024&#39; program exists...no
Checking whether &#39;abq2024&#39; program exists.../apps/abaqus/Commands/abq2024
Checking whether &#39;abaqus&#39; program exists...no
scons: done reading SConscript files.
scons: Building targets ...
cd /home/roppenheimer/waves-tutorials/build/tutorial_01_geometry &amp;&amp; /apps/abaqus/Commands/abq2024 cae -noGui
/home/roppenheimer/waves-tutorials/modsim_package/abaqus/rectangle_geometry.py -- &gt; rectangle_geometry.cae.stdout 2&gt;&amp;1
scons: done building targets.
</pre></div>
</div>
</div>
<input id="sd-tab-item-13" name="sd-tab-set-6" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-13">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">Get</span><span class="o">-</span><span class="n">Location</span>

<span class="n">Path</span>
<span class="o">----</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>

<span class="n">PS</span> <span class="o">&gt;</span> <span class="n">scons</span> <span class="n">tutorial_01_geometry</span>
<span class="n">scons</span><span class="p">:</span> <span class="n">Reading</span> <span class="n">SConscript</span> <span class="n">files</span> <span class="o">...</span>
<span class="n">Checking</span> <span class="n">whether</span> <span class="s1">&#39;/apps/abaqus/Commands/abq2024&#39;</span> <span class="n">program</span> <span class="n">exists</span><span class="o">...</span><span class="n">no</span>
<span class="n">Checking</span> <span class="n">whether</span> <span class="s1">&#39;/usr/projects/ea/abaqus/Commands/abq2024&#39;</span> <span class="n">program</span> <span class="n">exists</span><span class="o">...</span><span class="n">no</span>
<span class="n">Checking</span> <span class="n">whether</span> <span class="s1">&#39;abq2024&#39;</span> <span class="n">program</span> <span class="n">exists</span><span class="o">...</span><span class="n">C</span><span class="p">:</span>\<span class="n">SIMULIA</span>\<span class="n">Commands</span>\<span class="n">abq2024</span><span class="o">.</span><span class="n">BAT</span>
<span class="n">Checking</span> <span class="n">whether</span> <span class="s1">&#39;abaqus&#39;</span> <span class="n">program</span> <span class="n">exists</span><span class="o">...</span><span class="n">C</span><span class="p">:</span>\<span class="n">SIMULIA</span>\<span class="n">Commands</span>\<span class="n">abaqus</span><span class="o">.</span><span class="n">BAT</span>
<span class="n">scons</span><span class="p">:</span> <span class="n">done</span> <span class="n">reading</span> <span class="n">SConscript</span> <span class="n">files</span><span class="o">.</span>
<span class="n">scons</span><span class="p">:</span> <span class="n">Building</span> <span class="n">targets</span> <span class="o">...</span>
<span class="n">cd</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>\<span class="n">build</span>\<span class="n">tutorial_01_geometry</span> <span class="o">&amp;&amp;</span> <span class="n">C</span><span class="p">:</span>\<span class="n">SIMULIA</span>\<span class="n">Commands</span>\<span class="n">abq2024</span><span class="o">.</span><span class="n">BAT</span> <span class="n">cae</span> <span class="o">-</span><span class="n">noGUI</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>\<span class="n">modsim_package</span>\<span class="n">abaqus</span>\<span class="n">rectangle_geometry</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span> <span class="o">&gt;</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>\<span class="n">build</span>\<span class="n">tutorial_01_geometry</span>\<span class="n">rectangle_geometry</span><span class="o">.</span><span class="n">cae</span><span class="o">.</span><span class="n">stdout</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
<span class="n">scons</span><span class="p">:</span> <span class="n">done</span> <span class="n">building</span> <span class="n">targets</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
</div></blockquote>
<p>The default build directory name is <code class="docutils literal notranslate"><span class="pre">build</span></code> and located in the same parent directory as
the <code class="docutils literal notranslate"><span class="pre">SConstruct</span></code> file as described in <a class="reference internal" href="tutorial_00_scons.html#tutorialsconstruct"><span class="std std-ref">Tutorial 00: SConstruct</span></a>.</p>
</section>
<section id="output-files">
<h2>Output Files<a class="headerlink" href="#output-files" title="Link to this heading">#</a></h2>
<p>Explore the contents of the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory using the <code class="docutils literal notranslate"><span class="pre">tree</span></code> command against the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory, as shown
below. Note that the directory structure of the build directory <em>exactly</em> matches the directory structure of the
location where the project-level <code class="docutils literal notranslate"><span class="pre">SConstruct</span></code> and <code class="docutils literal notranslate"><span class="pre">SConscript</span></code> files exist. This behavior will allow us to define
multiple simulations in our <a class="reference internal" href="glossary.html#term-modsim-repository"><span class="xref std std-term">modsim repository</span></a> with build result separation if more than one simulation is built
at the same time. <a class="reference internal" href="tutorial_02_partition_mesh.html#tutorial-partition-mesh"><span class="std std-ref">Tutorial 02: Partition and Mesh</span></a> will demonstrate the importance of this behavior more clearly.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-14" name="sd-tab-set-7" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-14">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">pwd</span>
/home/roppenheimer/waves-tutorials
$<span class="w"> </span>tree<span class="w"> </span>build/tutorial_01_geometry/
build/tutorial_01_geometry/
<span class="p">|</span>--<span class="w"> </span>abaqus.rpy
<span class="p">|</span>--<span class="w"> </span>rectangle_geometry.cae
<span class="p">|</span>--<span class="w"> </span>rectangle_geometry.cae.stdout
<span class="sb">`</span>--<span class="w"> </span>rectangle_geometry.jnl

<span class="m">0</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">4</span><span class="w"> </span>files
</pre></div>
</div>
</div>
<input id="sd-tab-item-15" name="sd-tab-set-7" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-15">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">PS </span><span class="p">&gt;</span> <span class="nb">Get-Location</span>

   <span class="n">Path</span>
   <span class="p">----</span>
   <span class="n">C</span><span class="p">:\</span><span class="n">Users</span><span class="p">\</span><span class="n">roppenheimer</span><span class="p">\</span><span class="n">waves-tutorials</span>

<span class="nb">PS </span><span class="p">&gt;</span> <span class="n">tree</span> <span class="n">build</span><span class="p">\</span><span class="n">tutorial_01_geometry</span> <span class="p">/</span><span class="n">F</span>
<span class="n">C</span><span class="p">:\</span><span class="n">USERS</span><span class="p">\</span><span class="n">ROPPENHEIMER</span><span class="p">\</span><span class="n">WAVES-TUTORIALS</span><span class="p">\</span><span class="n">BUILD</span><span class="p">\</span><span class="n">TUTORIAL_01_GEOMETRY</span>
    <span class="n">abaqus</span><span class="p">.</span><span class="n">rpy</span>
    <span class="n">rectangle_geometry</span><span class="p">.</span><span class="n">cae</span>
    <span class="n">rectangle_geometry</span><span class="p">.</span><span class="n">cae</span><span class="p">.</span><span class="n">stdout</span>
    <span class="n">rectangle_geometry</span><span class="p">.</span><span class="n">jnl</span>

<span class="n">No</span> <span class="n">subfolders</span> <span class="n">exist</span>
</pre></div>
</div>
</div>
</div>
<p>At this point, the only directory in the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory is that pertaining to the specific target that was
specified to be built. In this case, that is <code class="docutils literal notranslate"><span class="pre">tutorial_01_geometry</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">build/tutorial_01_geometry/</span></code> directory should contain the following files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">abaqus.rpy</span></code>, the replay file from the <code class="docutils literal notranslate"><span class="pre">abaqus</span> <span class="pre">cae</span> <span class="pre">-nogui</span></code> command</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rectangle_geometry.cae</span></code>, an Abaqus CAE file that contains a model named
<code class="docutils literal notranslate"><span class="pre">model_name</span></code> within which is a part named <code class="docutils literal notranslate"><span class="pre">part_name</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rectangle_geometry.jnl</span></code> and <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.cae.stdout</span></code>, the journal file
that records all of the commands executed by Abaqaus and the log file that will contain
any errors recorded by Abaqus.</p></li>
</ul>
</section>
<section id="workflow-visualization">
<h2>Workflow Visualization<a class="headerlink" href="#workflow-visualization" title="Link to this heading">#</a></h2>
<p>To visualize the workflow, you can use the WAVES <a class="reference internal" href="cli.html#waves-visualize-cli"><span class="std std-ref">visualize</span></a> command. The <code class="docutils literal notranslate"><span class="pre">--output-file</span></code> allows
you to save the visualization file non-interactively. Without this option, you’ll enter an interactive matplotlib window.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-16" name="sd-tab-set-8" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="bash" for="sd-tab-item-16">
Linux/MacOS</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pwd
/home/roppenheimer/waves-tutorials
$ waves visualize tutorial_01_geometry --output-file tutorial_01_geometry.png --width=16 --height=3
$ ls tutorial_01_geometry.png
tutorial_01_geometry.png
</pre></div>
</div>
</div>
<input id="sd-tab-item-17" name="sd-tab-set-8" type="radio">
<label class="sd-tab-label" data-sync-group="OS" data-sync-id="powershell" for="sd-tab-item-17">
Windows</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PS</span> <span class="o">&gt;</span> <span class="n">Get</span><span class="o">-</span><span class="n">Location</span>

<span class="n">Path</span>
<span class="o">----</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>

<span class="n">PS</span> <span class="o">&gt;</span> <span class="n">waves</span> <span class="n">visualize</span> <span class="n">tutorial_01_geometry</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">file</span> <span class="n">tutorial_01_geometry</span><span class="o">.</span><span class="n">png</span> <span class="o">--</span><span class="n">width</span><span class="o">=</span><span class="mi">16</span> <span class="o">--</span><span class="n">height</span><span class="o">=</span><span class="mi">3</span>
<span class="n">PS</span> <span class="o">&gt;</span> <span class="n">Get</span><span class="o">-</span><span class="n">ChildItem</span> <span class="n">tutorial_01_geometry</span><span class="o">.</span><span class="n">png</span>

    <span class="n">Directory</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">roppenheimer</span>\<span class="n">waves</span><span class="o">-</span><span class="n">tutorials</span>

<span class="n">Mode</span>                 <span class="n">LastWriteTime</span>         <span class="n">Length</span> <span class="n">Name</span>
<span class="o">----</span>                 <span class="o">-------------</span>         <span class="o">------</span> <span class="o">----</span>
<span class="o">-</span><span class="n">a</span><span class="o">---</span>             <span class="mi">6</span><span class="o">/</span><span class="mi">9</span><span class="o">/</span><span class="mi">2023</span> <span class="mi">4</span><span class="p">:</span><span class="mi">32</span> <span class="n">PM</span>          <span class="mi">44494</span> <span class="n">tutorial_01_geometry</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
</div>
</div>
<p>The workflow visualization should look similar to the image below, which is a representation of the directed graph
constructed by <a class="reference external" href="https://scons.org/">SCons</a> from the task definitions. The image starts with the final workflow target on the left, in this
case the tutorial target alias. Moving left to right, the files required to complete the workflow are shown until we
reach the original source file(s) on the far right of the image. The arrows represent actions and are drawn from a
required source to the produced target. The <a class="reference internal" href="index.html#computational-tools"><span class="std std-ref">Computational Practices</span></a> introduction discusses the relationship of a
<a class="reference internal" href="computational_practices_build_system.html#build-system"><span class="std std-ref">Build System</span></a> task and <a class="reference internal" href="computational_practices_build_system.html#build-system-directed-graphs"><span class="std std-ref">Directed graphs</span></a>.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="_images/tutorial_01_geometry.png"><img alt="_images/tutorial_01_geometry.png" src="_images/tutorial_01_geometry.png" style="width: 100%;" />
</a>
</figure>
<p>In this case, the single source file <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.py</span></code> is producing several output files which are required by
the workflow. Notice that only two of these files were specified in our geometry task: <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.cae</span></code> and
<code class="docutils literal notranslate"><span class="pre">rectangle_geometry.jnl</span></code>. The <code class="docutils literal notranslate"><span class="pre">rectangle_geometry.cae.stdout</span></code> files is generated as part of the <code class="docutils literal notranslate"><span class="pre">AbaqusJournal</span></code>
builder and appended automatically during task generation. This workflow visualization will become crowded quickly in
these tutorials, so future visualization commands will show you how to ignore specific file extensions to reduce visual
clutter.</p>
<p>This workflow graph would be relatively easy to manage manually for this simple introductory tutorial. However, as the
core tutorials grow in file count, and especially when we start adding parameter studies, it will become more obvious
why a build system is desirable to manage modsim workflows.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="tutorial_00_scons.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tutorial 00: SConstruct</p>
      </div>
    </a>
    <a class="right-next"
       href="tutorial_02_partition_mesh.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Tutorial 02: Partition and Mesh</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment">Environment</a><ul class="simple visible nav section-nav flex-column">
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#directory-structure">Directory Structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconscript-file">SConscript File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#abaqus-journal-file">Abaqus Journal File</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#main-functions"><code class="docutils literal notranslate"><span class="pre">main</span></code> Functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-docstrings">Python Docstrings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#abaqus-python-code">Abaqus Python Code</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#command-line-interfaces">Command-Line Interfaces</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#top-level-code-environment">Top-Level Code Environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-exit-codes">Retrieving Exit Codes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#entire-abaqus-journal-file">Entire Abaqus Journal File</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sconstruct-file">SConstruct File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-targets">Building Targets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-files">Output Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-visualization">Workflow Visualization</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Kyle Brindley, Prabhu S. Khalsa, Thomas Roberts, Sergio Cordova, Matthew Fister, Chris Johnson, and Scott Ouellette
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2025 Triad National Security, LLC. All Rights Reserved.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Oct 10, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>