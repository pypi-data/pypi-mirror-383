[project]
name = "kubemind-common"
description = "Shared utilities, contracts, and middleware for KubeMind services"
readme = "README.md"
requires-python = ">=3.12"
authors = [
  { name = "KubeMind Team" }
]
license = { file = "LICENSE" }
keywords = ["kubemind", "microservices", "kubernetes", "pydantic", "utils"]
classifiers = [
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.12",
  "Typing :: Typed",
  "Intended Audience :: Developers",
  "Topic :: Software Development :: Libraries",
]

# Single source of truth for the version in kubemind_common/__init__.py
dynamic = ["version"]

dependencies = [
  "pydantic>=2.9.2,<3.0.0",
  "pydantic-settings>=2.6.0,<3.0.0",
  "httpx>=0.27.2,<0.28.0",
  "tenacity>=9.0.0,<10.0.0",
  "redis>=5.2.0,<6.0.0",
  "prometheus-client>=0.21.0,<0.22.0",
  "jinja2>=3.1.4,<4.0.0",
]

[project.optional-dependencies]
# Development/testing helpers
dev = [
  "pytest>=8.3.3,<9.0.0",
  "pytest-asyncio>=0.24.0,<1.0.0",
  "requests>=2.32.3,<3.0.0",
  "build>=1.2.1,<2.0.0",
  "twine>=5.1.1,<6.0.0",
]
# Feature extras
fastapi = ["fastapi>=0.115.0,<1.0.0", "starlette>=0.40.0,<1.0.0"]
db = ["sqlalchemy>=2.0.0,<3.0.0", "asyncpg>=0.29.0,<1.0.0"]
celery = ["celery>=5.3.0,<6.0.0"]
otel = ["opentelemetry-api>=1.25.0,<2.0.0", "opentelemetry-sdk>=1.25.0,<2.0.0", "opentelemetry-instrumentation>=0.46b0,<1.0.0"]
auth = ["python-jose[cryptography]>=3.3.0,<4.0.0"]

[project.urls]
Homepage = "https://github.com/kubemind-ai/kubemind-common"
Repository = "https://github.com/kubemind-ai/kubemind-common.git"

[build-system]
requires = [
  "hatchling>=1.25.0"
]
build-backend = "hatchling.build"

[tool.hatch.version]
path = "src/kubemind_common/__init__.py"

[tool.hatch.build]
include = [
  "src/kubemind_common",
  "README.md",
  "LICENSE",
]
exclude = [
  "src/kubemind_common/tests",
  "src/kubemind_common/.pytest_cache",
  "src/kubemind_common/CLAUDE.md",
  "src/kubemind_common/.claude",
  "src/kubemind_common/README.md",
]

[tool.hatch.build.targets.wheel]
packages = ["src/kubemind_common"]

[tool.hatch.build.targets.sdist]
include = ["src/kubemind_common", "tests", "README.md", "pyproject.toml", "LICENSE", "docs", "examples"]
