- teststeps:
    - name: A simple GET request
      request:
        method: GET
        url: /search/
        headers:
        params:
          q: "selenium"
      validate:
        equal:
- teststeps:
    - presteps:
        - setup/login.yaml
    - name: get user info
      request:
        method: GET
        url: /id/1
        headers:
          Content-Type: application/json
          Authorization: ${extract(login_token)}
        params:
      extract:
        user_name: "data.name"
        user_age: "data.age"
      validate:
        equal:
          - [ "status_code", 200 ]
          - [ "body.code", 10200 ]
        not_equal:
          - [ "body.data.name", "jack" ]
        contains:
          - [ "body.message", "succ" ]
        not_contains:
          - [ "body.message", "access" ]
    - name: add user info
      request:
        method: POST
        url: /add_user
        headers:
          Content-Type: application/json
          Authorization: ${extract(login_token)}
        json:
          age: ${extract(user_age)}
          name: ${extract(user_name)}
          height: 173
      extract:
        resp_code: "code"
        resp_age: "data.age"
      validate:
        equal:
          - [ "status_code", 200 ]