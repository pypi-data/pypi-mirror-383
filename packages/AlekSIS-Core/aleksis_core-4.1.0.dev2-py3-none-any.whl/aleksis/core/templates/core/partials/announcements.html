{% load i18n humanize %}

{% for announcement in announcements %}
  <figure class="alert primary">
      {% if show_interval %}
        <em class="right hide-on-small-and-down">
          {% if announcement.datetime_start.date == announcement.datetime_end.date %}
            {% blocktrans with from=announcement.datetime_start|naturalday %}
              Valid for {{ from }}
            {% endblocktrans %}
          {% else %}
            {% blocktrans with from=announcement.datetime_start|naturalday until=announcement.datetime_end|naturalday %}
              Valid from {{ from }} until {{ until }}
            {% endblocktrans %}
          {% endif %}
        </em>
      {% endif %}

      <i class="material-icons iconify left" data-icon="mdi:message-alert-outline"></i>

      {% if show_recipients and announcement.recipients.all %}
        <p>
          {{ announcement.recipients.all|join:", " }}:
        </p>
      {% endif %}

      <figcaption>{{ announcement.title }}</figcaption>
      <p>
        {{ announcement.description }}
      </p>

      {% if show_interval %}
        <em class="hide-on-med-and-up">
          {% if announcement.datetime_start.date == announcement.datetime_end.date %}
            {% blocktrans with from=announcement.datetime_start|naturalday %}
              Valid for {{ from }}
            {% endblocktrans %}
          {% else %}
            {% blocktrans with from=announcement.datetime_start|naturalday until=announcement.datetime_end|naturalday %}
              Valid for {{ from }} â€“ {{ until }}
            {% endblocktrans %}
          {% endif %}
        </em>
      {% endif %}
  </figure>
{% endfor %}
