"use strict";(self.webpackChunk_amphi_pipeline_editor=self.webpackChunk_amphi_pipeline_editor||[]).push([[64],{1064:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var i=r(3345),n=r(7628),a=r(3895),o=r(8036),d=r(3063);const s=(0,r(6777).I)("div")({name:"DataGridOverlayEditorStyle",class:"gdg-d19meir1",propsAsIs:!1,vars:{"d19meir1-0":[e=>e.targetY,"px"],"d19meir1-1":[e=>e.targetX,"px"],"d19meir1-2":[e=>e.targetWidth,"px"],"d19meir1-3":[e=>e.targetHeight,"px"],"d19meir1-4":[e=>e.targetY+10,"px"],"d19meir1-5":[e=>Math.max(0,(e.targetHeight-28)/2),"px"]}});const l=e=>{const{target:t,content:r,onFinishEditing:l,forceEditMode:c,initialValue:u,imageEditorOverride:g,markdownDivCreateNode:v,highlight:m,className:p,theme:h,id:f,cell:y,bloom:E,validateCell:b,getCellRenderer:k,provideEditor:C,isOutsideClick:w}=e,[x,D]=i.useState(c?r:void 0),O=i.useRef(x??r);O.current=x??r;const[S,P]=i.useState(()=>void 0===b||!((0,d.Bc)(r)&&!1===b?.(y,r,O.current))),I=i.useCallback((e,t)=>{l(S?e:void 0,t)},[S,l]),M=i.useCallback(e=>{if(void 0!==b&&void 0!==e&&(0,d.Bc)(e)){const t=b(y,e,O.current);!1===t?P(!1):"object"==typeof t?(e=t,P(!0)):P(!0)}D(e)},[y,b]),N=i.useRef(!1),R=i.useRef(void 0),_=i.useCallback(()=>{I(x,[0,0]),N.current=!0},[x,I]),A=i.useCallback((e,t)=>{I(e,t??R.current??[0,0]),N.current=!0},[I]),B=i.useCallback(async e=>{let t=!1;"Escape"===e.key?(e.stopPropagation(),e.preventDefault(),R.current=[0,0]):"Enter"!==e.key||e.shiftKey?"Tab"===e.key&&(e.stopPropagation(),e.preventDefault(),R.current=[e.shiftKey?-1:1,0],t=!0):(e.stopPropagation(),e.preventDefault(),R.current=[0,1],t=!0),window.setTimeout(()=>{N.current||void 0===R.current||(I(t?x:void 0,R.current),N.current=!0)},0)},[I,x]),F=x??r,[H,K]=i.useMemo(()=>{if((0,d.pg)(r))return[];const e=C?.(r);return void 0!==e?[e,!1]:[k(r)?.provideEditor?.(r),!1]},[r,k,C]),{ref:T,style:V}=function(){const[e,t]=function(){const[e,t]=i.useState();return[e??void 0,t]}(),[r,n]=i.useState(0),[a,o]=i.useState(!0);return i.useLayoutEffect(()=>{if(void 0===e)return;if(!("IntersectionObserver"in window))return;const t=new IntersectionObserver(e=>{0!==e.length&&o(e[0].isIntersecting)},{threshold:1});return t.observe(e),()=>t.disconnect()},[e]),i.useEffect(()=>{if(a||void 0===e)return;let t;const r=()=>{const{right:i}=e.getBoundingClientRect();n(e=>Math.min(e+window.innerWidth-i-10,0)),t=requestAnimationFrame(r)};return t=requestAnimationFrame(r),()=>{void 0!==t&&cancelAnimationFrame(t)}},[e,a]),{ref:t,style:i.useMemo(()=>({transform:`translateX(${r}px)`}),[r])}}();let W,X,Y=!0,q=!0;if(void 0!==H){Y=!0!==H.disablePadding,q=!0!==H.disableStyling;const e=(0,d.zT)(H);e&&(X=H.styleOverride);const r=e?H.editor:H;W=i.createElement(r,{isHighlighted:m,onChange:M,value:F,initialValue:u,onFinishedEditing:A,validatedSelection:(0,d.Bc)(F)?F.selectionRange:void 0,forceEditMode:c,target:t,imageEditorOverride:g,markdownDivCreateNode:v,isValid:S,theme:h})}X={...X,...V};const z=document.getElementById("portal");if(null===z)return console.error('Cannot open Data Grid overlay editor, because portal not found.  Please add `<div id="portal" />` as the last child of your `<body>`.'),null;let G=q?"gdg-style":"gdg-unstyle";S||(G+=" gdg-invalid"),Y&&(G+=" gdg-pad");const j=E?.[0]??1,L=E?.[1]??1;return(0,n.createPortal)(i.createElement(o.Dx.Provider,{value:h},i.createElement(a.A,{style:(0,o.zc)(h),className:p,onClickOutside:_,isOutsideClick:w},i.createElement(s,{ref:T,id:f,className:G,style:X,as:!0===K?"label":void 0,targetX:t.x-j,targetY:t.y-L,targetWidth:t.width+2*j,targetHeight:t.height+2*L},i.createElement("div",{className:"gdg-clip-region",onKeyDown:B},W)))),z)}}}]);