<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>Row {{ row_index }} - {{ table_name }}</title>
   <style>
   {% include 'database.css' %}
   </style>
</head>
<body>
   <!-- Breadcrumbs -->
   <div class="breadcrumbs">
       <a href="/" class="breadcrumb-item">Dashboard</a>
       <span class="breadcrumb-separator">›</span>
       <a href="/{{ table_name }}" class="breadcrumb-item">{{ table_name }}</a>
       <span class="breadcrumb-separator">›</span>
       <span class="breadcrumb-item active">Row {{ row_index }}</span>
   </div>

    <!-- Compact Header -->
    <div class="row-header">
        <h1>Row {{ row_index }}</h1>
        <p class="subtitle">{{ table_name }} • {{ columns|length }} fields</p>

        <div class="stats-grid">
            {% if header_data.get('created_at') %}
            <div class="stat-card">
                <div class="stat-value">{{ header_data['created_at'] }}</div>
                <div class="stat-label">Created At</div>
            </div>
            {% endif %}
            {% if header_data.get('created_by') %}
            <div class="stat-card">
                <div class="stat-value">{{ header_data['created_by'] }}</div>
                <div class="stat-label">Created By</div>
            </div>
            {% endif %}
            {% if header_data.get('modified_at') %}
            <div class="stat-card">
                <div class="stat-value">{{ header_data['modified_at'] }}</div>
                <div class="stat-label">Modified At</div>
            </div>
            {% endif %}
            {% if header_data.get('modified_by') %}
            <div class="stat-card">
                <div class="stat-value">{{ header_data['modified_by'] }}</div>
                <div class="stat-label">Modified By</div>
            </div>
            {% endif %}
        </div>
    </div>

   <!-- Controls -->
   <div class="row-controls">
       <button class="btn" onclick="toggleEditMode()" id="editToggle">
           ✏️ Edit Row
       </button>
       <button class="btn secondary" onclick="goBack()">
           ← Back to Table
       </button>
       <button class="btn danger" onclick="deleteCurrentRow()">
           🗑️ Delete Row
       </button>
   </div>

   <!-- Row Data -->
   <div class="row-data-card" id="rowDataCard">
       <h3>Row Data</h3>

       <div id="viewMode" class="row-fields">
           {% for column in columns %}
           <div class="field-group">
               <label class="field-label">{{ column }}</label>
               <div class="field-value" data-column="{{ column }}">
                   {% if row_data[column] %}
                       {{ row_data[column] }}
                   {% else %}
                       <span class="empty-value">—</span>
                   {% endif %}
               </div>
           </div>
           {% endfor %}
       </div>

       <div id="editMode" class="edit-form" style="display: none;">
           {% for column in column_info %}
           <div class="form-group">
               <label for="edit_{{ column.name }}">{{ column.name }}</label>
               {% if column.type == 'checkbox' %}
                   <input type="checkbox"
                          id="edit_{{ column.name }}"
                          name="{{ column.name }}"
                          {% if row_data[column.name] %}checked{% endif %}>
               {% elif column.type == 'number' %}
                   <input type="number"
                          id="edit_{{ column.name }}"
                          name="{{ column.name }}"
                          value="{{ row_data[column.name] or '' }}"
                          step="any">
               {% elif column.type == 'datetime-local' %}
                   <input type="datetime-local"
                          id="edit_{{ column.name }}"
                          name="{{ column.name }}"
                          value="{{ row_data[column.name] or '' }}">
               {% else %}
                   <input type="text"
                          id="edit_{{ column.name }}"
                          name="{{ column.name }}"
                          value="{{ row_data[column.name] or '' }}">
               {% endif %}
           </div>
           {% endfor %}

           <div class="controls">
               <button type="button" class="btn success" onclick="saveChanges()">
                   💾 Save Changes
               </button>
               <button type="button" class="btn secondary" onclick="cancelEdit()">
                   ✖️ Cancel
               </button>
           </div>
       </div>
   </div>

   <script>
   {% include 'admin.js' %}
   </script>
</body>
</html>