{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<style>
    // Create variables
    :root {
        --main-radius: 25px;
        --main-padding: 15px;
    }

    .grid {
        display: grid;
        margin-top: 0px;
        min-height: 100vh;
        grid-template-columns: auto 50%;
        grid-template-rows: minmax(auto, .05fr) minmax(auto, 1fr);
        grid-template-areas:
            "selectUserGroupsButton selectedUserGroupsRemoveButton"
            "selectUserGroups selectedUserGroups";      
        grid-gap: 0.1rem;
        background-color: white;
    }

    #selectedUserGroupsRemoveButton {
        grid-area: selectedUserGroupsRemoveButton;
        border-radius:var(--main-radius);
        padding-top:var(--main-padding);
        //color: #66F854;
        color: black;
        background: white;
    }

    #selectUserGroupsButton {
        grid-area: selectUserGroupsButton;
        border-radius:var(--main-radius);
        padding-top:var(--main-padding);
        //color: #66F854;
        color: black;
        background: white;
    }

    #selectedUserGroups {
        grid-area: selectedUserGroups;
        border-radius:var(--main-radius);
        padding-top:var(--main-padding);
        //color: #66F854;
        color: black;
        background: white;
    }

    #selectUserGroups {
        grid-area: selectUserGroups;
        border-radius:var(--main-radius);
        padding-top:var(--main-padding);
        overflow: auto;
        color: #66F854;
        background: white;
        //border-right: 2px solid black;
    }

    @media only screen and (max-width: 550px) {
        .grid {
            grid-template-columns: 1fr;
            grid-template-rows: .3fr 3fr;
            grid-template-areas:
                "selectUserGroupsButton selectedUserGroupsRemoveButton"
                "selectUserGroups"
                "selectedUserGroups"
                ;
        }
    }

</style>
{% endblock extra_css %}

{% block content %}
<!-- <div class="container-fluid"> -->
<div class="mainBodyDiv">
    <div class='grid'>
        <nav class="navbar navbar-expand-sm topbar fixed-top secondNavbarStyle">
            <div style="display:inline-block; padding-left:2px; margin-top:1px">
                <a href="#" data-toggle="modal" data-target="#deleteDomainModal">Delete Domains</a>&emsp;&emsp;&emsp;
                <a href="#" id="addUsersToDomain">Add / Modify User-Roles For Selected Domains</a>&emsp;&emsp;
            </div>
        </nav>

        <div style="margin-top:10px; display:flex; flex-direction: row; justify-content:left; align-items: center">
            <label for='createDomainId' style="color:black; margin-left:20px; margin-top:10px;">New Domain:</label>&emsp; <input type="text" class="form-control" id="createDomainId" value="" placeholder="" style="width:300px"/>
            <button style="float:right; margin:5px;" onclick="createDomain()" class="btn btn-sm btn-outline-primary">
                Create
            </button>
        </div>
        <br>

        <div id="existingDomains" class="mt-3 pl-3" style="width:80%">
            <!-- <table class="mt-0 table table-sm table-bordered table-fixed tableFixHead tableMessages"> -->
            <table class="mt-0 table table-sm table-bordered tableFixHead3"> 
                <thead>
                    <tr>
                        <th scope="col" class="textAlignCenter">Select</th>
                        <th scope="col" class="textAlignCenter">Domains</th>
                        <th scope="col" class="textAlignCenter">Users</th>
                    </tr>
                </thead>
                <tbody id="domainTableData"></tbody>
            </table>
        </div>
    </div>
</div>

<div class="modal" id="deleteDomainModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" 
    aria-labelledby="deleteDomain" aria-hidden="false">
    <div class="modal-dialog modal-dialog-scrollable" style="max-width:30%; height:300px; overflow:auto; color:black">
        <div class="modal-content">
            
            <div class="modal-header">
				<div class="fileRowInlineBlockRight">
					<h6 class="modal-title" id="editFile">Delete Domain&ensp;</h6>
				</div>
            </div>

            <div class="modal-body" style="margin-top:2px">
				<div class="row">&ensp;&ensp;This will remove all saved-pipelines, <br>&emsp;test-results, playbooks, envs and user account memberships in the domain!<br><br>&emsp;Are you sure that you want to delete the domain?</div>
            </div>

            <div class="modal-footer">
                <button type="button" id="deleteDomain" class="btn btn-danger" data-dismiss="modal">Delete Domain</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="addUsersToDomainModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" 
    aria-labelledby="addUsersToDomainModal" aria-hidden="false">
    <div class="modal-dialog modal-dialog-scrollable" style="max-width:50%; height:600px; overflow:auto; color:black">
        <div class="modal-content">
            
            <div class="modal-header">
				<div class="fileRowInlineBlockRight">
                    <h7 class="modal-title" id="addUsersToDomainsId"></h7>
				</div>
            </div>

            <div class="modal-body" style="margin-top:2px">
				<div id="insertUsersTableData"></div>
            </div>

            <div class="modal-footer">
                <button type="button" id="removeUsersFromDomainButton" class="btn btn-danger" data-dismiss="modal">Remove Users</button>
                <button type="button" id="addUsersToDomainButton" class="btn btn-success" data-dismiss="modal">Add / Modify Users</button>
                <button type="button" id="closeAddUsersToDomainModal" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block extra_js %}
    <script type="module" src="{% static 'commons/js/domains.js' %}"></script>
{% endblock extra_js %}