{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://promptcontracts.org/schemas/pcsl-es.schema.json",
  "title": "PCSL Expectation Suite",
  "description": "Schema for Expectation Suite (ES) artefacts",
  "type": "object",
  "required": ["pcsl", "checks"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "pcsl": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "PCSL version (SemVer)"
    },
    "checks": {
      "type": "array",
      "description": "List of checks to perform",
      "items": {
        "type": "object",
        "required": ["type"],
        "properties": {
          "type": {
            "type": "string",
            "description": "Qualified check type identifier"
          },
          "fields": {
            "type": "array",
            "items": {"type": "string"},
            "description": "For json_required: list of required fields"
          },
          "field": {
            "type": "string",
            "description": "For enum: JSONPath to field"
          },
          "allowed": {
            "type": "array",
            "description": "For enum: allowed values"
          },
          "pattern": {
            "type": "string",
            "description": "For regex checks: regex pattern"
          },
          "max_out": {
            "type": "integer",
            "description": "For token_budget: max output tokens"
          },
          "p95_ms": {
            "type": "integer",
            "description": "For latency_budget: p95 latency in ms"
          }
        }
      }
    }
  }
}

