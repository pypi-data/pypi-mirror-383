[tox]
env_list =
    docs,
    py{311,312,313}-core,
    py{311,312,313}-all
isolated_build = true
requires =
    tox-uv>=1.0.0

[testenv]
# Common configuration for all environments
runner = uv-venv-lock-runner
dependency_groups = test
set_env =
    PYTHONPATH = {toxinidir}
    PY_IGNORE_IMPORTMISMATCH = 1
commands_pre =
    python -c "import sys; print(f'Python {sys.version}')"

[testenv:docs]
# Documentation build environment
dependency_groups = docs
allowlist_externals = mkdocs
commands =
    mkdocs build

[testenv:py{311,312,313}-core]
# Core-only installation - no optional dependencies
dependency_groups = test
commands =
    pytest --cov --cov-report=xml

[testenv:py{311,312,313}-all]
# Full installation with all optional dependencies
dependency_groups = test
extras = all
commands =
    pytest --cov --cov-report=xml
