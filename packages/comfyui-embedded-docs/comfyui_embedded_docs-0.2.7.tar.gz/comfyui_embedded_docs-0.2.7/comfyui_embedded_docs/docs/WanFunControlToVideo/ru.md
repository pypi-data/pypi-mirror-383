> Эта документация была создана с помощью ИИ. Если вы обнаружите ошибки или у вас есть предложения по улучшению, пожалуйста, внесите свой вклад! [Редактировать на GitHub](https://github.com/Comfy-Org/embedded-docs/blob/main/comfyui_embedded_docs/docs/WanFunControlToVideo/ru.md)

Этот узел был добавлен для поддержки модели управления Alibaba Wan Fun для генерации видео и был включен после [этого коммита](https://github.com/comfyanonymous/ComfyUI/commit/3661c833bcc41b788a7c9f0e7bc48524f8ee5f82).

- **Назначение:** Подготовить информацию о кондиционировании, необходимую для генерации видео, с использованием модели Wan 2.1 Fun Control.

Узел WanFunControlToVideo — это дополнение ComfyUI, разработанное для поддержки моделей управления Wan Fun для генерации видео, предназначенное для использования управления WanFun при создании видео.

Этот узел служит точкой подготовки необходимой информации о кондиционировании и инициализирует центральную точку латентного пространства, направляя последующий процесс генерации видео с использованием модели Wan 2.1 Fun. Название узла четко указывает на его функцию: он принимает различные входные данные и преобразует их в формат, пригодный для управления генерацией видео в рамках WanFun.

Положение узла в иерархии узлов ComfyUI указывает на то, что он работает на ранних этапах конвейера генерации видео, фокусируясь на манипуляции сигналами кондиционирования до фактической выборки или декодирования видеокадров.

## Входы

| Имя параметра      | Обязательный | Тип данных         | Описание                                                  | Значение по умолчанию |
|:-------------------|:-------------|:-------------------|:----------------------------------------------------------|:---------------------|
| `позитивный`           | Да           | CONDITIONING       | Стандартные данные положительного кондиционирования ComfyUI, обычно от узла "CLIP Text Encode". Положительный промпт описывает содержание, предмет и художественный стиль, которые пользователь представляет для сгенерированного видео. | Н/Д  |
| `негативный`           | Да           | CONDITIONING       | Стандартные данные отрицательного кондиционирования ComfyUI, обычно создаваемые узлом "CLIP Text Encode". Отрицательный промпт указывает элементы, стили или артефакты, которые пользователь хочет избежать в сгенерированном видео. | Н/Д  |
| `vae`                | Да           | VAE                | Требуется модель VAE (Вариационный автоэнкодер), совместимая с семейством моделей Wan 2.1 Fun, используемая для кодирования и декодирования изображений/видеоданных. | Н/Д  |
| `ширина`              | Да           | INT                | Желаемая ширина выходных видеокадров в пикселях, со значением по умолчанию 832, минимальным значением 16, максимальным значением, определяемым `nodes.MAX_RESOLUTION`, и шагом 16. | 832  |
| `высота`             | Да           | INT                | Желаемая высота выходных видеокадров в пикселях, со значением по умолчанию 480, минимальным значением 16, максимальным значением, определяемым `nodes.MAX_RESOLUTION`, и шагом 16. | 480  |
| `длина`             | Да           | INT                | Общее количество кадров в генерируемом видео, со значением по умолчанию 81, минимальным значением 1, максимальным значением, определяемым `nodes.MAX_RESOLUTION`, и шагом 4. | 81   |
| `размер_пакета`         | Да           | INT                | Количество видео, генерируемых в одной партии, со значением по умолчанию 1, минимальным значением 1 и максимальным значением 4096. | 1    |
| `clip_vision_output` | Нет          | CLIP_VISION_OUTPUT | (Опционально) Визуальные признаки, извлеченные моделью CLIP vision, позволяющие осуществлять визуальное руководство по стилю и содержанию. | None |
| `стартовое_изображение`        | Нет          | IMAGE              | (Опционально) Начальное изображение, которое влияет на начало генерируемого видео. | None |
| `control_video`      | Нет          | IMAGE              | (Опционально) Позволяет пользователям предоставить предварительно обработанное эталонное видео для ControlNet, которое будет направлять движение и потенциальную структуру генерируемого видео.| None |

## Выходы

| Имя параметра      | Тип данных         | Описание                                                  |
|:-------------------|:-------------------|:----------------------------------------------------------|
| `негативный`           | CONDITIONING       | Предоставляет улучшенные данные положительного кондиционирования, включая закодированные `стартовое_изображение` и `control_video`. |
| `латентный`           | CONDITIONING       | Предоставляет данные отрицательного кондиционирования, которые также были улучшены и содержат тот же `concat_latent_image`. |
| `latent`             | LATENT             | Словарь, содержащий пустой латентный тензор с ключом "samples". |
