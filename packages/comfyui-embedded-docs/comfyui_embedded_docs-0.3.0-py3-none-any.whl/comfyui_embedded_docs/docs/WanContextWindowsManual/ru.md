> Эта документация была создана с помощью ИИ. Если вы обнаружите ошибки или у вас есть предложения по улучшению, пожалуйста, внесите свой вклад! [Редактировать на GitHub](https://github.com/Comfy-Org/embedded-docs/blob/main/comfyui_embedded_docs/docs/WanContextWindowsManual/ru.md)

Узел WAN Context Windows (Manual) позволяет вручную настраивать контекстные окна для моделей типа WAN с двумерной обработкой. Он применяет пользовательские настройки контекстных окон во время сэмплирования, указывая длину окна, перекрытие, метод планирования и технику слияния. Это даёт точный контроль над тем, как модель обрабатывает информацию в различных областях контекста.

## Входные параметры

| Параметр | Тип данных | Обязательный | Диапазон | Описание |
|-----------|-----------|----------|-------|-------------|
| `model` | MODEL | Да | - | Модель, к которой применяются контекстные окна во время сэмплирования. |
| `context_length` | INT | Да | 1 - 1048576 | Длина контекстного окна (по умолчанию: 81). |
| `context_overlap` | INT | Да | 0 - 1048576 | Перекрытие контекстных окон (по умолчанию: 30). |
| `context_schedule` | COMBO | Да | "static_standard"<br>"uniform_standard"<br>"uniform_looped"<br>"batched" | Стратегия перемещения контекстного окна. |
| `context_stride` | INT | Да | 1 - 1048576 | Шаг перемещения контекстного окна; применяется только к равномерным (uniform) стратегиям (по умолчанию: 1). |
| `closed_loop` | BOOLEAN | Да | - | Замыкать ли контекстное окно в цикл; применяется только к зацикленным (looped) стратегиям (по умолчанию: False). |
| `fuse_method` | COMBO | Да | "pyramid" | Метод слияния контекстных окон (по умолчанию: "pyramid"). |

**Примечание:** Параметр `context_stride` влияет только на равномерные (uniform) стратегии, а `closed_loop` применяется только к зацикленным (looped) стратегиям. Значения длины контекста и перекрытия автоматически корректируются для обеспечения минимально допустимых значений во время обработки.

## Выходные параметры

| Выходной параметр | Тип данных | Описание |
|-------------|-----------|-------------|
| `model` | MODEL | Модель с применённой конфигурацией контекстных окон. |
