> Эта документация была создана с помощью ИИ. Если вы обнаружите ошибки или у вас есть предложения по улучшению, пожалуйста, внесите свой вклад! [Редактировать на GitHub](https://github.com/Comfy-Org/embedded-docs/blob/main/comfyui_embedded_docs/docs/WanAnimateToVideo/ru.md)

Узел WanAnimateToVideo генерирует видеоконтент, комбинируя несколько входных условий, включая референсы поз, мимику и фоновые элементы. Он обрабатывает различные видеовходы для создания связных анимированных последовательностей, сохраняя временную согласованность между кадрами. Узел выполняет операции в латентном пространстве и может расширять существующие видео, продолжая паттерны движения.

## Входы

| Параметр | Тип данных | Обязательный | Диапазон | Описание |
|-----------|-----------|----------|-------|-------------|
| `positive` | CONDITIONING | Да | - | Позитивное кондиционирование для направления генерации к желаемому контенту |
| `negative` | CONDITIONING | Да | - | Негативное кондиционирование для отклонения генерации от нежелательного контента |
| `vae` | VAE | Да | - | VAE-модель, используемая для кодирования и декодирования изображений |
| `width` | INT | Нет | 16 до MAX_RESOLUTION | Ширина выходного видео в пикселях (по умолчанию: 832, шаг: 16) |
| `height` | INT | Нет | 16 до MAX_RESOLUTION | Высота выходного видео в пикселях (по умолчанию: 480, шаг: 16) |
| `length` | INT | Нет | 1 до MAX_RESOLUTION | Количество генерируемых кадров (по умолчанию: 77, шаг: 4) |
| `batch_size` | INT | Нет | 1 до 4096 | Количество видео для одновременной генерации (по умолчанию: 1) |
| `clip_vision_output` | CLIP_VISION_OUTPUT | Нет | - | Опциональный выход CLIP vision модели для дополнительного кондиционирования |
| `reference_image` | IMAGE | Нет | - | Референсное изображение, используемое как отправная точка для генерации |
| `face_video` | IMAGE | Нет | - | Видеовход, предоставляющий ориентиры для мимики |
| `pose_video` | IMAGE | Нет | - | Видеовход, предоставляющий ориентиры для позы и движения |
| `continue_motion_max_frames` | INT | Нет | 1 до MAX_RESOLUTION | Максимальное количество кадров для продолжения предыдущего движения (по умолчанию: 5, шаг: 4) |
| `background_video` | IMAGE | Нет | - | Фоновое видео для композиции с генерируемым контентом |
| `character_mask` | MASK | Нет | - | Маска, определяющая области персонажа для выборочной обработки |
| `continue_motion` | IMAGE | Нет | - | Предыдущая последовательность движения для продолжения с целью временной согласованности |
| `video_frame_offset` | INT | Нет | 0 до MAX_RESOLUTION | Количество кадров для пропуска во всех входных видео. Используется для генерации длинных видео по частям. Подключите к выходу video_frame_offset предыдущего узла для расширения видео. (по умолчанию: 0, шаг: 1) |

**Ограничения параметров:**

- При предоставлении `pose_video` и активной логике `trim_to_pose_video` длина выхода будет скорректирована в соответствии с продолжительностью видео с позой
- `face_video` автоматически масштабируется до разрешения 512x512 при обработке
- Кадры `continue_motion` ограничены параметром `continue_motion_max_frames`
- Входные видео (`face_video`, `pose_video`, `background_video`, `character_mask`) смещаются на `video_frame_offset` перед обработкой
- Если `character_mask` содержит только один кадр, он будет повторен для всех кадров
- При предоставлении `clip_vision_output` он применяется к обоим типам кондиционирования (позитивному и негативному)

## Выходы

| Имя выхода | Тип данных | Описание |
|-------------|-----------|-------------|
| `positive` | CONDITIONING | Модифицированное позитивное кондиционирование с дополнительным видеоконтекстом |
| `negative` | CONDITIONING | Модифицированное негативное кондиционирование с дополнительным видеоконтекстом |
| `latent` | LATENT | Сгенерированный видеоконтент в формате латентного пространства |
| `trim_latent` | INT | Информация об обрезке латентного пространства для последующей обработки |
| `trim_image` | INT | Информация об обрезке пространства изображений для референсных кадров движения |
| `video_frame_offset` | INT | Обновленное смещение кадров для продолжения генерации видео по частям |
