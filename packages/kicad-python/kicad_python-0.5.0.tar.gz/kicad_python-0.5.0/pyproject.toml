[project]
name = "kicad-python"
version = "0.5.0"
description = "KiCad API Python Bindings"
authors = [
    { name = "The KiCad Development Team" },
]
license = "MIT"
readme = "README.md"
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Topic :: Scientific/Engineering :: Electronic Design Automation (EDA)",
    "Typing :: Typed",
]
requires-python = ">=3.9"
dependencies = [
    "protobuf >=5.29, <6",
    "pynng >=0.8.0, <0.9.0",
    # 3.10: TypeAlias (mypy-protobuf generated code)
    # 3.11: Self
    # 3.13: @deprecated
    "typing_extensions >=4.13.2 ; python_version < '3.13'",
]

[project.urls]
homepage = "https://kicad.org/"
documentation = "https://docs.kicad.org/kicad-python-main/"
repository = "https://gitlab.com/kicad/code/kicad-python"
issues = "https://gitlab.com/kicad/code/kicad-python/-/issues"

[tool.poetry]
packages = [
    { include = "kipy" },
]
include = ["**/kipy/**/*.py", "**/kipy/**/*.pyi"]

[tool.poetry.dependencies]
python = "<4.0,>=3.9"

[tool.poetry.group.dev.dependencies]
nox = "^2025.2.9"
ruff = "^0.9"
protoletariat = "^3.3"
mypy-protobuf = "^3.6"
mypy = "^1.14.0"
setuptools = "^75.6.0"
sphinx = "7.4"
furo = "^2024.8.6"
pytest = "^8.3.4"

[tool.poetry.requires-plugins]
poetry-plugin-export = ">=1.8"

[build-system]
requires = [
    "poetry-core>=2.0.0,<3.0.0",
    "protoletariat == 3.3.*",
    "setuptools",
    "mypy-protobuf == 3.6.*"
]
build-backend = "poetry.core.masonry.api"

[tool.poetry.build]
generate-setup-file = true
script = "build.py"

[tool.ruff]
exclude = [
    "kipy/proto"
]

[tool.mypy]
exclude = [
    "kipy/proto"
]

[[tool.mypy.overrides]]
module = "pynng"
ignore_missing_imports = true

[tool.pytest.ini_options]
testpaths = [
    "tests",
]
