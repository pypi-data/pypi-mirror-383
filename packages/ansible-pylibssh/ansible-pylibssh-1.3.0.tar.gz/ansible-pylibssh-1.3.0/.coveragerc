[html]
directory = .test-results/pytest/cov/
show_contexts = true
skip_covered = false

[paths]
source =
  src
  */src
  *\src
  */lib/python*/site-packages
  */pypy*/site-packages
  *\Lib\site-packages

[report]
exclude_also =
  \#\s*pragma: no cover
  ^\s*raise AssertionError\b
  ^\s*raise NotImplementedError\b
  ^\s*return NotImplemented\b
  ^\s*raise$
  ^if __name__ == ['"]__main__['"]:$
# fail_under = 100
skip_covered = true
skip_empty = true
show_missing = true

[run]
branch = true
cover_pylib = false
# NOTE: `disable_warnings` is needed when `pytest-cov` runs in tandem
# NOTE: with `pytest-xdist`. These warnings are false negative in this
# NOTE: context.
#
# NOTE: It's `coveragepy` that emits the warnings and previously they
# NOTE: wouldn't get on the radar of `pytest`'s `filterwarnings`
# NOTE: mechanism. This changed, however, with `pytest >= 8.4`. And
# NOTE: since we set `filterwarnings = error`, those warnings are being
# NOTE: raised as exceptions, cascading into `pytest`'s internals and
# NOTE: causing tracebacks and crashes of the test sessions.
#
# Ref:
# * https://github.com/pytest-dev/pytest-cov/issues/693
# * https://github.com/pytest-dev/pytest-cov/pull/695
# * https://github.com/pytest-dev/pytest-cov/pull/696
disable_warnings =
  module-not-measured
plugins =
#   covdefaults
  Cython.Coverage
relative_files = true
source =
  .
source_pkgs =
  pylibsshext
