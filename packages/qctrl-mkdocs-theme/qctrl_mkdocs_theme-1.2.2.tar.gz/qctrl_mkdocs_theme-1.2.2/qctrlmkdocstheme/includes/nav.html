<nav class="nav flex-column{{ ' ms-3' if parent_id != 'nav' }}">
  {% for item in items %}
    {% set item_id = namespace ~ '-' ~ parent_id ~ '-' ~ loop.index %}
    {% set is_active = item.active or (item.children and item.children | selectattr('active') | list) %}
    {% if item.is_page or item.is_link %}
      <a
        class="pt-0 nav-link{{ ' active' if is_active }}"
        {{ 'aria-current="page"' if is_active }}
        href="{{ item.url | url }}">
        {{ item.title }}
      </a>
    {% elif item.is_section %}
      <a
        class="pt-0 nav-link{{ ' active' if is_active }}"
        href="#{{ item_id }}"
        role="button"
        data-bs-toggle="collapse"
        aria-expanded="{{ 'true' if is_active else 'false' }}"
        aria-controls="{{ item_id }}">
        {{ item.title }}
      </a>
    {% endif %}
    {% if item.children %}
      <div class="collapse{{ ' show' if is_active }}" id="{{ item_id }}">
        {% with items = item.children, namespace = namespace, parent_id = item_id %}
          {% include 'includes/nav.html' %}
        {% endwith %}
      </div>
    {% endif %}
  {% endfor %}
</nav>
