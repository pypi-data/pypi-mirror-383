[build-system]
requires = ["setuptools>=68.0", "appdirs>=1.4.4"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
package-dir = {"" = "src"}

[tool.setuptools.package-data]
"rwskit" = ["*.rules"]

[tool.setuptools.packages.find]
where = ["src"]
include = ["rwskit", "rwskit.*", "rwskit.**"]

# Use Ruff instead
# [tool.black]
# line-length = 88
# include = '\.pyi?$'

[tool.isort]
# This causes isort to (incorrectly) remove all blank lines between comments 
# and expressions throughout the entire file.
# lines_before_imports = 1
src_paths = ["src", "tests"]
profile = "black"
case_sensitive = true
lines_after_imports = 1
lines_between_types = 1
import_heading_future = "Future Library"
import_heading_stdlib = "Standard Library"
import_heading_thirdparty = "3rd Party Library"
import_heading_firstparty = "1st Party Library"
import_heading_localfolder = "Project Library"


[tool.pytest.ini_options]
addopts = "--color=yes"
asyncio_mode = "auto"
asyncio_default_fixture_loop_scope = "function"
console_output_style = "classic"
log_cli = true
log_cli_level = "DEBUG"
log_cli_format = "%(asctime)-15s [%(name)s]:%(lineno)4d %(levelname)s %(message)s"
log_cli_date_format = "%Y-%m-%d %H:%M:%S"
pythonpath = ["src", "tests"]

[tool.ruff]
# extend-select = ["I"]
line-length = 88
target-version = "py312"

[tool.ruff.format]
docstring-code-format = true
docstring-code-line-length = 72
preview = true
quote-style = "double"

[tool.ruff.lint]
select = ["E", "F", "I", "T", "W", "C90"]
ignore = ["E501", "E741"]

[tool.ruff.lint.isort]
lines-between-types = 1
case-sensitive = true


[project]
name = "rwskit"
version = "0.27.0"
description = "Utility methods I've found useful."
authors = [{ name = "Reid Swanson", email = "reid@reidswanson.com" }]
readme = "README.md"
license = { file = "LICENSE.md" }
dependencies = [
    "black",
    "humanize",
    "icontract",
    "isort",
    "msgspec",
    "numpy",
    "pydantic",
    "pympler",
    "pyyaml",
    "pyyaml-include",
    "ruff",
    "xxhash",
    "yamlable",
]

[project.optional-dependencies]
bayes = ["arviz", "seaborn", "aesara", "pymc"]
numpy = ["numpy", "numpy-indexed", "xarray"]
pandas = ["pandas"]
sqlalchemy = ["sqlalchemy"]
benchmarking = ["numpy", "pandas", "plotnine[all]", "tqdm"]
notebooks = [
    "memory-profiler",
    "numpy",
    "numpy-indexed",
    "numpy-groupies",
    "pandas",
    "perfplot",
    "pysort",
]
bump2version = ["bump-my-version"]
documentation = [
    "livereload",
    "six",
    "sphinx",
    "sphinx-autoapi",
    "sphinx_rtd_theme",
]
testing = [
    "aiosqlite",
    "asyncpg",
    "hypothesis",
    "numpy",
    "psycopg[binary,pool]",
    "pytest",
    "pytest-asyncio",
    "pytest-cov",
    "pytest_postgresql",
]
all = [
    "rwskit[bayes,cli,numpy,pandas,sqlalchemy,benchmarking,notebooks,bump2version,documentation,testing]",
]

[project.urls]
Homepage = "https://bitbucket.org/reidswanson/rwskit"
Documentation = "https://rwskit.readthedocs.io/en/latest"
