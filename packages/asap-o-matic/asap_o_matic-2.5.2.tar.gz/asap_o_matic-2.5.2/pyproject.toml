[build-system]
requires = ["maturin>=1.3,<2.0"]
build-backend = "maturin"

[project]
name = "asap-o-matic"
version = "2.5.2"
description = "Rearrange ASAP-seq antibody reads into something Alevin can recognize and count."
authors = [
    { name = "Miles Smith", email = "miles-smith@omrf.org" }
]
requires-python = ">=3.11"
license = { text = "GPL-3.0" }
readme = "README.md"
dependencies = [
    "typer>=0.15.1",
    "loguru>=0.7.2",
    "multiprocess>=0.70.16",
    "rich>=13.9.4",
    "fastq>=2.0.4",
    "revseq>=1.2.0",
    "miniFasta>=3.0.3",
    "joblib>=1.4.2",
    "pysam>=0.23.0",
]
classifiers = [
    "Programming Language :: Python",
    "Programming Language :: Python :: Implementation :: CPython",
    "Programming Language :: Python :: Implementation :: PyPy",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
    "Programming Language :: Python :: 3 :: Only",
    "Programming Language :: Rust",
    "Development Status :: 5 - Production/Stable",
    "Environment :: Console",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
    "Topic :: Scientific/Engineering :: Bio-Informatics",
    "Typing :: Typed",
    "Topic :: Software Development :: Libraries :: Python Modules",
]

[project.urls]
repository = "https://github.com/milescsmith/asap_o_matic"
homepage = "https://github.com/milescsmith/asap_o_matic"

[project.scripts]
asap-o-matic = "asap_o_matic.__main__:app"

[tool.maturin]
features = ["pyo3/extension-module"]
strip = true
profile = "release"
manifest-path = "Cargo.toml"
frozen = false
locked = false
config = []
unstable-flags = []
rustc-args = []
bindings = "pyo3"
python-source = "python"
sdist-generator = "cargo"
python-packages = ["asap_o_matic"]
module_name = "asap_o_matic._asap_o_matic"

[tool.pytest.ini_options]
addopts = [
    "--import-mode=importlib",
]

[dependency-groups]
dev = [
    "nox>=2025.5.1",
    "nox-uv>=0.6.2",
    "pip>=25.2",
    "pytest>=8.4.2",
    "pytest-random-order>=1.2.0",
    "pytest-xdist[psutil]>=3.8.0",
]
nox = [
    "nox-uv",
]

coverage = [
    "coverage>=7.10.7",
    "pytest-cov>=7.0.0",
]

test = [
    "pytest>=8.4.2",
    "pytest-cov",
    "pytest-random-order>=1.2.0",
    "pytest-xdist[psutil]>=3.8.0",
    "maturin",
    "maturin-import-hook",
    "uv",
]
type_check = [
    "ty>=0.0.1a21",
]
lint = [
    "ruff>=0.13.2",
]