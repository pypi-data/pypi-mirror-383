<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ session.suite_name or 'Test Suite' }} - Email Report</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #000000;
            line-height: 1.6;
        }

        .email-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .email-header {
            background-color: #007bff;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .email-header h1 {
            margin: 0;
            font-size: 24px;
        }

        .email-header .subtitle {
            margin-top: 5px;
            font-size: 14px;
            opacity: 0.9;
        }

        .email-subject {
            background-color: #e9ecef;
            padding: 15px 20px;
            border-bottom: 1px solid #dee2e6;
        }

        .email-subject h2 {
            margin: 0;
            font-size: 16px;
            color: #495057;
        }

        .subject-text {
            font-family: monospace;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 14px;
            border: 1px solid #dee2e6;
        }

        .email-content {
            padding: 20px;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .summary-card {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .summary-card h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #6c757d;
            text-transform: uppercase;
        }

        .summary-card .value {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }

        .summary-card.total .value {
            color: #007bff;
        }

        .summary-card.passed .value {
            color: #28a745;
        }

        .summary-card.failed .value {
            color: #dc3545;
        }

        .summary-card.skipped .value {
            color: #ffc107;
        }

        .summary-card.rate .value {
            color: #17a2b8;
        }

        .section {
            margin-bottom: 30px;
        }

        .section h2 {
            font-size: 18px;
            color: #495057;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }

        .test-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .test-table th,
        .test-table td {
            border: 1px solid #dee2e6;
            padding: 8px 12px;
            text-align: left;
        }

        .test-table th {
            background-color: #f8f9fa;
            font-weight: bold;
            color: #495057;
        }

        .test-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .test-table tr:hover {
            background-color: #e9ecef;
        }

        .status-passed {
            color: #28a745;
            font-weight: bold;
        }

        .status-failed {
            color: #dc3545;
            font-weight: bold;
        }

        .status-skipped {
            color: #ffc107;
            font-weight: bold;
        }

        .tag {
            background-color: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 11px;
            margin-right: 4px;
            display: inline-block;
        }

        .failed-tests {
            background-color: #fff5f5;
            border: 1px solid #fed7d7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .failed-tests h3 {
            margin-top: 0;
            color: #c53030;
            font-size: 16px;
        }

        .failed-test-item {
            margin-bottom: 15px;
            padding: 10px;
            background-color: #ffffff;
            border-left: 4px solid #dc3545;
            border-radius: 4px;
        }

        .failed-test-name {
            font-weight: bold;
            color: #495057;
            margin-bottom: 5px;
        }

        .failed-test-error {
            color: #dc3545;
            font-size: 12px;
            font-family: monospace;
            background-color: #f8f9fa;
            padding: 5px;
            border-radius: 3px;
        }

        .suite-stats {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .suite-stats h3 {
            margin-top: 0;
            color: #495057;
        }

        .suite-stats-table {
            width: 100%;
            border-collapse: collapse;
        }

        .suite-stats-table th,
        .suite-stats-table td {
            border: 1px solid #dee2e6;
            padding: 6px 10px;
            text-align: left;
            font-size: 13px;
        }

        .suite-stats-table th {
            background-color: #e9ecef;
            font-weight: bold;
        }

        .email-footer {
            background-color: #f8f9fa;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #dee2e6;
            font-size: 12px;
            color: #6c757d;
        }

        .copy-section {
            background-color: #e9ecef;
            padding: 15px 20px;
            border-top: 1px solid #dee2e6;
        }

        .copy-section h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #495057;
        }

        .copy-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .copy-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .copy-btn:hover {
            background-color: #0056b3;
        }

        .copy-btn.success {
            background-color: #28a745;
        }

        @media (max-width: 600px) {
            .summary-cards {
                grid-template-columns: repeat(2, 1fr);
            }

            .test-table {
                font-size: 12px;
            }

            .test-table th,
            .test-table td {
                padding: 6px 8px;
            }
        }
    </style>
</head>

<body>
    <div class="email-container">
        <!-- Email Header -->
        <div class="email-header">
            <h1>üìß {{ session.suite_name or 'Test Suite' }} - Test Report</h1>
            <div class="subtitle">{{ session.end_time.strftime('%Y-%m-%d %H:%M:%S') }}</div>
        </div>

        <!-- Email Subject -->
        <div class="email-subject">
            <h2>üìã Email Subject</h2>
            <div class="subject-text" id="emailSubject">{{ session.suite_name or 'Test Suite' }} Report : {{
                session.end_time.strftime('%Y:%m:%d') }}: Total : {{ summary.total }} ; Pass : {{ summary.passed }}:
                Fail : {{ summary.failed }} ; PassWExcep: {{ summary.passed }}/{{ summary.total }}</div>
        </div>

        <!-- Email Content -->
        <div class="email-content">
            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="summary-card total">
                    <h3>Total Tests</h3>
                    <div class="value">{{ summary.total }}</div>
                </div>
                <div class="summary-card passed">
                    <h3>Passed</h3>
                    <div class="value">{{ summary.passed }}</div>
                </div>
                <div class="summary-card failed">
                    <h3>Failed</h3>
                    <div class="value">{{ summary.failed }}</div>
                </div>
                {% if summary.skipped > 0 %}
                <div class="summary-card skipped">
                    <h3>Skipped</h3>
                    <div class="value">{{ summary.skipped }}</div>
                </div>
                {% endif %}
                <div class="summary-card rate">
                    <h3>Pass Rate</h3>
                    <div class="value">{{ "%.1f"|format(summary.pass_rate) }}%</div>
                </div>
            </div>

            <!-- Failed Tests Section -->
            {% if summary.failed > 0 %}
            <div class="section">
                <div class="failed-tests">
                    <h3>‚ùå Failed Tests ({{ summary.failed }})</h3>
                    {% for scenario in scenarios %}
                    {% if scenario.status == 'failed' %}
                    <div class="failed-test-item">
                        <div class="failed-test-name">{{ scenario.name }}</div>
                        {% if scenario.feature %}
                        <div style="font-size: 12px; color: #6c757d; margin-bottom: 5px;">
                            Suite: {{ scenario.feature }}
                        </div>
                        {% endif %}
                        {% if scenario.error %}
                        <div class="failed-test-error">{{ scenario.error[:200] }}{% if scenario.error|length > 200
                            %}...{% endif %}</div>
                        {% endif %}
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Test Results Table -->
            <div class="section">
                <h2>üìä Test Results</h2>
                <table class="test-table">
                    <thead>
                        <tr>
                            <th>Test Name</th>
                            <th>Status</th>
                            <th>Suite</th>
                            <th>Duration</th>
                            <th>Tags</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for scenario in scenarios %}
                        <tr>
                            <td>{{ scenario.name }}</td>
                            <td class="status-{{ scenario.status }}">{{ scenario.status|upper }}</td>
                            <td>{{ scenario.feature or 'Unknown' }}</td>
                            <td>{{ "%.3f"|format(scenario.duration) }}s</td>
                            <td>
                                {% for tag in scenario.tags %}
                                <span class="tag">{{ tag }}</span>
                                {% endfor %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <!-- Suite Statistics -->
            {% if features %}
            <div class="section">
                <div class="suite-stats">
                    <h3>üì¶ Suite Statistics</h3>
                    <table class="suite-stats-table">
                        <thead>
                            <tr>
                                <th>Suite</th>
                                <th>Total</th>
                                <th>Passed</th>
                                <th>Failed</th>
                                <th>Pass Rate</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for feature in features %}
                            <tr>
                                <td>{{ feature.name }}</td>
                                <td>{{ feature.passed + feature.failed + feature.skipped }}</td>
                                <td class="status-passed">{{ feature.passed }}</td>
                                <td class="status-failed">{{ feature.failed }}</td>
                                <td>
                                    {% set total = feature.passed + feature.failed + feature.skipped %}
                                    {% if total > 0 %}
                                    {{ "%.1f"|format((feature.passed / total) * 100) }}%
                                    {% else %}
                                    0.0%
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            {% endif %}

            <!-- Key Metrics -->
            <div class="section">
                <h2>üìà Key Metrics</h2>
                <ul style="list-style-type: none; padding: 0;">
                    <li style="margin-bottom: 8px;">üéØ <strong>Total Execution Time:</strong> {{
                        "%.2f"|format(session.duration) }} seconds</li>
                    <li style="margin-bottom: 8px;">üìÖ <strong>Test Date:</strong> {{
                        session.end_time.strftime('%Y-%m-%d') }}</li>
                    <li style="margin-bottom: 8px;">‚è∞ <strong>Test Time:</strong> {{
                        session.end_time.strftime('%H:%M:%S') }}</li>
                    <li style="margin-bottom: 8px;">üè∑Ô∏è <strong>Suite:</strong> {{ session.suite_name or 'Test Suite' }}
                    </li>
                    {% if summary.failed == 0 %}
                    <li style="margin-bottom: 8px;">‚úÖ <strong>Status:</strong> <span style="color: #28a745;">All Tests
                            Passed</span></li>
                    {% else %}
                    <li style="margin-bottom: 8px;">‚ö†Ô∏è <strong>Status:</strong> <span style="color: #dc3545;">{{
                            summary.failed }} Test(s) Failed</span></li>
                    {% endif %}
                </ul>
            </div>
        </div>

        <!-- Copy Section -->
        <div class="copy-section">
            <h3>üìã Copy Email Content</h3>
            <p style="margin: 0 0 10px 0; font-size: 12px; color: #6c757d;">
                Choose the best format for your email client:
            </p>
            <ul style="margin: 0 0 10px 0; font-size: 12px; color: #6c757d; padding-left: 20px;">
                <li><strong>Copy Subject:</strong> Email subject line only</li>
                <li><strong>Copy Plain Text:</strong> Best for all email clients (recommended)</li>
                <li><strong>Copy Outlook HTML:</strong> Rich formatting for Outlook/modern email clients</li>
                <li><strong>Open Email Client:</strong> Automatically opens your default email app</li>
            </ul>
            <div class="copy-buttons">
                <button class="copy-btn" onclick="copySubject()">üìß Copy Subject</button>
                <button class="copy-btn" onclick="copyPlainText()">ÔøΩ Coppy Plain Text</button>
                <button class="copy-btn" onclick="copyFullReport()">üìÑ Copy Outlook HTML</button>
                <button class="copy-btn" onclick="openEmailClient()">‚úâÔ∏è Open Email Client</button>
            </div>
        </div>

        <!-- Footer -->
        <div class="email-footer">
            Generated by pytest-bdd-reporter on {{ session.end_time.strftime('%Y-%m-%d %H:%M:%S') }}<br>
            <a href="bdd_report.html" style="color: #007bff;">View Interactive Report</a> |
            <a href="bdd_log.html" style="color: #007bff;">View Detailed Log</a>
        </div>
    </div>

    <script>
        function copySubject() {
            const subject = document.getElementById('emailSubject').textContent;
            navigator.clipboard.writeText(subject).then(function () {
                showCopySuccess('Subject copied to clipboard!');
            }).catch(function (err) {
                alert('Failed to copy subject. Please select and copy manually.');
            });
        }

        function copyPlainText() {
            const plainText = generatePlainTextReport();
            navigator.clipboard.writeText(plainText).then(function () {
                showCopySuccess('Plain text report copied to clipboard!');
            }).catch(function (err) {
                alert('Failed to copy plain text. Please select and copy manually.');
            });
        }

        function copyFullReport() {
            // Create Outlook-compatible HTML content
            const outlookHtml = generateOutlookCompatibleHtml();
            navigator.clipboard.writeText(outlookHtml).then(function () {
                showCopySuccess('Outlook-compatible HTML copied to clipboard!');
            }).catch(function (err) {
                // Fallback: copy plain text version
                const plainText = generatePlainTextReport();
                navigator.clipboard.writeText(plainText).then(function () {
                    showCopySuccess('Plain text report copied to clipboard!');
                }).catch(function (err2) {
                    alert('Failed to copy content. Please select and copy manually.');
                });
            });
        }

        function openEmailClient() {
            const subject = encodeURIComponent(document.getElementById('emailSubject').textContent);

            // Create a comprehensive plain text body for email clients
            const plainTextBody = `Test Report Summary

Suite: {{ session.suite_name or 'Test Suite' }}
Date: {{ session.end_time.strftime('%Y-%m-%d') }}
Time: {{ session.end_time.strftime('%H:%M:%S') }}

=== SUMMARY ===
Total Tests: {{ summary.total }}
Passed: {{ summary.passed }}
Failed: {{ summary.failed }}
{% if summary.skipped > 0 %}Skipped: {{ summary.skipped }}{% endif %}
Pass Rate: {{ "%.1f"|format(summary.pass_rate) }}%
Duration: {{ "%.2f"|format(session.duration) }}s

{% if summary.failed > 0 %}=== FAILED TESTS ===
{% for scenario in scenarios %}{% if scenario.status == 'failed' %}‚Ä¢ {{ scenario.name }}{% if scenario.error %}
  Error: {{ scenario.error.split('\n')[0][:100] }}{% if scenario.error.split('\n')[0]|length > 100 %}...{% endif %}{% endif %}
{% endif %}{% endfor %}
{% endif %}=== TEST RESULTS ===
{% for scenario in scenarios %}‚Ä¢ {{ scenario.name }} - {{ scenario.status|upper }} ({{ "%.3f"|format(scenario.duration) }}s){% if scenario.feature %} [{{ scenario.feature }}]{% endif %}
{% endfor %}

Generated: {{ session.end_time.strftime('%Y-%m-%d %H:%M:%S') }}
View full report: ${window.location.href}`;

            const body = encodeURIComponent(plainTextBody);

            // Try multiple methods to open email client
            const mailtoLink = `mailto:?subject=${subject}&body=${body}`;

            // Method 1: Direct window.location
            try {
                window.location.href = mailtoLink;
                showCopySuccess('Opening email client...');
            } catch (e) {
                // Method 2: Create temporary link and click it
                try {
                    const tempLink = document.createElement('a');
                    tempLink.href = mailtoLink;
                    tempLink.style.display = 'none';
                    document.body.appendChild(tempLink);
                    tempLink.click();
                    document.body.removeChild(tempLink);
                    showCopySuccess('Opening email client...');
                } catch (e2) {
                    // Method 3: Open in new window
                    try {
                        window.open(mailtoLink, '_blank');
                        showCopySuccess('Opening email client...');
                    } catch (e3) {
                        // Fallback: Copy to clipboard and show instructions
                        navigator.clipboard.writeText(subject + '\\n\\n' + decodeURIComponent(body)).then(function () {
                            alert('Could not open email client automatically.\\n\\nEmail content has been copied to clipboard.\\nPlease paste it into your email client manually.');
                        }).catch(function () {
                            alert('Could not open email client.\\nPlease copy the content manually and paste into your email client.');
                        });
                    }
                }
            }
        }

        function generateOutlookCompatibleHtml() {
            // Generate Outlook-compatible HTML with inline styles
            return `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ session.suite_name or 'Test Suite' }} - Test Report</title>
</head>
<body style="font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #ffffff; color: #000000; line-height: 1.6;">
    
    <div style="max-width: 600px; margin: 0 auto; background-color: #ffffff; border: 1px solid #dddddd; border-radius: 8px;">
        
        <!-- Header -->
        <div style="background-color: #007bff; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0;">
            <h1 style="margin: 0; font-size: 24px;">üìß {{ session.suite_name or 'Test Suite' }} - Test Report</h1>
            <div style="margin-top: 5px; font-size: 14px; opacity: 0.9;">{{ session.end_time.strftime('%Y-%m-%d %H:%M:%S') }}</div>
        </div>
        
        <!-- Summary -->
        <div style="padding: 20px;">
            <h2 style="color: #495057; border-bottom: 2px solid #007bff; padding-bottom: 5px;">üìä Test Summary</h2>
            
            <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
                <tr>
                    <td style="padding: 8px; border: 1px solid #dee2e6; background-color: #f8f9fa; font-weight: bold;">Total Tests</td>
                    <td style="padding: 8px; border: 1px solid #dee2e6; color: #007bff; font-weight: bold;">{{ summary.total }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #dee2e6; background-color: #f8f9fa; font-weight: bold;">Passed</td>
                    <td style="padding: 8px; border: 1px solid #dee2e6; color: #28a745; font-weight: bold;">{{ summary.passed }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #dee2e6; background-color: #f8f9fa; font-weight: bold;">Failed</td>
                    <td style="padding: 8px; border: 1px solid #dee2e6; color: #dc3545; font-weight: bold;">{{ summary.failed }}</td>
                </tr>
                {% if summary.skipped > 0 %}
                <tr>
                    <td style="padding: 8px; border: 1px solid #dee2e6; background-color: #f8f9fa; font-weight: bold;">Skipped</td>
                    <td style="padding: 8px; border: 1px solid #dee2e6; color: #ffc107; font-weight: bold;">{{ summary.skipped }}</td>
                </tr>
                {% endif %}
                <tr>
                    <td style="padding: 8px; border: 1px solid #dee2e6; background-color: #f8f9fa; font-weight: bold;">Pass Rate</td>
                    <td style="padding: 8px; border: 1px solid #dee2e6; color: #17a2b8; font-weight: bold;">{{ "%.1f"|format(summary.pass_rate) }}%</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #dee2e6; background-color: #f8f9fa; font-weight: bold;">Duration</td>
                    <td style="padding: 8px; border: 1px solid #dee2e6;">{{ "%.2f"|format(session.duration) }}s</td>
                </tr>
            </table>
            
            {% if summary.failed > 0 %}
            <!-- Failed Tests -->
            <h3 style="color: #c53030; margin-top: 30px;">‚ùå Failed Tests ({{ summary.failed }})</h3>
            <div style="background-color: #fff5f5; border: 1px solid #fed7d7; border-radius: 8px; padding: 15px;">
                {% for scenario in scenarios %}
                {% if scenario.status == 'failed' %}
                <div style="margin-bottom: 15px; padding: 10px; background-color: #ffffff; border-left: 4px solid #dc3545; border-radius: 4px;">
                    <div style="font-weight: bold; color: #495057; margin-bottom: 5px;">{{ scenario.name }}</div>
                    {% if scenario.error %}
                    <div style="color: #dc3545; font-size: 12px; font-family: monospace; background-color: #f8f9fa; padding: 5px; border-radius: 3px;">{{ scenario.error[:150] }}{% if scenario.error|length > 150 %}...{% endif %}</div>
                    {% endif %}
                </div>
                {% endif %}
                {% endfor %}
            </div>
            {% endif %}
            
            <!-- Test Results -->
            <h3 style="color: #495057; margin-top: 30px;">üìã Test Results</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
                <thead>
                    <tr style="background-color: #f8f9fa;">
                        <th style="border: 1px solid #dee2e6; padding: 8px; text-align: left; font-weight: bold;">Test Name</th>
                        <th style="border: 1px solid #dee2e6; padding: 8px; text-align: left; font-weight: bold;">Status</th>
                        <th style="border: 1px solid #dee2e6; padding: 8px; text-align: left; font-weight: bold;">Duration</th>
                    </tr>
                </thead>
                <tbody>
                    {% for scenario in scenarios %}
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">{{ scenario.name }}</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px; {% if scenario.status == 'passed' %}color: #28a745;{% elif scenario.status == 'failed' %}color: #dc3545;{% else %}color: #ffc107;{% endif %} font-weight: bold;">{{ scenario.status|upper }}</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">{{ "%.3f"|format(scenario.duration) }}s</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <!-- Footer -->
        <div style="background-color: #f8f9fa; padding: 15px; text-align: center; border-top: 1px solid #dee2e6; font-size: 12px; color: #6c757d; border-radius: 0 0 8px 8px;">
            Generated by pytest-bdd-reporter on {{ session.end_time.strftime('%Y-%m-%d %H:%M:%S') }}
        </div>
    </div>
</body>
</html>`;
        }

        function generatePlainTextReport() {
            return `{{ session.suite_name or 'Test Suite' }} - Test Report
${'='.repeat(50)}

Generated: {{ session.end_time.strftime('%Y-%m-%d %H:%M:%S') }}

SUMMARY
-------
Total Tests: {{ summary.total }}
Passed: {{ summary.passed }}
Failed: {{ summary.failed }}
{% if summary.skipped > 0 %}Skipped: {{ summary.skipped }}{% endif %}
Pass Rate: {{ "%.1f"|format(summary.pass_rate) }}%
Duration: {{ "%.2f"|format(session.duration) }}s

{% if summary.failed > 0 %}FAILED TESTS
------------
{% for scenario in scenarios %}{% if scenario.status == 'failed' %}‚Ä¢ {{ scenario.name }}{% if scenario.error %}
  Error: {{ scenario.error.split('\n')[0][:100] }}{% if scenario.error.split('\n')[0]|length > 100 %}...{% endif %}{% endif %}
{% endif %}{% endfor %}

{% endif %}TEST RESULTS
------------
{% for scenario in scenarios %}‚Ä¢ {{ scenario.name }} - {{ scenario.status|upper }} ({{ "%.3f"|format(scenario.duration) }}s)
{% endfor %}

Generated by pytest-bdd-reporter`;
        }

        function showCopySuccess(message) {
            // Create a temporary success message
            const successDiv = document.createElement('div');
            successDiv.textContent = message;
            successDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: #28a745;
                color: white;
                padding: 10px 20px;
                border-radius: 4px;
                z-index: 1000;
                font-size: 14px;
            `;
            document.body.appendChild(successDiv);

            setTimeout(() => {
                document.body.removeChild(successDiv);
            }, 3000);
        }

        // Auto-select subject when clicked
        document.getElementById('emailSubject').addEventListener('click', function () {
            const range = document.createRange();
            range.selectNode(this);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
        });
    </script>
</body>

</html>