# CapiscIO A2A Security Documentation Configuration
# MkDocs with Material Theme

site_name: A2A Security
site_url: https://docs.capisc.io/
site_description: Runtime security middleware for A2A (Agent-to-Agent) protocol agents. Validate messages, verify signatures, and protect against malicious actors.
site_author: CapiscIO Team
copyright: Copyright &copy; 2025 CapiscIO

repo_name: a2a-security
repo_url: https://github.com/capiscio/a2a-security
edit_uri: edit/main/docs/

theme:
  name: material
  # custom_dir: docs/overrides  # Uncomment when adding custom templates
  logo: assets/logo.png        # Add logo when ready
  favicon: assets/favicon.ico  # Add favicon when ready
  palette:
    # Light mode
    - scheme: default
      primary: blue grey
      accent: cyan
      toggle:
        icon: material/brightness-7
        name: Switch to dark mode
    # Dark mode
    - scheme: slate
      primary: blue grey
      accent: cyan
      toggle:
        icon: material/brightness-4
        name: Switch to light mode
  
  font:
    text: Roboto
    code: Roboto Mono
  
  features:
    # Navigation - Compatible with unified site navigation.tabs
    - navigation.instant        # SPA-like navigation
    - navigation.instant.progress  # Progress indicator
    - navigation.tracking       # URL updates on scroll
    - navigation.sections       # Collapsible sections
    - navigation.expand         # Expand all sections by default
    - navigation.path           # Breadcrumbs
    - navigation.indexes        # Section index pages
    - navigation.top            # Back to top button
    - navigation.footer         # Previous/next page in footer
    
    # Table of contents
    - toc.follow                # TOC follows scroll
    - toc.integrate             # Integrate TOC in navigation
    
    # Search
    - search.suggest            # Search suggestions
    - search.highlight          # Highlight search terms
    - search.share              # Share search results
    
    # Content
    - content.code.copy         # Copy code button
    - content.code.annotate     # Code annotations
    - content.tabs.link         # Link content tabs
    - content.tooltips          # Improved tooltips
    
    # Header
    - header.autohide           # Auto-hide header on scroll

# Plugins
plugins:
  - search:
      lang: en
      separator: '[\s\-,:!=\[\]()"<>/]+|(?!\b)(?=[A-Z][a-z])|\.(?!\d)|&[lg]t;'
  
  - mkdocstrings:
      enabled: true
      default_handler: python
      handlers:
        python:
          paths: [.]
          options:
            # Docstring parsing
            docstring_style: google
            docstring_section_style: table
            
            # Signatures
            show_signature: true
            show_signature_annotations: true
            signature_crossrefs: true
            separate_signature: false
            
            # Headings
            show_root_heading: true
            show_root_toc_entry: true
            show_root_full_path: false
            show_root_members_full_path: false
            show_object_full_path: false
            show_category_heading: true
            heading_level: 2
            
            # Members
            show_source: true
            show_bases: true
            show_submodules: false
            members_order: source
            group_by_category: true
            
            # Docstring options
            show_if_no_docstring: false
            show_docstring_attributes: true
            show_docstring_functions: true
            show_docstring_classes: true
            show_docstring_modules: true
            show_docstring_description: true
            show_docstring_examples: true
            show_docstring_other_parameters: true
            show_docstring_parameters: true
            show_docstring_raises: true
            show_docstring_receives: true
            show_docstring_returns: true
            show_docstring_warns: true
            show_docstring_yields: true
            
            # Additional
            annotations_path: brief
            line_length: 80
            merge_init_into_class: true
            filters: ["!^_"]

# Markdown extensions
markdown_extensions:
  # Python Markdown
  - abbr
  - admonition
  - attr_list
  - def_list
  - footnotes
  - md_in_html
  - tables
  - toc:
      permalink: true
      permalink_title: Anchor link to this section
      toc_depth: 3
  
  # Python Markdown Extensions
  - pymdownx.arithmatex:
      generic: true
  - pymdownx.betterem:
      smart_enable: all
  - pymdownx.caret
  - pymdownx.details
  - pymdownx.emoji:
      emoji_index: !!python/name:material.extensions.emoji.twemoji
      emoji_generator: !!python/name:material.extensions.emoji.to_svg
  - pymdownx.highlight:
      anchor_linenums: true
      line_spans: __span
      pygments_lang_class: true
  - pymdownx.inlinehilite
  - pymdownx.keys
  - pymdownx.mark
  - pymdownx.smartsymbols
  - pymdownx.snippets:
      base_path: [docs, .]
      # auto_append disabled for monorepo compatibility
      # auto_append:
      #   - includes/abbreviations.md
      check_paths: true
  - pymdownx.superfences:
      custom_fences:
        - name: mermaid
          class: mermaid
          format: !!python/name:pymdownx.superfences.fence_code_format
  - pymdownx.tabbed:
      alternate_style: true
      combine_header_slug: true
      slugify: !!python/object/apply:pymdownx.slugs.slugify
        kwds:
          case: lower
  - pymdownx.tasklist:
      custom_checkbox: true
  - pymdownx.tilde

# Extra configuration
extra:
  homepage: https://docs.capisc.io
  
  social:
    - icon: fontawesome/brands/github
      link: https://github.com/capiscio
      name: CapiscIO on GitHub
    - icon: fontawesome/brands/python
      link: https://pypi.org/project/capiscio-a2a-security/
      name: CapiscIO A2A Security on PyPI
    - icon: fontawesome/brands/twitter
      link: https://twitter.com/capiscio
      name: CapiscIO on Twitter
    - icon: fontawesome/brands/linkedin
      link: https://linkedin.com/company/capiscio
      name: CapiscIO on LinkedIn
  
  analytics:
    provider: google
    property: G-XXXXXXXXXX
    feedback:
      title: Was this page helpful?
      ratings:
        - icon: material/emoticon-happy-outline
          name: This page was helpful
          data: 1
          note: >-
            Thanks for your feedback!
        - icon: material/emoticon-sad-outline
          name: This page could be improved
          data: 0
          note: >-
            Thanks for your feedback! Help us improve by
            <a href="https://github.com/capiscio/a2a-security/issues/new" target="_blank" rel="noopener">opening an issue</a>.
  
  consent:
    title: Cookie consent
    description: >-
      We use cookies to recognize your repeated visits and preferences, as well
      as to measure the effectiveness of our documentation and whether users
      find what they're searching for. With your consent, you're helping us to
      make our documentation better.

# Navigation structure
nav:
  - Home: index.md
  
  - Getting Started:
      - Installation: getting-started/installation.md
      - Quick Start: getting-started/quickstart.md
      - Core Concepts: getting-started/concepts.md
  
  - Guides:
      - Scoring System: guides/scoring.md
      - Configuration: guides/configuration.md
  
  # - Changelog: changelog.md
  # - Contributing: contributing.md
  
  # Coming Soon - Uncomment as content is created
  # - User Guides:
  #     - Integration Patterns: guides/integration-patterns.md
  #     - Configuration: guides/configuration.md
  #     - Validation: guides/validation.md
  #     - Security Best Practices: guides/security-best-practices.md
  #     - Troubleshooting: guides/troubleshooting.md
  # 
  # - Examples:
  #     - Minimal Integration: examples/minimal-integration.md
  #     - Explicit Configuration: examples/explicit-configuration.md
  #     - Decorator Pattern: examples/decorator-pattern.md
  #     - Custom Presets: examples/custom-presets.md
  #     - Production Deployment: examples/production-deployment.md
  # 
  # - API Reference:
  #     - Overview: reference/index.md
  #     - Validators:
  #         - Message Validator: reference/validators/message.md
  #         - Protocol Validator: reference/validators/protocol.md
  #         - Signature Validator: reference/validators/signature.md
  #         - Semver Validator: reference/validators/semver.md
  #         - URL Security Validator: reference/validators/url-security.md
  #         - Agent Card Validator: reference/validators/agent-card.md
  #         - Certificate Validator: reference/validators/certificate.md
  #     - Executor: reference/executor.md
  #     - Configuration: reference/configuration.md
  #     - Types: reference/types.md
  #     - Errors: reference/errors.md
  #     - Infrastructure:
  #         - Cache: reference/infrastructure/cache.md
  #         - Rate Limiter: reference/infrastructure/rate-limiter.md

# Extra CSS/JS
extra_css:
  - stylesheets/extra.css
  - stylesheets/unified.css  # Shared styling from unified site

extra_javascript:
  - javascripts/extra.js
  - https://polyfill.io/v3/polyfill.min.js?features=es6
  - https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js

# Watch for changes
watch:
  - capiscio_a2a_security
