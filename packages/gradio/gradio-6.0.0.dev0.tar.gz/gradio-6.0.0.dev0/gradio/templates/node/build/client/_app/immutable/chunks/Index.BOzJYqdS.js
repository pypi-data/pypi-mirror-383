import{SvelteComponent as le,init as ne,safe_not_equal as te,svg_element as $,claim_svg_element as x,children as D,detach as d,attr as h,insert_hydration as C,append_hydration as B,noop as J,space as Y,empty as G,claim_space as Q,transition_in as g,group_outros as O,transition_out as w,check_outros as W,create_component as M,claim_component as P,mount_component as T,destroy_component as A,ensure_array_like as be,element as j,claim_element as S,destroy_each as Oe,text as oe,claim_text as se,set_style as ge,listen as Te,set_data as pe,createEventDispatcher as ol,onDestroy as dn,bubble as Pe,construct_svelte_component as ue,get_spread_update as re,get_spread_object as ie,assign as fe,is_function as Ln,toggle_class as X,stop_propagation as Nn,run_all as gn,add_render_callback as Bn,create_bidirectional_transition as fl,binding_callbacks as Ye,null_to_empty as Ge,set_input_value as _l,get_svelte_dataset as bn,src_url_equal as Ke,onMount as ll,action_destroyer as Mn,bind as Tn,add_flush_callback as An,tick as jn}from"../../../svelte/svelte.js";import{slide as ul}from"../../../svelte/svelte-submodules.js";import{u as cl,h as we,z as We,A as Xe,I as wn,C as Sn,M as sl,o as Re,j as qn,y as Fn,B as Zn,S as Pn}from"./2.C8HlNVDJ.js";import{E as Un}from"./Edit.jvyxqbov.js";import{U as On}from"./Undo.LhwFM5M8.js";import{F as rl}from"./File.Dl9hvYLG.js";import{d as Wn}from"./index.CnqicUFC.js";import{C as Rn}from"./Community.i_uzCNAp.js";import{T as Jn}from"./Trash.D4IfxcH_.js";import{M as kn}from"./Music.BVFRDHso.js";import{B as Gn}from"./BlockLabel.emULnHWk.js";function Kn(t){let e,l,n;return{c(){e=$("svg"),l=$("path"),n=$("path"),this.h()},l(i){e=x(i,"svg",{xmlns:!0,"xmlns:xlink":!0,"aria-hidden":!0,role:!0,class:!0,width:!0,height:!0,preserveAspectRatio:!0,viewBox:!0});var a=D(e);l=x(a,"path",{fill:!0,d:!0}),D(l).forEach(d),n=x(a,"path",{fill:!0,d:!0}),D(n).forEach(d),a.forEach(d),this.h()},h(){h(l,"fill","currentColor"),h(l,"d","M17.74 30L16 29l4-7h6a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h9v2H6a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4h20a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4h-4.84Z"),h(n,"fill","currentColor"),h(n,"d","M8 10h16v2H8zm0 6h10v2H8z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),h(e,"aria-hidden","true"),h(e,"role","img"),h(e,"class","iconify iconify--carbon"),h(e,"width","100%"),h(e,"height","100%"),h(e,"preserveAspectRatio","xMidYMid meet"),h(e,"viewBox","0 0 32 32")},m(i,a){C(i,e,a),B(e,l),B(e,n)},p:J,i:J,o:J,d(i){i&&d(e)}}}class Xn extends le{constructor(e){super(),ne(this,e,null,Kn,te,{})}}function Yn(t){let e,l,n;return{c(){e=$("svg"),l=$("circle"),n=$("path"),this.h()},l(i){e=x(i,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var a=D(e);l=x(a,"circle",{cx:!0,cy:!0,r:!0,class:!0}),D(l).forEach(d),n=x(a,"path",{d:!0}),D(n).forEach(d),a.forEach(d),this.h()},h(){h(l,"cx","9"),h(l,"cy","9"),h(l,"r","8"),h(l,"class","circle svelte-1m886t3"),h(n,"d","M5 8l4 4 4-4z"),h(e,"class","dropdown-arrow svelte-1m886t3"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 18 18")},m(i,a){C(i,e,a),B(e,l),B(e,n)},p:J,i:J,o:J,d(i){i&&d(e)}}}class Qn extends le{constructor(e){super(),ne(this,e,null,Yn,te,{})}}function yn(t){let e,l,n,i,a;return{c(){e=$("svg"),l=$("path"),n=$("path"),i=$("path"),a=$("path"),this.h()},l(r){e=x(r,"svg",{width:!0,height:!0,"stroke-width":!0,viewBox:!0,fill:!0,xmlns:!0,color:!0});var o=D(e);l=x(o,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(l).forEach(d),n=x(o,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(n).forEach(d),i=x(o,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(i).forEach(d),a=x(o,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(a).forEach(d),o.forEach(d),this.h()},h(){h(l,"d","M19.1679 9C18.0247 6.46819 15.3006 4.5 11.9999 4.5C8.31459 4.5 5.05104 7.44668 4.54932 11"),h(l,"stroke","currentColor"),h(l,"stroke-width","1.5"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(n,"d","M16 9H19.4C19.7314 9 20 8.73137 20 8.4V5"),h(n,"stroke","currentColor"),h(n,"stroke-width","1.5"),h(n,"stroke-linecap","round"),h(n,"stroke-linejoin","round"),h(i,"d","M4.88146 15C5.92458 17.5318 8.64874 19.5 12.0494 19.5C15.7347 19.5 18.9983 16.5533 19.5 13"),h(i,"stroke","currentColor"),h(i,"stroke-width","1.5"),h(i,"stroke-linecap","round"),h(i,"stroke-linejoin","round"),h(a,"d","M8.04932 15H4.64932C4.31795 15 4.04932 15.2686 4.04932 15.6V19"),h(a,"stroke","currentColor"),h(a,"stroke-width","1.5"),h(a,"stroke-linecap","round"),h(a,"stroke-linejoin","round"),h(e,"width","100%"),h(e,"height","100%"),h(e,"stroke-width","1.5"),h(e,"viewBox","0 0 24 24"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"color","currentColor")},m(r,o){C(r,e,o),B(e,l),B(e,n),B(e,i),B(e,a)},p:J,i:J,o:J,d(r){r&&d(e)}}}class $n extends le{constructor(e){super(),ne(this,e,null,yn,te,{})}}function xn(t){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(n){e=x(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=x(i,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M12 20L12 4M12 20L7 15M12 20L17 15"),h(l,"stroke","currentColor"),h(l,"stroke-width","2"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 24 24"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){C(n,e,i),B(e,l)},p:J,i:J,o:J,d(n){n&&d(e)}}}class et extends le{constructor(e){super(),ne(this,e,null,xn,te,{})}}const lt=async(t,e=1800)=>{let l=[...t],n=await nl(l);if(n.length>e&&l.length>2){const i=l[0],a=l[l.length-1];l=[i,a],n=await nl(l)}return n.length>e&&l.length>0&&(l=l.map(a=>{if(a.type==="text"){const r=Math.floor(e/l.length)-20;if(a.content.length>r)return{...a,content:a.content.substring(0,r)+"..."}}return a}),n=await nl(l)),n},nl=async t=>(await Promise.all(t.map(async l=>{var a;if(l.role==="system")return"";let n=l.role==="user"?"ðŸ˜ƒ":"ðŸ¤–",i="";if(l.type==="text"){const r={audio:/<audio.*?src="(\/file=.*?)"/g,video:/<video.*?src="(\/file=.*?)"/g,image:/<img.*?src="(\/file=.*?)".*?\/>|!\[.*?\]\((\/file=.*?)\)/g};i=l.content;for(let[o,s]of Object.entries(r)){let f;for(;(f=s.exec(l.content))!==null;){const u=f[1]||f[2],c=await cl(u);i=i.replace(u,c)}}}else{if(!l.content.value)return"";const r=l.content.component==="video"?(a=l.content.value)==null?void 0:a.video.path:l.content.value,o=await cl(r);l.content.component==="audio"?i=`<audio controls src="${o}"></audio>`:l.content.component==="video"?i=o:l.content.component==="image"&&(i=`<img src="${o}" />`)}return`${n}: ${i}`}))).filter(l=>l!=="").join(`
`),nt=(t,e)=>t.replace('src="/file',`src="${e}file`);function tt(t,e){if(!t){const l=e==null?void 0:e.path;if(l){const n=l.toLowerCase();if(n.endsWith(".glb")||n.endsWith(".gltf")||n.endsWith(".obj")||n.endsWith(".stl")||n.endsWith(".splat")||n.endsWith(".ply"))return"model3d"}return"file"}return t.includes("audio")?"audio":t.includes("video")?"video":t.includes("image")?"image":t.includes("model")?"model3d":"file"}function it(t){const e=Array.isArray(t.file)?t.file[0]:t.file;return{component:tt(e==null?void 0:e.mime_type,e),value:t.file,alt_text:t.alt_text,constructor_args:{},props:{}}}function at(t,e){if(t===null)return t;const l=new Map;return t.map((n,i)=>{let a=typeof n.content=="string"?{role:n.role,metadata:n.metadata,content:nt(n.content,e),type:"text",index:i,options:n.options}:"file"in n.content?{content:it(n.content),metadata:n.metadata,role:n.role,type:"component",index:i,options:n.options}:{type:"component",...n};const{id:r,title:o,parent_id:s}=n.metadata||{};if(s){const f=l.get(String(s));if(f){const u={...a,children:[]};return f.children.push(u),r&&o&&l.set(String(r),u),null}}if(r&&o){const f={...a,children:[]};return l.set(String(r),f),f}return a}).filter(n=>n!==null)}function hl(t){return t.type==="component"}function Je(t,e){const l=t[t.length-1].role==="assistant",n=t[t.length-1].index;return JSON.stringify(n)===JSON.stringify(e[e.length-1].index)&&l}function ot(t,e=!0){const l=[];let n=[],i=null;for(const a of t)if(a.role==="assistant"||a.role==="user"){if(!e){l.push([a]);continue}a.role===i?n.push(a):(n.length>0&&l.push(n),n=[a],i=a.role)}return n.length>0&&l.push(n),l}async function st(t,e,l){let n=[],i=[];return t.forEach(o=>{if(e[o]||o==="file")return;const s=o==="dataframe"||o==="model3d"?"component":"base",{name:f,component:u}=l(o,s);n.push(f),i.push(u)}),(await Promise.allSettled(i)).map((o,s)=>o.status==="fulfilled"?[s,o.value]:null).filter(o=>o!==null).forEach(([o,s])=>{e[n[o]]=s.default}),e}function rt(t){if(!t)return[];let e=new Set;return t.forEach(l=>{l.type==="component"&&e.add(l.content.component)}),Array.from(e)}function al(t,e=0){var a,r;let l="";const n="  ".repeat(e);(a=t.metadata)!=null&&a.title&&(l+=`${n}${e>0?"- ":""}${t.metadata.title}
`),typeof t.content=="string"&&(l+=`${n}  ${t.content}
`);const i=t;return((r=i.children)==null?void 0:r.length)>0&&(l+=i.children.map(o=>al(o,e+1)).join("")),l}function ft(t){var e;return Array.isArray(t)?t.map(l=>{var n;return(n=l.metadata)!=null&&n.title?al(l):l.content}).join(`
`):(e=t.metadata)!=null&&e.title?al(t):t.content}function ml(t){return Array.isArray(t)&&t.every(e=>typeof e.content=="string")||!Array.isArray(t)&&typeof t.content=="string"}function _t(t){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(n){e=x(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=x(i,"path",{d:!0,fill:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M11.25 6.61523H9.375V1.36523H11.25V6.61523ZM3.375 1.36523H8.625V6.91636L7.48425 8.62748L7.16737 10.8464C7.14108 11.0248 7.05166 11.1879 6.91535 11.3061C6.77904 11.4242 6.60488 11.4896 6.4245 11.4902H6.375C6.07672 11.4899 5.79075 11.3713 5.57983 11.1604C5.36892 10.9495 5.2503 10.6635 5.25 10.3652V8.11523H2.25C1.85233 8.11474 1.47109 7.95654 1.18989 7.67535C0.908691 7.39415 0.750496 7.01291 0.75 6.61523V3.99023C0.750992 3.29435 1.02787 2.62724 1.51994 2.13517C2.01201 1.64311 2.67911 1.36623 3.375 1.36523Z"),h(l,"fill","currentColor"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 12 12"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){C(n,e,i),B(e,l)},p:J,i:J,o:J,d(n){n&&d(e)}}}class dl extends le{constructor(e){super(),ne(this,e,null,_t,te,{})}}function ut(t){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(n){e=x(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=x(i,"path",{d:!0,fill:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M2.25 8.11523H4.5V10.3652C4.5003 10.6635 4.61892 10.9495 4.82983 11.1604C5.04075 11.3713 5.32672 11.4899 5.625 11.4902H6.42488C6.60519 11.4895 6.77926 11.4241 6.91549 11.3059C7.05172 11.1878 7.14109 11.0248 7.16737 10.8464L7.48425 8.62748L8.82562 6.61523H11.25V1.36523H3.375C2.67911 1.36623 2.01201 1.64311 1.51994 2.13517C1.02787 2.62724 0.750992 3.29435 0.75 3.99023V6.61523C0.750496 7.01291 0.908691 7.39415 1.18989 7.67535C1.47109 7.95654 1.85233 8.11474 2.25 8.11523ZM9 2.11523H10.5V5.86523H9V2.11523ZM1.5 3.99023C1.5006 3.49314 1.69833 3.01657 2.04983 2.66507C2.40133 2.31356 2.8779 2.11583 3.375 2.11523H8.25V6.12661L6.76575 8.35298L6.4245 10.7402H5.625C5.52554 10.7402 5.43016 10.7007 5.35983 10.6304C5.28951 10.5601 5.25 10.4647 5.25 10.3652V7.36523H2.25C2.05118 7.36494 1.86059 7.28582 1.72 7.14524C1.57941 7.00465 1.5003 6.81406 1.5 6.61523V3.99023Z"),h(l,"fill","currentColor"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 12 12"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){C(n,e,i),B(e,l)},p:J,i:J,o:J,d(n){n&&d(e)}}}class gl extends le{constructor(e){super(),ne(this,e,null,ut,te,{})}}function ct(t){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(n){e=x(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=x(i,"path",{d:!0,fill:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M0.75 6.24023H2.625V11.4902H0.75V6.24023ZM8.625 11.4902H3.375V5.93911L4.51575 4.22798L4.83263 2.00911C4.85892 1.83065 4.94834 1.66754 5.08465 1.5494C5.22096 1.43125 5.39512 1.36591 5.5755 1.36523H5.625C5.92328 1.36553 6.20925 1.48415 6.42017 1.69507C6.63108 1.90598 6.7497 2.19196 6.75 2.49023V4.74023H9.75C10.1477 4.74073 10.5289 4.89893 10.8101 5.18012C11.0913 5.46132 11.2495 5.84256 11.25 6.24023V8.86523C11.249 9.56112 10.9721 10.2282 10.4801 10.7203C9.98799 11.2124 9.32089 11.4892 8.625 11.4902Z"),h(l,"fill","currentColor"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 12 12"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){C(n,e,i),B(e,l)},p:J,i:J,o:J,d(n){n&&d(e)}}}class bl extends le{constructor(e){super(),ne(this,e,null,ct,te,{})}}function ht(t){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(n){e=x(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var i=D(e);l=x(i,"path",{d:!0,fill:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"d","M9.75 4.74023H7.5V2.49023C7.4997 2.19196 7.38108 1.90598 7.17017 1.69507C6.95925 1.48415 6.67328 1.36553 6.375 1.36523H5.57512C5.39481 1.366 5.22074 1.43138 5.08451 1.54952C4.94828 1.66766 4.85891 1.83072 4.83262 2.00911L4.51575 4.22798L3.17438 6.24023H0.75V11.4902H8.625C9.32089 11.4892 9.98799 11.2124 10.4801 10.7203C10.9721 10.2282 11.249 9.56112 11.25 8.86523V6.24023C11.2495 5.84256 11.0913 5.46132 10.8101 5.18012C10.5289 4.89893 10.1477 4.74073 9.75 4.74023ZM3 10.7402H1.5V6.99023H3V10.7402ZM10.5 8.86523C10.4994 9.36233 10.3017 9.8389 9.95017 10.1904C9.59867 10.5419 9.1221 10.7396 8.625 10.7402H3.75V6.72886L5.23425 4.50248L5.5755 2.11523H6.375C6.47446 2.11523 6.56984 2.15474 6.64017 2.22507C6.71049 2.2954 6.75 2.39078 6.75 2.49023V5.49023H9.75C9.94882 5.49053 10.1394 5.56965 10.28 5.71023C10.4206 5.85082 10.4997 6.04141 10.5 6.24023V8.86523Z"),h(l,"fill","currentColor"),h(e,"width","100%"),h(e,"height","100%"),h(e,"viewBox","0 0 12 12"),h(e,"fill","none"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){C(n,e,i),B(e,l)},p:J,i:J,o:J,d(n){n&&d(e)}}}class wl extends le{constructor(e){super(),ne(this,e,null,ht,te,{})}}function mt(t){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(n){e=x(n,"svg",{id:!0,xmlns:!0,viewBox:!0,fill:!0});var i=D(e);l=x(i,"path",{fill:!0,d:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"fill","currentColor"),h(l,"d","M6,30H4V2H28l-5.8,9L28,20H6ZM6,18H24.33L19.8,11l4.53-7H6Z"),h(e,"id","icon"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 32 32"),h(e,"fill","none")},m(n,i){C(n,e,i),B(e,l)},p:J,i:J,o:J,d(n){n&&d(e)}}}class kl extends le{constructor(e){super(),ne(this,e,null,mt,te,{})}}function dt(t){let e,l;return{c(){e=$("svg"),l=$("path"),this.h()},l(n){e=x(n,"svg",{id:!0,xmlns:!0,viewBox:!0,fill:!0});var i=D(e);l=x(i,"path",{fill:!0,d:!0}),D(l).forEach(d),i.forEach(d),this.h()},h(){h(l,"fill","currentColor"),h(l,"d","M4,2H28l-5.8,9L28,20H6v10H4V2z"),h(e,"id","icon"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 32 32"),h(e,"fill","none")},m(n,i){C(n,e,i),B(e,l)},p:J,i:J,o:J,d(n){n&&d(e)}}}class vl extends le{constructor(e){super(),ne(this,e,null,dt,te,{})}}function pl(t,e,l){const n=t.slice();return n[9]=e[l],n}function El(t){let e=t[3].includes("Dislike"),l,n=t[3].includes("Like"),i,a,r=e&&Cl(t),o=n&&Vl(t);return{c(){r&&r.c(),l=Y(),o&&o.c(),i=G()},l(s){r&&r.l(s),l=Q(s),o&&o.l(s),i=G()},m(s,f){r&&r.m(s,f),C(s,l,f),o&&o.m(s,f),C(s,i,f),a=!0},p(s,f){f&8&&(e=s[3].includes("Dislike")),e?r?(r.p(s,f),f&8&&g(r,1)):(r=Cl(s),r.c(),g(r,1),r.m(l.parentNode,l)):r&&(O(),w(r,1,1,()=>{r=null}),W()),f&8&&(n=s[3].includes("Like")),n?o?(o.p(s,f),f&8&&g(o,1)):(o=Vl(s),o.c(),g(o,1),o.m(i.parentNode,i)):o&&(O(),w(o,1,1,()=>{o=null}),W())},i(s){a||(g(r),g(o),a=!0)},o(s){w(r),w(o),a=!1},d(s){s&&(d(l),d(i)),r&&r.d(s),o&&o.d(s)}}}function Cl(t){let e,l;return e=new we({props:{Icon:t[0]==="Dislike"?dl:gl,label:t[0]==="Dislike"?"clicked dislike":t[1]("chatbot.dislike"),color:t[0]==="Dislike"?"var(--color-accent)":"var(--block-label-text-color)"}}),e.$on("click",t[6]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i&1&&(a.Icon=n[0]==="Dislike"?dl:gl),i&3&&(a.label=n[0]==="Dislike"?"clicked dislike":n[1]("chatbot.dislike")),i&1&&(a.color=n[0]==="Dislike"?"var(--color-accent)":"var(--block-label-text-color)"),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Vl(t){let e,l;return e=new we({props:{Icon:t[0]==="Like"?bl:wl,label:t[0]==="Like"?"clicked like":t[1]("chatbot.like"),color:t[0]==="Like"?"var(--color-accent)":"var(--block-label-text-color)"}}),e.$on("click",t[7]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i&1&&(a.Icon=n[0]==="Like"?bl:wl),i&3&&(a.label=n[0]==="Like"?"clicked like":n[1]("chatbot.like")),i&1&&(a.color=n[0]==="Like"?"var(--color-accent)":"var(--block-label-text-color)"),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Il(t){let e,l,n,i,a;l=new we({props:{Icon:t[0]&&t[4].includes(t[0])?vl:kl,label:"Feedback",color:t[0]&&t[4].includes(t[0])?"var(--color-accent)":"var(--block-label-text-color)"}});let r=be(t[4]),o=[];for(let s=0;s<r.length;s+=1)o[s]=Dl(pl(t,r,s));return{c(){e=j("div"),M(l.$$.fragment),n=Y(),i=j("div");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=S(s,"DIV",{class:!0});var f=D(e);P(l.$$.fragment,f),n=Q(f),i=S(f,"DIV",{class:!0});var u=D(i);for(let c=0;c<o.length;c+=1)o[c].l(u);u.forEach(d),f.forEach(d),this.h()},h(){h(i,"class","extra-feedback-options svelte-14rmxes"),h(e,"class","extra-feedback no-border svelte-14rmxes")},m(s,f){C(s,e,f),T(l,e,null),B(e,n),B(e,i);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(i,null);a=!0},p(s,f){const u={};if(f&17&&(u.Icon=s[0]&&s[4].includes(s[0])?vl:kl),f&17&&(u.color=s[0]&&s[4].includes(s[0])?"var(--color-accent)":"var(--block-label-text-color)"),l.$set(u),f&53){r=be(s[4]);let c;for(c=0;c<r.length;c+=1){const _=pl(s,r,c);o[c]?o[c].p(_,f):(o[c]=Dl(_),o[c].c(),o[c].m(i,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},i(s){a||(g(l.$$.fragment,s),a=!0)},o(s){w(l.$$.fragment,s),a=!1},d(s){s&&d(e),A(l),Oe(o,s)}}}function Dl(t){let e,l=t[9]+"",n,i,a;function r(){return t[8](t[9])}return{c(){e=j("button"),n=oe(l),this.h()},l(o){e=S(o,"BUTTON",{class:!0});var s=D(e);n=se(s,l),s.forEach(d),this.h()},h(){h(e,"class","extra-feedback-option svelte-14rmxes"),ge(e,"font-weight",t[0]===t[9]?"bold":"normal")},m(o,s){C(o,e,s),B(e,n),i||(a=Te(e,"click",r),i=!0)},p(o,s){t=o,s&16&&l!==(l=t[9]+"")&&pe(n,l),s&17&&ge(e,"font-weight",t[0]===t[9]?"bold":"normal")},d(o){o&&d(e),i=!1,a()}}}function gt(t){let e=t[3].includes("Like")||t[3].includes("Dislike"),l,n,i,a=e&&El(t),r=t[4].length>0&&Il(t);return{c(){a&&a.c(),l=Y(),r&&r.c(),n=G()},l(o){a&&a.l(o),l=Q(o),r&&r.l(o),n=G()},m(o,s){a&&a.m(o,s),C(o,l,s),r&&r.m(o,s),C(o,n,s),i=!0},p(o,[s]){s&8&&(e=o[3].includes("Like")||o[3].includes("Dislike")),e?a?(a.p(o,s),s&8&&g(a,1)):(a=El(o),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(O(),w(a,1,1,()=>{a=null}),W()),o[4].length>0?r?(r.p(o,s),s&16&&g(r,1)):(r=Il(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&(O(),w(r,1,1,()=>{r=null}),W())},i(o){i||(g(a),g(r),i=!0)},o(o){w(a),w(r),i=!1},d(o){o&&(d(l),d(n)),a&&a.d(o),r&&r.d(o)}}}function bt(t,e,l){let n,{i18n:i}=e,{handle_action:a}=e,{feedback_options:r}=e,{selected:o=null}=e;function s(_){l(0,o=o===_?null:_),a(o)}const f=()=>s("Dislike"),u=()=>s("Like"),c=_=>{s(_),a(o||null)};return t.$$set=_=>{"i18n"in _&&l(1,i=_.i18n),"handle_action"in _&&l(2,a=_.handle_action),"feedback_options"in _&&l(3,r=_.feedback_options),"selected"in _&&l(0,o=_.selected)},t.$$.update=()=>{t.$$.dirty&8&&l(4,n=r.filter(_=>_!=="Like"&&_!=="Dislike"))},[o,i,a,r,n,s,f,u,c]}class wt extends le{constructor(e){super(),ne(this,e,bt,gt,te,{i18n:1,handle_action:2,feedback_options:3,selected:0})}}function kt(t){let e,l;return e=new we({props:{label:t[0]?"Copied message":"Copy message",Icon:t[0]?We:Xe}}),e.$on("click",t[1]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,[i]){const a={};i&1&&(a.label=n[0]?"Copied message":"Copy message"),i&1&&(a.Icon=n[0]?We:Xe),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function vt(t,e,l){const n=ol();let i=!1,{value:a}=e,{watermark:r=null}=e,o;function s(){l(0,i=!0),o&&clearTimeout(o),o=setTimeout(()=>{l(0,i=!1)},2e3)}async function f(){if("clipboard"in navigator){n("copy",{value:a});const u=r?`${a}

${r}`:a;await navigator.clipboard.writeText(u),s()}else{const u=document.createElement("textarea"),c=r?`${a}

${r}`:a;u.value=c,u.style.position="absolute",u.style.left="-999999px",document.body.prepend(u),u.select();try{document.execCommand("copy"),s()}catch(_){console.error(_)}finally{u.remove()}}}return dn(()=>{o&&clearTimeout(o)}),t.$$set=u=>{"value"in u&&l(2,a=u.value),"watermark"in u&&l(3,r=u.watermark)},[i,f,a,r]}class pt extends le{constructor(e){super(),ne(this,e,vt,kt,te,{value:2,watermark:3})}}function zl(t){let e,l,n,i;return l=new wn({props:{top_panel:!1,$$slots:{default:[Vt]},$$scope:{ctx:t}}}),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var r=D(e);P(l.$$.fragment,r),r.forEach(d),this.h()},h(){h(e,"class",n="message-buttons-"+t[8]+" "+t[13]+" message-buttons "+(t[9]!==null&&"with-avatar")+" svelte-j7nkv7")},m(a,r){C(a,e,r),T(l,e,null),i=!0},p(a,r){const o={};r&33676543&&(o.$$scope={dirty:r,ctx:a}),l.$set(o),(!i||r&8960&&n!==(n="message-buttons-"+a[8]+" "+a[13]+" message-buttons "+(a[9]!==null&&"with-avatar")+" svelte-j7nkv7"))&&h(e,"class",n)},i(a){i||(g(l.$$.fragment,a),i=!0)},o(a){w(l.$$.fragment,a),i=!1},d(a){a&&d(e),A(l)}}}function Et(t){let e,l,n,i,a,r,o=t[15]&&Hl(t),s=t[3]&&Ll(t),f=t[4]&&Nl(t),u=t[5]&&Bl(t),c=t[1]&&Ml(t);return{c(){o&&o.c(),e=Y(),s&&s.c(),l=Y(),f&&f.c(),n=Y(),u&&u.c(),i=Y(),c&&c.c(),a=G()},l(_){o&&o.l(_),e=Q(_),s&&s.l(_),l=Q(_),f&&f.l(_),n=Q(_),u&&u.l(_),i=Q(_),c&&c.l(_),a=G()},m(_,m){o&&o.m(_,m),C(_,e,m),s&&s.m(_,m),C(_,l,m),f&&f.m(_,m),C(_,n,m),u&&u.m(_,m),C(_,i,m),c&&c.m(_,m),C(_,a,m),r=!0},p(_,m){_[15]?o?(o.p(_,m),m&32768&&g(o,1)):(o=Hl(_),o.c(),g(o,1),o.m(e.parentNode,e)):o&&(O(),w(o,1,1,()=>{o=null}),W()),_[3]?s?(s.p(_,m),m&8&&g(s,1)):(s=Ll(_),s.c(),g(s,1),s.m(l.parentNode,l)):s&&(O(),w(s,1,1,()=>{s=null}),W()),_[4]?f?(f.p(_,m),m&16&&g(f,1)):(f=Nl(_),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(O(),w(f,1,1,()=>{f=null}),W()),_[5]?u?(u.p(_,m),m&32&&g(u,1)):(u=Bl(_),u.c(),g(u,1),u.m(i.parentNode,i)):u&&(O(),w(u,1,1,()=>{u=null}),W()),_[1]?c?(c.p(_,m),m&2&&g(c,1)):(c=Ml(_),c.c(),g(c,1),c.m(a.parentNode,a)):c&&(O(),w(c,1,1,()=>{c=null}),W())},i(_){r||(g(o),g(s),g(f),g(u),g(c),r=!0)},o(_){w(o),w(s),w(f),w(u),w(c),r=!1},d(_){_&&(d(e),d(l),d(n),d(i),d(a)),o&&o.d(_),s&&s.d(_),f&&f.d(_),u&&u.d(_),c&&c.d(_)}}}function Ct(t){let e,l,n,i;return e=new we({props:{label:t[0]("chatbot.submit"),Icon:We,disabled:t[10]}}),e.$on("click",t[19]),n=new we({props:{label:t[0]("chatbot.cancel"),Icon:Sn,disabled:t[10]}}),n.$on("click",t[20]),{c(){M(e.$$.fragment),l=Y(),M(n.$$.fragment)},l(a){P(e.$$.fragment,a),l=Q(a),P(n.$$.fragment,a)},m(a,r){T(e,a,r),C(a,l,r),T(n,a,r),i=!0},p(a,r){const o={};r&1&&(o.label=a[0]("chatbot.submit")),r&1024&&(o.disabled=a[10]),e.$set(o);const s={};r&1&&(s.label=a[0]("chatbot.cancel")),r&1024&&(s.disabled=a[10]),n.$set(s)},i(a){i||(g(e.$$.fragment,a),g(n.$$.fragment,a),i=!0)},o(a){w(e.$$.fragment,a),w(n.$$.fragment,a),i=!1},d(a){a&&d(l),A(e,a),A(n,a)}}}function Hl(t){let e,l;return e=new pt({props:{value:t[16],watermark:t[7]}}),e.$on("copy",t[21]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i&65536&&(a.value=n[16]),i&128&&(a.watermark=n[7]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Ll(t){let e,l;return e=new we({props:{Icon:$n,label:t[0]("chatbot.retry"),disabled:t[10]}}),e.$on("click",t[22]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i&1&&(a.label=n[0]("chatbot.retry")),i&1024&&(a.disabled=n[10]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Nl(t){let e,l;return e=new we({props:{label:t[0]("chatbot.undo"),Icon:On,disabled:t[10]}}),e.$on("click",t[23]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i&1&&(a.label=n[0]("chatbot.undo")),i&1024&&(a.disabled=n[10]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Bl(t){let e,l;return e=new we({props:{label:t[0]("chatbot.edit"),Icon:Un,disabled:t[10]}}),e.$on("click",t[24]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i&1&&(a.label=n[0]("chatbot.edit")),i&1024&&(a.disabled=n[10]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Ml(t){let e,l;return e=new wt({props:{handle_action:t[12],feedback_options:t[2],selected:t[11],i18n:t[0]}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i&4096&&(a.handle_action=n[12]),i&4&&(a.feedback_options=n[2]),i&2048&&(a.selected=n[11]),i&1&&(a.i18n=n[0]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Vt(t){let e,l,n,i;const a=[Ct,Et],r=[];function o(s,f){return s[6]?0:1}return e=o(t),l=r[e]=a[e](t),{c(){l.c(),n=G()},l(s){l.l(s),n=G()},m(s,f){r[e].m(s,f),C(s,n,f),i=!0},p(s,f){let u=e;e=o(s),e===u?r[e].p(s,f):(O(),w(r[u],1,1,()=>{r[u]=null}),W(),l=r[e],l?l.p(s,f):(l=r[e]=a[e](s),l.c()),g(l,1),l.m(n.parentNode,n))},i(s){i||(g(l),i=!0)},o(s){w(l),i=!1},d(s){s&&d(n),r[e].d(s)}}}function It(t){let e,l,n=(t[15]||t[3]||t[4]||t[5]||t[1])&&zl(t);return{c(){n&&n.c(),e=G()},l(i){n&&n.l(i),e=G()},m(i,a){n&&n.m(i,a),C(i,e,a),l=!0},p(i,[a]){i[15]||i[3]||i[4]||i[5]||i[1]?n?(n.p(i,a),a&32826&&g(n,1)):(n=zl(i),n.c(),g(n,1),n.m(e.parentNode,e)):n&&(O(),w(n,1,1,()=>{n=null}),W())},i(i){l||(g(n),l=!0)},o(i){w(n),l=!1},d(i){i&&d(e),n&&n.d(i)}}}function Dt(t,e,l){let n,i,{i18n:a}=e,{likeable:r}=e,{feedback_options:o}=e,{show_retry:s}=e,{show_undo:f}=e,{show_edit:u}=e,{in_edit_mode:c}=e,{show_copy_button:_}=e,{watermark:m=null}=e,{message:b}=e,{position:k}=e,{avatar:v}=e,{generating:I}=e,{current_feedback:U}=e,{handle_action:F}=e,{layout:H}=e,{dispatch:Z}=e;const z=()=>F("edit_submit"),N=()=>F("edit_cancel"),R=L=>Z("copy",L.detail),K=()=>F("retry"),y=()=>F("undo"),ee=()=>F("edit");return t.$$set=L=>{"i18n"in L&&l(0,a=L.i18n),"likeable"in L&&l(1,r=L.likeable),"feedback_options"in L&&l(2,o=L.feedback_options),"show_retry"in L&&l(3,s=L.show_retry),"show_undo"in L&&l(4,f=L.show_undo),"show_edit"in L&&l(5,u=L.show_edit),"in_edit_mode"in L&&l(6,c=L.in_edit_mode),"show_copy_button"in L&&l(17,_=L.show_copy_button),"watermark"in L&&l(7,m=L.watermark),"message"in L&&l(18,b=L.message),"position"in L&&l(8,k=L.position),"avatar"in L&&l(9,v=L.avatar),"generating"in L&&l(10,I=L.generating),"current_feedback"in L&&l(11,U=L.current_feedback),"handle_action"in L&&l(12,F=L.handle_action),"layout"in L&&l(13,H=L.layout),"dispatch"in L&&l(14,Z=L.dispatch)},t.$$.update=()=>{t.$$.dirty&262144&&l(16,n=ml(b)?ft(b):""),t.$$.dirty&393216&&l(15,i=_&&b&&ml(b))},[a,r,o,s,f,u,c,m,k,v,I,U,F,H,Z,i,n,_,b,z,N,R,K,y,ee]}class vn extends le{constructor(e){super(),ne(this,e,Dt,It,te,{i18n:0,likeable:1,feedback_options:2,show_retry:3,show_undo:4,show_edit:5,in_edit_mode:6,show_copy_button:17,watermark:7,message:18,position:8,avatar:9,generating:10,current_feedback:11,handle_action:12,layout:13,dispatch:14})}}function zt(t){let e,l,n;const i=[t[5],{value:t[2]},{clear_color:t[5].clear_color},{display_mode:t[5].display_mode},{zoom_speed:t[5].zoom_speed},{pan_speed:t[5].pan_speed},t[5].camera_position!==void 0&&{camera_position:t[5].camera_position},{has_change_history:!0},{show_label:!!t[5].label},{root:""},{interactive:!1},{show_share_button:!0},{gradio:{dispatch:il,i18n:t[6]}}];var a=t[1][t[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=fe(f,i[u]);return s!==void 0&&s&100&&(f=fe(f,re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&32&&{clear_color:o[5].clear_color},s&32&&{display_mode:o[5].display_mode},s&32&&{zoom_speed:o[5].zoom_speed},s&32&&{pan_speed:o[5].pan_speed},s&32&&ie(o[5].camera_position!==void 0&&{camera_position:o[5].camera_position}),i[7],s&32&&{show_label:!!o[5].label},i[9],i[10],i[11],s&64&&{gradio:{dispatch:il,i18n:o[6]}}]))),{props:f}}return a&&(e=ue(a,r(t)),e.$on("load",t[18])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&P(e.$$.fragment,o),l=G()},m(o,s){e&&T(e,o,s),C(o,l,s),n=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{A(f,1)}),W()}a?(e=ue(a,r(o,s)),e.$on("load",o[18]),M(e.$$.fragment),g(e.$$.fragment,1),T(e,l.parentNode,l)):e=null}else if(a){const f=s&100?re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&32&&{clear_color:o[5].clear_color},s&32&&{display_mode:o[5].display_mode},s&32&&{zoom_speed:o[5].zoom_speed},s&32&&{pan_speed:o[5].pan_speed},s&32&&ie(o[5].camera_position!==void 0&&{camera_position:o[5].camera_position}),i[7],s&32&&{show_label:!!o[5].label},i[9],i[10],i[11],s&64&&{gradio:{dispatch:il,i18n:o[6]}}]):{};e.$set(f)}},i(o){n||(e&&g(e.$$.fragment,o),n=!0)},o(o){e&&w(e.$$.fragment,o),n=!1},d(o){o&&d(l),e&&A(e,o)}}}function Ht(t){let e,l,n;const i=[t[5],{value:t[2]},{show_label:!1},{show_share_button:!0},{i18n:t[6]},{gradio:{dispatch:qt}}];var a=t[1][t[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=fe(f,i[u]);return s!==void 0&&s&100&&(f=fe(f,re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},i[2],i[3],s&64&&{i18n:o[6]},i[5]]))),{props:f}}return a&&(e=ue(a,r(t)),e.$on("load",t[17])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&P(e.$$.fragment,o),l=G()},m(o,s){e&&T(e,o,s),C(o,l,s),n=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{A(f,1)}),W()}a?(e=ue(a,r(o,s)),e.$on("load",o[17]),M(e.$$.fragment),g(e.$$.fragment,1),T(e,l.parentNode,l)):e=null}else if(a){const f=s&100?re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},i[2],i[3],s&64&&{i18n:o[6]},i[5]]):{};e.$set(f)}},i(o){n||(e&&g(e.$$.fragment,o),n=!0)},o(o){e&&w(e.$$.fragment,o),n=!1},d(o){o&&d(l),e&&A(e,o)}}}function Lt(t){let e,l,n;const i=[t[5],{value:t[2]},{show_label:!!t[5].label},{show_download_button:t[9]},{display_icon_button_wrapper_top_corner:t[10]},{i18n:t[6]}];var a=t[1][t[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=fe(f,i[u]);return s!==void 0&&s&1636&&(f=fe(f,re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},s&512&&{show_download_button:o[9]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&64&&{i18n:o[6]}]))),{props:f}}return a&&(e=ue(a,r(t)),e.$on("load",t[16])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&P(e.$$.fragment,o),l=G()},m(o,s){e&&T(e,o,s),C(o,l,s),n=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{A(f,1)}),W()}a?(e=ue(a,r(o,s)),e.$on("load",o[16]),M(e.$$.fragment),g(e.$$.fragment,1),T(e,l.parentNode,l)):e=null}else if(a){const f=s&1636?re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},s&512&&{show_download_button:o[9]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&64&&{i18n:o[6]}]):{};e.$set(f)}},i(o){n||(e&&g(e.$$.fragment,o),n=!0)},o(o){e&&w(e.$$.fragment,o),n=!1},d(o){o&&d(l),e&&A(e,o)}}}function Nt(t){let e,l,n;const i=[t[5],{autoplay:t[5].autoplay},{value:t[2].video||t[2]},{show_label:!!t[5].label},{show_share_button:!0},{i18n:t[6]},{upload:t[7]},{display_icon_button_wrapper_top_corner:t[10]},{show_download_button:t[9]}];var a=t[1][t[0]];function r(o,s){let f={$$slots:{default:[jt]},$$scope:{ctx:o}};for(let u=0;u<i.length;u+=1)f=fe(f,i[u]);return s!==void 0&&s&1764&&(f=fe(f,re(i,[s&32&&ie(o[5]),s&32&&{autoplay:o[5].autoplay},s&4&&{value:o[2].video||o[2]},s&32&&{show_label:!!o[5].label},i[4],s&64&&{i18n:o[6]},s&128&&{upload:o[7]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&512&&{show_download_button:o[9]}]))),{props:f}}return a&&(e=ue(a,r(t)),e.$on("load",t[15])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&P(e.$$.fragment,o),l=G()},m(o,s){e&&T(e,o,s),C(o,l,s),n=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{A(f,1)}),W()}a?(e=ue(a,r(o,s)),e.$on("load",o[15]),M(e.$$.fragment),g(e.$$.fragment,1),T(e,l.parentNode,l)):e=null}else if(a){const f=s&1764?re(i,[s&32&&ie(o[5]),s&32&&{autoplay:o[5].autoplay},s&4&&{value:o[2].video||o[2]},s&32&&{show_label:!!o[5].label},i[4],s&64&&{i18n:o[6]},s&128&&{upload:o[7]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&512&&{show_download_button:o[9]}]):{};s&524288&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)}},i(o){n||(e&&g(e.$$.fragment,o),n=!0)},o(o){e&&w(e.$$.fragment,o),n=!1},d(o){o&&d(l),e&&A(e,o)}}}function Bt(t){let e,l,n;const i=[t[5],{value:t[2]},{show_label:!!t[5].label},{show_share_button:!0},{i18n:t[6]},{waveform_settings:{...t[5].waveform_settings,autoplay:t[5].autoplay}},{show_download_button:t[9]},{display_icon_button_wrapper_top_corner:t[10]}];var a=t[1][t[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=fe(f,i[u]);return s!==void 0&&s&1636&&(f=fe(f,re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},i[3],s&64&&{i18n:o[6]},s&32&&{waveform_settings:{...o[5].waveform_settings,autoplay:o[5].autoplay}},s&512&&{show_download_button:o[9]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]}]))),{props:f}}return a&&(l=ue(a,r(t)),l.$on("load",t[14])),{c(){e=j("div"),l&&M(l.$$.fragment),this.h()},l(o){e=S(o,"DIV",{style:!0});var s=D(e);l&&P(l.$$.fragment,s),s.forEach(d),this.h()},h(){ge(e,"position","relative")},m(o,s){C(o,e,s),l&&T(l,e,null),n=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(l){O();const f=l;w(f.$$.fragment,1,0,()=>{A(f,1)}),W()}a?(l=ue(a,r(o,s)),l.$on("load",o[14]),M(l.$$.fragment),g(l.$$.fragment,1),T(l,e,null)):l=null}else if(a){const f=s&1636?re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},i[3],s&64&&{i18n:o[6]},s&32&&{waveform_settings:{...o[5].waveform_settings,autoplay:o[5].autoplay}},s&512&&{show_download_button:o[9]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]}]):{};l.$set(f)}},i(o){n||(l&&g(l.$$.fragment,o),n=!0)},o(o){l&&w(l.$$.fragment,o),n=!1},d(o){o&&d(e),l&&A(l)}}}function Mt(t){let e,l,n;const i=[t[5],{value:t[2]},{target:t[3]},{theme_mode:t[4]},{bokeh_version:t[5].bokeh_version},{caption:t[5].caption||""},{show_actions_button:!0}];var a=t[1][t[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=fe(f,i[u]);return s!==void 0&&s&60&&(f=fe(f,re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&8&&{target:o[3]},s&16&&{theme_mode:o[4]},s&32&&{bokeh_version:o[5].bokeh_version},s&32&&{caption:o[5].caption||""},i[6]]))),{props:f}}return a&&(e=ue(a,r(t)),e.$on("load",t[13])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&P(e.$$.fragment,o),l=G()},m(o,s){e&&T(e,o,s),C(o,l,s),n=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{A(f,1)}),W()}a?(e=ue(a,r(o,s)),e.$on("load",o[13]),M(e.$$.fragment),g(e.$$.fragment,1),T(e,l.parentNode,l)):e=null}else if(a){const f=s&60?re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&8&&{target:o[3]},s&16&&{theme_mode:o[4]},s&32&&{bokeh_version:o[5].bokeh_version},s&32&&{caption:o[5].caption||""},i[6]]):{};e.$set(f)}},i(o){n||(e&&g(e.$$.fragment,o),n=!0)},o(o){e&&w(e.$$.fragment,o),n=!1},d(o){o&&d(l),e&&A(e,o)}}}function Tt(t){let e,l,n;const i=[t[5],{value:t[2]},{show_label:!!t[5].label},{i18n:t[6]},{interactive:!1},{line_breaks:t[5].line_breaks},{wrap:!0},{root:""},{gradio:{dispatch:tl,i18n:t[6]}},{datatype:t[5].datatype},{latex_delimiters:t[5].latex_delimiters},{col_count:t[5].col_count},{row_count:t[5].row_count}];var a=t[1][t[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=fe(f,i[u]);return s!==void 0&&s&100&&(f=fe(f,re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},s&64&&{i18n:o[6]},i[4],s&32&&{line_breaks:o[5].line_breaks},i[6],i[7],s&64&&{gradio:{dispatch:tl,i18n:o[6]}},s&32&&{datatype:o[5].datatype},s&32&&{latex_delimiters:o[5].latex_delimiters},s&32&&{col_count:o[5].col_count},s&32&&{row_count:o[5].row_count}]))),{props:f}}return a&&(e=ue(a,r(t)),e.$on("load",t[12])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&P(e.$$.fragment,o),l=G()},m(o,s){e&&T(e,o,s),C(o,l,s),n=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{A(f,1)}),W()}a?(e=ue(a,r(o,s)),e.$on("load",o[12]),M(e.$$.fragment),g(e.$$.fragment,1),T(e,l.parentNode,l)):e=null}else if(a){const f=s&100?re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&32&&{show_label:!!o[5].label},s&64&&{i18n:o[6]},i[4],s&32&&{line_breaks:o[5].line_breaks},i[6],i[7],s&64&&{gradio:{dispatch:tl,i18n:o[6]}},s&32&&{datatype:o[5].datatype},s&32&&{latex_delimiters:o[5].latex_delimiters},s&32&&{col_count:o[5].col_count},s&32&&{row_count:o[5].row_count}]):{};e.$set(f)}},i(o){n||(e&&g(e.$$.fragment,o),n=!0)},o(o){e&&w(e.$$.fragment,o),n=!1},d(o){o&&d(l),e&&A(e,o)}}}function At(t){let e,l,n;const i=[t[5],{value:t[2]},{display_icon_button_wrapper_top_corner:t[10]},{show_label:!!t[5].label},{i18n:t[6]},{_fetch:t[8]},{allow_preview:!1},{interactive:!1},{mode:"minimal"},{fixed_height:1}];var a=t[1][t[0]];function r(o,s){let f={};for(let u=0;u<i.length;u+=1)f=fe(f,i[u]);return s!==void 0&&s&1380&&(f=fe(f,re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&32&&{show_label:!!o[5].label},s&64&&{i18n:o[6]},s&256&&{_fetch:o[8]},i[6],i[7],i[8],i[9]]))),{props:f}}return a&&(e=ue(a,r(t)),e.$on("load",t[11])),{c(){e&&M(e.$$.fragment),l=G()},l(o){e&&P(e.$$.fragment,o),l=G()},m(o,s){e&&T(e,o,s),C(o,l,s),n=!0},p(o,s){if(s&3&&a!==(a=o[1][o[0]])){if(e){O();const f=e;w(f.$$.fragment,1,0,()=>{A(f,1)}),W()}a?(e=ue(a,r(o,s)),e.$on("load",o[11]),M(e.$$.fragment),g(e.$$.fragment,1),T(e,l.parentNode,l)):e=null}else if(a){const f=s&1380?re(i,[s&32&&ie(o[5]),s&4&&{value:o[2]},s&1024&&{display_icon_button_wrapper_top_corner:o[10]},s&32&&{show_label:!!o[5].label},s&64&&{i18n:o[6]},s&256&&{_fetch:o[8]},i[6],i[7],i[8],i[9]]):{};e.$set(f)}},i(o){n||(e&&g(e.$$.fragment,o),n=!0)},o(o){e&&w(e.$$.fragment,o),n=!1},d(o){o&&d(l),e&&A(e,o)}}}function jt(t){let e;return{c(){e=j("track"),this.h()},l(l){e=S(l,"TRACK",{kind:!0}),this.h()},h(){h(e,"kind","captions")},m(l,n){C(l,e,n)},p:J,d(l){l&&d(e)}}}function St(t){let e,l,n,i;const a=[At,Tt,Mt,Bt,Nt,Lt,Ht,zt],r=[];function o(s,f){return s[0]==="gallery"?0:s[0]==="dataframe"?1:s[0]==="plot"?2:s[0]==="audio"?3:s[0]==="video"?4:s[0]==="image"?5:s[0]==="html"?6:s[0]==="model3d"?7:-1}return~(e=o(t))&&(l=r[e]=a[e](t)),{c(){l&&l.c(),n=G()},l(s){l&&l.l(s),n=G()},m(s,f){~e&&r[e].m(s,f),C(s,n,f),i=!0},p(s,[f]){let u=e;e=o(s),e===u?~e&&r[e].p(s,f):(l&&(O(),w(r[u],1,1,()=>{r[u]=null}),W()),~e?(l=r[e],l?l.p(s,f):(l=r[e]=a[e](s),l.c()),g(l,1),l.m(n.parentNode,n)):l=null)},i(s){i||(g(l),i=!0)},o(s){w(l),i=!1},d(s){s&&d(n),~e&&r[e].d(s)}}}const tl=()=>{},qt=()=>{},il=()=>{};function Ft(t,e,l){let{type:n}=e,{components:i}=e,{value:a}=e,{target:r}=e,{theme_mode:o}=e,{props:s}=e,{i18n:f}=e,{upload:u}=e,{_fetch:c}=e,{allow_file_downloads:_}=e,{display_icon_button_wrapper_top_corner:m=!1}=e;function b(z){Pe.call(this,t,z)}function k(z){Pe.call(this,t,z)}function v(z){Pe.call(this,t,z)}function I(z){Pe.call(this,t,z)}function U(z){Pe.call(this,t,z)}function F(z){Pe.call(this,t,z)}function H(z){Pe.call(this,t,z)}function Z(z){Pe.call(this,t,z)}return t.$$set=z=>{"type"in z&&l(0,n=z.type),"components"in z&&l(1,i=z.components),"value"in z&&l(2,a=z.value),"target"in z&&l(3,r=z.target),"theme_mode"in z&&l(4,o=z.theme_mode),"props"in z&&l(5,s=z.props),"i18n"in z&&l(6,f=z.i18n),"upload"in z&&l(7,u=z.upload),"_fetch"in z&&l(8,c=z._fetch),"allow_file_downloads"in z&&l(9,_=z.allow_file_downloads),"display_icon_button_wrapper_top_corner"in z&&l(10,m=z.display_icon_button_wrapper_top_corner)},t.$$.update=()=>{t.$$.dirty&32&&console.log("props.label",s.label)},[n,i,a,r,o,s,f,u,c,_,m,b,k,v,I,U,F,H,Z]}class Zt extends le{constructor(e){super(),ne(this,e,Ft,St,te,{type:0,components:1,value:2,target:3,theme_mode:4,props:5,i18n:6,upload:7,_fetch:8,allow_file_downloads:9,display_icon_button_wrapper_top_corner:10})}}function Pt(t){var I,U,F,H;let e,l,n,i,a,r,o,s=(((I=t[15].content.value)==null?void 0:I.orig_name)||((U=t[15].content.value)==null?void 0:U.path.split("/").pop())||"file")+"",f,u,c,_,m,b=(((F=t[15].content.value)==null?void 0:F.orig_name)||((H=t[15].content.value)==null?void 0:H.path)||"").split(".").pop().toUpperCase()+"",k,v;return n=new rl({}),{c(){e=j("div"),l=j("div"),M(n.$$.fragment),i=Y(),a=j("div"),r=j("a"),o=j("span"),f=oe(s),_=Y(),m=j("span"),k=oe(b),this.h()},l(Z){e=S(Z,"DIV",{class:!0});var z=D(e);l=S(z,"DIV",{class:!0});var N=D(l);P(n.$$.fragment,N),N.forEach(d),i=Q(z),a=S(z,"DIV",{class:!0});var R=D(a);r=S(R,"A",{"data-testid":!0,class:!0,href:!0,target:!0,download:!0});var K=D(r);o=S(K,"SPAN",{class:!0});var y=D(o);f=se(y,s),y.forEach(d),K.forEach(d),_=Q(R),m=S(R,"SPAN",{class:!0});var ee=D(m);k=se(ee,b),ee.forEach(d),R.forEach(d),z.forEach(d),this.h()},h(){var Z,z;h(l,"class","file-icon svelte-ulpe0d"),h(o,"class","file-name svelte-ulpe0d"),h(r,"data-testid","chatbot-file"),h(r,"class","file-link svelte-ulpe0d"),h(r,"href",u=t[15].content.value.url),h(r,"target","_blank"),h(r,"download",c=window.__is_colab__?null:((Z=t[15].content.value)==null?void 0:Z.orig_name)||((z=t[15].content.value)==null?void 0:z.path.split("/").pop())||"file"),h(m,"class","file-type svelte-ulpe0d"),h(a,"class","file-info svelte-ulpe0d"),h(e,"class","file-container svelte-ulpe0d")},m(Z,z){C(Z,e,z),B(e,l),T(n,l,null),B(e,i),B(e,a),B(a,r),B(r,o),B(o,f),B(a,_),B(a,m),B(m,k),v=!0},p(Z,z){var N,R,K,y,ee,L;(!v||z&32768)&&s!==(s=(((N=Z[15].content.value)==null?void 0:N.orig_name)||((R=Z[15].content.value)==null?void 0:R.path.split("/").pop())||"file")+"")&&pe(f,s),(!v||z&32768&&u!==(u=Z[15].content.value.url))&&h(r,"href",u),(!v||z&32768&&c!==(c=window.__is_colab__?null:((K=Z[15].content.value)==null?void 0:K.orig_name)||((y=Z[15].content.value)==null?void 0:y.path.split("/").pop())||"file"))&&h(r,"download",c),(!v||z&32768)&&b!==(b=(((ee=Z[15].content.value)==null?void 0:ee.orig_name)||((L=Z[15].content.value)==null?void 0:L.path)||"").split(".").pop().toUpperCase()+"")&&pe(k,b)},i(Z){v||(g(n.$$.fragment,Z),v=!0)},o(Z){w(n.$$.fragment,Z),v=!1},d(Z){Z&&d(e),A(n)}}}function Ut(t){let e,l;return e=new Zt({props:{target:t[6],theme_mode:t[7],props:t[15].content.props,type:t[15].content.component,components:t[8],value:t[15].content.value,display_icon_button_wrapper_top_corner:t[13]>0&&t[12],i18n:t[3],upload:t[5],_fetch:t[2],allow_file_downloads:t[11]}}),e.$on("load",t[16]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i&64&&(a.target=n[6]),i&128&&(a.theme_mode=n[7]),i&32768&&(a.props=n[15].content.props),i&32768&&(a.type=n[15].content.component),i&256&&(a.components=n[8]),i&32768&&(a.value=n[15].content.value),i&12288&&(a.display_icon_button_wrapper_top_corner=n[13]>0&&n[12]),i&8&&(a.i18n=n[3]),i&32&&(a.upload=n[5]),i&4&&(a._fetch=n[2]),i&2048&&(a.allow_file_downloads=n[11]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Ot(t){let e,l,n;return l=new sl({props:{message:t[15].content,latex_delimiters:t[0],sanitize_html:t[1],render_markdown:t[9],line_breaks:t[4],allow_tags:t[14],theme_mode:t[7]}}),l.$on("load",function(){Ln(t[10])&&t[10].apply(this,arguments)}),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=D(e);P(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","message-content")},m(i,a){C(i,e,a),T(l,e,null),n=!0},p(i,a){t=i;const r={};a&32768&&(r.message=t[15].content),a&1&&(r.latex_delimiters=t[0]),a&2&&(r.sanitize_html=t[1]),a&512&&(r.render_markdown=t[9]),a&16&&(r.line_breaks=t[4]),a&16384&&(r.allow_tags=t[14]),a&128&&(r.theme_mode=t[7]),l.$set(r)},i(i){n||(g(l.$$.fragment,i),n=!0)},o(i){w(l.$$.fragment,i),n=!1},d(i){i&&d(e),A(l)}}}function Wt(t){let e,l,n,i;const a=[Ot,Ut,Pt],r=[];function o(s,f){return s[15].type==="text"?0:s[15].type==="component"&&s[15].content.component in s[8]?1:s[15].type==="component"&&s[15].content.component==="file"?2:-1}return~(e=o(t))&&(l=r[e]=a[e](t)),{c(){l&&l.c(),n=G()},l(s){l&&l.l(s),n=G()},m(s,f){~e&&r[e].m(s,f),C(s,n,f),i=!0},p(s,[f]){let u=e;e=o(s),e===u?~e&&r[e].p(s,f):(l&&(O(),w(r[u],1,1,()=>{r[u]=null}),W()),~e?(l=r[e],l?l.p(s,f):(l=r[e]=a[e](s),l.c()),g(l,1),l.m(n.parentNode,n)):l=null)},i(s){i||(g(l),i=!0)},o(s){w(l),i=!1},d(s){s&&d(n),~e&&r[e].d(s)}}}function Rt(t,e,l){let{latex_delimiters:n}=e,{sanitize_html:i}=e,{_fetch:a}=e,{i18n:r}=e,{line_breaks:o}=e,{upload:s}=e,{target:f}=e,{theme_mode:u}=e,{_components:c}=e,{render_markdown:_}=e,{scroll:m}=e,{allow_file_downloads:b}=e,{display_consecutive_in_same_bubble:k}=e,{thought_index:v}=e,{allow_tags:I=!1}=e,{message:U}=e;const F=()=>m();return t.$$set=H=>{"latex_delimiters"in H&&l(0,n=H.latex_delimiters),"sanitize_html"in H&&l(1,i=H.sanitize_html),"_fetch"in H&&l(2,a=H._fetch),"i18n"in H&&l(3,r=H.i18n),"line_breaks"in H&&l(4,o=H.line_breaks),"upload"in H&&l(5,s=H.upload),"target"in H&&l(6,f=H.target),"theme_mode"in H&&l(7,u=H.theme_mode),"_components"in H&&l(8,c=H._components),"render_markdown"in H&&l(9,_=H.render_markdown),"scroll"in H&&l(10,m=H.scroll),"allow_file_downloads"in H&&l(11,b=H.allow_file_downloads),"display_consecutive_in_same_bubble"in H&&l(12,k=H.display_consecutive_in_same_bubble),"thought_index"in H&&l(13,v=H.thought_index),"allow_tags"in H&&l(14,I=H.allow_tags),"message"in H&&l(15,U=H.message)},[n,i,a,r,o,s,f,u,c,_,m,b,k,v,I,U,F]}class pn extends le{constructor(e){super(),ne(this,e,Rt,Wt,te,{latex_delimiters:0,sanitize_html:1,_fetch:2,i18n:3,line_breaks:4,upload:5,target:6,theme_mode:7,_components:8,render_markdown:9,scroll:10,allow_file_downloads:11,display_consecutive_in_same_bubble:12,thought_index:13,allow_tags:14,message:15})}}function Tl(t,e,l){const n=t.slice();return n[27]=e[l],n[29]=l,n}function Al(t){let e;return{c(){e=j("span"),this.h()},l(l){e=S(l,"SPAN",{class:!0}),D(e).forEach(d),this.h()},h(){h(e,"class","loading-spinner svelte-1qn6r4f")},m(l,n){C(l,e,n)},d(l){l&&d(e)}}}function jl(t){let e,l,n=t[16].metadata.log&&Sl(t),i=t[16].metadata.duration!==void 0&&ql(t);return{c(){e=j("span"),n&&n.c(),l=Y(),i&&i.c(),this.h()},l(a){e=S(a,"SPAN",{class:!0});var r=D(e);n&&n.l(r),l=Q(r),i&&i.l(r),r.forEach(d),this.h()},h(){h(e,"class","duration svelte-1qn6r4f")},m(a,r){C(a,e,r),n&&n.m(e,null),B(e,l),i&&i.m(e,null)},p(a,r){a[16].metadata.log?n?n.p(a,r):(n=Sl(a),n.c(),n.m(e,l)):n&&(n.d(1),n=null),a[16].metadata.duration!==void 0?i?i.p(a,r):(i=ql(a),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(a){a&&d(e),n&&n.d(),i&&i.d()}}}function Sl(t){let e=t[16].metadata.log+"",l;return{c(){l=oe(e)},l(n){l=se(n,e)},m(n,i){C(n,l,i)},p(n,i){i&65536&&e!==(e=n[16].metadata.log+"")&&pe(l,e)},d(n){n&&d(l)}}}function ql(t){let e,l,n;function i(o,s){return s&65536&&(l=null),l==null&&(l=!!Number.isInteger(o[16].metadata.duration)),l?Kt:o[16].metadata.duration>=.1?Gt:Jt}let a=i(t,-1),r=a(t);return{c(){e=oe("("),r.c(),n=oe(")")},l(o){e=se(o,"("),r.l(o),n=se(o,")")},m(o,s){C(o,e,s),r.m(o,s),C(o,n,s)},p(o,s){a===(a=i(o,s))&&r?r.p(o,s):(r.d(1),r=a(o),r&&(r.c(),r.m(n.parentNode,n)))},d(o){o&&(d(e),d(n)),r.d(o)}}}function Jt(t){let e=(t[16].metadata.duration*1e3).toFixed(1)+"",l,n;return{c(){l=oe(e),n=oe("ms")},l(i){l=se(i,e),n=se(i,"ms")},m(i,a){C(i,l,a),C(i,n,a)},p(i,a){a&65536&&e!==(e=(i[16].metadata.duration*1e3).toFixed(1)+"")&&pe(l,e)},d(i){i&&(d(l),d(n))}}}function Gt(t){let e=t[16].metadata.duration.toFixed(1)+"",l,n;return{c(){l=oe(e),n=oe("s")},l(i){l=se(i,e),n=se(i,"s")},m(i,a){C(i,l,a),C(i,n,a)},p(i,a){a&65536&&e!==(e=i[16].metadata.duration.toFixed(1)+"")&&pe(l,e)},d(i){i&&(d(l),d(n))}}}function Kt(t){let e=t[16].metadata.duration+"",l,n;return{c(){l=oe(e),n=oe("s")},l(i){l=se(i,e),n=se(i,"s")},m(i,a){C(i,l,a),C(i,n,a)},p(i,a){a&65536&&e!==(e=i[16].metadata.duration+"")&&pe(l,e)},d(i){i&&(d(l),d(n))}}}function Fl(t){var f;let e,l,n,i,a,r,o;l=new pn({props:{message:t[16],sanitize_html:t[1],allow_tags:t[15],latex_delimiters:t[2],render_markdown:t[3],_components:t[4],upload:t[5],thought_index:t[6],target:t[7],theme_mode:t[8],_fetch:t[9],scroll:t[10],allow_file_downloads:t[11],display_consecutive_in_same_bubble:t[12],i18n:t[13],line_breaks:t[14]}});let s=((f=t[16].children)==null?void 0:f.length)>0&&Zl(t);return{c(){e=j("div"),M(l.$$.fragment),n=Y(),s&&s.c(),this.h()},l(u){e=S(u,"DIV",{class:!0});var c=D(e);P(l.$$.fragment,c),n=Q(c),s&&s.l(c),c.forEach(d),this.h()},h(){var u;h(e,"class","svelte-1qn6r4f"),X(e,"content",t[18]),X(e,"content-preview",!t[18]&&((u=t[16].metadata)==null?void 0:u.status)!=="done")},m(u,c){C(u,e,c),T(l,e,null),B(e,n),s&&s.m(e,null),t[24](e),a=!0,r||(o=Te(e,"scroll",t[20]),r=!0)},p(u,c){var m,b;const _={};c&65536&&(_.message=u[16]),c&2&&(_.sanitize_html=u[1]),c&32768&&(_.allow_tags=u[15]),c&4&&(_.latex_delimiters=u[2]),c&8&&(_.render_markdown=u[3]),c&16&&(_._components=u[4]),c&32&&(_.upload=u[5]),c&64&&(_.thought_index=u[6]),c&128&&(_.target=u[7]),c&256&&(_.theme_mode=u[8]),c&512&&(_._fetch=u[9]),c&1024&&(_.scroll=u[10]),c&2048&&(_.allow_file_downloads=u[11]),c&4096&&(_.display_consecutive_in_same_bubble=u[12]),c&8192&&(_.i18n=u[13]),c&16384&&(_.line_breaks=u[14]),l.$set(_),((m=u[16].children)==null?void 0:m.length)>0?s?(s.p(u,c),c&65536&&g(s,1)):(s=Zl(u),s.c(),g(s,1),s.m(e,null)):s&&(O(),w(s,1,1,()=>{s=null}),W()),(!a||c&262144)&&X(e,"content",u[18]),(!a||c&327680)&&X(e,"content-preview",!u[18]&&((b=u[16].metadata)==null?void 0:b.status)!=="done")},i(u){a||(g(l.$$.fragment,u),g(s),u&&Bn(()=>{a&&(i||(i=fl(e,ul,{},!0)),i.run(1))}),a=!0)},o(u){w(l.$$.fragment,u),w(s),u&&(i||(i=fl(e,ul,{},!1)),i.run(0)),a=!1},d(u){u&&d(e),A(l),s&&s.d(),t[24](null),u&&i&&i.end(),r=!1,o()}}}function Zl(t){let e,l,n=be(t[16].children),i=[];for(let r=0;r<n.length;r+=1)i[r]=Pl(Tl(t,n,r));const a=r=>w(i[r],1,1,()=>{i[r]=null});return{c(){e=j("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=S(r,"DIV",{class:!0});var o=D(e);for(let s=0;s<i.length;s+=1)i[s].l(o);o.forEach(d),this.h()},h(){h(e,"class","children svelte-1qn6r4f")},m(r,o){C(r,e,o);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);l=!0},p(r,o){if(o&98303){n=be(r[16].children);let s;for(s=0;s<n.length;s+=1){const f=Tl(r,n,s);i[s]?(i[s].p(f,o),g(i[s],1)):(i[s]=Pl(f),i[s].c(),g(i[s],1),i[s].m(e,null))}for(O(),s=n.length;s<i.length;s+=1)a(s);W()}},i(r){if(!l){for(let o=0;o<n.length;o+=1)g(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);l=!1},d(r){r&&d(e),Oe(i,r)}}}function Pl(t){let e,l;return e=new En({props:{thought:t[27],rtl:t[0],sanitize_html:t[1],latex_delimiters:t[2],render_markdown:t[3],_components:t[4],upload:t[5],thought_index:t[6]+1,target:t[7],theme_mode:t[8],_fetch:t[9],scroll:t[10],allow_file_downloads:t[11],display_consecutive_in_same_bubble:t[12],i18n:t[13],line_breaks:t[14]}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i&65536&&(a.thought=n[27]),i&1&&(a.rtl=n[0]),i&2&&(a.sanitize_html=n[1]),i&4&&(a.latex_delimiters=n[2]),i&8&&(a.render_markdown=n[3]),i&16&&(a._components=n[4]),i&32&&(a.upload=n[5]),i&64&&(a.thought_index=n[6]+1),i&128&&(a.target=n[7]),i&256&&(a.theme_mode=n[8]),i&512&&(a._fetch=n[9]),i&1024&&(a.scroll=n[10]),i&2048&&(a.allow_file_downloads=n[11]),i&4096&&(a.display_consecutive_in_same_bubble=n[12]),i&8192&&(a.i18n=n[13]),i&16384&&(a.line_breaks=n[14]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Xt(t){var I,U,F,H,Z,z;let e,l,n,i,a,r,o,s,f,u,c,_,m;i=new we({props:{Icon:Qn}}),r=new sl({props:{message:((I=t[16].metadata)==null?void 0:I.title)||"",render_markdown:t[3],latex_delimiters:t[2],sanitize_html:t[1],allow_tags:t[15]}});let b=((U=t[16].metadata)==null?void 0:U.status)==="pending"&&Al(),k=(((H=(F=t[16])==null?void 0:F.metadata)==null?void 0:H.log)||((z=(Z=t[16])==null?void 0:Z.metadata)==null?void 0:z.duration))&&jl(t),v=t[18]&&Fl(t);return{c(){e=j("div"),l=j("div"),n=j("span"),M(i.$$.fragment),a=Y(),M(r.$$.fragment),o=Y(),b&&b.c(),s=Y(),k&&k.c(),u=Y(),v&&v.c(),this.h()},l(N){e=S(N,"DIV",{class:!0});var R=D(e);l=S(R,"DIV",{class:!0,"aria-busy":!0,role:!0,tabindex:!0});var K=D(l);n=S(K,"SPAN",{class:!0});var y=D(n);P(i.$$.fragment,y),y.forEach(d),a=Q(K),P(r.$$.fragment,K),o=Q(K),b&&b.l(K),s=Q(K),k&&k.l(K),K.forEach(d),u=Q(R),v&&v.l(R),R.forEach(d),this.h()},h(){h(n,"class","arrow svelte-1qn6r4f"),ge(n,"transform",t[18]?"rotate(180deg)":"rotate(0deg)"),h(l,"class","title svelte-1qn6r4f"),h(l,"aria-busy",f=t[16].content===""||t[16].content===null),h(l,"role","button"),h(l,"tabindex","0"),X(l,"expanded",t[18]),h(e,"class","thought-group svelte-1qn6r4f")},m(N,R){C(N,e,R),B(e,l),B(l,n),T(i,n,null),B(l,a),T(r,l,null),B(l,o),b&&b.m(l,null),B(l,s),k&&k.m(l,null),B(e,u),v&&v.m(e,null),c=!0,_||(m=[Te(l,"click",Nn(t[19])),Te(l,"keydown",t[23])],_=!0)},p(N,[R]){var y,ee,L,me,q,de;R&262144&&ge(n,"transform",N[18]?"rotate(180deg)":"rotate(0deg)");const K={};R&65536&&(K.message=((y=N[16].metadata)==null?void 0:y.title)||""),R&8&&(K.render_markdown=N[3]),R&4&&(K.latex_delimiters=N[2]),R&2&&(K.sanitize_html=N[1]),R&32768&&(K.allow_tags=N[15]),r.$set(K),((ee=N[16].metadata)==null?void 0:ee.status)==="pending"?b||(b=Al(),b.c(),b.m(l,s)):b&&(b.d(1),b=null),(me=(L=N[16])==null?void 0:L.metadata)!=null&&me.log||(de=(q=N[16])==null?void 0:q.metadata)!=null&&de.duration?k?k.p(N,R):(k=jl(N),k.c(),k.m(l,null)):k&&(k.d(1),k=null),(!c||R&65536&&f!==(f=N[16].content===""||N[16].content===null))&&h(l,"aria-busy",f),(!c||R&262144)&&X(l,"expanded",N[18]),N[18]?v?(v.p(N,R),R&262144&&g(v,1)):(v=Fl(N),v.c(),g(v,1),v.m(e,null)):v&&(O(),w(v,1,1,()=>{v=null}),W())},i(N){c||(g(i.$$.fragment,N),g(r.$$.fragment,N),g(v),c=!0)},o(N){w(i.$$.fragment,N),w(r.$$.fragment,N),w(v),c=!1},d(N){N&&d(e),A(i),A(r),b&&b.d(),k&&k.d(),v&&v.d(),_=!1,gn(m)}}}function Yt(t){return"children"in t}function Qt(t,e,l){let{thought:n}=e,{rtl:i=!1}=e,{sanitize_html:a}=e,{latex_delimiters:r}=e,{render_markdown:o}=e,{_components:s}=e,{upload:f}=e,{thought_index:u}=e,{target:c}=e,{theme_mode:_}=e,{_fetch:m}=e,{scroll:b}=e,{allow_file_downloads:k}=e,{display_consecutive_in_same_bubble:v}=e,{i18n:I}=e,{line_breaks:U}=e,{allow_tags:F=!1}=e,H,Z=!1,z=!1,N,R=!1;function K(){l(18,Z=!Z),l(22,z=!0)}function y(){N&&!R&&l(17,N.scrollTop=N.scrollHeight,N)}function ee(){N&&(N.scrollHeight-N.scrollTop<=N.clientHeight+10||(R=!0))}const L=q=>q.key==="Enter"&&K();function me(q){Ye[q?"unshift":"push"](()=>{N=q,l(17,N)})}return t.$$set=q=>{"thought"in q&&l(21,n=q.thought),"rtl"in q&&l(0,i=q.rtl),"sanitize_html"in q&&l(1,a=q.sanitize_html),"latex_delimiters"in q&&l(2,r=q.latex_delimiters),"render_markdown"in q&&l(3,o=q.render_markdown),"_components"in q&&l(4,s=q._components),"upload"in q&&l(5,f=q.upload),"thought_index"in q&&l(6,u=q.thought_index),"target"in q&&l(7,c=q.target),"theme_mode"in q&&l(8,_=q.theme_mode),"_fetch"in q&&l(9,m=q._fetch),"scroll"in q&&l(10,b=q.scroll),"allow_file_downloads"in q&&l(11,k=q.allow_file_downloads),"display_consecutive_in_same_bubble"in q&&l(12,v=q.display_consecutive_in_same_bubble),"i18n"in q&&l(13,I=q.i18n),"line_breaks"in q&&l(14,U=q.line_breaks),"allow_tags"in q&&l(15,F=q.allow_tags)},t.$$.update=()=>{var q,de;t.$$.dirty&2097152&&l(16,H={...n,children:Yt(n)?n.children:[]}),t.$$.dirty&4259840&&(z||l(18,Z=((q=H==null?void 0:H.metadata)==null?void 0:q.status)!=="done")),t.$$.dirty&196608&&H.content&&N&&((de=H.metadata)==null?void 0:de.status)!=="done"&&setTimeout(y,0)},[i,a,r,o,s,f,u,c,_,m,b,k,v,I,U,F,H,N,Z,K,ee,n,z,L,me]}class En extends le{constructor(e){super(),ne(this,e,Qt,Xt,te,{thought:21,rtl:0,sanitize_html:1,latex_delimiters:2,render_markdown:3,_components:4,upload:5,thought_index:6,target:7,theme_mode:8,_fetch:9,scroll:10,allow_file_downloads:11,display_consecutive_in_same_bubble:12,i18n:13,line_breaks:14,allow_tags:15})}}function Ul(t,e,l){const n=t.slice();return n[46]=e[l],n[47]=e,n[48]=l,n}function Ol(t){var i;let e,l,n;return l=new Re({props:{class:"avatar-image",src:(i=t[2])==null?void 0:i.url,alt:t[4]+" avatar"}}),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var r=D(e);P(l.$$.fragment,r),r.forEach(d),this.h()},h(){h(e,"class","avatar-container svelte-1csv61q")},m(a,r){C(a,e,r),T(l,e,null),n=!0},p(a,r){var s;const o={};r[0]&4&&(o.src=(s=a[2])==null?void 0:s.url),r[0]&16&&(o.alt=a[4]+" avatar"),l.$set(o)},i(a){n||(g(l.$$.fragment,a),n=!0)},o(a){w(l.$$.fragment,a),n=!1},d(a){a&&d(e),A(l)}}}function yt(t){let e,l,n,i,a,r=t[48],o,s,f;const u=[ei,xt],c=[];function _(I,U){var F,H;return(H=(F=I[46])==null?void 0:F.metadata)!=null&&H.title?0:1}l=_(t),n=c[l]=u[l](t);const m=()=>t[42](e,r),b=()=>t[42](null,r);function k(){return t[43](t[46])}function v(...I){return t[44](t[46],...I)}return{c(){e=j("div"),n.c(),this.h()},l(I){e=S(I,"DIV",{"data-testid":!0,dir:!0,"aria-label":!0,class:!0});var U=D(e);n.l(U),U.forEach(d),this.h()},h(){h(e,"data-testid",t[4]),h(e,"dir",i=t[12]?"rtl":"ltr"),h(e,"aria-label",a=t[4]+"'s message: "+Gl(t[46])),h(e,"class","svelte-1csv61q"),X(e,"latest",t[20]===t[1].length-1),X(e,"message-markdown-disabled",!t[7]),X(e,"selectable",t[10]),ge(e,"user-select","text"),ge(e,"cursor",t[10]?"pointer":"auto"),ge(e,"text-align",t[12]?"right":"left")},m(I,U){C(I,e,U),c[l].m(e,null),m(),o=!0,s||(f=[Te(e,"click",k),Te(e,"keydown",v)],s=!0)},p(I,U){t=I;let F=l;l=_(t),l===F?c[l].p(t,U):(O(),w(c[F],1,1,()=>{c[F]=null}),W(),n=c[l],n?n.p(t,U):(n=c[l]=u[l](t),n.c()),g(n,1),n.m(e,null)),(!o||U[0]&16)&&h(e,"data-testid",t[4]),(!o||U[0]&4096&&i!==(i=t[12]?"rtl":"ltr"))&&h(e,"dir",i),(!o||U[0]&48&&a!==(a=t[4]+"'s message: "+Gl(t[46])))&&h(e,"aria-label",a),r!==t[48]&&(b(),r=t[48],m()),(!o||U[0]&1048578)&&X(e,"latest",t[20]===t[1].length-1),(!o||U[0]&128)&&X(e,"message-markdown-disabled",!t[7]),(!o||U[0]&1024)&&X(e,"selectable",t[10]),U[0]&1024&&ge(e,"cursor",t[10]?"pointer":"auto"),U[0]&4096&&ge(e,"text-align",t[12]?"right":"left")},i(I){o||(g(n),o=!0)},o(I){w(n),o=!1},d(I){I&&d(e),c[l].d(),b(),s=!1,gn(f)}}}function $t(t){let e,l,n;function i(){t[41].call(e,t[48])}return{c(){e=j("textarea"),this.h()},l(a){e=S(a,"TEXTAREA",{class:!0}),D(e).forEach(d),this.h()},h(){h(e,"class","edit-textarea svelte-1csv61q"),e.autofocus=!0,ge(e,"width",`max(${t[29][t[48]]}px, 160px)`),ge(e,"min-height",`${t[30][t[48]]}px`)},m(a,r){C(a,e,r),_l(e,t[0][t[48]]),e.focus(),l||(n=Te(e,"input",i),l=!0)},p(a,r){t=a,r[0]&1&&_l(e,t[0][t[48]]),r[0]&536870912&&ge(e,"width",`max(${t[29][t[48]]}px, 160px)`),r[0]&1073741824&&ge(e,"min-height",`${t[30][t[48]]}px`)},i:J,o:J,d(a){a&&d(e),l=!1,n()}}}function xt(t){let e,l;return e=new pn({props:{message:t[46],sanitize_html:t[9],allow_tags:t[26],latex_delimiters:t[8],render_markdown:t[7],_components:t[19],upload:t[16],thought_index:t[48],target:t[17],theme_mode:t[18],_fetch:t[11],scroll:t[21],allow_file_downloads:t[22],display_consecutive_in_same_bubble:t[24],i18n:t[14],line_breaks:t[15]}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i[0]&32&&(a.message=n[46]),i[0]&512&&(a.sanitize_html=n[9]),i[0]&67108864&&(a.allow_tags=n[26]),i[0]&256&&(a.latex_delimiters=n[8]),i[0]&128&&(a.render_markdown=n[7]),i[0]&524288&&(a._components=n[19]),i[0]&65536&&(a.upload=n[16]),i[0]&131072&&(a.target=n[17]),i[0]&262144&&(a.theme_mode=n[18]),i[0]&2048&&(a._fetch=n[11]),i[0]&2097152&&(a.scroll=n[21]),i[0]&4194304&&(a.allow_file_downloads=n[22]),i[0]&16777216&&(a.display_consecutive_in_same_bubble=n[24]),i[0]&16384&&(a.i18n=n[14]),i[0]&32768&&(a.line_breaks=n[15]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function ei(t){let e,l;return e=new En({props:{thought:t[46],rtl:t[12],sanitize_html:t[9],allow_tags:t[26],latex_delimiters:t[8],render_markdown:t[7],_components:t[19],upload:t[16],thought_index:t[48],target:t[17],theme_mode:t[18],_fetch:t[11],scroll:t[21],allow_file_downloads:t[22],display_consecutive_in_same_bubble:t[24],i18n:t[14],line_breaks:t[15]}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i[0]&32&&(a.thought=n[46]),i[0]&4096&&(a.rtl=n[12]),i[0]&512&&(a.sanitize_html=n[9]),i[0]&67108864&&(a.allow_tags=n[26]),i[0]&256&&(a.latex_delimiters=n[8]),i[0]&128&&(a.render_markdown=n[7]),i[0]&524288&&(a._components=n[19]),i[0]&65536&&(a.upload=n[16]),i[0]&131072&&(a.target=n[17]),i[0]&262144&&(a.theme_mode=n[18]),i[0]&2048&&(a._fetch=n[11]),i[0]&2097152&&(a.scroll=n[21]),i[0]&4194304&&(a.allow_file_downloads=n[22]),i[0]&16777216&&(a.display_consecutive_in_same_bubble=n[24]),i[0]&16384&&(a.i18n=n[14]),i[0]&32768&&(a.line_breaks=n[15]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Wl(t){let e,l;const n=[t[31],{current_feedback:t[25]},{watermark:t[27]},{i18n:t[14]}];let i={};for(let a=0;a<n.length;a+=1)i=fe(i,n[a]);return e=new vn({props:i}),e.$on("copy",t[45]),{c(){M(e.$$.fragment)},l(a){P(e.$$.fragment,a)},m(a,r){T(e,a,r),l=!0},p(a,r){const o=r[0]&167788544|r[1]&1?re(n,[r[1]&1&&ie(a[31]),r[0]&33554432&&{current_feedback:a[25]},r[0]&134217728&&{watermark:a[27]},r[0]&16384&&{i18n:a[14]}]):{};e.$set(o)},i(a){l||(g(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){A(e,a)}}}function Rl(t){let e,l,n,i,a,r,o;const s=[$t,yt],f=[];function u(_,m){return _[23]&&_[46].type==="text"?0:1}l=u(t),n=f[l]=s[l](t);let c=t[6]==="panel"&&Wl(t);return{c(){e=j("div"),n.c(),a=Y(),c&&c.c(),r=G(),this.h()},l(_){e=S(_,"DIV",{class:!0});var m=D(e);n.l(m),m.forEach(d),a=Q(_),c&&c.l(_),r=G(),this.h()},h(){h(e,"class",i="message "+(t[24]?"":t[4])+" svelte-1csv61q"),X(e,"panel-full-width",!0),X(e,"message-markdown-disabled",!t[7]),X(e,"component",t[46].type==="component"),X(e,"html",hl(t[46])&&t[46].content.component==="html"),X(e,"thought",t[48]>0)},m(_,m){C(_,e,m),f[l].m(e,null),C(_,a,m),c&&c.m(_,m),C(_,r,m),o=!0},p(_,m){let b=l;l=u(_),l===b?f[l].p(_,m):(O(),w(f[b],1,1,()=>{f[b]=null}),W(),n=f[l],n?n.p(_,m):(n=f[l]=s[l](_),n.c()),g(n,1),n.m(e,null)),(!o||m[0]&16777232&&i!==(i="message "+(_[24]?"":_[4])+" svelte-1csv61q"))&&h(e,"class",i),(!o||m[0]&16777232)&&X(e,"panel-full-width",!0),(!o||m[0]&16777360)&&X(e,"message-markdown-disabled",!_[7]),(!o||m[0]&16777264)&&X(e,"component",_[46].type==="component"),(!o||m[0]&16777264)&&X(e,"html",hl(_[46])&&_[46].content.component==="html"),(!o||m[0]&16777232)&&X(e,"thought",_[48]>0),_[6]==="panel"?c?(c.p(_,m),m[0]&64&&g(c,1)):(c=Wl(_),c.c(),g(c,1),c.m(r.parentNode,r)):c&&(O(),w(c,1,1,()=>{c=null}),W())},i(_){o||(g(n),g(c),o=!0)},o(_){w(n),w(c),o=!1},d(_){_&&(d(e),d(a),d(r)),f[l].d(),c&&c.d(_)}}}function Jl(t){let e,l;const n=[t[31],{i18n:t[14]}];let i={};for(let a=0;a<n.length;a+=1)i=fe(i,n[a]);return e=new vn({props:i}),{c(){M(e.$$.fragment)},l(a){P(e.$$.fragment,a)},m(a,r){T(e,a,r),l=!0},p(a,r){const o=r[0]&16384|r[1]&1?re(n,[r[1]&1&&ie(a[31]),r[0]&16384&&{i18n:a[14]}]):{};e.$set(o)},i(a){l||(g(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){A(e,a)}}}function li(t){let e,l,n,i,a,r,o,s,f,u=t[2]!==null&&Ol(t),c=be(t[5]),_=[];for(let k=0;k<c.length;k+=1)_[k]=Rl(Ul(t,c,k));const m=k=>w(_[k],1,1,()=>{_[k]=null});let b=t[6]==="bubble"&&Jl(t);return{c(){e=j("div"),u&&u.c(),l=Y(),n=j("div"),i=j("div");for(let k=0;k<_.length;k+=1)_[k].c();o=Y(),b&&b.c(),s=G(),this.h()},l(k){e=S(k,"DIV",{class:!0});var v=D(e);u&&u.l(v),l=Q(v),n=S(v,"DIV",{class:!0});var I=D(n);i=S(I,"DIV",{class:!0});var U=D(i);for(let F=0;F<_.length;F+=1)_[F].l(U);U.forEach(d),I.forEach(d),v.forEach(d),o=Q(k),b&&b.l(k),s=G(),this.h()},h(){h(i,"class",a=Ge(t[24]?t[4]:"")+" svelte-1csv61q"),X(i,"message",t[24]),h(n,"class","flex-wrap svelte-1csv61q"),X(n,"role",t[4]),X(n,"component-wrap",t[5][0].type==="component"),h(e,"class",r="message-row "+t[6]+" "+t[4]+"-row svelte-1csv61q"),X(e,"with_avatar",t[2]!==null),X(e,"with_opposite_avatar",t[3]!==null)},m(k,v){C(k,e,v),u&&u.m(e,null),B(e,l),B(e,n),B(n,i);for(let I=0;I<_.length;I+=1)_[I]&&_[I].m(i,null);C(k,o,v),b&&b.m(k,v),C(k,s,v),f=!0},p(k,v){if(k[2]!==null?u?(u.p(k,v),v[0]&4&&g(u,1)):(u=Ol(k),u.c(),g(u,1),u.m(e,l)):u&&(O(),w(u,1,1,()=>{u=null}),W()),v[0]&2147483635|v[1]&3){c=be(k[5]);let I;for(I=0;I<c.length;I+=1){const U=Ul(k,c,I);_[I]?(_[I].p(U,v),g(_[I],1)):(_[I]=Rl(U),_[I].c(),g(_[I],1),_[I].m(i,null))}for(O(),I=c.length;I<_.length;I+=1)m(I);W()}(!f||v[0]&16777232&&a!==(a=Ge(k[24]?k[4]:"")+" svelte-1csv61q"))&&h(i,"class",a),(!f||v[0]&16777232)&&X(i,"message",k[24]),(!f||v[0]&16)&&X(n,"role",k[4]),(!f||v[0]&32)&&X(n,"component-wrap",k[5][0].type==="component"),(!f||v[0]&80&&r!==(r="message-row "+k[6]+" "+k[4]+"-row svelte-1csv61q"))&&h(e,"class",r),(!f||v[0]&84)&&X(e,"with_avatar",k[2]!==null),(!f||v[0]&88)&&X(e,"with_opposite_avatar",k[3]!==null),k[6]==="bubble"?b?(b.p(k,v),v[0]&64&&g(b,1)):(b=Jl(k),b.c(),g(b,1),b.m(s.parentNode,s)):b&&(O(),w(b,1,1,()=>{b=null}),W())},i(k){if(!f){g(u);for(let v=0;v<c.length;v+=1)g(_[v]);g(b),f=!0}},o(k){w(u),_=_.filter(Boolean);for(let v=0;v<_.length;v+=1)w(_[v]);w(b),f=!1},d(k){k&&(d(e),d(o),d(s)),u&&u.d(),Oe(_,k),b&&b.d(k)}}}let ni=!1;function Gl(t){var e,l,n,i;return t.type==="text"?t.content:t.type==="component"&&t.content.component==="file"?Array.isArray(t.content.value)?`file of extension type: ${(e=t.content.value[0].orig_name)==null?void 0:e.split(".").pop()}`:`file of extension type: ${(n=(l=t.content.value)==null?void 0:l.orig_name)==null?void 0:n.split(".").pop()}`+(((i=t.content.value)==null?void 0:i.orig_name)??""):`a component of type ${t.content.component??"unknown"}`}function ti(t,e,l){let{value:n}=e,{avatar_img:i}=e,{opposite_avatar_img:a=null}=e,{role:r="user"}=e,{messages:o=[]}=e,{layout:s}=e,{render_markdown:f}=e,{latex_delimiters:u}=e,{sanitize_html:c}=e,{selectable:_}=e,{_fetch:m}=e,{rtl:b}=e,{dispatch:k}=e,{i18n:v}=e,{line_breaks:I}=e,{upload:U}=e,{target:F}=e,{theme_mode:H}=e,{_components:Z}=e,{i:z}=e,{show_copy_button:N}=e,{generating:R}=e,{feedback_options:K}=e,{show_like:y}=e,{show_edit:ee}=e,{show_retry:L}=e,{show_undo:me}=e,{handle_action:q}=e,{scroll:de}=e,{allow_file_downloads:ze}=e,{in_edit_mode:Ve}=e,{edit_messages:Ie}=e,{display_consecutive_in_same_bubble:Ae}=e,{current_feedback:He=null}=e,{allow_tags:je=!1}=e,{watermark:Le=null}=e,ke=[],Ne=Array(o.length).fill(160),Be=Array(o.length).fill(0);function Me(V,he){k("select",{index:he.index,value:he.content})}let Ue;function Se(V){Ie[V]=this.value,l(0,Ie)}function Ee(V,he){Ye[V?"unshift":"push"](()=>{ke[he]=V,l(28,ke)})}const ae=V=>Me(z,V),qe=(V,he)=>{he.key==="Enter"&&Me(z,V)},ce=V=>k("copy",V.detail);return t.$$set=V=>{"value"in V&&l(1,n=V.value),"avatar_img"in V&&l(2,i=V.avatar_img),"opposite_avatar_img"in V&&l(3,a=V.opposite_avatar_img),"role"in V&&l(4,r=V.role),"messages"in V&&l(5,o=V.messages),"layout"in V&&l(6,s=V.layout),"render_markdown"in V&&l(7,f=V.render_markdown),"latex_delimiters"in V&&l(8,u=V.latex_delimiters),"sanitize_html"in V&&l(9,c=V.sanitize_html),"selectable"in V&&l(10,_=V.selectable),"_fetch"in V&&l(11,m=V._fetch),"rtl"in V&&l(12,b=V.rtl),"dispatch"in V&&l(13,k=V.dispatch),"i18n"in V&&l(14,v=V.i18n),"line_breaks"in V&&l(15,I=V.line_breaks),"upload"in V&&l(16,U=V.upload),"target"in V&&l(17,F=V.target),"theme_mode"in V&&l(18,H=V.theme_mode),"_components"in V&&l(19,Z=V._components),"i"in V&&l(20,z=V.i),"show_copy_button"in V&&l(33,N=V.show_copy_button),"generating"in V&&l(34,R=V.generating),"feedback_options"in V&&l(35,K=V.feedback_options),"show_like"in V&&l(36,y=V.show_like),"show_edit"in V&&l(37,ee=V.show_edit),"show_retry"in V&&l(38,L=V.show_retry),"show_undo"in V&&l(39,me=V.show_undo),"handle_action"in V&&l(40,q=V.handle_action),"scroll"in V&&l(21,de=V.scroll),"allow_file_downloads"in V&&l(22,ze=V.allow_file_downloads),"in_edit_mode"in V&&l(23,Ve=V.in_edit_mode),"edit_messages"in V&&l(0,Ie=V.edit_messages),"display_consecutive_in_same_bubble"in V&&l(24,Ae=V.display_consecutive_in_same_bubble),"current_feedback"in V&&l(25,He=V.current_feedback),"allow_tags"in V&&l(26,je=V.allow_tags),"watermark"in V&&l(27,Le=V.watermark)},t.$$.update=()=>{var V,he;if(t.$$.dirty[0]&276824096&&Ve&&!ni){const Fe=ke.length-o.length;for(let ve=Fe;ve<ke.length;ve++)ve>=0&&(l(29,Ne[ve-Fe]=(V=ke[ve])==null?void 0:V.clientWidth,Ne),l(30,Be[ve-Fe]=(he=ke[ve])==null?void 0:he.clientHeight,Be))}t.$$.dirty[0]&176169076|t.$$.dirty[1]&1020&&l(31,Ue={handle_action:q,likeable:y,feedback_options:K,show_retry:L,show_undo:me,show_edit:ee,in_edit_mode:Ve,generating:R,show_copy_button:N,message:o,position:r==="user"?"right":"left",avatar:i,layout:s,dispatch:k,current_feedback:He,watermark:Le})},[Ie,n,i,a,r,o,s,f,u,c,_,m,b,k,v,I,U,F,H,Z,z,de,ze,Ve,Ae,He,je,Le,ke,Ne,Be,Ue,Me,N,R,K,y,ee,L,me,q,Se,Ee,ae,qe,ce]}class ii extends le{constructor(e){super(),ne(this,e,ti,li,te,{value:1,avatar_img:2,opposite_avatar_img:3,role:4,messages:5,layout:6,render_markdown:7,latex_delimiters:8,sanitize_html:9,selectable:10,_fetch:11,rtl:12,dispatch:13,i18n:14,line_breaks:15,upload:16,target:17,theme_mode:18,_components:19,i:20,show_copy_button:33,generating:34,feedback_options:35,show_like:36,show_edit:37,show_retry:38,show_undo:39,handle_action:40,scroll:21,allow_file_downloads:22,in_edit_mode:23,edit_messages:0,display_consecutive_in_same_bubble:24,current_feedback:25,allow_tags:26,watermark:27},null,[-1,-1])}}function Kl(t){let e,l,n;return l=new Re({props:{class:"avatar-image",src:t[1][1].url,alt:"bot avatar"}}),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=D(e);P(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","avatar-container svelte-134ihlx")},m(i,a){C(i,e,a),T(l,e,null),n=!0},p(i,a){const r={};a&2&&(r.src=i[1][1].url),l.$set(r)},i(i){n||(g(l.$$.fragment,i),n=!0)},o(i){w(l.$$.fragment,i),n=!1},d(i){i&&d(e),A(l)}}}function ai(t){let e,l,n,i,a='<span class="sr-only">Loading content</span> <div class="dots svelte-134ihlx"><div class="dot svelte-134ihlx"></div> <div class="dot svelte-134ihlx"></div> <div class="dot svelte-134ihlx"></div></div>',r,o,s=t[1][1]!==null&&Kl(t);return{c(){e=j("div"),s&&s.c(),l=Y(),n=j("div"),i=j("div"),i.innerHTML=a,this.h()},l(f){e=S(f,"DIV",{class:!0});var u=D(e);s&&s.l(u),l=Q(u),n=S(u,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-live":!0});var c=D(n);i=S(c,"DIV",{class:!0,"data-svelte-h":!0}),bn(i)!=="svelte-1vfby8"&&(i.innerHTML=a),c.forEach(d),u.forEach(d),this.h()},h(){h(i,"class","message-content svelte-134ihlx"),h(n,"class",r="message bot pending "+t[0]+" svelte-134ihlx"),h(n,"role","status"),h(n,"aria-label","Loading response"),h(n,"aria-live","polite"),X(n,"with_avatar",t[1][1]!==null),X(n,"with_opposite_avatar",t[1][0]!==null),h(e,"class","container svelte-134ihlx")},m(f,u){C(f,e,u),s&&s.m(e,null),B(e,l),B(e,n),B(n,i),o=!0},p(f,[u]){f[1][1]!==null?s?(s.p(f,u),u&2&&g(s,1)):(s=Kl(f),s.c(),g(s,1),s.m(e,l)):s&&(O(),w(s,1,1,()=>{s=null}),W()),(!o||u&1&&r!==(r="message bot pending "+f[0]+" svelte-134ihlx"))&&h(n,"class",r),(!o||u&3)&&X(n,"with_avatar",f[1][1]!==null),(!o||u&3)&&X(n,"with_opposite_avatar",f[1][0]!==null)},i(f){o||(g(s),o=!0)},o(f){w(s),o=!1},d(f){f&&d(e),s&&s.d()}}}function oi(t,e,l){let{layout:n="bubble"}=e,{avatar_images:i=[null,null]}=e;return t.$$set=a=>{"layout"in a&&l(0,n=a.layout),"avatar_images"in a&&l(1,i=a.avatar_images)},[n,i]}class Cn extends le{constructor(e){super(),ne(this,e,oi,ai,te,{layout:0,avatar_images:1})}}function Xl(t,e,l){const n=t.slice();return n[6]=e[l],n[8]=l,n}function Yl(t,e,l){const n=t.slice();return n[9]=e[l],n[8]=l,n}function Ql(t){let e,l,n;return l=new sl({props:{message:t[1],latex_delimiters:t[2]}}),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=D(e);P(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","placeholder svelte-rodltw")},m(i,a){C(i,e,a),T(l,e,null),n=!0},p(i,a){const r={};a&2&&(r.message=i[1]),a&4&&(r.latex_delimiters=i[2]),l.$set(r)},i(i){n||(g(l.$$.fragment,i),n=!0)},o(i){w(l.$$.fragment,i),n=!1},d(i){i&&d(e),A(l)}}}function yl(t){let e,l,n=be(t[0]),i=[];for(let r=0;r<n.length;r+=1)i[r]=nn(Xl(t,n,r));const a=r=>w(i[r],1,1,()=>{i[r]=null});return{c(){e=j("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=S(r,"DIV",{class:!0,role:!0});var o=D(e);for(let s=0;s<i.length;s+=1)i[s].l(o);o.forEach(d),this.h()},h(){h(e,"class","examples svelte-rodltw"),h(e,"role","list")},m(r,o){C(r,e,o);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);l=!0},p(r,o){if(o&9){n=be(r[0]);let s;for(s=0;s<n.length;s+=1){const f=Xl(r,n,s);i[s]?(i[s].p(f,o),g(i[s],1)):(i[s]=nn(f),i[s].c(),g(i[s],1),i[s].m(e,null))}for(O(),s=n.length;s<i.length;s+=1)a(s);W()}},i(r){if(!l){for(let o=0;o<n.length;o+=1)g(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);l=!1},d(r){r&&d(e),Oe(i,r)}}}function si(t){let e,l,n,i,a,r,o;const s=[mi,hi,ci,ui,_i],f=[];function u(c,_){var m,b,k;return _&1&&(e=null),_&1&&(l=null),_&1&&(n=null),c[6].files.length>1?0:(e==null&&(e=!!((m=c[6].files[0].mime_type)!=null&&m.includes("image"))),e?1:(l==null&&(l=!!((b=c[6].files[0].mime_type)!=null&&b.includes("video"))),l?2:(n==null&&(n=!!((k=c[6].files[0].mime_type)!=null&&k.includes("audio"))),n?3:4)))}return i=u(t,-1),a=f[i]=s[i](t),{c(){a.c(),r=G()},l(c){a.l(c),r=G()},m(c,_){f[i].m(c,_),C(c,r,_),o=!0},p(c,_){let m=i;i=u(c,_),i===m?f[i].p(c,_):(O(),w(f[m],1,1,()=>{f[m]=null}),W(),a=f[i],a?a.p(c,_):(a=f[i]=s[i](c),a.c()),g(a,1),a.m(r.parentNode,r))},i(c){o||(g(a),o=!0)},o(c){w(a),o=!1},d(c){c&&d(r),f[i].d(c)}}}function ri(t){let e,l='<span class="text-icon-aa svelte-rodltw">Aa</span>';return{c(){e=j("div"),e.innerHTML=l,this.h()},l(n){e=S(n,"DIV",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),bn(e)!=="svelte-15cq9iz"&&(e.innerHTML=l),this.h()},h(){h(e,"class","example-icon svelte-rodltw"),h(e,"aria-hidden","true")},m(n,i){C(n,e,i)},p:J,i:J,o:J,d(n){n&&d(e)}}}function fi(t){let e,l,n;return l=new Re({props:{class:"example-image",src:t[6].icon.url,alt:"Example icon"}}),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=D(e);P(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","example-image-container svelte-rodltw")},m(i,a){C(i,e,a),T(l,e,null),n=!0},p(i,a){const r={};a&1&&(r.src=i[6].icon.url),l.$set(r)},i(i){n||(g(l.$$.fragment,i),n=!0)},o(i){w(l.$$.fragment,i),n=!1},d(i){i&&d(e),A(l)}}}function _i(t){let e,l,n,i;return l=new rl({}),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0,"aria-label":!0});var r=D(e);P(l.$$.fragment,r),r.forEach(d),this.h()},h(){h(e,"class","example-icon svelte-rodltw"),h(e,"aria-label",n=`File: ${t[6].files[0].orig_name}`)},m(a,r){C(a,e,r),T(l,e,null),i=!0},p(a,r){(!i||r&1&&n!==(n=`File: ${a[6].files[0].orig_name}`))&&h(e,"aria-label",n)},i(a){i||(g(l.$$.fragment,a),i=!0)},o(a){w(l.$$.fragment,a),i=!1},d(a){a&&d(e),A(l)}}}function ui(t){let e,l,n,i;return l=new kn({}),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0,"aria-label":!0});var r=D(e);P(l.$$.fragment,r),r.forEach(d),this.h()},h(){h(e,"class","example-icon svelte-rodltw"),h(e,"aria-label",n=`File: ${t[6].files[0].orig_name}`)},m(a,r){C(a,e,r),T(l,e,null),i=!0},p(a,r){(!i||r&1&&n!==(n=`File: ${a[6].files[0].orig_name}`))&&h(e,"aria-label",n)},i(a){i||(g(l.$$.fragment,a),i=!0)},o(a){w(l.$$.fragment,a),i=!1},d(a){a&&d(e),A(l)}}}function ci(t){let e,l,n;return{c(){e=j("div"),l=j("video"),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=D(e);l=S(a,"VIDEO",{class:!0,src:!0,"aria-hidden":!0}),D(l).forEach(d),a.forEach(d),this.h()},h(){h(l,"class","example-image"),Ke(l.src,n=t[6].files[0].url)||h(l,"src",n),h(l,"aria-hidden","true"),h(e,"class","example-image-container svelte-rodltw")},m(i,a){C(i,e,a),B(e,l)},p(i,a){a&1&&!Ke(l.src,n=i[6].files[0].url)&&h(l,"src",n)},i:J,o:J,d(i){i&&d(e)}}}function hi(t){let e,l,n;return l=new Re({props:{class:"example-image",src:t[6].files[0].url,alt:t[6].files[0].orig_name||"Example image"}}),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=D(e);P(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","example-image-container svelte-rodltw")},m(i,a){C(i,e,a),T(l,e,null),n=!0},p(i,a){const r={};a&1&&(r.src=i[6].files[0].url),a&1&&(r.alt=i[6].files[0].orig_name||"Example image"),l.$set(r)},i(i){n||(g(l.$$.fragment,i),n=!0)},o(i){w(l.$$.fragment,i),n=!1},d(i){i&&d(e),A(l)}}}function mi(t){let e,l,n,i=be(t[6].files.slice(0,4)),a=[];for(let s=0;s<i.length;s+=1)a[s]=en(Yl(t,i,s));const r=s=>w(a[s],1,1,()=>{a[s]=null});let o=t[6].files.length>4&&ln(t);return{c(){e=j("div");for(let s=0;s<a.length;s+=1)a[s].c();l=Y(),o&&o.c(),this.h()},l(s){e=S(s,"DIV",{class:!0,role:!0,"aria-label":!0});var f=D(e);for(let u=0;u<a.length;u+=1)a[u].l(f);l=Q(f),o&&o.l(f),f.forEach(d),this.h()},h(){h(e,"class","example-icons-grid svelte-rodltw"),h(e,"role","group"),h(e,"aria-label","Example attachments")},m(s,f){C(s,e,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);B(e,l),o&&o.m(e,null),n=!0},p(s,f){if(f&1){i=be(s[6].files.slice(0,4));let u;for(u=0;u<i.length;u+=1){const c=Yl(s,i,u);a[u]?(a[u].p(c,f),g(a[u],1)):(a[u]=en(c),a[u].c(),g(a[u],1),a[u].m(e,l))}for(O(),u=i.length;u<a.length;u+=1)r(u);W()}s[6].files.length>4?o?o.p(s,f):(o=ln(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(s){if(!n){for(let f=0;f<i.length;f+=1)g(a[f]);n=!0}},o(s){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)w(a[f]);n=!1},d(s){s&&d(e),Oe(a,s),o&&o.d()}}}function di(t){let e,l,n,i,a,r;const o=[ki,wi],s=[];function f(u,c){var _;return c&1&&(l=null),l==null&&(l=!!((_=u[9].mime_type)!=null&&_.includes("audio"))),l?0:1}return n=f(t,-1),i=s[n]=o[n](t),{c(){e=j("div"),i.c(),this.h()},l(u){e=S(u,"DIV",{class:!0,"aria-label":!0});var c=D(e);i.l(c),c.forEach(d),this.h()},h(){h(e,"class","example-icon svelte-rodltw"),h(e,"aria-label",a=`File: ${t[9].orig_name}`)},m(u,c){C(u,e,c),s[n].m(e,null),r=!0},p(u,c){let _=n;n=f(u,c),n!==_&&(O(),w(s[_],1,1,()=>{s[_]=null}),W(),i=s[n],i||(i=s[n]=o[n](u),i.c()),g(i,1),i.m(e,null)),(!r||c&1&&a!==(a=`File: ${u[9].orig_name}`))&&h(e,"aria-label",a)},i(u){r||(g(i),r=!0)},o(u){w(i),r=!1},d(u){u&&d(e),s[n].d()}}}function gi(t){let e,l,n,i,a=t[8]===3&&t[6].files.length>4&&$l(t);return{c(){e=j("div"),l=j("video"),i=Y(),a&&a.c(),this.h()},l(r){e=S(r,"DIV",{class:!0});var o=D(e);l=S(o,"VIDEO",{class:!0,src:!0,"aria-hidden":!0}),D(l).forEach(d),i=Q(o),a&&a.l(o),o.forEach(d),this.h()},h(){h(l,"class","example-image"),Ke(l.src,n=t[9].url)||h(l,"src",n),h(l,"aria-hidden","true"),h(e,"class","example-image-container svelte-rodltw")},m(r,o){C(r,e,o),B(e,l),B(e,i),a&&a.m(e,null)},p(r,o){o&1&&!Ke(l.src,n=r[9].url)&&h(l,"src",n),r[8]===3&&r[6].files.length>4?a?a.p(r,o):(a=$l(r),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:J,o:J,d(r){r&&d(e),a&&a.d()}}}function bi(t){let e,l,n,i;l=new Re({props:{class:"example-image",src:t[9].url,alt:t[9].orig_name||`Example image ${t[8]+1}`}});let a=t[8]===3&&t[6].files.length>4&&xl(t);return{c(){e=j("div"),M(l.$$.fragment),n=Y(),a&&a.c(),this.h()},l(r){e=S(r,"DIV",{class:!0});var o=D(e);P(l.$$.fragment,o),n=Q(o),a&&a.l(o),o.forEach(d),this.h()},h(){h(e,"class","example-image-container svelte-rodltw")},m(r,o){C(r,e,o),T(l,e,null),B(e,n),a&&a.m(e,null),i=!0},p(r,o){const s={};o&1&&(s.src=r[9].url),o&1&&(s.alt=r[9].orig_name||`Example image ${r[8]+1}`),l.$set(s),r[8]===3&&r[6].files.length>4?a?a.p(r,o):(a=xl(r),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(r){i||(g(l.$$.fragment,r),i=!0)},o(r){w(l.$$.fragment,r),i=!1},d(r){r&&d(e),A(l),a&&a.d()}}}function wi(t){let e,l;return e=new rl({}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function ki(t){let e,l;return e=new kn({}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function $l(t){let e,l,n=t[6].files.length-4+"",i,a;return{c(){e=j("div"),l=oe("+"),i=oe(n),this.h()},l(r){e=S(r,"DIV",{class:!0,role:!0,"aria-label":!0});var o=D(e);l=se(o,"+"),i=se(o,n),o.forEach(d),this.h()},h(){h(e,"class","image-overlay svelte-rodltw"),h(e,"role","status"),h(e,"aria-label",a=`${t[6].files.length-4} more files`)},m(r,o){C(r,e,o),B(e,l),B(e,i)},p(r,o){o&1&&n!==(n=r[6].files.length-4+"")&&pe(i,n),o&1&&a!==(a=`${r[6].files.length-4} more files`)&&h(e,"aria-label",a)},d(r){r&&d(e)}}}function xl(t){let e,l,n=t[6].files.length-4+"",i,a;return{c(){e=j("div"),l=oe("+"),i=oe(n),this.h()},l(r){e=S(r,"DIV",{class:!0,role:!0,"aria-label":!0});var o=D(e);l=se(o,"+"),i=se(o,n),o.forEach(d),this.h()},h(){h(e,"class","image-overlay svelte-rodltw"),h(e,"role","status"),h(e,"aria-label",a=`${t[6].files.length-4} more files`)},m(r,o){C(r,e,o),B(e,l),B(e,i)},p(r,o){o&1&&n!==(n=r[6].files.length-4+"")&&pe(i,n),o&1&&a!==(a=`${r[6].files.length-4} more files`)&&h(e,"aria-label",a)},d(r){r&&d(e)}}}function en(t){let e,l,n,i,a,r;const o=[bi,gi,di],s=[];function f(u,c){var _,m;return c&1&&(e=null),c&1&&(l=null),e==null&&(e=!!((_=u[9].mime_type)!=null&&_.includes("image"))),e?0:(l==null&&(l=!!((m=u[9].mime_type)!=null&&m.includes("video"))),l?1:2)}return n=f(t,-1),i=s[n]=o[n](t),{c(){i.c(),a=G()},l(u){i.l(u),a=G()},m(u,c){s[n].m(u,c),C(u,a,c),r=!0},p(u,c){let _=n;n=f(u,c),n===_?s[n].p(u,c):(O(),w(s[_],1,1,()=>{s[_]=null}),W(),i=s[n],i?i.p(u,c):(i=s[n]=o[n](u),i.c()),g(i,1),i.m(a.parentNode,a))},i(u){r||(g(i),r=!0)},o(u){w(i),r=!1},d(u){u&&d(a),s[n].d(u)}}}function ln(t){let e,l,n,i=t[6].files.length-4+"",a,r;return{c(){e=j("div"),l=j("div"),n=oe("+"),a=oe(i),this.h()},l(o){e=S(o,"DIV",{class:!0});var s=D(e);l=S(s,"DIV",{class:!0,role:!0,"aria-label":!0});var f=D(l);n=se(f,"+"),a=se(f,i),f.forEach(d),s.forEach(d),this.h()},h(){h(l,"class","file-overlay svelte-rodltw"),h(l,"role","status"),h(l,"aria-label",r=`${t[6].files.length-4} more files`),h(e,"class","example-icon svelte-rodltw")},m(o,s){C(o,e,s),B(e,l),B(l,n),B(l,a)},p(o,s){s&1&&i!==(i=o[6].files.length-4+"")&&pe(a,i),s&1&&r!==(r=`${o[6].files.length-4} more files`)&&h(l,"aria-label",r)},d(o){o&&d(e)}}}function nn(t){let e,l,n,i,a,r,o,s=(t[6].display_text||t[6].text)+"",f,u,c,_,m,b;const k=[fi,ri,si],v=[];function I(F,H){var Z,z,N,R;return(z=(Z=F[6])==null?void 0:Z.icon)!=null&&z.url?0:((R=(N=F[6])==null?void 0:N.icon)==null?void 0:R.mime_type)==="text"?1:F[6].files!==void 0&&F[6].files.length>0?2:-1}~(n=I(t))&&(i=v[n]=k[n](t));function U(){return t[4](t[8],t[6])}return{c(){e=j("button"),l=j("div"),i&&i.c(),a=Y(),r=j("div"),o=j("span"),f=oe(s),u=Y(),this.h()},l(F){e=S(F,"BUTTON",{class:!0,"aria-label":!0});var H=D(e);l=S(H,"DIV",{class:!0});var Z=D(l);i&&i.l(Z),a=Q(Z),r=S(Z,"DIV",{class:!0});var z=D(r);o=S(z,"SPAN",{class:!0});var N=D(o);f=se(N,s),N.forEach(d),z.forEach(d),Z.forEach(d),u=Q(H),H.forEach(d),this.h()},h(){h(o,"class","example-text svelte-rodltw"),h(r,"class","example-text-content svelte-rodltw"),h(l,"class","example-content svelte-rodltw"),h(e,"class","example svelte-rodltw"),h(e,"aria-label",c=`Select example ${t[8]+1}: ${t[6].display_text||t[6].text}`)},m(F,H){C(F,e,H),B(e,l),~n&&v[n].m(l,null),B(l,a),B(l,r),B(r,o),B(o,f),B(e,u),_=!0,m||(b=Te(e,"click",U),m=!0)},p(F,H){t=F;let Z=n;n=I(t),n===Z?~n&&v[n].p(t,H):(i&&(O(),w(v[Z],1,1,()=>{v[Z]=null}),W()),~n?(i=v[n],i?i.p(t,H):(i=v[n]=k[n](t),i.c()),g(i,1),i.m(l,a)):i=null),(!_||H&1)&&s!==(s=(t[6].display_text||t[6].text)+"")&&pe(f,s),(!_||H&1&&c!==(c=`Select example ${t[8]+1}: ${t[6].display_text||t[6].text}`))&&h(e,"aria-label",c)},i(F){_||(g(i),_=!0)},o(F){w(i),_=!1},d(F){F&&d(e),~n&&v[n].d(),m=!1,b()}}}function vi(t){let e,l,n,i=t[1]!==null&&Ql(t),a=t[0]!==null&&yl(t);return{c(){e=j("div"),i&&i.c(),l=Y(),a&&a.c(),this.h()},l(r){e=S(r,"DIV",{class:!0,role:!0});var o=D(e);i&&i.l(o),l=Q(o),a&&a.l(o),o.forEach(d),this.h()},h(){h(e,"class","placeholder-content svelte-rodltw"),h(e,"role","complementary")},m(r,o){C(r,e,o),i&&i.m(e,null),B(e,l),a&&a.m(e,null),n=!0},p(r,[o]){r[1]!==null?i?(i.p(r,o),o&2&&g(i,1)):(i=Ql(r),i.c(),g(i,1),i.m(e,l)):i&&(O(),w(i,1,1,()=>{i=null}),W()),r[0]!==null?a?(a.p(r,o),o&1&&g(a,1)):(a=yl(r),a.c(),g(a,1),a.m(e,null)):a&&(O(),w(a,1,1,()=>{a=null}),W())},i(r){n||(g(i),g(a),n=!0)},o(r){w(i),w(a),n=!1},d(r){r&&d(e),i&&i.d(),a&&a.d()}}}function pi(t,e,l){let{examples:n=null}=e,{placeholder:i=null}=e,{latex_delimiters:a}=e;const r=ol();function o(f,u){const c=typeof u=="string"?{text:u}:u;r("example_select",{index:f,value:{text:c.text,files:c.files}})}const s=(f,u)=>o(f,typeof u=="string"?{text:u}:u);return t.$$set=f=>{"examples"in f&&l(0,n=f.examples),"placeholder"in f&&l(1,i=f.placeholder),"latex_delimiters"in f&&l(2,a=f.latex_delimiters)},[n,i,a,o,s]}class Ei extends le{constructor(e){super(),ne(this,e,pi,vi,te,{examples:0,placeholder:1,latex_delimiters:2})}}function Ci(t){let e,l;return e=new we({props:{Icon:t[0]?We:Xe,label:t[0]?"Copied conversation":"Copy conversation"}}),e.$on("click",t[1]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,[i]){const a={};i&1&&(a.Icon=n[0]?We:Xe),i&1&&(a.label=n[0]?"Copied conversation":"Copy conversation"),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Vi(t,e,l){let n=!1,{value:i}=e,{watermark:a=null}=e,r;function o(){l(0,n=!0),r&&clearTimeout(r),r=setTimeout(()=>{l(0,n=!1)},1e3)}const s=()=>{if(i){const u=i.map(_=>_.type==="text"?`${_.role}: ${_.content}`:`${_.role}: ${_.content.value.url}`).join(`

`),c=a?`${u}

${a}`:u;navigator.clipboard.writeText(c).catch(_=>{console.error("Failed to copy conversation: ",_)})}};async function f(){"clipboard"in navigator&&(s(),o())}return dn(()=>{r&&clearTimeout(r)}),t.$$set=u=>{"value"in u&&l(2,i=u.value),"watermark"in u&&l(3,a=u.watermark)},[n,f,i,a]}class Ii extends le{constructor(e){super(),ne(this,e,Vi,Ci,te,{value:2,watermark:3})}}function tn(t,e,l){const n=t.slice();return n[60]=e[l],n[62]=l,n}function an(t,e,l){const n=t.slice();n[63]=e[l],n[70]=l;const i=n[63][0].role==="user"?"user":"bot";n[64]=i;const a=n[16][n[64]==="user"?0:1];n[65]=a;const r=n[16][n[64]==="user"?0:1];n[66]=r;const o=n[38].slice(0,n[70]).filter(f=>f[0].role==="assistant").length;n[67]=o;const s=n[64]==="bot"&&n[10]&&n[10][n[67]]?n[10][n[67]]:null;return n[68]=s,n}function on(t){let e,l;return e=new wn({props:{$$slots:{default:[Di]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i[0]&1075851265|i[2]&512&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function sn(t){let e,l;return e=new we({props:{Icon:Rn}}),e.$on("click",t[47]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p:J,i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function rn(t){let e,l;return e=new Ii({props:{value:t[0],watermark:t[30]}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i[0]&1&&(a.value=n[0]),i[0]&1073741824&&(a.watermark=n[30]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Di(t){let e,l,n,i,a,r=t[12]&&sn(t);l=new we({props:{Icon:Jn,label:t[21]("chatbot.clear")}}),l.$on("click",t[48]);let o=t[13]&&rn(t);return{c(){r&&r.c(),e=Y(),M(l.$$.fragment),n=Y(),o&&o.c(),i=G()},l(s){r&&r.l(s),e=Q(s),P(l.$$.fragment,s),n=Q(s),o&&o.l(s),i=G()},m(s,f){r&&r.m(s,f),C(s,e,f),T(l,s,f),C(s,n,f),o&&o.m(s,f),C(s,i,f),a=!0},p(s,f){s[12]?r?(r.p(s,f),f[0]&4096&&g(r,1)):(r=sn(s),r.c(),g(r,1),r.m(e.parentNode,e)):r&&(O(),w(r,1,1,()=>{r=null}),W());const u={};f[0]&2097152&&(u.label=s[21]("chatbot.clear")),l.$set(u),s[13]?o?(o.p(s,f),f[0]&8192&&g(o,1)):(o=rn(s),o.c(),g(o,1),o.m(i.parentNode,i)):o&&(O(),w(o,1,1,()=>{o=null}),W())},i(s){a||(g(r),g(l.$$.fragment,s),g(o),a=!0)},o(s){w(r),w(l.$$.fragment,s),w(o),a=!1},d(s){s&&(d(e),d(n),d(i)),r&&r.d(s),A(l,s),o&&o.d(s)}}}function zi(t){let e,l;return e=new Ei({props:{examples:t[25],placeholder:t[23],latex_delimiters:t[4]}}),e.$on("example_select",t[53]),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i[0]&33554432&&(a.examples=n[25]),i[0]&8388608&&(a.placeholder=n[23]),i[0]&16&&(a.latex_delimiters=n[4]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Hi(t){let e,l,n,i,a,r,o,s=be(t[38]),f=[];for(let b=0;b<s.length;b+=1)f[b]=_n(an(t,s,b));const u=b=>w(f[b],1,1,()=>{f[b]=null}),c=[Ni,Li],_=[];function m(b,k){return b[31]!=="hidden"&&b[5]?0:b[39]?1:-1}return~(n=m(t))&&(i=_[n]=c[n](t)),{c(){e=j("div");for(let b=0;b<f.length;b+=1)f[b].c();l=Y(),i&&i.c(),this.h()},l(b){e=S(b,"DIV",{class:!0});var k=D(e);for(let v=0;v<f.length;v+=1)f[v].l(k);l=Q(k),i&&i.l(k),k.forEach(d),this.h()},h(){h(e,"class","message-wrap svelte-gjtrl6")},m(b,k){C(b,e,k);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(e,null);B(e,l),~n&&_[n].m(e,null),a=!0,r||(o=Mn(Fn.call(null,e)),r=!0)},p(b,k){if(k[0]&2105528287|k[1]&5791){s=be(b[38]);let I;for(I=0;I<s.length;I+=1){const U=an(b,s,I);f[I]?(f[I].p(U,k),g(f[I],1)):(f[I]=_n(U),f[I].c(),g(f[I],1),f[I].m(e,l))}for(O(),I=s.length;I<f.length;I+=1)u(I);W()}let v=n;n=m(b),n===v?~n&&_[n].p(b,k):(i&&(O(),w(_[v],1,1,()=>{_[v]=null}),W()),~n?(i=_[n],i?i.p(b,k):(i=_[n]=c[n](b),i.c()),g(i,1),i.m(e,null)):i=null)},i(b){if(!a){for(let k=0;k<s.length;k+=1)g(f[k]);g(i),a=!0}},o(b){f=f.filter(Boolean);for(let k=0;k<f.length;k+=1)w(f[k]);w(i),a=!1},d(b){b&&d(e),Oe(f,b),~n&&_[n].d(),r=!1,o()}}}function fn(t){let e,l;return e=new Cn({props:{layout:t[22],avatar_images:t[16]}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i[0]&4194304&&(a.layout=n[22]),i[0]&65536&&(a.avatar_images=n[16]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function _n(t){var u;let e,l,n,i,a;function r(...c){return t[49](t[63],t[70],...c)}function o(c){t[50](c)}let s={messages:t[63],display_consecutive_in_same_bubble:t[3],opposite_avatar_img:t[66],avatar_img:t[65],role:t[64],layout:t[22],dispatch:t[41],i18n:t[21],_fetch:t[1],line_breaks:t[19],theme_mode:t[20],target:t[33],upload:t[24],selectable:t[7],sanitize_html:t[17],render_markdown:t[18],rtl:t[14],i:t[70],value:t[0],latex_delimiters:t[4],_components:t[32],generating:t[6],feedback_options:t[9],current_feedback:t[68],allow_tags:t[29],watermark:t[30],show_like:t[64]==="user"?t[8]&&t[28]:t[8],show_retry:t[26]&&Je(t[63],t[0]),show_undo:t[27]&&Je(t[63],t[0]),show_edit:t[11]==="all"||t[11]=="user"&&t[64]==="user"&&t[63].length>0&&t[63][t[63].length-1].type=="text",in_edit_mode:t[34]===t[70],show_copy_button:t[15],handle_action:r,scroll:t[40]?scroll:Mi,allow_file_downloads:t[2]};t[35]!==void 0&&(s.edit_messages=t[35]),e=new ii({props:s}),Ye.push(()=>Tn(e,"edit_messages",o)),e.$on("copy",t[51]);let f=t[31]!=="hidden"&&t[6]&&t[63][t[63].length-1].role==="assistant"&&((u=t[63][t[63].length-1].metadata)==null?void 0:u.status)==="done"&&fn(t);return{c(){M(e.$$.fragment),n=Y(),f&&f.c(),i=G()},l(c){P(e.$$.fragment,c),n=Q(c),f&&f.l(c),i=G()},m(c,_){T(e,c,_),C(c,n,_),f&&f.m(c,_),C(c,i,_),a=!0},p(c,_){var b;t=c;const m={};_[1]&128&&(m.messages=t[63]),_[0]&8&&(m.display_consecutive_in_same_bubble=t[3]),_[0]&65536|_[1]&128&&(m.opposite_avatar_img=t[66]),_[0]&65536|_[1]&128&&(m.avatar_img=t[65]),_[1]&128&&(m.role=t[64]),_[0]&4194304&&(m.layout=t[22]),_[0]&2097152&&(m.i18n=t[21]),_[0]&2&&(m._fetch=t[1]),_[0]&524288&&(m.line_breaks=t[19]),_[0]&1048576&&(m.theme_mode=t[20]),_[1]&4&&(m.target=t[33]),_[0]&16777216&&(m.upload=t[24]),_[0]&128&&(m.selectable=t[7]),_[0]&131072&&(m.sanitize_html=t[17]),_[0]&262144&&(m.render_markdown=t[18]),_[0]&16384&&(m.rtl=t[14]),_[0]&1&&(m.value=t[0]),_[0]&16&&(m.latex_delimiters=t[4]),_[1]&2&&(m._components=t[32]),_[0]&64&&(m.generating=t[6]),_[0]&512&&(m.feedback_options=t[9]),_[0]&1024|_[1]&128&&(m.current_feedback=t[68]),_[0]&536870912&&(m.allow_tags=t[29]),_[0]&1073741824&&(m.watermark=t[30]),_[0]&268435712|_[1]&128&&(m.show_like=t[64]==="user"?t[8]&&t[28]:t[8]),_[0]&67108865|_[1]&128&&(m.show_retry=t[26]&&Je(t[63],t[0])),_[0]&134217729|_[1]&128&&(m.show_undo=t[27]&&Je(t[63],t[0])),_[0]&2048|_[1]&128&&(m.show_edit=t[11]==="all"||t[11]=="user"&&t[64]==="user"&&t[63].length>0&&t[63][t[63].length-1].type=="text"),_[1]&8&&(m.in_edit_mode=t[34]===t[70]),_[0]&32768&&(m.show_copy_button=t[15]),_[1]&144&&(m.handle_action=r),_[0]&4&&(m.allow_file_downloads=t[2]),!l&&_[1]&16&&(l=!0,m.edit_messages=t[35],An(()=>l=!1)),e.$set(m),t[31]!=="hidden"&&t[6]&&t[63][t[63].length-1].role==="assistant"&&((b=t[63][t[63].length-1].metadata)==null?void 0:b.status)==="done"?f?(f.p(t,_),_[0]&64|_[1]&129&&g(f,1)):(f=fn(t),f.c(),g(f,1),f.m(i.parentNode,i)):f&&(O(),w(f,1,1,()=>{f=null}),W())},i(c){a||(g(e.$$.fragment,c),g(f),a=!0)},o(c){w(e.$$.fragment,c),w(f),a=!1},d(c){c&&(d(n),d(i)),A(e,c),f&&f.d(c)}}}function Li(t){let e,l=be(t[39]),n=[];for(let i=0;i<l.length;i+=1)n[i]=un(tn(t,l,i));return{c(){e=j("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=S(i,"DIV",{class:!0});var a=D(e);for(let r=0;r<n.length;r+=1)n[r].l(a);a.forEach(d),this.h()},h(){h(e,"class","options svelte-gjtrl6")},m(i,a){C(i,e,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(i,a){if(a[1]&1280){l=be(i[39]);let r;for(r=0;r<l.length;r+=1){const o=tn(i,l,r);n[r]?n[r].p(o,a):(n[r]=un(o),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},i:J,o:J,d(i){i&&d(e),Oe(n,i)}}}function Ni(t){let e,l;return e=new Cn({props:{layout:t[22],avatar_images:t[16]}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i[0]&4194304&&(a.layout=n[22]),i[0]&65536&&(a.avatar_images=n[16]),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function un(t){let e,l=(t[60].label||t[60].value)+"",n,i,a,r;function o(){return t[52](t[62],t[60])}return{c(){e=j("button"),n=oe(l),i=Y(),this.h()},l(s){e=S(s,"BUTTON",{class:!0});var f=D(e);n=se(f,l),i=Q(f),f.forEach(d),this.h()},h(){h(e,"class","option svelte-gjtrl6")},m(s,f){C(s,e,f),B(e,n),B(e,i),a||(r=Te(e,"click",o),a=!0)},p(s,f){t=s,f[1]&256&&l!==(l=(t[60].label||t[60].value)+"")&&pe(n,l)},d(s){s&&d(e),a=!1,r()}}}function cn(t){let e,l,n;return l=new we({props:{Icon:et,label:"Scroll down",size:"large"}}),l.$on("click",t[42]),{c(){e=j("div"),M(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var a=D(e);P(l.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","scroll-down-button-container svelte-gjtrl6")},m(i,a){C(i,e,a),T(l,e,null),n=!0},p:J,i(i){n||(g(l.$$.fragment,i),n=!0)},o(i){w(l.$$.fragment,i),n=!1},d(i){i&&d(e),A(l)}}}function Bi(t){let e,l,n,i,a,r,o,s,f=t[0]!==null&&t[0].length>0&&on(t);const u=[Hi,zi],c=[];function _(b,k){return b[0]!==null&&b[0].length>0&&b[38]!==null?0:1}n=_(t),i=c[n]=u[n](t);let m=t[37]&&cn(t);return{c(){f&&f.c(),e=Y(),l=j("div"),i.c(),r=Y(),m&&m.c(),o=G(),this.h()},l(b){f&&f.l(b),e=Q(b),l=S(b,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-live":!0});var k=D(l);i.l(k),k.forEach(d),r=Q(b),m&&m.l(b),o=G(),this.h()},h(){h(l,"class",a=Ge(t[22]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-gjtrl6"),h(l,"role","log"),h(l,"aria-label","chatbot conversation"),h(l,"aria-live","polite")},m(b,k){f&&f.m(b,k),C(b,e,k),C(b,l,k),c[n].m(l,null),t[54](l),C(b,r,k),m&&m.m(b,k),C(b,o,k),s=!0},p(b,k){b[0]!==null&&b[0].length>0?f?(f.p(b,k),k[0]&1&&g(f,1)):(f=on(b),f.c(),g(f,1),f.m(e.parentNode,e)):f&&(O(),w(f,1,1,()=>{f=null}),W());let v=n;n=_(b),n===v?c[n].p(b,k):(O(),w(c[v],1,1,()=>{c[v]=null}),W(),i=c[n],i?i.p(b,k):(i=c[n]=u[n](b),i.c()),g(i,1),i.m(l,null)),(!s||k[0]&4194304&&a!==(a=Ge(b[22]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-gjtrl6"))&&h(l,"class",a),b[37]?m?(m.p(b,k),k[1]&64&&g(m,1)):(m=cn(b),m.c(),g(m,1),m.m(o.parentNode,o)):m&&(O(),w(m,1,1,()=>{m=null}),W())},i(b){s||(g(f),g(i),g(m),s=!0)},o(b){w(f),w(i),w(m),s=!1},d(b){b&&(d(e),d(l),d(r),d(o)),f&&f.d(b),c[n].d(),t[54](null),m&&m.d(b)}}}const Mi=()=>{};function Ti(t,e,l){let n,i,{value:a=[]}=e,r=null,{_fetch:o}=e,{load_component:s}=e,{allow_file_downloads:f}=e,{display_consecutive_in_same_bubble:u}=e,c={};const _=typeof window<"u";async function m(){l(32,c=await st(rt(a),c,s))}let{latex_delimiters:b}=e,{pending_message:k=!1}=e,{generating:v=!1}=e,{selectable:I=!1}=e,{likeable:U=!1}=e,{feedback_options:F}=e,{feedback_value:H=null}=e,{editable:Z=null}=e,{show_share_button:z=!1}=e,{show_copy_all_button:N=!1}=e,{rtl:R=!1}=e,{show_copy_button:K=!1}=e,{avatar_images:y=[null,null]}=e,{sanitize_html:ee=!0}=e,{render_markdown:L=!0}=e,{line_breaks:me=!0}=e,{autoscroll:q=!0}=e,{theme_mode:de}=e,{i18n:ze}=e,{layout:Ve="bubble"}=e,{placeholder:Ie=null}=e,{upload:Ae}=e,{examples:He=null}=e,{_retryable:je=!1}=e,{_undoable:Le=!1}=e,{like_user_message:ke=!1}=e,{allow_tags:Ne=!1}=e,{watermark:Be=null}=e,{show_progress:Me="full"}=e,Ue=null,Se=null,Ee=[];ll(()=>{l(33,Ue=document.querySelector("div.gradio-container"))});let ae,qe=!1;const ce=ol();function V(){return ae&&ae.offsetHeight+ae.scrollTop>ae.scrollHeight-100}function he(){ae&&(ae.scrollTo(0,ae.scrollHeight),l(37,qe=!1))}async function Fe(){q&&V()&&(await jn(),await new Promise(E=>setTimeout(E,300)),he())}ll(()=>{q&&he(),Fe()}),ll(()=>{function E(){V()?l(37,qe=!1):l(37,qe=!0)}return ae==null||ae.addEventListener("scroll",E),()=>{ae==null||ae.removeEventListener("scroll",E)}});function ve(E,De,_e){if(_e==="undo"||_e==="retry"){const Ze=a;let Ce=Ze.length-1;for(;Ze[Ce].role==="assistant";)Ce--;ce(_e,{index:Ze[Ce].index,value:Ze[Ce].content})}else if(_e=="edit")l(34,Se=E),Ee.push(De.content);else if(_e=="edit_cancel")l(34,Se=null);else if(_e=="edit_submit")l(34,Se=null),ce("edit",{index:De.index,value:Ee[E].slice(),previous_value:De.content});else{let Ze=_e==="Like"?!0:_e==="Dislike"?!1:_e||"";if(!n)return;const Ce=n[E],[zn,Zi]=[Ce[0],Ce[Ce.length-1]];ce("like",{index:zn.index,value:Ce.map(Hn=>Hn.content),liked:Ze})}}function Qe(){if(!a||!n||n.length===0)return;const E=n[n.length-1];if(E[0].role==="assistant")return E[E.length-1].options}const ye=async()=>{try{const E=await lt(a);ce("share",{description:E})}catch(E){console.error(E);let De=E instanceof qn?E.message:"Share failed.";ce("error",De)}},$e=()=>ce("clear"),xe=(E,De,_e)=>{_e=="edit"&&Ee.splice(0,Ee.length),_e==="edit"||_e==="edit_submit"?E.forEach((Ze,Ce)=>{ve(_e==="edit"?De:Ce,Ze,_e)}):ve(De,E[0],_e)};function el(E){Ee=E,l(35,Ee)}const p=E=>ce("copy",E.detail),Vn=(E,De)=>ce("option_select",{index:E,value:De.value}),In=E=>ce("example_select",E.detail);function Dn(E){Ye[E?"unshift":"push"](()=>{ae=E,l(36,ae)})}return t.$$set=E=>{"value"in E&&l(0,a=E.value),"_fetch"in E&&l(1,o=E._fetch),"load_component"in E&&l(44,s=E.load_component),"allow_file_downloads"in E&&l(2,f=E.allow_file_downloads),"display_consecutive_in_same_bubble"in E&&l(3,u=E.display_consecutive_in_same_bubble),"latex_delimiters"in E&&l(4,b=E.latex_delimiters),"pending_message"in E&&l(5,k=E.pending_message),"generating"in E&&l(6,v=E.generating),"selectable"in E&&l(7,I=E.selectable),"likeable"in E&&l(8,U=E.likeable),"feedback_options"in E&&l(9,F=E.feedback_options),"feedback_value"in E&&l(10,H=E.feedback_value),"editable"in E&&l(11,Z=E.editable),"show_share_button"in E&&l(12,z=E.show_share_button),"show_copy_all_button"in E&&l(13,N=E.show_copy_all_button),"rtl"in E&&l(14,R=E.rtl),"show_copy_button"in E&&l(15,K=E.show_copy_button),"avatar_images"in E&&l(16,y=E.avatar_images),"sanitize_html"in E&&l(17,ee=E.sanitize_html),"render_markdown"in E&&l(18,L=E.render_markdown),"line_breaks"in E&&l(19,me=E.line_breaks),"autoscroll"in E&&l(45,q=E.autoscroll),"theme_mode"in E&&l(20,de=E.theme_mode),"i18n"in E&&l(21,ze=E.i18n),"layout"in E&&l(22,Ve=E.layout),"placeholder"in E&&l(23,Ie=E.placeholder),"upload"in E&&l(24,Ae=E.upload),"examples"in E&&l(25,He=E.examples),"_retryable"in E&&l(26,je=E._retryable),"_undoable"in E&&l(27,Le=E._undoable),"like_user_message"in E&&l(28,ke=E.like_user_message),"allow_tags"in E&&l(29,Ne=E.allow_tags),"watermark"in E&&l(30,Be=E.watermark),"show_progress"in E&&l(31,Me=E.show_progress)},t.$$.update=()=>{t.$$.dirty[0]&1&&m(),t.$$.dirty[0]&33|t.$$.dirty[1]&2&&(a||k||c)&&Fe(),t.$$.dirty[0]&1|t.$$.dirty[1]&32768&&(Wn(a,r)||(l(46,r=a),ce("change"))),t.$$.dirty[0]&9&&l(38,n=a&&ot(a,u)),t.$$.dirty[0]&1&&l(39,i=a&&Qe())},[a,o,f,u,b,k,v,I,U,F,H,Z,z,N,R,K,y,ee,L,me,de,ze,Ve,Ie,Ae,He,je,Le,ke,Ne,Be,Me,c,Ue,Se,Ee,ae,qe,n,i,_,ce,he,ve,s,q,r,ye,$e,xe,el,p,Vn,In,Dn]}class Ai extends le{constructor(e){super(),ne(this,e,Ti,Bi,te,{value:0,_fetch:1,load_component:44,allow_file_downloads:2,display_consecutive_in_same_bubble:3,latex_delimiters:4,pending_message:5,generating:6,selectable:7,likeable:8,feedback_options:9,feedback_value:10,editable:11,show_share_button:12,show_copy_all_button:13,rtl:14,show_copy_button:15,avatar_images:16,sanitize_html:17,render_markdown:18,line_breaks:19,autoscroll:45,theme_mode:20,i18n:21,layout:22,placeholder:23,upload:24,examples:25,_retryable:26,_undoable:27,like_user_message:28,allow_tags:29,watermark:30,show_progress:31},null,[-1,-1,-1])}}const ji=Ai;function hn(t){let e,l;const n=[{autoscroll:t[24].autoscroll},{i18n:t[24].i18n},t[27],{show_progress:t[27].show_progress==="hidden"?"hidden":"minimal"}];let i={};for(let a=0;a<n.length;a+=1)i=fe(i,n[a]);return e=new Pn({props:i}),e.$on("clear_status",t[40]),{c(){M(e.$$.fragment)},l(a){P(e.$$.fragment,a)},m(a,r){T(e,a,r),l=!0},p(a,r){const o=r[0]&150994944?re(n,[r[0]&16777216&&{autoscroll:a[24].autoscroll},r[0]&16777216&&{i18n:a[24].i18n},r[0]&134217728&&ie(a[27]),r[0]&134217728&&{show_progress:a[27].show_progress==="hidden"?"hidden":"minimal"}]):{};e.$set(o)},i(a){l||(g(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){A(e,a)}}}function mn(t){let e,l;return e=new Gn({props:{show_label:t[7],Icon:Xn,float:!0,label:t[6]||"Chatbot"}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i[0]&128&&(a.show_label=n[7]),i[0]&64&&(a.label=n[6]||"Chatbot"),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Si(t){var s,f,u;let e,l,n,i,a,r=t[27]&&hn(t),o=t[7]&&mn(t);return i=new ji({props:{i18n:t[24].i18n,selectable:t[8],likeable:t[9],feedback_options:t[10],feedback_value:t[11],show_share_button:t[12]===null?!0:t[12].includes("share"),show_copy_all_button:t[12]===null?!0:t[12].includes("copy_all"),value:t[38],latex_delimiters:t[23],display_consecutive_in_same_bubble:t[21],render_markdown:t[16],theme_mode:t[35],editable:t[32],pending_message:((s=t[27])==null?void 0:s.status)==="pending",generating:((f=t[27])==null?void 0:f.status)==="generating",rtl:t[13],show_copy_button:t[12]===null?!1:t[12].includes("copy"),like_user_message:t[26],show_progress:((u=t[27])==null?void 0:u.show_progress)||"full",avatar_images:t[25],sanitize_html:t[14],line_breaks:t[17],autoscroll:t[18],layout:t[15],placeholder:t[33],examples:t[34],_retryable:t[19],_undoable:t[20],upload:t[41],_fetch:t[42],load_component:t[24].load_component,allow_file_downloads:t[36],allow_tags:t[22],watermark:t[37]}}),i.$on("change",t[43]),i.$on("select",t[44]),i.$on("like",t[45]),i.$on("share",t[46]),i.$on("error",t[47]),i.$on("example_select",t[48]),i.$on("option_select",t[49]),i.$on("retry",t[50]),i.$on("undo",t[51]),i.$on("clear",t[52]),i.$on("copy",t[53]),i.$on("edit",t[54]),{c(){r&&r.c(),e=Y(),l=j("div"),o&&o.c(),n=Y(),M(i.$$.fragment),this.h()},l(c){r&&r.l(c),e=Q(c),l=S(c,"DIV",{class:!0});var _=D(l);o&&o.l(_),n=Q(_),P(i.$$.fragment,_),_.forEach(d),this.h()},h(){h(l,"class","wrapper svelte-g3p8na")},m(c,_){r&&r.m(c,_),C(c,e,_),C(c,l,_),o&&o.m(l,null),B(l,n),T(i,l,null),a=!0},p(c,_){var b,k,v;c[27]?r?(r.p(c,_),_[0]&134217728&&g(r,1)):(r=hn(c),r.c(),g(r,1),r.m(e.parentNode,e)):r&&(O(),w(r,1,1,()=>{r=null}),W()),c[7]?o?(o.p(c,_),_[0]&128&&g(o,1)):(o=mn(c),o.c(),g(o,1),o.m(l,n)):o&&(O(),w(o,1,1,()=>{o=null}),W());const m={};_[0]&16777216&&(m.i18n=c[24].i18n),_[0]&256&&(m.selectable=c[8]),_[0]&512&&(m.likeable=c[9]),_[0]&1024&&(m.feedback_options=c[10]),_[0]&2048&&(m.feedback_value=c[11]),_[0]&4096&&(m.show_share_button=c[12]===null?!0:c[12].includes("share")),_[0]&4096&&(m.show_copy_all_button=c[12]===null?!0:c[12].includes("copy_all")),_[1]&128&&(m.value=c[38]),_[0]&8388608&&(m.latex_delimiters=c[23]),_[0]&2097152&&(m.display_consecutive_in_same_bubble=c[21]),_[0]&65536&&(m.render_markdown=c[16]),_[1]&16&&(m.theme_mode=c[35]),_[1]&2&&(m.editable=c[32]),_[0]&134217728&&(m.pending_message=((b=c[27])==null?void 0:b.status)==="pending"),_[0]&134217728&&(m.generating=((k=c[27])==null?void 0:k.status)==="generating"),_[0]&8192&&(m.rtl=c[13]),_[0]&4096&&(m.show_copy_button=c[12]===null?!1:c[12].includes("copy")),_[0]&67108864&&(m.like_user_message=c[26]),_[0]&134217728&&(m.show_progress=((v=c[27])==null?void 0:v.show_progress)||"full"),_[0]&33554432&&(m.avatar_images=c[25]),_[0]&16384&&(m.sanitize_html=c[14]),_[0]&131072&&(m.line_breaks=c[17]),_[0]&262144&&(m.autoscroll=c[18]),_[0]&32768&&(m.layout=c[15]),_[1]&4&&(m.placeholder=c[33]),_[1]&8&&(m.examples=c[34]),_[0]&524288&&(m._retryable=c[19]),_[0]&1048576&&(m._undoable=c[20]),_[0]&16777216&&(m.upload=c[41]),_[0]&16777216&&(m._fetch=c[42]),_[0]&16777216&&(m.load_component=c[24].load_component),_[1]&32&&(m.allow_file_downloads=c[36]),_[0]&4194304&&(m.allow_tags=c[22]),_[1]&64&&(m.watermark=c[37]),i.$set(m)},i(c){a||(g(r),g(o),g(i.$$.fragment,c),a=!0)},o(c){w(r),w(o),w(i.$$.fragment,c),a=!1},d(c){c&&(d(e),d(l)),r&&r.d(c),o&&o.d(),A(i)}}}function qi(t){let e,l;return e=new Zn({props:{elem_id:t[1],elem_classes:t[2],visible:t[3],padding:!1,scale:t[4],min_width:t[5],height:t[28],resizable:t[29],min_height:t[30],max_height:t[31],allow_overflow:!0,flex:!0,overflow_behavior:"auto",$$slots:{default:[Si]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,i){T(e,n,i),l=!0},p(n,i){const a={};i[0]&2&&(a.elem_id=n[1]),i[0]&4&&(a.elem_classes=n[2]),i[0]&8&&(a.visible=n[3]),i[0]&16&&(a.scale=n[4]),i[0]&32&&(a.min_width=n[5]),i[0]&268435456&&(a.height=n[28]),i[0]&536870912&&(a.resizable=n[29]),i[0]&1073741824&&(a.min_height=n[30]),i[1]&1&&(a.max_height=n[31]),i[0]&268435393|i[1]&16777470&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Fi(t,e,l){let{elem_id:n=""}=e,{elem_classes:i=[]}=e,{visible:a=!0}=e,{value:r=[]}=e,{scale:o=null}=e,{min_width:s=void 0}=e,{label:f}=e,{show_label:u=!0}=e,{root:c}=e,{_selectable:_=!1}=e,{likeable:m=!1}=e,{feedback_options:b=["Like","Dislike"]}=e,{feedback_value:k=null}=e,{buttons:v=null}=e,{rtl:I=!1}=e,{sanitize_html:U=!0}=e,{layout:F="bubble"}=e,{render_markdown:H=!0}=e,{line_breaks:Z=!0}=e,{autoscroll:z=!0}=e,{_retryable:N=!1}=e,{_undoable:R=!1}=e,{group_consecutive_messages:K=!0}=e,{allow_tags:y=!1}=e,{latex_delimiters:ee}=e,{gradio:L}=e,me=[],{avatar_images:q=[null,null]}=e,{like_user_message:de=!1}=e,{loading_status:ze=void 0}=e,{height:Ve}=e,{resizable:Ie}=e,{min_height:Ae}=e,{max_height:He}=e,{editable:je=null}=e,{placeholder:Le=null}=e,{examples:ke=null}=e,{theme_mode:Ne}=e,{allow_file_downloads:Be=!0}=e,{watermark:Me=null}=e;const Ue=()=>L.dispatch("clear_status",ze),Se=(...p)=>L.client.upload(...p),Ee=(...p)=>L.client.fetch(...p),ae=()=>L.dispatch("change",r),qe=p=>L.dispatch("select",p.detail),ce=p=>L.dispatch("like",p.detail),V=p=>L.dispatch("share",p.detail),he=p=>L.dispatch("error",p.detail),Fe=p=>L.dispatch("example_select",p.detail),ve=p=>L.dispatch("option_select",p.detail),Qe=p=>L.dispatch("retry",p.detail),ye=p=>L.dispatch("undo",p.detail),$e=()=>{l(0,r=[]),L.dispatch("clear")},xe=p=>L.dispatch("copy",p.detail),el=p=>{r===null||r.length===0||(l(0,r[p.detail.index].content=p.detail.value,r),l(0,r),L.dispatch("edit",p.detail))};return t.$$set=p=>{"elem_id"in p&&l(1,n=p.elem_id),"elem_classes"in p&&l(2,i=p.elem_classes),"visible"in p&&l(3,a=p.visible),"value"in p&&l(0,r=p.value),"scale"in p&&l(4,o=p.scale),"min_width"in p&&l(5,s=p.min_width),"label"in p&&l(6,f=p.label),"show_label"in p&&l(7,u=p.show_label),"root"in p&&l(39,c=p.root),"_selectable"in p&&l(8,_=p._selectable),"likeable"in p&&l(9,m=p.likeable),"feedback_options"in p&&l(10,b=p.feedback_options),"feedback_value"in p&&l(11,k=p.feedback_value),"buttons"in p&&l(12,v=p.buttons),"rtl"in p&&l(13,I=p.rtl),"sanitize_html"in p&&l(14,U=p.sanitize_html),"layout"in p&&l(15,F=p.layout),"render_markdown"in p&&l(16,H=p.render_markdown),"line_breaks"in p&&l(17,Z=p.line_breaks),"autoscroll"in p&&l(18,z=p.autoscroll),"_retryable"in p&&l(19,N=p._retryable),"_undoable"in p&&l(20,R=p._undoable),"group_consecutive_messages"in p&&l(21,K=p.group_consecutive_messages),"allow_tags"in p&&l(22,y=p.allow_tags),"latex_delimiters"in p&&l(23,ee=p.latex_delimiters),"gradio"in p&&l(24,L=p.gradio),"avatar_images"in p&&l(25,q=p.avatar_images),"like_user_message"in p&&l(26,de=p.like_user_message),"loading_status"in p&&l(27,ze=p.loading_status),"height"in p&&l(28,Ve=p.height),"resizable"in p&&l(29,Ie=p.resizable),"min_height"in p&&l(30,Ae=p.min_height),"max_height"in p&&l(31,He=p.max_height),"editable"in p&&l(32,je=p.editable),"placeholder"in p&&l(33,Le=p.placeholder),"examples"in p&&l(34,ke=p.examples),"theme_mode"in p&&l(35,Ne=p.theme_mode),"allow_file_downloads"in p&&l(36,Be=p.allow_file_downloads),"watermark"in p&&l(37,Me=p.watermark)},t.$$.update=()=>{t.$$.dirty[0]&1|t.$$.dirty[1]&256&&l(38,me=at(r,c))},[r,n,i,a,o,s,f,u,_,m,b,k,v,I,U,F,H,Z,z,N,R,K,y,ee,L,q,de,ze,Ve,Ie,Ae,He,je,Le,ke,Ne,Be,Me,me,c,Ue,Se,Ee,ae,qe,ce,V,he,Fe,ve,Qe,ye,$e,xe,el]}class yi extends le{constructor(e){super(),ne(this,e,Fi,qi,te,{elem_id:1,elem_classes:2,visible:3,value:0,scale:4,min_width:5,label:6,show_label:7,root:39,_selectable:8,likeable:9,feedback_options:10,feedback_value:11,buttons:12,rtl:13,sanitize_html:14,layout:15,render_markdown:16,line_breaks:17,autoscroll:18,_retryable:19,_undoable:20,group_consecutive_messages:21,allow_tags:22,latex_delimiters:23,gradio:24,avatar_images:25,like_user_message:26,loading_status:27,height:28,resizable:29,min_height:30,max_height:31,editable:32,placeholder:33,examples:34,theme_mode:35,allow_file_downloads:36,watermark:37},null,[-1,-1])}}export{ji as BaseChatBot,yi as default};
//# sourceMappingURL=Index.BOzJYqdS.js.map
