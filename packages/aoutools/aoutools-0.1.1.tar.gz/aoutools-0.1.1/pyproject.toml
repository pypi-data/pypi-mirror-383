# pyproject.toml

[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

[project]
name = "aoutools"
version = "0.1.1"
authors = [
  { name="Jaehyun Joo", email="jaehyunjoo@outlook.com" },
]
description = "A library of tools for analyzing All of Us data."
readme = "README.md"
requires-python = ">=3.8"
keywords = ["all-of-us", "genomics", "bioinformatics", "prs", "hail"]

# This field now points directly to your LICENSE file.
license = { file = "LICENSE" }

classifiers = [
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent",
    "Intended Audience :: Science/Research",
    "Topic :: Scientific/Engineering :: Bio-Informatics",
]
dependencies = [
    "hail",
    "pandas",
    "google-cloud-storage",
]

# Optional dependencies for downloader functionality
[project.optional-dependencies]
test = [
    "pytest",
    "pytest-mock",
]

[project.urls]
Homepage = "https://github.com/dokyoonkimlab/aoutools"
Repository = "https://github.com/dokyoonkimlab/aoutools"
Issues = "https://github.com/dokyoonkimlab/aoutools/issues"
Documentation = "https://aoutools.readthedocs.io"

[tool.setuptools.package-data]
aoutools = ["data/*"]

[tool.pixi.workspace]
channels = ["conda-forge", "bioconda"]
platforms = ["osx-arm64"]

[tool.pixi.pypi-dependencies]
aoutools = { path = ".", editable = true }

[tool.pixi.tasks]
docs = "make -C docs html"
undocs = "make -C docs clean"
test = "pytest -v"

# Runtime dependencies only
[tool.pixi.dependencies]
python = "3.11.*"
pandas = ">=2.3.1,<3"
google-cloud-storage = ">=3.2.0,<4"

# Development dependencies
[tool.pixi.feature.dev.dependencies]
sphinx = ">=8.2.3,<9"
sphinx-autodoc-typehints = ">=3.2.0,<4"
mypy = ">=1.17.1,<2"
furo = ">=2024.8.6,<2025"
pytest = ">=8.4.1,<9"
pytest-mock = ">=3.14.1,<4"
python-build = ">=1.3.0,<2"
twine = ">=6.1.0,<7"

# Enable dev feature by default
[tool.pixi.environments]
default = { features = ["dev"], solve-group = "default" }
