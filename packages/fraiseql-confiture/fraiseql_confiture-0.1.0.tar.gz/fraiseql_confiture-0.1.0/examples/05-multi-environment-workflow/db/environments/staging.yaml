name: staging

database:
  host: ${STAGING_DB_HOST}
  port: ${STAGING_DB_PORT}
  database: ${STAGING_DB_NAME}
  user: ${STAGING_DB_USER}
  password: ${STAGING_DB_PASSWORD}

  # SSL required for remote connections
  sslmode: require

  # Connection timeout
  connect_timeout: 10

# Include all schema files
include_dirs:
  - db/schema

# No exclusions in staging (test full production schema)
exclude_dirs: []

# Staging deployment options
options:
  # Moderate timeout for migrations
  migration_timeout: 300  # 5 minutes

  # Detailed logging
  verbose: true

  # Always dry-run before applying
  dry_run_first: true

  # Prevent accidental data loss
  allow_drop_tables: false
  allow_drop_columns: false

  # Backup before migrations
  backup_before_migration: true
