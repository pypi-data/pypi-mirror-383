# This file was generated by the OpenDAPI CLI - `opendapi init`
# Please add, remove and update the integrations and their overrides as needed.
# For more information on the OpenDAPI configuration schema, please visit:
# https://opendapi.org or talk to https://wovencollab.com

schema: https://opendapi.org/spec/0-0-3/opendapi.config.json

organization:
  name: {{ org_name }}
  email_domain: {{ org_email_domain }}

repository:
  urn: {{ repo_urn | default('local:' ~ org_name_snakecase ~ '/' ~ repo_name) }}
  mainline_branch: {{ mainline_branch_name }}

dapis:
  runtimes:
    DEFAULT:
      integrations:
        {%- for integration in integrations %}
        - type: {{ integration }}
          projects:
            # Automatically include all applications detected by OpenDAPI
            include_all: true

            # Project specific overrides - Uncomment overrides stanza
            # if you'd like to configure a specific project
            # such as point to a different schema file
            # or add patterns to identify source and sink datastores
            # or add model allowlist (regex) to include only specific models

            # Some integrations may require additional artifact configuration for
            # the detection of models. Uncomment the artifact_path stanza and configure
            # appropriately if needed.
            #
            # For example, in sqlalchemy, you can point to the metadata object as follows
            #   path.to.module:metadata
            #   alembic/env.py:target_metadata
            #   path/to/app.py:metadata
            #   path/to/sql_imports.py:sql_metadata
            #
            # For pynamodb, you can point to the model class as follows
            #   path.to.module:ModelBaseClass, path.to.another.module1, path.to.another.module2
            # Note: for pynamodb, artifact_path can only be specified at the project override level
            #
            # artifact_path: ~

            # overrides:
            #   - project_path: path/to/project
            #
            #     # Some integrations may require additional artifact configuration for
            #     # the detection of models. Uncomment the artifact_path stanza and configure
            #     # appropriately if needed.
            #
            #     artifact_path: subdir/under/project/pointing/to/an/artifact
            #
            #     # add regex to include only specific models - e.g. model_allowlist: ['^accounts_.*', 'business']
            #
            #     model_allowlist: []
            #
            #     playbooks:
            #       # automatically add source and sink datastoress
            #       - type: add_source_datastore
            #         datastore_urn: {{ org_name_snakecase }}.datastores.postgres
            #         namespace: ~
            #         identifier_prefix: production_
            #
            #       - type: add_sink_datastore
            #         datastore_urn: {{ org_name_snakecase }}.datastores.snowflake
            #         namespace: production_db.my_schema
            #         identifier_prefix: ~
            #
            #       - type: add_owner_team
            #         team_urn: {{ org_name_snakecase }}.teams.engineering
            #         model_allowlist: []

        {%- endfor %}
      