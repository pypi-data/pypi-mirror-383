{% extends "admin/change_list.html" %}
{% load static %}

{% block result_list %}
    <!-- Currency Statistics Dashboard -->
    {% if currency_stats %}
        {% include "admin/payments/_components/dashboard_header.html" with title="Currency Overview" icon="ðŸ“Š" %}
        
        {% with stats=currency_stats %}
            <div class="grid grid-cols-4 gap-4 mb-4">
                {% include "admin/payments/_components/stats_card.html" with title="Total Currencies" value=stats.total_currencies color="primary" %}
                {% include "admin/payments/_components/stats_card.html" with title="Provider Mappings" value=stats.enabled_provider_currencies color="success" %}
                {% include "admin/payments/_components/stats_card.html" with title="With USD Rates" value=stats.currencies_with_rates color="warning" %}
                {% include "admin/payments/_components/stats_card.html" with title="Rate Coverage" value=stats.rate_coverage|floatformat:1|add:"%" color="info" %}
            </div>
        {% endwith %}
        
        <div class="grid grid-cols-2 gap-4">
            <div class="bg-base-50 dark:bg-base-800 p-3 rounded-default">
                <h4 class="font-semibold text-font-important-light dark:text-font-important-dark mb-2">Currency Types</h4>
                <ul class="text-sm space-y-1 text-font-default-light dark:text-font-default-dark">
                    <li>ðŸ’µ Fiat: <span class="font-medium text-primary-600 dark:text-primary-400">{{ stats.fiat_count|default:0 }}</span></li>
                    <li>â‚¿ Crypto: <span class="font-medium text-warning-600 dark:text-warning-400">{{ stats.crypto_count|default:0 }}</span></li>
                </ul>
            </div>
            <div class="bg-base-50 dark:bg-base-800 p-3 rounded-default">
                <h4 class="font-semibold text-font-important-light dark:text-font-important-dark mb-2">ðŸš€ Top Supported</h4>
                <ul class="text-sm space-y-1 text-font-default-light dark:text-font-default-dark">
                    {% for currency in stats.top_currencies %}
                        <li><span class="font-semibold text-primary-600 dark:text-primary-400">{{ currency.code }}:</span> {{ currency.provider_count }} provider{{ currency.provider_count|pluralize }}</li>
                    {% empty %}
                        <li class="text-font-subtle-light dark:text-font-subtle-dark">No provider data available</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    {% endif %}

    {{ block.super }}
{% endblock %}
