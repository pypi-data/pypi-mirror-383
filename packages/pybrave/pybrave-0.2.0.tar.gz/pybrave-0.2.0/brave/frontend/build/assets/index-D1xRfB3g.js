import{r as o,v as rt,_ as at,X as D,Y as ke,O as R,V as it,Z as Fe,$ as Be,a0 as Ne,a1 as v,a2 as ot,a3 as _e,a4 as Re,R as I,C as lt,a5 as st,a6 as ct,N as Oe,a7 as dt,a8 as we,c as mt,a9 as ut,j as n,I as Me,d as ge,B as O,a as je,e as Te,p as Ae,g as J,P as fe,M as pt,U as gt,o as F}from"./main-gLMaKCvr.js";import{b as Le,c as He,s as ft,L as ee,r as ht,f as xt}from"./index-DEhiFitC.js";import{C as ne}from"./index-Jdu54dr5.js";import{a as yt,e as jt,R as bt,b as $t,S as Ct,F as De}from"./Table-CWRWFg95.js";import{P as Xe,S as be}from"./index-B-_sZvQI.js";import{R as vt}from"./index-ByQpjXWK.js";import{b as St}from"./index-D2XNTdXQ.js";import{A as _t}from"./index-Ci9o3BMm.js";import{M as Ot}from"./index-CjYZg4K2.js";import{T as $e}from"./index-ZwmWfN3I.js";import{T as We}from"./index-BrNLqRge.js";import{B as Ke}from"./index-B6vjdRJB.js";var wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},It=function(t,r){return o.createElement(rt,at({},t,{ref:r,icon:wt}))},Ie=o.forwardRef(It);const re=e=>{let{children:t}=e;const{getPrefixCls:r}=o.useContext(D),a=r("breadcrumb");return o.createElement("li",{className:`${a}-separator`,"aria-hidden":"true"},t===""?t:t||"/")};re.__ANT_BREADCRUMB_SEPARATOR=!0;var Pt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};function Et(e,t){if(e.title===void 0||e.title===null)return null;const r=Object.keys(t).join("|");return typeof e.title=="object"?e.title:String(e.title).replace(new RegExp(`:(${r})`,"g"),(a,i)=>t[i]||a)}function Ge(e,t,r,a){if(r==null)return null;const{className:i,onClick:l}=t,c=Pt(t,["className","onClick"]),m=Object.assign(Object.assign({},ke(c,{data:!0,aria:!0})),{onClick:l});return a!==void 0?o.createElement("a",Object.assign({},m,{className:R(`${e}-link`,i),href:a}),r):o.createElement("span",Object.assign({},m,{className:R(`${e}-link`,i)}),r)}function zt(e,t){return(a,i,l,c,m)=>{if(t)return t(a,i,l,c);const s=Et(a,i);return Ge(e,a,s,m)}}var he=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};const Ve=e=>{const{prefixCls:t,separator:r="/",children:a,menu:i,overlay:l,dropdownProps:c,href:m}=e,u=(x=>{if(i||l){const p=Object.assign({},c);if(i){const d=i||{},{items:h}=d,f=he(d,["items"]);p.menu=Object.assign(Object.assign({},f),{items:h==null?void 0:h.map(($,S)=>{var{key:E,title:g,label:y,path:b}=$,B=he($,["key","title","label","path"]);let z=y??g;return b&&(z=o.createElement("a",{href:`${m}${b}`},z)),Object.assign(Object.assign({},B),{key:E??S,label:z})})})}else l&&(p.overlay=l);return o.createElement(yt,Object.assign({placement:"bottom"},p),o.createElement("span",{className:`${t}-overlay-link`},x,o.createElement(it,null)))}return x})(a);return u!=null?o.createElement(o.Fragment,null,o.createElement("li",null,u),r&&o.createElement(re,null,r)):null},Je=e=>{const{prefixCls:t,children:r,href:a}=e,i=he(e,["prefixCls","children","href"]),{getPrefixCls:l}=o.useContext(D),c=l("breadcrumb",t);return o.createElement(Ve,Object.assign({},i,{prefixCls:c}),Ge(c,i,r,a))};Je.__ANT_BREADCRUMB_ITEM=!0;const kt=e=>{const{componentCls:t,iconCls:r,calc:a}=e;return{[t]:Object.assign(Object.assign({},Ne(e)),{color:e.itemColor,fontSize:e.fontSize,[r]:{fontSize:e.iconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:Object.assign({color:e.linkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${v(e.paddingXXS)}`,borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",marginInline:a(e.marginXXS).mul(-1).equal(),"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover}},ot(e)),"li:last-child":{color:e.lastItemColor},[`${t}-separator`]:{marginInline:e.separatorMargin,color:e.separatorColor},[`${t}-link`]:{[`
          > ${r} + span,
          > ${r} + a
        `]:{marginInlineStart:e.marginXXS}},[`${t}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",padding:`0 ${v(e.paddingXXS)}`,marginInline:a(e.marginXXS).mul(-1).equal(),[`> ${r}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover,a:{color:e.linkHoverColor}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},Ft=e=>({itemColor:e.colorTextDescription,lastItemColor:e.colorText,iconFontSize:e.fontSize,linkColor:e.colorTextDescription,linkHoverColor:e.colorText,separatorColor:e.colorTextDescription,separatorMargin:e.marginXS}),Bt=Fe("Breadcrumb",e=>{const t=Be(e,{});return kt(t)},Ft);var Pe=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};function Nt(e){const{breadcrumbName:t,children:r}=e,a=Pe(e,["breadcrumbName","children"]),i=Object.assign({title:t},a);return r&&(i.menu={items:r.map(l=>{var{breadcrumbName:c}=l,m=Pe(l,["breadcrumbName"]);return Object.assign(Object.assign({},m),{title:c})})}),i}function Rt(e,t){return o.useMemo(()=>e||(t?t.map(Nt):null),[e,t])}var Mt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};const Tt=(e,t)=>{if(t===void 0)return t;let r=(t||"").replace(/^\//,"");return Object.keys(e).forEach(a=>{r=r.replace(`:${a}`,e[a])}),r},V=e=>{const{prefixCls:t,separator:r="/",style:a,className:i,rootClassName:l,routes:c,items:m,children:s,itemRender:u,params:x={}}=e,p=Mt(e,["prefixCls","separator","style","className","rootClassName","routes","items","children","itemRender","params"]),{getPrefixCls:d,direction:h,breadcrumb:f}=o.useContext(D);let $;const S=d("breadcrumb",t),[E,g,y]=Bt(S),b=Rt(m,c),B=zt(S,u);if(b&&b.length>0){const j=[],P=m||c;$=b.map((M,L)=>{const{path:ae,key:X,type:ie,menu:H,overlay:U,onClick:q,className:oe,separator:le,dropdownProps:se}=M,W=Tt(x,ae);W!==void 0&&j.push(W);const _=X??L;if(ie==="separator")return o.createElement(re,{key:_},le);const K={},ce=L===b.length-1;H?K.menu=H:U&&(K.overlay=U);let{href:G}=M;return j.length&&W!==void 0&&(G=`#/${j.join("/")}`),o.createElement(Ve,Object.assign({key:_},K,ke(M,{data:!0,aria:!0}),{className:oe,dropdownProps:se,href:G,separator:ce?"":r,onClick:q,prefixCls:S}),B(M,x,P,j,G))})}else if(s){const j=_e(s).length;$=_e(s).map((P,M)=>{if(!P)return P;const L=M===j-1;return Re(P,{separator:L?"":r,key:M})})}const z=R(S,f==null?void 0:f.className,{[`${S}-rtl`]:h==="rtl"},i,l,g,y),w=Object.assign(Object.assign({},f==null?void 0:f.style),a);return E(o.createElement("nav",Object.assign({className:z,style:w},p),o.createElement("ol",null,$)))};V.Item=Je;V.Separator=re;const Ce=I.createContext({});Ce.Consumer;var Ue=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};const At=e=>{var{prefixCls:t,className:r,avatar:a,title:i,description:l}=e,c=Ue(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:m}=o.useContext(D),s=m("list",t),u=R(`${s}-item-meta`,r),x=I.createElement("div",{className:`${s}-item-meta-content`},i&&I.createElement("h4",{className:`${s}-item-meta-title`},i),l&&I.createElement("div",{className:`${s}-item-meta-description`},l));return I.createElement("div",Object.assign({},c,{className:u}),a&&I.createElement("div",{className:`${s}-item-meta-avatar`},a),(i||l)&&x)},Lt=I.forwardRef((e,t)=>{const{prefixCls:r,children:a,actions:i,extra:l,styles:c,className:m,classNames:s,colStyle:u}=e,x=Ue(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:p,itemLayout:d}=o.useContext(Ce),{getPrefixCls:h,list:f}=o.useContext(D),$=w=>{var j,P;return R((P=(j=f==null?void 0:f.item)===null||j===void 0?void 0:j.classNames)===null||P===void 0?void 0:P[w],s==null?void 0:s[w])},S=w=>{var j,P;return Object.assign(Object.assign({},(P=(j=f==null?void 0:f.item)===null||j===void 0?void 0:j.styles)===null||P===void 0?void 0:P[w]),c==null?void 0:c[w])},E=()=>{let w=!1;return o.Children.forEach(a,j=>{typeof j=="string"&&(w=!0)}),w&&o.Children.count(a)>1},g=()=>d==="vertical"?!!l:!E(),y=h("list",r),b=i&&i.length>0&&I.createElement("ul",{className:R(`${y}-item-action`,$("actions")),key:"actions",style:S("actions")},i.map((w,j)=>I.createElement("li",{key:`${y}-item-action-${j}`},w,j!==i.length-1&&I.createElement("em",{className:`${y}-item-action-split`})))),B=p?"div":"li",z=I.createElement(B,Object.assign({},x,p?{}:{ref:t},{className:R(`${y}-item`,{[`${y}-item-no-flex`]:!g()},m)}),d==="vertical"&&l?[I.createElement("div",{className:`${y}-item-main`,key:"content"},a,b),I.createElement("div",{className:R(`${y}-item-extra`,$("extra")),key:"extra",style:S("extra")},l)]:[a,b,Re(l,{key:"extra"})]);return p?I.createElement(lt,{ref:t,flex:1,style:u},z):z}),qe=Lt;qe.Meta=At;const Ht=e=>{const{listBorderedCls:t,componentCls:r,paddingLG:a,margin:i,itemPaddingSM:l,itemPaddingLG:c,marginLG:m,borderRadiusLG:s}=e;return{[t]:{border:`${v(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:s,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:a},[`${r}-pagination`]:{margin:`${v(i)} ${v(m)}`}},[`${t}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:l}},[`${t}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:c}}}},Dt=e=>{const{componentCls:t,screenSM:r,screenMD:a,marginLG:i,marginSM:l,margin:c}=e;return{[`@media screen and (max-width:${a}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${r}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:l}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${v(c)}`}}}}}},Xt=e=>{const{componentCls:t,antCls:r,controlHeight:a,minHeight:i,paddingSM:l,marginLG:c,padding:m,itemPadding:s,colorPrimary:u,itemPaddingSM:x,itemPaddingLG:p,paddingXS:d,margin:h,colorText:f,colorTextDescription:$,motionDurationSlow:S,lineWidth:E,headerBg:g,footerBg:y,emptyTextPadding:b,metaMarginBottom:B,avatarMarginRight:z,titleMarginBottom:w,descriptionFontSize:j}=e;return{[t]:Object.assign(Object.assign({},Ne(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:g},[`${t}-footer`]:{background:y},[`${t}-header, ${t}-footer`]:{paddingBlock:l},[`${t}-pagination`]:{marginBlockStart:c,[`${r}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:s,color:f,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:z},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:f},[`${t}-item-meta-title`]:{margin:`0 0 ${v(e.marginXXS)} 0`,color:f,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:f,transition:`all ${S}`,"&:hover":{color:u}}},[`${t}-item-meta-description`]:{color:$,fontSize:j,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${v(d)}`,color:$,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:E,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${v(m)} 0`,color:$,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:b,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${r}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:h,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:c},[`${t}-item-meta`]:{marginBlockEnd:B,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:w,color:f,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:m,marginInlineStart:"auto","> li":{padding:`0 ${v(m)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${v(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${v(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${v(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:a},[`${t}-split${t}-something-after-last-item ${r}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${v(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:p},[`${t}-sm ${t}-item`]:{padding:x},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Wt=e=>({contentWidth:220,itemPadding:`${v(e.paddingContentVertical)} 0`,itemPaddingSM:`${v(e.paddingContentVerticalSM)} ${v(e.paddingContentHorizontal)}`,itemPaddingLG:`${v(e.paddingContentVerticalLG)} ${v(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),Kt=Fe("List",e=>{const t=Be(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[Xt(t),Ht(t),Dt(t)]},Wt);var Gt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};function Vt(e,t){const{pagination:r=!1,prefixCls:a,bordered:i=!1,split:l=!0,className:c,rootClassName:m,style:s,children:u,itemLayout:x,loadMore:p,grid:d,dataSource:h=[],size:f,header:$,footer:S,loading:E=!1,rowKey:g,renderItem:y,locale:b}=e,B=Gt(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),z=r&&typeof r=="object"?r:{},[w,j]=o.useState(z.defaultCurrent||1),[P,M]=o.useState(z.defaultPageSize||10),{getPrefixCls:L,direction:ae,className:X,style:ie}=st("list"),{renderEmpty:H}=o.useContext(D),U={current:1,total:0},q=C=>(k,T)=>{var pe;j(k),M(T),r&&((pe=r==null?void 0:r[C])===null||pe===void 0||pe.call(r,k,T))},oe=q("onChange"),le=q("onShowSizeChange"),se=(C,k)=>{if(!y)return null;let T;return typeof g=="function"?T=g(C):g?T=C[g]:T=C.key,T||(T=`list-item-${k}`),o.createElement(o.Fragment,{key:T},y(C,k))},W=!!(p||r||S),_=L("list",a),[K,ce,G]=Kt(_);let A=E;typeof A=="boolean"&&(A={spinning:A});const de=!!(A!=null&&A.spinning),Ye=ct(f);let Y="";switch(Ye){case"large":Y="lg";break;case"small":Y="sm";break}const Ze=R(_,{[`${_}-vertical`]:x==="vertical",[`${_}-${Y}`]:Y,[`${_}-split`]:l,[`${_}-bordered`]:i,[`${_}-loading`]:de,[`${_}-grid`]:!!d,[`${_}-something-after-last-item`]:W,[`${_}-rtl`]:ae==="rtl"},X,c,m,ce,G),N=jt(U,{total:h.length,current:w,pageSize:P},r||{}),Qe=Math.ceil(N.total/N.pageSize);N.current=Math.min(N.current,Qe);const ve=r&&o.createElement("div",{className:R(`${_}-pagination`)},o.createElement(Xe,Object.assign({align:"end"},N,{onChange:oe,onShowSizeChange:le})));let me=Oe(h);r&&h.length>(N.current-1)*N.pageSize&&(me=Oe(h).splice((N.current-1)*N.pageSize,N.pageSize));const et=Object.keys(d||{}).some(C=>["xs","sm","md","lg","xl","xxl"].includes(C)),Se=dt(et),Z=o.useMemo(()=>{for(let C=0;C<we.length;C+=1){const k=we[C];if(Se[k])return k}},[Se]),tt=o.useMemo(()=>{if(!d)return;const C=Z&&d[Z]?d[Z]:d.column;if(C)return{width:`${100/C}%`,maxWidth:`${100/C}%`}},[JSON.stringify(d),Z]);let ue=de&&o.createElement("div",{style:{minHeight:53}});if(me.length>0){const C=me.map(se);ue=d?o.createElement(mt,{gutter:d.gutter},o.Children.map(C,k=>o.createElement("div",{key:k==null?void 0:k.key,style:tt},k))):o.createElement("ul",{className:`${_}-items`},C)}else!u&&!de&&(ue=o.createElement("div",{className:`${_}-empty-text`},(b==null?void 0:b.emptyText)||(H==null?void 0:H("List"))||o.createElement(ut,{componentName:"List"})));const Q=N.position||"bottom",nt=o.useMemo(()=>({grid:d,itemLayout:x}),[JSON.stringify(d),x]);return K(o.createElement(Ce.Provider,{value:nt},o.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},ie),s),className:Ze},B),(Q==="top"||Q==="both")&&ve,$&&o.createElement("div",{className:`${_}-header`},$),o.createElement(be,Object.assign({},A),ue,u),S&&o.createElement("div",{className:`${_}-footer`},S),p||(Q==="bottom"||Q==="both")&&ve)))}const Jt=o.forwardRef(Vt),te=Jt;te.Item=qe;const{Search:Ut}=Me,{Text:Ee}=ge,qt=({path:e,onSelectFile:t})=>{const[r,a]=o.useState([]),[i,l]=o.useState(e),[c,m]=o.useState(""),[s,u]=o.useState(1),[x,p]=o.useState(0),d=10,h=async(g=i,y=c,b=s)=>{const B=await je.get("/file-operation/list-dir-v2",{params:{path:g,keyword:y,page:b,limit:d}});a(B.data.items),p(B.data.total),l(g),u(b)};o.useEffect(()=>{h(e)},[e]);const f=g=>{h(`${i}/${g}`,"",1)},$=g=>{h(i,g,1)},S=g=>{t({path:i+"/"+g.name,file:g.name})},E=i.split("/").filter(Boolean);return n.jsxs(ne,{title:"文件浏览器",extra:n.jsxs(Ct,{children:[n.jsx(O,{icon:n.jsx(Ie,{}),onClick:()=>h(e),size:"small",children:"重置"}),n.jsx(O,{icon:n.jsx(Ie,{}),onClick:()=>h(i),size:"small",children:"刷新"})]}),children:[n.jsxs(V,{style:{marginBottom:"1rem"},children:[n.jsx(V.Item,{children:n.jsx("a",{onClick:()=>h("/"),children:"根目录"})}),E.map((g,y)=>n.jsx(V.Item,{children:n.jsx("a",{onClick:()=>{const b="/"+E.slice(0,y+1).join("/");h(b)},children:g})},y))]}),n.jsx(Ut,{placeholder:"搜索文件名",enterButton:"搜索",value:c,onChange:g=>m(g.target.value),onSearch:$,style:{marginBottom:16}}),n.jsx(te,{size:"small",bordered:!0,dataSource:r,locale:{emptyText:"暂无文件"},renderItem:g=>n.jsx(te.Item,{actions:g.is_dir?[n.jsx(O,{size:"small",onClick:()=>f(g.name),children:"进入"})]:[n.jsx(O,{type:"link",size:"small",icon:n.jsx(vt,{}),href:`/brave-api/file-operation/download?path=${encodeURIComponent(i+"/"+g.name)}`,target:"_blank",children:"下载"}),n.jsx(O,{type:"link",size:"small",onClick:()=>S(g),children:"选择"})],children:n.jsx(te.Item.Meta,{avatar:g.is_dir?n.jsx(bt,{}):n.jsx($t,{}),title:n.jsx(Ee,{strong:!0,style:{cursor:g.is_dir?"pointer":"default"},onClick:()=>g.is_dir&&f(g.name),children:g.name}),description:!g.is_dir&&n.jsxs(Ee,{type:"secondary",children:[(g.size/1024).toFixed(1)," KB"]})})})}),n.jsx(Xe,{style:{marginTop:"1rem",textAlign:"center"},current:s,total:x,pageSize:d,onChange:g=>h(i,c,g),showSizeChanger:!1})]})},Yt=(e,t)=>je.post(`/fast-api/parse-analysis-result/${e}?save=${t}`),Zt=o.memo(({analysis_id:e,callback:t})=>{const[r,a]=o.useState(),[i,l]=o.useState(!1),{messageApi:c}=Te(),{modal:m,openModal:s,closeModal:u}=Ae(),x=async(p=!1)=>{l(!0);try{const d=await Yt(e,p);a(d.data),l(!1),t&&p&&t()}catch(d){l(!1),c.error(d.response.data.detail)}};return o.useEffect(()=>{x(!1)},[e]),n.jsxs(n.Fragment,{children:[n.jsxs(J,{gap:"small",justify:"flex-end",align:"center",children:[(r==null?void 0:r.file_format_list)&&n.jsx(n.Fragment,{children:r==null?void 0:r.file_format_list.map(p=>n.jsx(O,{size:"small",color:"cyan",variant:"solid",onClick:()=>s("modalA",{params:{component_id:p.component_id},title:p.name}),children:p.name}))}),n.jsx(fe,{title:"确定解析吗？",onConfirm:()=>{x(!0),c.success("解析成功")},children:n.jsx(O,{size:"small",color:"cyan",variant:"solid",children:"解析"})}),n.jsx(O,{size:"small",color:"primary",variant:"solid",onClick:()=>x(!1),children:"刷新"})]}),n.jsx(be,{spinning:i,children:r&&n.jsx(n.Fragment,{children:r!=null&&r.error?n.jsx(ge,{children:n.jsx("pre",{children:r==null?void 0:r.error})}):n.jsxs(n.Fragment,{children:[n.jsx(De,{size:"small",pagination:!1,rowKey:"component_id",columns:[{title:"名称",dataIndex:"name",key:"name"},{title:"目录",dataIndex:"dir",key:"dir"},{title:"文件组件ID",dataIndex:"component_id",key:"component_id"},{title:"文件格式",dataIndex:"fileFormat",key:"fileFormat",render:(p,d)=>n.jsx("div",{style:{overflowWrap:"break-word",wordBreak:"break-all"},children:JSON.stringify(d.fileFormat)})},{title:"操作",dataIndex:"component_id",key:"component_id",render:(p,d)=>n.jsx(n.Fragment,{children:n.jsx(O,{color:"cyan",variant:"solid",size:"small",onClick:()=>{s("modalC",{data:{component_id:d.component_id},structure:{component_type:"file",files:r==null?void 0:r.file_dict[d.dir]}})},children:"编辑"})})}],dataSource:r==null?void 0:r.file_format_list}),n.jsx(ne,{style:{maxHeight:"20rem",overflow:"auto"},children:n.jsx(ge,{children:n.jsx("pre",{children:JSON.stringify(r,null,2)})})})]})})}),n.jsx(St,{callback:x,visible:m.key=="modalC"&&m.visible,onClose:u,params:m.params}),n.jsx(_t,{visible:m.key=="modalA"&&m.visible,params:m.params,onClose:u,analysis:r})]})});var xe=function(){return xe=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xe.apply(this,arguments)},Qt=o.forwardRef(function(e,t){return I.createElement(Ke,xe({},e,{chartType:"Bar",ref:t}))}),ye=function(){return ye=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ye.apply(this,arguments)},en=o.forwardRef(function(e,t){return I.createElement(Ke,ye({},e,{chartType:"Column",ref:t}))});const tn=({visible:e,onClose:t,params:r})=>{const[a,i]=o.useState(),[l,c]=o.useState([]),[m,s]=o.useState(),[u,x]=o.useState();o.useEffect(()=>{if(e){const h=Object.entries(r.content).map(([f,$])=>({key:$,label:f}));if(c(h),h.length>0){const f=h[0].key;s(f),p(f)}}},[e]);const p=async h=>{x(!0);const f=await Le(h);i(f.data),x(!1)},d=h=>{const f=`/brave-api/file-operation/download?path=${h}`;window.open(f,"_blank")};return e?n.jsxs(pt,{width:"80vw",open:e,onCancel:t,title:"打开文件",footer:!1,children:[n.jsx($e,{tabBarExtraContent:n.jsxs(J,{gap:"small",align:"center",children:[n.jsx(O,{size:"small",color:"cyan",variant:"solid",onClick:()=>{d(m)},children:"下载"}),n.jsx(O,{size:"small",color:"cyan",variant:"solid",onClick:()=>{p(m)},children:"刷新"})]}),items:l,onChange:h=>{p(h),s(h)}}),n.jsx(be,{spinning:u,children:n.jsx(He,{...a})}),(r==null?void 0:r.description)&&n.jsx(Ot,{data:r.description})]}):null},ze=({file_path:e})=>{o.useEffect(()=>{e&&a(e)},[e]);const[t,r]=o.useState([]),a=async(i,l=!1)=>{const c=await Le(i);r(c.data)};return n.jsx(n.Fragment,{children:n.jsx(ne,{title:n.jsxs(We,{color:"blue",children:["文件: ",e]}),extra:n.jsx(O,{size:"small",color:"cyan",variant:"solid",onClick:()=>{a(e)},children:"刷新日志"}),bodyStyle:{padding:0},children:n.jsx(He,{...t})})})},nn=({output_dir:e,...t})=>(JSON.stringify(t),n.jsx(qt,{path:e})),rn=({data:e})=>{const t={data:e,xField:"task",yField:"realtime",colorField:"process",group:{padding:0},label:{text:r=>r.label,textBaseline:"bottom"}};return n.jsx(n.Fragment,{children:n.jsx(en,{...t})})},an=({data:e})=>{const t=Array.from(new Set(e.map(l=>l.process))),[r,a]=o.useState(t[0]),i=e.filter(l=>l.process===r);return n.jsxs("div",{children:[n.jsx("div",{style:{marginBottom:16},children:t.map(l=>n.jsx(O,{size:"small",type:l===r?"primary":"default",onClick:()=>a(l),style:{marginRight:8},children:l},l))}),n.jsx(rn,{data:i})]})},on=({data:e})=>{const t={data:e,xField:"process",yField:"count",colorField:"status",stack:!0,sort:{reverse:!0,by:"y"},style:{maxWidth:50}};return n.jsx(Qt,{...t})},ln=({data:e})=>{const{modal:t,openModal:r,closeModal:a}=Ae(),i=[{title:"process",dataIndex:"process",key:"process",ellipsis:!0},{title:"tag",dataIndex:"tag",key:"tag",ellipsis:!0},{title:"name",dataIndex:"name",key:"name",ellipsis:!0,render:(s,u)=>n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsxs("li",{children:[" ",u.workdir," "]})})}),children:s})},{title:"container",dataIndex:"container",key:"container",ellipsis:!0},{title:"status",dataIndex:"status",key:"status",ellipsis:!0},{title:"realtime",dataIndex:"realtime",key:"realtime",ellipsis:!0},{title:"cpus",dataIndex:"cpus",key:"cpus",ellipsis:!0,render:(s,u)=>n.jsx(F,{title:n.jsx(n.Fragment,{children:u["%cpu"]}),children:s})},{title:"memory",dataIndex:"memory",key:"memory",ellipsis:!0,width:100,render:(s,u)=>n.jsx(F,{title:n.jsx(n.Fragment,{children:u["%mem"]}),children:s})},{title:"操作",key:"action",fixed:"right",ellipsis:!0,width:200,render:(s,u)=>n.jsx(J,{gap:"small",children:n.jsx(O,{size:"small",color:"cyan",variant:"solid",onClick:()=>{r("openFile",{content:{".command.sh":`${u.workdir}/.command.sh`,".command.trace":`${u.workdir}/.command.trace`,".command.run":`${u.workdir}/.command.run`,".command.out":`${u.workdir}/.command.out`,".command.err":`${u.workdir}/.command.err`,".command.begin":`${u.workdir}/.command.begin`}})},children:"查看"})})}],[l,c]=o.useState(""),m=o.useMemo(()=>l?e.filter(s=>Object.values(s).some(u=>String(u).toLowerCase().includes(l.toLowerCase()))):e,[e,l]);return n.jsxs(n.Fragment,{children:[n.jsx(De,{title:()=>n.jsx(Me.Search,{size:"small",placeholder:"搜索任务...",allowClear:!0,enterButton:!0,value:l,onChange:s=>c(s.target.value),style:{width:300}}),scroll:{x:"max-content",y:55*5},size:"small",bordered:!0,footer:()=>`一共${m.length}条记录`,columns:i,dataSource:m,rowKey:s=>s.task_id}),n.jsx(tn,{visible:t.key=="openFile"&&t.visible,onClose:a,params:t.params})]})},sn=({analysis_id:e})=>{const[t,r]=o.useState(),[a,i]=o.useState(!1);function l(m){const s=m.match(/(\d+)m/),u=m.match(/(\d+)s/),x=s?parseInt(s[1]):0,p=u?parseInt(u[1]):0;return x*60+p}const c=async()=>{i(!0);const m=await je.get(`/analysis/analysis-progress/${e}`),s={};m.data.forEach(p=>{const d=`${p.process}-${p.status}`;s[d]||(s[d]={process:p.process,status:p.status,count:0}),s[d].count+=1});const u=Object.values(s),x=m.data.map(p=>({process:p.process,task:p.task_id,realtime:l(p.realtime),label:p.realtime}));r({table:m.data,statusData:u,timeData:x}),i(!1)};return o.useEffect(()=>{c()},[]),n.jsxs("div",{children:[n.jsx(J,{justify:"flex-end",gap:"small",children:n.jsx(O,{size:"small",color:"cyan",variant:"solid",onClick:c,children:"刷新"})}),t&&n.jsx($e,{defaultActiveKey:"0",onChange:()=>{window.dispatchEvent(new Event("resize"))},items:[{key:"0",label:"任务表格",children:n.jsx(ln,{data:(t==null?void 0:t.table)||[]})},{key:"1",label:"任务状态",children:n.jsx(on,{data:(t==null?void 0:t.statusData)||[]})},{key:"2",label:"运行时间",children:n.jsx(an,{data:(t==null?void 0:t.timeData)||[]})}]})]})},cn={output_dir:nn,workflow_log_file:ee,executor_log_file:ee,trace_file:ee,command_log_path:ee,params_path:ze,command_path:ze,result_parse:Zt,analysis_progress:sn},dn=({analysis:e,file:t,fileKey:r})=>{const a=cn[r];return a?n.jsx(a,{...e,file_path:t,file:t,fileKey:r}):n.jsx(n.Fragment,{children:"no component"})},mn=o.memo(({analysis:e,callback:t})=>{const[r,a]=o.useState("command_log_path"),{messageApi:i}=Te(),{eventSourceRef:l,status:c,reconnect:m}=gt(),s=o.useRef(r);if(!e)return null;const u={workflow_log_file:e.workflow_log_file,executor_log_file:e.executor_log_file,trace_file:e.trace_file,params_path:e.params_path,command_path:e.command_path,command_log_path:e.command_log_path},x=async()=>{await ht(e==null?void 0:e.analysis_id,"job"),i.success("运行成功"),t&&t()},p=[{key:"command_log_path",label:n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.command_log_path})})}),children:"运行日志"})},{key:"trace_file",label:n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.trace_file})})}),children:"运行进度"})},{key:"workflow_log_file",label:n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.workflow_log_file})})}),children:"工作流日志"})},{key:"executor_log_file",label:n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.executor_log_file})})}),children:"执行器日志"})},{key:"params_path",label:n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.params_path})})}),children:"参数"})},{key:"command_path",label:n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.command_path})})}),children:"命令"})},{key:"output_dir",label:n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"输出文件"})},{key:"analysis_progress",label:n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"分析可视化"})},{key:"result_parse",label:n.jsx(F,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"结果解析"})}];return n.jsx(n.Fragment,{children:n.jsx($e,{tabBarExtraContent:n.jsxs(J,{gap:"small",align:"center",children:[n.jsx(We,{color:"cyan",children:e==null?void 0:e.analysis_status}),n.jsx(F,{title:n.jsx(n.Fragment,{children:u[r]})}),e.analysis_status=="running"?n.jsx(n.Fragment,{children:n.jsx(fe,{title:"是否停止!",onConfirm:async()=>{await ft(e.analysis_id),i.success("停止成功")},children:n.jsx(O,{size:"small",color:"cyan",variant:"solid",children:"停止"})})}):n.jsx(n.Fragment,{children:n.jsx(fe,{title:"是否运行!",onConfirm:x,children:n.jsx(O,{size:"small",color:"cyan",variant:"solid",children:e.analysis_status=="created"?"运行":"重新运行"})})})]}),activeKey:r,onChange:d=>{a(d),s.current=d},size:"small",items:p.map(d=>({key:d.key,label:d.label,children:n.jsx(dn,{file:u[d.key],fileKey:d.key,analysis:e})}))})})}),Sn=o.forwardRef(({visible:e,params:t,onClose:r,callback:a},i)=>{console.log("loading PipelineInfo...");const l=async()=>{c(),a&&a()},c=async()=>{if(u){const d=(await xt(u)).data;s(d)}},[m,s]=o.useState();if(o.useImperativeHandle(i,()=>({relaod:c})),o.useEffect(()=>{e&&c()},[e&&(t==null?void 0:t.analysis_id)]),!e)return n.jsx(n.Fragment,{});const{analysis_id:u,...x}=t;return n.jsx(n.Fragment,{children:n.jsx(ne,{size:"small",title:`流程监控 ${u}`,extra:n.jsx(n.Fragment,{children:n.jsx(O,{size:"small",onClick:r,color:"cyan",variant:"solid",children:"关闭"})}),children:n.jsx(mn,{analysis:m,callback:l,loadAnalysis:c})})})});export{mn as F,tn as O,Sn as P};
