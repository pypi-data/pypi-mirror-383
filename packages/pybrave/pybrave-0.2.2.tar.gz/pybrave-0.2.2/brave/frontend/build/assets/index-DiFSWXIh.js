import{r as d,x as N,_ as V,I as E,u as R,c as F,k as L,b as D,j as e,F as m,B as w,R as z,C as I,t as k,l as S,E as P,a as A,M as G,P as T,$ as U}from"./main-CuY7LwDi.js";import{C as $,M as B}from"./index-BMhTxeKN.js";import{c as H}from"./utils-D2B0dIuM.js";import{b as W,p as J}from"./index-IVhR9oa8.js";import{u as q}from"./usePagination-7P2VlRbv.js";import{D as K}from"./index-DqxFy14w.js";import{S as M,P as Q}from"./index-C59h2Yua.js";import{R as X}from"./index-DFeHvYNt.js";import{R as Y}from"./RedoOutlined-BNTfk6-k.js";import"./index-qOmqaMb2.js";import"./Dropdown-BHbGj-Fl.js";import"./index-BEzmeFWl.js";import"./Table-C4qk6tSP.js";import"./addEventListener-3f_zys3z.js";import"./index-BVW_ZuQG.js";import"./UpOutlined-DnwtgvX4.js";import"./DeleteOutlined-Cq9E5-_a.js";var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},ee=function(n,t){return d.createElement(N,V({},n,{ref:t,icon:Z}))},se=d.forwardRef(ee);const be=({params:r,map:n})=>{const{Search:t}=E,{baseURL:h}=R(s=>s.user),{component_type:l}=r,f=s=>(n&&(s=n(s)),s.tags&&(s.tags=JSON.parse(s.tags)),{id:s.id,component_id:s.component_id,name:s.name,category:s.category,img:s.img,tags:s.tags,component_type:s.component_type,order:s.order_index,path:`/component/${l}/${s.component_id}`,namespace:s.namespace,namespace_name:s.namespace_name}),{data:c,pageNumber:g,totalPage:p,loading:j,reload:i,pageSize:o,setPageNumber:v,search:x}=q({pageApi:J,params:r||{},map:f,initialPageSize:12}),u=F(),{messageApi:te}=L(),{modal:a,openModal:b,closeModal:C}=D();return e.jsxs("div",{style:{maxWidth:"1500px",margin:"1rem auto"},children:[e.jsxs(m,{justify:"space-between",gap:"small",children:[e.jsx(t,{size:"small",placeholder:"Search Components",allowClear:!0,enterButton:!0,onSearch:s=>{x(s)},style:{marginBottom:"1rem",width:400}}),e.jsxs(m,{gap:"small",children:[e.jsx(w,{size:"small",color:"cyan",variant:"solid",onClick:()=>{b("installComponents",{component_type:l})},children:"Intsall Components "}),e.jsx(w,{size:"small",color:"cyan",variant:"solid",onClick:()=>{b("modalA",{data:void 0,structure:{component_type:l}})},children:"Create Components "}),e.jsx(w,{size:"small",color:"primary",variant:"solid",onClick:i,children:"Refresh"})]})]}),e.jsx(M,{spinning:j,children:Array.isArray(c)&&c.length!=0?e.jsx(z,{gutter:16,style:{position:"relative"},children:c.map((s,O)=>e.jsx(I,{lg:6,sm:4,xs:24,style:{marginBottom:"1rem",cursor:"pointer"},children:e.jsxs($,{hoverable:!0,className:"custom-card",style:{height:"100%",border:"1px solid #f0f0f0",borderRadius:"12px",overflow:"hidden",transition:"all 0.3s ease"},bodyStyle:{padding:"12px 16px"},cover:e.jsx("div",{style:{height:"15rem"},children:e.jsx("img",{style:{height:"100%",width:"100%",objectFit:"cover"},alt:s.label,src:`${h}${s.img}`})}),onClick:()=>u(`${s.path}`),children:[e.jsx(B,{title:e.jsx(e.Fragment,{children:s.name}),description:s==null?void 0:s.description,style:{marginBottom:"1rem"}}),s.tags&&Array.isArray(s.tags)&&s.tags.map((y,_)=>e.jsx(k,{title:y,children:e.jsx(S,{style:{wordBreak:"break-word",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:100,display:"inline-block",cursor:"default"},color:H[_],children:y})},_)),e.jsx("div",{onClick:y=>{y.stopPropagation(),b("modalG",s)},style:{position:"absolute",right:10,bottom:10,fontSize:15,color:"rgba(0,0,0,0.45)",cursor:"pointer"},children:e.jsx(se,{})})]})},O))}):e.jsx(P,{})}),p!=0&&e.jsxs(m,{style:{marginTop:"1rem"},align:"center",children:["一共",p,"条数据  ",e.jsx(Q,{current:g,pageSize:o,total:p,onChange:s=>v(s),showSizeChanger:!1})]}),e.jsx(W,{callback:i,visible:a.key=="modalA"&&a.visible,onClose:C,params:a.params}),e.jsx(K,{visible:a.key=="modalG"&&a.visible,onClose:C,callback:i,params:a.params}),e.jsx(oe,{visible:a.key=="installComponents"&&a.visible,onClose:C,callback:i,params:a.params})]})},oe=({visible:r,onClose:n,params:t,callback:h})=>{const[l,f]=d.useState([]),[c,g]=d.useState(!1),{baseURL:p}=R(o=>o.user),j=U();d.useEffect(()=>{r&&(t!=null&&t.component_type)&&i()},[r,t==null?void 0:t.component_type]);const i=async()=>{g(!0);const o=await A.get(`/component-store/list-by-type/${t==null?void 0:t.component_type}`);f(o.data),g(!1)};return e.jsx(G,{footer:null,title:e.jsxs(m,{gap:"small",children:[e.jsxs("span",{children:["Install Components"," "]}),e.jsx(Y,{style:{cursor:"pointer"},onClick:i})]}),width:"60%",open:r,onClose:n,onCancel:n,children:e.jsx(M,{spinning:c,children:Array.isArray(l)&&l.length!=0?e.jsx(z,{gutter:16,style:{position:"relative"},children:l.map((o,v)=>e.jsx(I,{lg:6,sm:4,xs:24,style:{marginBottom:"1rem",cursor:"pointer"},children:e.jsxs($,{hoverable:!0,className:"custom-card",style:{height:"100%",border:"1px solid #f0f0f0",borderRadius:"12px",overflow:"hidden",transition:"all 0.3s ease"},bodyStyle:{padding:"12px 16px"},cover:e.jsx("div",{style:{height:"15rem"},children:e.jsx("img",{style:{height:"100%",width:"100%",objectFit:"cover"},alt:o.label,src:`${p}${o.img}`})}),children:[e.jsx(B,{title:e.jsxs(m,{justify:"space-between",align:"center",children:[e.jsxs(k,{title:o==null?void 0:o.component_id,children:[o.component_name,e.jsx(S,{color:o.installed?"#108ee9":"#f5222d",style:{marginLeft:"1rem"},children:o.installed?"Installed":"Not I nstalled"})]}),e.jsx(T,{title:"Are you sure to install this component?",onConfirm:async()=>{await A.post("/install-components",{path:o.file_path}),j.success("Install success!"),h&&h(),n&&n()},children:e.jsx(X,{style:{cursor:"pointer"}})})]}),description:o==null?void 0:o.description,style:{marginBottom:"1rem"}}),o.tags&&Array.isArray(o.tags)&&o.tags.map((x,u)=>e.jsx(k,{title:x,children:e.jsx(S,{style:{wordBreak:"break-word",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:100,display:"inline-block",cursor:"default"},color:H[u],children:x})},u))]})},v))}):e.jsx(P,{})})})};export{be as default};
