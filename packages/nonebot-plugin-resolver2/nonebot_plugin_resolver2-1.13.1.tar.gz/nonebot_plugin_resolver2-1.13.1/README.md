<div align="center">
<a href="https://v2.nonebot.dev/store">
    <img src="https://raw.githubusercontent.com/fllesser/nonebot-plugin-template/refs/heads/resource/.docs/NoneBotPlugin.svg" width="310" alt="logo">
</a>

## âœ¨ [Nonebot2](https://github.com/nonebot/nonebot2) é“¾æ¥åˆ†äº«è‡ªåŠ¨è§£ææ’ä»¶ âœ¨

<a href="./LICENSE">
    <img src="https://img.shields.io/github/license/fllesser/nonebot-plugin-resolver2.svg" alt="license">
</a>
<a href="https://pypi.python.org/pypi/nonebot-plugin-resolver2">
    <img src="https://img.shields.io/pypi/v/nonebot-plugin-resolver2.svg" alt="pypi">
</a>
<img src="https://img.shields.io/badge/python-3.10|3.11|3.12|3.13-blue.svg" alt="python">
<a href="https://pepy.tech/projects/nonebot-plugin-resolver2">
    <img src="https://static.pepy.tech/badge/nonebot-plugin-resolver2">
</a>
<br/>
<a href="https://github.com/astral-sh/ruff">
    <img src="https://img.shields.io/badge/code%20style-ruff-black?style=flat-square&logo=ruff" alt="ruff">
</a>
<a href="https://github.com/astral-sh/uv">
    <img src="https://img.shields.io/badge/package%20manager-uv-black?style=flat-square&logo=uv" alt="uv">
</a>
<a href="https://onebot.dev/">
    <img src="https://img.shields.io/badge/OneBot-v11-black?style=social&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAIVBMVEUAAAAAAAADAwMHBwceHh4UFBQNDQ0ZGRkoKCgvLy8iIiLWSdWYAAAAAXRSTlMAQObYZgAAAQVJREFUSMftlM0RgjAQhV+0ATYK6i1Xb+iMd0qgBEqgBEuwBOxU2QDKsjvojQPvkJ/ZL5sXkgWrFirK4MibYUdE3OR2nEpuKz1/q8CdNxNQgthZCXYVLjyoDQftaKuniHHWRnPh2GCUetR2/9HsMAXyUT4/3UHwtQT2AggSCGKeSAsFnxBIOuAggdh3AKTL7pDuCyABcMb0aQP7aM4AnAbc/wHwA5D2wDHTTe56gIIOUA/4YYV2e1sg713PXdZJAuncdZMAGkAukU9OAn40O849+0ornPwT93rphWF0mgAbauUrEOthlX8Zu7P5A6kZyKCJy75hhw1Mgr9RAUvX7A3csGqZegEdniCx30c3agAAAABJRU5ErkJggg==" alt="onebot">
</a>
<br/>
<a href="https://results.pre-commit.ci/latest/github/fllesser/nonebot-plugin-resolver2/master">
    <img src="https://results.pre-commit.ci/badge/github/fllesser/nonebot-plugin-resolver2/master.svg" alt="pre-commit" />
</a>
<a href="https://codecov.io/gh/fllesser/nonebot-plugin-resolver2" > 
    <img src="https://codecov.io/gh/fllesser/nonebot-plugin-resolver2/graph/badge.svg?token=VCS8IHSO7U"/> 
</a>

</div>

> [!IMPORTANT]
> **æ”¶è—é¡¹ç›®**ï¼Œä½ å°†ä» GitHub ä¸Šæ— å»¶è¿Ÿåœ°æ¥æ”¶æ‰€æœ‰å‘å¸ƒé€šçŸ¥ï½â­ï¸

<img width="100%" src="https://starify.komoridevs.icu/api/starify?owner=fllesser&repo=nonebot-plugin-resolver2" alt="starify" />

## ğŸ“– ä»‹ç»

[nonebot-plugin-resolver](https://github.com/zhiyu1998/nonebot-plugin-resolver) é‡åˆ¶ç‰ˆ

| å¹³å°    | è§¦å‘çš„æ¶ˆæ¯å½¢æ€                        | è§†é¢‘ | å›¾é›† | éŸ³é¢‘ |
| ------- | ------------------------------------- | ---- | ---- | ---- |
| Bç«™     | BVå·/é“¾æ¥(åŒ…å«çŸ­é“¾,BV,av)/å¡ç‰‡/å°ç¨‹åº | âœ…â€‹   | âœ…â€‹   | âœ…â€‹   |
| æŠ–éŸ³    | é“¾æ¥(åˆ†äº«é“¾æ¥ï¼Œå…¼å®¹ç”µè„‘ç«¯é“¾æ¥)        | âœ…â€‹   | âœ…â€‹   | âŒï¸    |
| å¾®åš    | é“¾æ¥(åšæ–‡ï¼Œè§†é¢‘ï¼Œshow)                | âœ…â€‹   | âœ…â€‹   | âŒï¸    |
| å°çº¢ä¹¦  | é“¾æ¥(å«çŸ­é“¾)/å¡ç‰‡                     | âœ…â€‹   | âœ…â€‹   | âŒï¸    |
| å¿«æ‰‹    | é“¾æ¥(åŒ…å«æ ‡å‡†é“¾æ¥å’ŒçŸ­é“¾)              | âœ…â€‹   | âœ…â€‹   | âŒï¸    |
| acfun   | é“¾æ¥                                  | âœ…â€‹   | âŒï¸    | âŒï¸    |
| youtube | é“¾æ¥(å«çŸ­é“¾)                          | âœ…â€‹   | âŒï¸    | âœ…â€‹   |
| tiktok  | é“¾æ¥                                  | âœ…â€‹   | âŒï¸    | âŒï¸    |
| twitter | é“¾æ¥                                  | âœ…â€‹   | âœ…â€‹   | âŒï¸    |

æ”¯æŒçš„é“¾æ¥ï¼Œå¯å‚è€ƒ [æµ‹è¯•é“¾æ¥](https://github.com/fllesser/nonebot-plugin-resolver2/blob/master/test_url.md)

## ğŸ’¿ å®‰è£…
> [!Warning]
> **å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ nonebot-plugin-resolverï¼Œè¯·åœ¨å®‰è£…æ­¤æ’ä»¶å‰å¸è½½**
    
<details open>
<summary>ä½¿ç”¨ nb-cli å®‰è£…/æ›´æ–°</summary>
åœ¨ nonebot2 é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤è¡Œ, è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤å³å¯å®‰è£…

    nb plugin install nonebot-plugin-resolver2 --upgrade
ä½¿ç”¨ pypi æºæ›´æ–°

    nb plugin install nonebot-plugin-resolver2 --upgrade -i https://pypi.org/simple
å®‰è£…ä»“åº“ dev åˆ†æ”¯

    uv pip install git+https://github.com/fllesser/nonebot-plugin-resolver2.git@dev
</details>

<details>
<summary>ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…</summary>
åœ¨ nonebot2 é¡¹ç›®çš„æ’ä»¶ç›®å½•ä¸‹, æ‰“å¼€å‘½ä»¤è¡Œ, æ ¹æ®ä½ ä½¿ç”¨çš„åŒ…ç®¡ç†å™¨, è¾“å…¥ç›¸åº”çš„å®‰è£…å‘½ä»¤
<details open>
<summary>uv</summary>
ä½¿ç”¨ uv å®‰è£…

    uv add nonebot-plugin-resolver2
å®‰è£…ä»“åº“ dev åˆ†æ”¯

    uv add git+https://github.com/fllesser/nonebot-plugin-resolver2.git@master
</details>


<details>
<summary>pip</summary>

    pip install --upgrade nonebot-plugin-resolver2
</details>
<details>
<summary>pdm</summary>

    pdm add nonebot-plugin-resolver2
</details>
<details>
<summary>poetry</summary>

    poetry add nonebot-plugin-resolver2
</details>

æ‰“å¼€ nonebot2 é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `pyproject.toml` æ–‡ä»¶, åœ¨ `[tool.nonebot]` éƒ¨åˆ†è¿½åŠ å†™å…¥

    plugins = ["nonebot_plugin_resolver2"]

</details>

<details open>
<summary>å®‰è£…å¿…è¦ç»„ä»¶</summary>
å¤§éƒ¨åˆ†è§£æéƒ½ä¾èµ–äº ffmpeg

ubuntu/debian

    sudo apt-get install ffmpeg

å…¶ä»– linux å‚è€ƒ(åŸé¡¹ç›®æ¨è): https://gitee.com/baihu433/ffmpeg

Windows å‚è€ƒ(åŸé¡¹ç›®æ¨è): https://www.jianshu.com/p/5015a477de3c
</details>

## âš™ï¸ é…ç½®

åœ¨ nonebot2 é¡¹ç›®çš„`.env`æ–‡ä»¶ä¸­æ·»åŠ ä¸‹è¡¨ä¸­çš„å¿…å¡«é…ç½®

|          é…ç½®é¡¹          | å¿…å¡«  |          é»˜è®¤å€¼          |                                                                                                                                        è¯´æ˜                                                                                                                                        |
| :----------------------: | :---: | :----------------------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|         NICKNAME         |  å¦   |           [""]           |                                                                                                                    nonebot2 å†…ç½®é…ç½®ï¼Œå¯ä½œä¸ºè§£æç»“æœæ¶ˆæ¯çš„å‰ç¼€                                                                                                                     |
|       API_TIMEOUT        |  å¦   |           30.0           |                                                                                                            nonebot2 å†…ç½®é…ç½®ï¼Œè‹¥æœåŠ¡å™¨ä¸Šä¼ å¸¦å®½å¤ªä½ï¼Œå»ºè®®è°ƒé«˜ï¼Œé˜²æ­¢è¶…æ—¶                                                                                                             |
|         r_xhs_ck         |  å¦   |            ""            |                                                                                                                                   å°çº¢ä¹¦ cookie                                                                                                                                    |
|        r_bili_ck         |  å¦   |            ""            | B ç«™ cookie, å¿…é¡»å«æœ‰ SESSDATA é¡¹ï¼Œå¯é™„åŠ  B ç«™ AI æ€»ç»“åŠŸèƒ½, å¦‚æœéœ€è¦é•¿æœŸä½¿ç”¨æ­¤å‡­æ®åˆ™ä¸åº”è¯¥åœ¨**æµè§ˆå™¨ç™»å½•è´¦æˆ·**å¯¼è‡´ cookie è¢«åˆ·æ–°ï¼Œå»ºè®®æ³¨å†Œä¸ªå°å·è·å–, ä¹Ÿå¯ä»¥é…ç½® ac_time_value é¡¹ï¼Œç”¨äºå‡­æ®çš„è‡ªåŠ¨åˆ·æ–°ï¼Œ[è·å–æ–¹å¼](https://github.com/fllesser/nonebot-plugin-resolver2/issues/177) |
|    r_bili_video_codes    |  å¦   | '["avc", "av01", "hev"]' |                                                    å…è®¸çš„ B ç«™è§†é¢‘ç¼–ç ï¼Œè¶Šé å‰çš„ç¼–ç ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¯é€‰ "avc"(H.264ï¼Œä½“ç§¯è¾ƒå¤§), "hev"(HEVC), "av01"(AV1), åä¸¤é¡¹åœ¨ä¸åŒè®¾å¤‡å¯èƒ½æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚éœ€å®Œå…¨é¿å…ï¼Œå¯åªå¡«ä¸€é¡¹ï¼Œå¦‚ '["avc"]'                                                    |
|         r_ytb_ck         |  å¦   |            ""            |                                                                                                                Youtube cookie, Youtube è§†é¢‘å› äººæœºæ£€æµ‹ä¸‹è½½å¤±è´¥ï¼Œéœ€å¡«                                                                                                                |
|         r_proxy          |  å¦   |           None           |                                                                                   ä»…ä½œç”¨äº youtube, tiktok è§£æï¼Œæ¨ç‰¹è§£æä¼šè‡ªåŠ¨è¯»å–ç¯å¢ƒå˜é‡ä¸­çš„ http_proxy / https_proxy(ä»£ç†è½¯ä»¶é€šå¸¸ä¼šè‡ªåŠ¨è®¾ç½®)                                                                                   |
|      r_need_upload       |  å¦   |          False           |                                                                                                                            éŸ³é¢‘è§£æï¼Œæ˜¯å¦éœ€è¦ä¸Šä¼ ç¾¤æ–‡ä»¶                                                                                                                            |
|      r_need_forward      |  å¦   |           True           |                                                                                          **ä¸è¶…è¿‡** 4 æ¡çš„è§£ææ¶ˆæ¯æ˜¯å¦éœ€è¦åˆå¹¶è½¬å‘ï¼Œé…ç½®ä¸º False ï¼Œè¶…è¿‡4æ¡çš„è§£ææ¶ˆæ¯ä»ç„¶ä¼šç”¨åˆå¹¶è½¬å‘åŒ…è£¹                                                                                           |
|       r_use_base64       |  å¦   |          False           |                           è§†é¢‘ï¼Œå›¾ç‰‡ï¼ŒéŸ³é¢‘æ˜¯å¦ä½¿ç”¨ base64 å‘é€ï¼Œæ³¨æ„ï¼šç¼–è§£ç å’Œä¼ è¾“ base64 ä¼šå ç”¨æ›´å¤šçš„å†…å­˜,æ€§èƒ½å’Œå¸¦å®½, ç”šè‡³å¯èƒ½ä¼šä½¿ websocket è¿æ¥å´©æºƒï¼Œå› æ­¤è¯¥é…ç½®é¡¹ä»…æ¨è nonebot å’Œ åè®®ç«¯ä¸åœ¨åŒä¸€æœºå™¨ï¼Œæˆ–è€…ä½¿ç”¨ docker æ‡’å¾—æ˜ å°„æ’ä»¶ç¼“å­˜ç›®å½•çš„ç”¨æˆ·é…ç½®                           |
| r_video_duration_maximum |  å¦   |           480            |                                                                                                                          Bç«™è§†é¢‘æœ€å¤§è§£ææ—¶é•¿ï¼Œå•ä½ï¼š_ç§’_                                                                                                                           |
|        r_max_size        |  å¦   |           100            |                                                                                                               éŸ³è§†é¢‘ä¸‹è½½æœ€å¤§æ–‡ä»¶å¤§å°ï¼Œå•ä½ MBï¼Œè¶…è¿‡è¯¥é…ç½®å°†é˜»æ–­ä¸‹è½½                                                                                                                |
|   r_disable_resolvers    |  å¦   |            []            |                                     å…¨å±€ç¦æ­¢çš„è§£æï¼Œç¤ºä¾‹ r_disable_resolvers=["bilibili", "douyin"] è¡¨ç¤ºç¦æ­¢äº†å“”å“©å“”å“©å’ŒæŠ–, è¯·æ ¹æ®è‡ªå·±éœ€æ±‚å¡«å†™["bilibili", "douyin", "kuaishou", "twitter", "ytb", "acfun", "tiktok", "weibo", "xiaohongshu"]                                      |


## ğŸ‰ ä½¿ç”¨
### æŒ‡ä»¤è¡¨
|     æŒ‡ä»¤     |         æƒé™          | éœ€è¦@ | èŒƒå›´  |          è¯´æ˜          |
| :----------: | :-------------------: | :---: | :---: | :--------------------: |
|   å¼€å¯è§£æ   | SUPERUSER/OWNER/ADMIN |  æ˜¯   | ç¾¤èŠ  |        å¼€å¯è§£æ        |
|   å…³é—­è§£æ   | SUPERUSER/OWNER/ADMIN |  æ˜¯   | ç¾¤èŠ  |        å…³é—­è§£æ        |
| å¼€å¯æ‰€æœ‰è§£æ |       SUPERUSER       |  å¦   | ç§èŠ  |    å¼€å¯æ‰€æœ‰ç¾¤çš„è§£æ    |
| å…³é—­æ‰€æœ‰è§£æ |       SUPERUSER       |  å¦   | ç§èŠ  |    å…³é—­æ‰€æœ‰ç¾¤çš„è§£æ    |
| æŸ¥çœ‹å…³é—­è§£æ |       SUPERUSER       |  å¦   |   -   | è·å–å·²ç»å…³é—­è§£æçš„ç¾¤èŠ |
|   bm BV...   |         USER          |  å¦   |   -   |     ä¸‹è½½ bç«™ éŸ³ä¹      |

## è‡´è°¢
[nonebot-plugin-resolver](https://github.com/zhiyu1998/nonebot-plugin-resolver)
[parse-video-py](https://github.com/wujunwei928/parse-video-py)