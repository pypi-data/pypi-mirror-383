structure_rules:
  base_structure:
    - description: "Core project files required for any repository including documentation, configuration, and tooling files"
    - require: "environment.yml"
    - require: "LICENSE"
    - require: 'README\.md'
    - require: 'PUBLISHING\.md'
    - require: 'conflicting_test_config\.yaml'
    - require: '\.pre-commit-config\.yaml'
    - require: '\.pre-commit-hooks\.yaml'
    - require: '\.markdownlint\.yaml'
    - require: 'pyproject\.toml'
    - require: 'repo_structure\.iml'
    - require: 'renovate\.json'
    - require: '\.python-version'
    - require: '\.pylintrc'
  python_package:
    - description: "Standard Python package structure with modules, tests, and configuration files"
    - require: '__main__\.py'
    - require: '__init__\.py'
    # Specify files that don't need a companion first
    - allow: '_version\.py'
    # TODO: Add test for the schema
    - allow: 'repo_structure_schema\.py'
    - allow: 'repo_structure_test_lib\.py'
    - allow: '.*_test\.py'
    # Specify the companion
    - allow: '(?P<base>.*)\.py'
      companion:
        - require: '{{base}}_test\.py'
    - require: 'config\.schema\.json'
    - require: 'test_config_.*\.yaml'

directory_map:
  /:
    - description: "Root directory containing project documentation, configuration files, and main project structure"
    - use_rule: base_structure
  /repo_structure/:
    - description: "Main Python package directory containing the core application logic and modules"
    - use_rule: python_package
  /.github/:
    - description: "GitHub-specific configuration and workflow files - ignored from structure validation"
    - use_rule: ignore
