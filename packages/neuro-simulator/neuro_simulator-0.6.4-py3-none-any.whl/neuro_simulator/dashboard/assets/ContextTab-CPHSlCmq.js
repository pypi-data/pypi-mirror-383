import{d as _,k as g,A as v,a as f,x,b as h,n as o,o as s,g as r,e as y,t as l,h as p,F as w,p as C,f as k,_ as A}from"./index-Cdm-sgrQ.js";const V={class:"d-flex align-center mb-4"},b={key:0,class:"context-prompt-view"},P={key:1,class:"context-conversation-view"},S=_({__name:"ContextTab",setup(B){const t=g(!1),n=v(),c=f();async function i(){if(c.isConnected)if(t.value)try{const e=await c.sendAdminWsMessage("get_last_prompt");n.setAgentPrompt(e.prompt)}catch(e){console.error("获取最新Prompt失败:",e),n.setAgentPrompt(`获取提示词失败: ${e}`)}else try{await c.sendAdminWsMessage("get_agent_context")}catch(e){console.error("获取上下文失败:",e)}}return x(t,i),i(),(e,d)=>{const m=h("v-switch");return s(),o("div",null,[r("div",V,[y(m,{modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=a=>t.value=a),label:"上下文模式",color:"primary","hide-details":""},null,8,["modelValue"])]),t.value?(s(),o("div",b,[r("pre",null,l(p(n).agentPrompt),1)])):(s(),o("div",P,[(s(!0),o(w,null,C(p(n).agentHistory,(a,u)=>(s(),o("div",{key:u,class:"message-item"},[r("p",null,[r("strong",null,l(a.role)+":",1),k(" "+l(a.content),1)])]))),128))]))])}}}),N=A(S,[["__scopeId","data-v-a9a1985c"]]);export{N as default};
